"use strict";(self.webpackChunksource=self.webpackChunksource||[]).push([[921],{382:(t,e,i)=>{var s=i(24);const n=s.A.instance;i.p=`${n.urls.assetsBasePath}/public/`;var o=i(705),a=i(211);var r=i(987),l=i(540),c=i(674),h=i(606),d=i(284);const u={breakpointQueries:[],breakpoint:"",colorSchemeQuery:window.matchMedia("(prefers-color-scheme: dark)"),colorScheme:"",init(){(s.A.instance.breakpoints?Object.keys(s.A.instance.breakpoints):[]).forEach((t=>{const{min:e,max:i}=s.A.instance.breakpoints[t];let n;e&&i?n=`(min-width: ${e}px) and (max-width: ${i}px)`:e?n=`(min-width: ${e}px)`:i&&(n=`(max-width: ${i}px)`),n&&this.breakpointQueries.push({breakpoint:t,query:window.matchMedia(n)})})),this.onBreakpointChanged(),this.onColorSchemeChanged(),"function"==typeof this.colorSchemeQuery.addEventListener?(this.colorSchemeQuery.addEventListener("change",(()=>this.onColorSchemeChanged())),this.breakpointQueries.forEach((t=>{t.query.addEventListener("change",(()=>this.onBreakpointChanged()))}))):"function"==typeof this.colorSchemeQuery.addListener&&(this.colorSchemeQuery.addListener((()=>this.onColorSchemeChanged())),this.breakpointQueries.forEach((t=>{t.query.addListener((()=>this.onBreakpointChanged()))})))},onColorSchemeChanged(){this.colorScheme=this.colorSchemeQuery.matches?l.xP:l.zF,h.A.publish(a.Bc,{colorScheme:this.colorScheme})},onBreakpointChanged(){if(0===this.breakpointQueries.length)return;const t=this.breakpointQueries.filter((t=>t.query.matches)).pop().breakpoint;this.breakpoint!==t&&(this.breakpoint=t,h.A.publish(a.Dz,{breakpoint:this.breakpoint}))}},p={get instance(){return o.A.store("MediaQuery")}};var g=i(434),m=i(358);const y=Symbol("INSTANCE"),f=Symbol("SINGELTONENFORCER");class b{constructor(t){if(t!==f)throw new Error("Instantiation failed: Use ConsentManagementPlatformAPI.instance instead of new.")}static get instance(){return this[y]||(this[y]=new b(f)),this[y]}get __tcfapi(){if(window.self!==window.top)try{if(window.top.__tcfapiLocator)return window.top.__tcfapi}catch(t){}return window.__tcfapi}addEventListener(t){"function"==typeof t&&("function"==typeof this.__tcfapi?this.__tcfapi("addEventListener",2,((e,i)=>t(e,i))):console.error("ConsentManagementPlatformAPI addEventListener - __tcfapi is not available!"))}getTCData(){return"function"!=typeof this.__tcfapi?Promise.reject(new Error("ConsentManagementPlatformAPI getTCData - __tcfapi is not available!")):new Promise(((t,e)=>{this.__tcfapi("addEventListener",2,((i,s)=>{const n=i&&i.listenerId?i.listenerId:null;n&&this.__tcfapi("removeEventListener",2,(()=>{}),n),s?t(i):e(new Error("ConsentManagementPlatformAPI getTCData - unknown error"))}))}))}getCustomVendorConsents(){return"function"!=typeof this.__tcfapi?Promise.reject(new Error("ConsentManagementPlatformAPI getCustomVendorConsents - __tcfapi is not available!")):new Promise(((t,e)=>{this.__tcfapi("getCustomVendorConsents",2,((i,s)=>{s?t(i):e(new Error("ConsentManagementPlatformAPI getCustomVendorConsents - unknown error"))}))}))}getVendorPurposeMapping(){return"function"!=typeof this.__tcfapi?Promise.reject(new Error("ConsentManagementPlatformAPI getVendorPurposeMapping - __tcfapi is not available!")):new Promise(((t,e)=>{this.__tcfapi("getVendorPurposeMapping",2,((i,s)=>{s&&i&&Array.isArray(i)&&i.length>0?t(i):e(new Error("ConsentManagementPlatformAPI getVendorPurposeMapping - no mapping received"))}))}))}postCustomConsent({vendorIds:t,purposeIds:e,legitimateInterestPurposeIds:i}){return"function"!=typeof this.__tcfapi?Promise.reject(new Error("ConsentManagementPlatformAPI postCustomConsent - __tcfapi is not available!")):t&&Array.isArray(t)&&t.length>0||e&&Array.isArray(e)&&e.length>0||i&&Array.isArray(i)&&i.length>0?new Promise(((s,n)=>{this.__tcfapi("postCustomConsent",2,((t,e)=>{e?s(t):n(new Error("ConsentManagementPlatformAPI postCustomConsent - unknown error"))}),t,e,i)})):Promise.reject(new Error("ConsentManagementPlatformAPI postCustomConsent - missing function params vendorIds, purposeIds and/or legitimateInterestPurposeIds"))}postRejectAll(){return"function"!=typeof this.__tcfapi?Promise.reject(new Error("ConsentManagementPlatformAPI postRejectAll - __tcfapi is not available!")):new Promise(((t,e)=>{this.__tcfapi("postRejectAll",2,((i,s)=>{s?t(i):e(new Error("ConsentManagementPlatformAPI postRejectAll - unknown error"))}))}))}}var A=i(743);const w=Symbol("INSTANCE"),I=Symbol("SINGELTONENFORCER");class v{constructor(t){if(t!==I)throw new Error("Instantiation failed: Use TCDataModel.instance instead of new.");this.consentManagementPlatformAPI=b.instance,this._ready=!1,this._errorOccurred=!1,this._tcData=void 0,this._consentedPurposeIds=[],this._customVendorConsents=void 0,this.isPurposeOneGranted=!1,this.init()}static get instance(){return this[w]||(this[w]=new v(I)),this[w]}init(){s.A.instance.disableSourcepoint||(h.A.subscribe(a.Pd,(()=>this.onSourcepointReloadMessagesExecuted()),this),this.consentManagementPlatformAPI.addEventListener(((t,e)=>{this.tcfapiTCDataCallback(t,e)})))}tcfapiTCDataCallback(t,e){e?t&&this.onTCDataReceived(t):this.onError()}updateTCData(){this.consentManagementPlatformAPI.getTCData().then((t=>{this.onTCDataReceived(t)})).catch((()=>{this.onError()}))}onTCDataReceived(t){if(t&&t.cmpStatus&&"error"===t.cmpStatus)return void this.onError();this._tcData=t;const e=this.isPurposeOneGranted;this.isPurposeOneGranted=this.isPurposeGranted(l.cg.store_and_access_information_on_a_device),c.A.isApp&&this._ready&&e&&!this.isPurposeOneGranted?window.location.reload():t&&t.eventStatus&&("tcloaded"===t.eventStatus||"useractioncomplete"===t.eventStatus)&&(this._ready||this.onReady(),this.updateCustomVendorConsents(),h.A.publish(a.Ud,this._tcData))}updateCustomVendorConsents(){this.consentManagementPlatformAPI.getCustomVendorConsents().then((t=>{this.onCustomVendorConsentsReceived(t)})).catch()}onCustomVendorConsentsReceived(t){this._customVendorConsents=t,this._consentedPurposeIds=[],this._customVendorConsents&&Array.isArray(this._customVendorConsents.consentedPurposes)&&this._customVendorConsents.consentedPurposes.forEach((t=>{t&&t._id&&this._consentedPurposeIds.push(t._id)})),h.A.publish(a.Nk,this._customVendorConsents)}onReady(){this._ready=!0,h.A.publish(a.YF,this._tcData),window.self===window.top||window.__tcfapiLocator||"useractioncomplete"!==this._tcData.eventStatus||h.A.publish(a.X2)}onSourcepointReloadMessagesExecuted(){this.updateTCData()}onError(){console.error("TCDataModel onError"),this._errorOccurred=!0,h.A.publish(a.pU)}isPurposeGranted(t){return!(!this._tcData||!(void 0!==this.tcData.gdprApplies&&!this.tcData.gdprApplies||this._tcData.purpose&&this._tcData.purpose.consents&&"boolean"==typeof this._tcData.purpose.consents[t]&&this._tcData.purpose.consents[t]))}isPurposeGrantedById(t){return!!this.tcData&&(void 0!==this.tcData.gdprApplies&&!this.tcData.gdprApplies||Array.isArray(this._consentedPurposeIds)&&this._consentedPurposeIds.includes(t))}grantPurposeById(t){return!t||this.isPurposeGrantedById(t)?Promise.resolve():new Promise(((e,i)=>{if(!g.A.instance.hasNoAdsAccess){const t=s.A.instance,e=t.thirdparty&&t.thirdparty.sourcepoint&&t.thirdparty.sourcepoint.default?t.thirdparty.sourcepoint.default:void 0,{siteId:n}=e;let o;try{o=JSON.parse(A.A.getItem(`_sp_user_consent_${n}`))}catch(t){}let a=!1;if(a=o&&o.gdpr&&o.gdpr.consentStatus&&o.gdpr.consentStatus.hasConsentData&&o.gdpr.consentStatus.consentedToAny,a=a||o&&o.consentStatus&&o.consentStatus.hasConsentData&&o.consentStatus.consentedToAny,!a)return void i(new Error("TCDataModel grantPurposeById only allowed to be executed with valid consent status"))}this.consentManagementPlatformAPI.getVendorPurposeMapping().then((e=>{const i=[],s=[],n=[];return e.forEach((e=>{if(!e.vendorId||i.includes(e.vendorId))return;let o=!1;Array.isArray(e.categories)&&e.categories.forEach((e=>{e._id&&e._id===t&&"NOT_ALLOWED"!==e.type&&"DISCLOSURE_ONLY"!==e.type&&(o=!0,"LEGITIMATE_INTEREST"!==e.type||n.includes(e._id)||n.push(e._id),s.includes(e._id)||s.push(e._id))})),o&&i.push(e.vendorId)})),{vendorIds:i,purposeIds:s,legitimateInterestPurposeIds:n}})).then((({vendorIds:t,purposeIds:e,legitimateInterestPurposeIds:i})=>this.consentManagementPlatformAPI.postCustomConsent({vendorIds:t,purposeIds:e,legitimateInterestPurposeIds:i}))).then((()=>{this.updateTCData(),e()})).catch((e=>{console.error(`TCDataModel grantPurposeById - failed for purposeId: ${t}`,e),i(e)}))}))}isVendorGranted(t){return!(!this._tcData||!(void 0!==this.tcData.gdprApplies&&!this.tcData.gdprApplies||this._tcData.vendor&&this._tcData.vendor.consents&&"boolean"==typeof this._tcData.vendor.consents[t]&&this._tcData.vendor.consents[t]))}get ready(){return this._ready}get errorOccurred(){return this._errorOccurred}get tcData(){return this._tcData}get customVendorConsents(){return this._customVendorConsents}}function S(t=[]){if(0===t.length)return!0;for(let e=0;e<t.length;e++){const i=t[e];if(!v.instance.isPurposeGrantedById(i))return!1}return!!v.instance.customVendorConsents}function E(t=[],e=[],i=[]){return v.instance.ready&&function(t=[]){for(let e=0;e<t.length;e++){const i=t[e];if(!v.instance.isPurposeGranted(i))return!1}return!0}(t)&&S(e)&&function(t=[]){for(let e=0;e<t.length;e++){const i=t[e];if(!v.instance.isVendorGranted(i))return!1}return!0}(i)}function P(t=[],e=[],i=[]){const n=!(!s.A.instance.consent||"boolean"!=typeof s.A.instance.consent.globallyDisabled)&&s.A.instance.consent.globallyDisabled;return s.A.instance.preview||E(t,e,i)||n&&0===t.length&&0===e.length&&0===i.length?Promise.resolve():new Promise((s=>{h.A.subscribe(a.YF,(()=>{E(t,e,i)&&s()})),e.length>0&&h.A.subscribe(a.Nk,(()=>{E(t,e,i)&&s()}))}))}function k(){const t=!(!s.A.instance.consent||"boolean"!=typeof s.A.instance.consent.globallyDisabled)&&s.A.instance.consent.globallyDisabled;return s.A.instance.preview||t||v.instance.customVendorConsents?Promise.resolve():new Promise((t=>{h.A.subscribe(a.Nk,(()=>{t()}))}))}const C=Symbol("INSTANCE"),_=Symbol("SINGELTONENFORCER");class L{constructor(t){if(t!==_)throw new Error("Instantiation failed: Use IQDBridge.instance instead of new.");this.isInitialized=!1,this.hasError=!1,this.renderedPositions=[],this.pendingPostMessages=[],this.init()}static get instance(){return this[C]||(this[C]=new L(_)),this[C]}init(){const t=s.A.instance;if(this.iqdSettings=t.iqd,this.platform=this.getPlatform(),h.A.subscribe(a.gY,((t,e)=>this.onTargetAdPositionLoaded(t,e))),h.A.subscribe(a.ps,(t=>this.initAdPosition(t))),t.noAds&&!t.preview&&window.AdPositions&&Array.isArray(window.AdPositions)&&window.AdPositions.forEach((t=>{t.sitetype&&t.sitetype!==this.platform||h.A.publish(a.zG,{positionName:t.id,platform:this.platform})})),t.preview&&t.preview.showAds&&(h.A.subscribe(a.Dz,(()=>this.onMediaQueryBreakpointChanged())),this.refreshAdContainersFilledState(!0)),void 0!==window.AdController){if("function"==typeof window.AdController.getRenderController&&"ready"===window.AdController.getRenderController()._state)return void this.onAdControllerReady();if("function"==typeof window.AdController.ready)return void window.AdController.ready((()=>this.onAdControllerReady()));console.error("IQDBridge AdController ready handling error.")}}getPlatform(){const{preview:t}=s.A.instance,{breakpoint:e}=p.instance;return m.A.isMobile||t&&"sm"===e?"mobile":"desktop"}createCmsObject(){if(!this.iqdSettings||!this.iqdSettings.handle)return;const t="string"!=typeof this.iqdSettings.level2||this.iqdSettings.level2.startsWith("###")&&this.iqdSettings.level2.endsWith("###")?"":this.iqdSettings.level2,e="string"!=typeof this.iqdSettings.level3||this.iqdSettings.level3.startsWith("###")&&this.iqdSettings.level3.endsWith("###")?"":this.iqdSettings.level3,i="string"!=typeof this.iqdSettings.level4||this.iqdSettings.level4.startsWith("###")&&this.iqdSettings.level4.endsWith("###")?"":this.iqdSettings.level4,n=Array.isArray(this.iqdSettings.keywords)?this.iqdSettings.keywords:[];i&&n.unshift(i),e&&n.unshift(e),t&&n.unshift(t);const o=s.A.instance;o.noAds?n.push("iqdnoads"):o.noContentAds&&n.push("iqd_no_content_ads"),o.consent?.utiqDisabled&&n.push("utiq_off");const a=decodeURIComponent(r.A.get(l.AZ.saraTargetAdbrain.name));a&&0===a.indexOf("adb=true:")&&a.split("adb=true:")[1]&&n.push(a.split("adb=true:")[1]),d.A.getItem("polygon_iqkeywords")&&d.A.getItem("polygon_iqkeywords").split(",").forEach((t=>{n.push(this.sanitizeCmsObjectValue(t))})),g.A.instance.hasPaidAccess&&n.push("iqdpaid");const h=n.filter(((t,e)=>n.indexOf(t)===e));this.cmsObject={$handle:this.iqdSettings.handle,level2:t,level3:e,level4:i,isWrapperApp:c.A.isApp,keywords:h.join(","),tma:"string"==typeof this.iqdSettings.tma?this.iqdSettings.tma:"",platform:this.platform},g.A.instance.id5Hash&&(this.cmsObject.userData={hashedEmail:g.A.instance.id5Hash}),window.cmsObject=this.cmsObject}onAdControllerReady(){if("function"==typeof window.AdController.setPageInfo&&"function"==typeof window.AdController.initialize){if(this.boundOnWindowMessage=t=>this.onWindowMessage(t),window.addEventListener("message",this.boundOnWindowMessage),"boolean"==typeof this.iqdSettings.initialize&&!this.iqdSettings.initialize)return;this.createCmsObject(),window.AdController.setPageInfo(this.cmsObject);try{window.AdController.stage()}catch(t){}P().then((()=>{const t=window.AdController.initialize();if(window.AdController.finalize(),t)for(this.isInitialized=!0,h.A.publish(a.Ap);this.pendingPostMessages.length>0;)this.sendPostMessage(this.pendingPostMessages.pop());else this.hasError=!0,h.A.publish(a.KO)}))}}onWindowMessage(t){let e=t.data;if(t.source===window){try{e=JSON.parse(e)}catch(t){return}if(e.render_event)switch(e.render_event){case"IQTileLoaded":{const t=Array.isArray(e.position_size)&&2===e.position_size.length?e.position_size:[void 0,void 0];this.onIQTileLoaded(e.position,t,!!e.position_filled);break}}}}onIQTileLoaded(t,e,i=!0){if(!t)return;const s={positionName:t,platform:this.platform,containsAd:i,size:e};if(window.AdPositions&&Array.isArray(window.AdPositions)){const e=window.AdPositions.find((e=>e.id&&e.id===t&&e.sitetype&&e.sitetype===this.platform));e&&void 0!==e.cls&&(s.cls=e.cls)}this.refreshAdContainerStyle(t,i,e),this.refreshAdContainerFilledState(t,i),h.A.publish(a.zG,s),i&&h.A.publish(a.cG,t,this.platform)}onTargetAdPositionLoaded(t,e=!0){if(t)if(this.refreshAdContainerFilledState(t,e),e){const e=document.querySelector(`[data-advertisement][data-placement="${t}"][data-device="${this.platform}"]`);e&&(e.className="",e.parentElement.getAttribute("data-advertisement")&&e.parentElement.getAttribute("data-advertisement").indexOf(t)>=0&&(e.parentElement.className=""),e.style.display=""),h.A.publish(a.cG,t,this.platform)}else this.closeAdContainer(t)}closeAdContainer(t){document.querySelectorAll(`[data-advertisement~="${t}:${this.platform}"]:not([data-advertisement~="closed"])`).forEach((t=>{const e=t.dataset.advertisement.split(" ");e.includes("closed")||e.push("closed"),t.dataset.advertisement=e.join(" ")}))}onMediaQueryBreakpointChanged(){const t=this.getPlatform();this.platform!==t&&(this.refreshAdContainersFilledState(!1),this.platform=t,this.refreshAdContainersFilledState(!0))}refreshAdContainerStyle(t,e,i){const s=document.querySelector(`[data-advertisement~="${t}:${this.platform}"][class*="float"]:not([data-placement])`);if(!s)return;if(!e)return void s.setAttribute("style","");let n;if(Array.isArray(i)&&i[0])n=i[0],300===n&&i[1]&&200===i[1]&&(n=640);else if(s.querySelector('[id$="_placeholder_iq"]')){n=s.querySelector('[id$="_placeholder_iq"]').getBoundingClientRect().width}n&&n>300?(s.setAttribute("style",""),s.style.setProperty("float","none","important"),s.style.setProperty("clear","both","important"),s.style.setProperty("padding-left","0","important"),s.style.setProperty("padding-right","0","important"),s.style.setProperty("margin-left","0","important"),s.style.setProperty("margin-right","0","important")):s.setAttribute("style","")}refreshAdContainersFilledState(t){window.AdPositions&&Array.isArray(window.AdPositions)&&window.AdPositions.forEach((e=>{e.sitetype&&e.sitetype!==this.platform||this.refreshAdContainerFilledState(e.id,t)}))}refreshAdContainerFilledState(t,e){let i="";i=e?`[data-advertisement~="${t}:${this.platform}"]:not([data-advertisement~="disabled"]):not([data-advertisement~="filled"])`:`[data-advertisement~="${t}:${this.platform}"][data-advertisement~="filled"]:not([data-advertisement~="disabled"])`;document.querySelectorAll(i).forEach((t=>{if(!t.dataset.device||t.dataset.device===this.platform){let i=t.dataset.advertisement.split(" ");e?i.push("filled"):i=i.filter((t=>"filled"!==t)),t.dataset.advertisement=i.join(" ")}}))}reloadAds(t){if(!this.isInitialized)return;let e=Array.from(document.querySelectorAll(`[data-advertisement][data-placement][data-device="${this.platform}"]:not([data-advertisement~="disabled"])`));Array.isArray(t)&&(e=e.filter((e=>{const i=e.dataset.placement;return!!i&&t.includes(i)}))),e.forEach((t=>{this.clearAdPositionContainer(t)})),this.sendPostMessage("iq_refresh_ads")}reloadAd(t){if(!t||!this.isInitialized)return;const e=document.querySelector(`[data-advertisement][data-placement="${t}"][data-device="${this.platform}"]:not([data-advertisement~="disabled"])`);this.clearAdPositionContainer(e);const i={info:"iq_refresh_ads",position:t};this.sendPostMessage(JSON.stringify(i))}createDynamicAds(){this.sendPostMessage("iq_create_dynamic_positions")}removeDynamicAds(){this.sendPostMessage("iq_remove_dynamic_positions")}clearAdPositionContainer(t){t instanceof HTMLElement&&(t.children.forEach((t=>{t.id&&-1!==t.id.indexOf("iqadtile")||t.remove()})),t.offsetHeight>0&&(t.style.minHeight=`${t.offsetHeight}px`))}sendPostMessage(t){t&&"string"==typeof t&&(this.isInitialized?window.top.postMessage(t,window.origin):this.pendingPostMessages.includes(t)||this.pendingPostMessages.push(t))}sanitizeCmsObjectValue(t){return"string"!=typeof t||0===t.length?"":t=(t=(t=(t=(t=t.replace(/[ÄäÖöÜüß]/g,(t=>{switch(t.charCodeAt(0)){case 196:return"Ae";case 228:return"ae";case 214:return"Oe";case 246:return"oe";case 220:return"Ue";case 252:return"ue";case 223:return"ss";default:return t}}))).replace(/[^a-zA-Z0-9]/g,"_")).replace(/[_]/g,((e,i)=>0===i||i===t.length-1||95===t.charCodeAt(i-1)?"":e))).replace(/[_]/g,((e,i)=>0===i||i===t.length-1?"":e))).toLowerCase()}}const T=Symbol("INSTANCE"),O=Symbol("SINGELTONENFORCER");class x{constructor(t){if(t!==O)throw new Error("Instantiation failed: Use AdBridge.instance instead of new.");this.adBridge=null,this.init()}static get instance(){return this[T]||(this[T]=new x(O)),this[T]}init(){this.adBridge=L.instance}reloadAd(t){this.adBridge&&"function"==typeof this.adBridge.reloadAd&&this.adBridge.reloadAd(t)}reloadAds(t){this.adBridge&&"function"==typeof this.adBridge.reloadAds&&this.adBridge.reloadAds(t)}createDynamicAds(){this.adBridge&&"function"==typeof this.adBridge.createDynamicAds&&this.adBridge.createDynamicAds()}removeDynamicAds(){this.adBridge&&"function"==typeof this.adBridge.removeDynamicAds&&this.adBridge.removeDynamicAds()}get platform(){return this.adBridge&&"string"==typeof this.adBridge.platform?this.adBridge.platform:""}}const N=Symbol("INSTANCE"),B=Symbol("SINGELTONENFORCER");class U{constructor(t){if(t!==B)throw new Error("Instantiation failed: Use Depot.instance instead of new.");this.init()}static get instance(){return this[N]||(this[N]=new U(B)),this[N]}init(){const t=s.A.instance;t.thirdparty&&t.thirdparty.depot&&t.thirdparty.depot.apiUrl?this.apiUrl=t.thirdparty.depot.apiUrl:console.error("Depot requires apiUrl for correct instantiation.")}getBookmarks(){const t=`${this.apiUrl}/bookmarks`;return new Promise(((e,i)=>{this.fetchUrl(t,"GET").then((t=>{Array.isArray(t)?e(t):e([])})).catch((t=>i(t)))}))}deleteBookmarks(){const t=`${this.apiUrl}/bookmarks`;return new Promise(((e,i)=>{this.fetchUrl(t,"DELETE").then((()=>{e()})).catch((t=>i(t)))}))}addBookmark(t,e){if(!t||"string"!=typeof t)return Promise.reject(new Error("Depot addBookmark - missing valid documentId function param"));let i;return i=e&&"article"!==e?`${this.apiUrl}/bookmarks/${e}@${t}`:`${this.apiUrl}/bookmarks/${t}`,new Promise(((t,e)=>{this.fetchUrl(i,"PUT").then((()=>{t()})).catch((t=>e(t)))}))}deleteBookmark(t,e){if(!t||"string"!=typeof t)return Promise.reject(new Error("Depot deleteBookmark - missing valid documentId function param"));let i;i=e&&"article"!==e?`${this.apiUrl}/bookmarks/${e}@${t}`:`${this.apiUrl}/bookmarks/${t}`;return new Promise(((t,e)=>{this.fetchUrl(i,"DELETE").then((()=>{t()})).catch((t=>e(t)))}))}fetchUrl(t,e="GET"){return fetch(t,{method:e,cache:"no-cache",headers:{"Content-Type":"text/plain"}}).then((t=>200!==t.status?t.text().then((t=>{throw new Error(t)})).catch((e=>Promise.reject(new Error(`Depot fetchUrl - failed to get data from API, URL: ${t.url}, error: ${e.message}`)))):"GET"===e?t.json():Promise.resolve()))}}var R=i(148),M=i(573);const D=Symbol("INSTANCE"),V=Symbol("SINGELTONENFORCER");class F{constructor(t){if(t!==V)throw new Error("Instantiation failed: Use Bookmarks.instance instead of new.");this.depot=U.instance,this.localStorage=new M.A("bookmarks","local"),this._documentIds=[],this._documentIdsByCollection={},this._updatedAt=null,this._syncedAt=null,this._isInitialized=!1,this.init()}static get instance(){return this[D]||(this[D]=new F(V)),this[D]}init(){const t=g.A.instance;if(!t.isLoggedIn||s.A.instance.disableBookmarks)return;const e=R.A.instance;t.isLoggedIn&&t.isNewLoggedIn&&this.reset();let i=t.isNewLoggedIn||"homepage"===e.route||"fuermich"===e.route||"bookmarks"===e.route;if(!t.isNewLoggedIn){this.loadDocumentIdsFromLocalStorage()&&!i&&(this.isInitialized=!0)}i=i||!this.isInitialized||!this.syncedAt,i&&this.loadDocumentIdsFromServer().then((()=>{this.isInitialized=!0})).catch((()=>{this.documentIds.length>0?this.isInitialized=!0:h.A.publish(a.Bb,{type:l.f0})})),window.addEventListener("pageshow",(()=>{this.reloadLocaLStorage(),Promise.resolve().then((()=>h.A.publish(a.OL)))}))}loadDocumentIdsFromLocalStorage(){return!!Array.isArray(this.localStorage.getItem("documentIds"))&&(this.documentIds=this.localStorage.getItem("documentIds"),this._updatedAt=this.localStorage.getItem("updatedAt")||null,this._syncedAt=this.localStorage.getItem("syncedAt")||null,!0)}reloadLocaLStorage(){this.localStorage.reload(),this.loadDocumentIdsFromLocalStorage()}loadDocumentIdsFromServer(){return new Promise(((t,e)=>{this.depot.getBookmarks().then((i=>{Array.isArray(i)?(this.documentIds=i.map((t=>t.includes("@")?t.split("@")[1]:t)),i.forEach((t=>{let e="article",i=t;if(t.includes("@")){const s=t.split("@");e=s[0],i=s[1]}this._documentIdsByCollection[e]||(this._documentIdsByCollection[e]=[]),this._documentIdsByCollection[e].push(i)})),this._syncedAt=Date.now(),this.save(),t()):e(new Error("Bookmarks loadDocumentIdsFromServer - received invalid documentIds data from Depot"))})).catch((t=>{console.error(t.message),e(t)}))}))}reset(){this.documentIds=[],this._updatedAt=null,this._syncedAt=null,this.save()}save(){let t=this.localStorage.setItem("documentIds",this._documentIds);return this._updatedAt=Date.now(),t=t&&this.localStorage.setItem("updatedAt",this._updatedAt),t=t&&this.localStorage.setItem("syncedAt",this._syncedAt),t}add(t,e){if(!t||"string"!=typeof t||!e||"string"!=typeof e||!Array.isArray(this._documentIds))return Promise.reject(new Error("Bookmarks add - missing valid documentId and/or collection function param or bookmarks are not yet initialized"));return this._documentIds.indexOf(t)>-1?Promise.resolve():new Promise(((i,s)=>{this.depot.addBookmark(t,e).then((()=>{this._documentIds.push(t),this._documentIdsByCollection[e]||(this._documentIdsByCollection[e]=[]),-1===this._documentIdsByCollection[e].indexOf(t)&&this._documentIdsByCollection[e].push(t);if(!this.save())throw new Error("Bookmarks add - error while updating data");return i()})).catch((t=>s(t)))}))}delete(t,e){if(!t||"string"!=typeof t||!e||"string"!=typeof e||!Array.isArray(this._documentIds))return Promise.reject(new Error("Bookmarks delete - missing valid documentId and/or collection function param or bookmarks are not yet initialized"));const i=this._documentIds.indexOf(t);return-1===i?Promise.resolve():new Promise(((s,n)=>{this.depot.deleteBookmark(t,e).then((()=>{if(this._documentIds.splice(i,1),this._documentIdsByCollection&&this._documentIdsByCollection[e]){const i=this._documentIdsByCollection[e].indexOf(t);-1!==i&&this._documentIdsByCollection[e].splice(i,1)}if(!this.save())throw new Error("Bookmarks delete - error while updating data");return s()})).catch((t=>n(t)))}))}deleteAll(){return 0===this._documentIds.length?Promise.resolve():new Promise(((t,e)=>{this.depot.deleteBookmarks().then((()=>{this._documentIds=[],this._documentIdsByCollection={};if(!this.save())throw new Error("Bookmarks deleteAll - error while updating data");return t()})).catch((t=>e(t)))}))}contains(t,e){return!!(t&&"string"==typeof t&&e&&"string"==typeof e&&Array.isArray(this._documentIds))&&-1!==this._documentIds.indexOf(t)}get documentIds(){return Array.isArray(this._documentIds)?this._documentIds:[]}set documentIds(t){if(!Array.isArray(t))return;let e=!this.isInitialized||!Array.isArray(this._documentIds)||this._documentIds.length!==t.length;e||t.forEach(((t,i)=>{this._documentIds.indexOf(t)!==i&&(e=!0)})),e&&(this._documentIds=t,Promise.resolve().then((()=>h.A.publish(a.OL))))}get documentIdsByCollection(){return this._documentIdsByCollection}get isInitialized(){return this._isInitialized}set isInitialized(t){this._isInitialized!==!!t&&(this._isInitialized=!!t,this._isInitialized&&h.A.publish(a.n8))}get updatedAt(){return this._updatedAt}get syncedAt(){return this._syncedAt}}var q=i(646);class ${get id(){return null}toObject(){const t={};return Object.getOwnPropertyNames(Object.getPrototypeOf(this)).forEach((e=>{"function"!=typeof this[e]&&(t[e]=this[e])})),t}}class z extends ${constructor(t,e,i){super(),this._documentId=t,this._collection=e,this._isBookmarked=!!i}get id(){return q.k3}get documentId(){return this._documentId}get isBookmarked(){return this._isBookmarked}}var j=i(21);const W=Symbol("INSTANCE"),G=Symbol("SINGELTONENFORCER");class H{constructor(t){if(t!==G)throw new Error("Instantiation failed: Use OverlayHandler.instance instead of new.");this.init()}static get instance(){return this[W]||(this[W]=new H(G)),this[W]}init(){this.placeholders={},this.overlays=[];document.querySelectorAll("[data-overlay-placeholder]").forEach((t=>{t.dataset.placeholderFor&&(this.placeholders[t.dataset.placeholderFor]=t)})),h.A.subscribe(a.L$,(t=>this.onOverlayOpened(t)),this),h.A.subscribe(a.c3,(t=>this.onOverlayClosed(t)),this),h.A.subscribe(a.wZ,(()=>this.onPageResume()),this),this.updateState()}onOverlayOpened(t){if(!t.id||!Array.isArray(this.overlays)||this.overlays.find((e=>e.id===t.id)))return;const e=this.placeholders[t.id];e&&("function"==typeof e.remove&&e.remove(),delete this.placeholders[t.id]),this.overlays.push(t),this.updateState()}onOverlayClosed(t){this.overlays=this.overlays.filter((e=>e.id!==t.id)),this.updateState()}updateState(){document.documentElement.classList.toggle("overlay-open",this.isScrollingPrevented),h.A.publish(a.p$,this.currentOverlay)}onPageResume(){this.updateState()}get currentOverlay(){return this.overlays[this.overlays.length-1]||null}get isScrollingPrevented(){return this.overlays.filter((t=>t.preventScrolling)).length>0}}class J{constructor(t,e,i){this.headline=t,this.description=e,this.callback="function"==typeof i?i:null,this.boundOnDescriptionTriggerClick=t=>this.onDescriptionTriggerClick(t),this.boundOnCloseIconClick=()=>this.onCloseIconClick(),this.init()}init(){if(this.el=j.A.createElementByPrototypeId(this.prototypeId),!this.el)return;this.closeIcon=this.el.querySelector('[data-notification-el="closeIcon"]'),this.closeIcon.addEventListener("click",this.boundOnCloseIconClick);this.el.querySelector('[data-notification-el="headline"]').innerHTML=this.headline;const t=this.el.querySelector('[data-notification-el="description"]');this.description?(t.innerHTML=this.description,this.descriptionTrigger=t.querySelector('[data-notification-el="trigger"]'),this.descriptionTrigger&&this.descriptionTrigger.addEventListener("click",this.boundOnDescriptionTriggerClick)):(t.parentNode.removeChild(t),this.closeIcon.parentNode.classList.add("self-center"))}show(){c.A.isApp||null!==H.instance.currentOverlay||(this.container=document.querySelector('[data-notification-el="container"][data-notification-position~="default"]')),this.container||(this.container=document.querySelector('[data-notification-el="container"][data-notification-position~="overlay"]')??document.body),this.container.appendChild(this.el),this.el.style.opacity=0,h.A.toggleElementVisibility(this.el,!0),setTimeout((()=>{this.el.style.opacity=1}),0)}hide(){h.A.toggleElementVisibility(this.el,!1),this.destroy()}onDescriptionTriggerClick(t){t.preventDefault(),this.descriptionTrigger.blur(),"function"==typeof this.callback&&this.callback(),h.A.publish(a.f6)}onCloseIconClick(){h.A.publish(a.f6)}destroy(){this.closeIcon.removeEventListener("click",this.boundOnCloseIconClick),this.descriptionTrigger&&this.descriptionTrigger.removeEventListener("click",this.boundOnDescriptionTriggerClick),this.callback=null,this.el.parentNode&&this.el.parentNode.removeChild(this.el)}get prototypeId(){return""}}class Z extends J{get prototypeId(){return"prototype-notification-failure"}}class Q extends J{get prototypeId(){return"prototype-notification-success"}}const K=Symbol("INSTANCE"),Y=Symbol("SINGELTONENFORCER");class X{constructor(t){if(t!==Y)throw new Error("Instantiation failed: Use NotificationService.instance instead of new.");this.queue=null,this.currentNotification=null,this.notificationTimeoutId=null,this.viewLookup={},this.viewLookup[l.Fn]=Q,this.viewLookup[l.KP]=Z,this.boundOnHideNotificationTriggered=()=>this.hideCurrentNotification(),this.init()}static get instance(){return this[K]||(this[K]=new X(Y)),this[K]}init(){h.A.subscribe(a.f6,this.boundOnHideNotificationTriggered)}addNotification(t){if(!t||!this.viewLookup[t.type]||!t.headline)return;const e=new this.viewLookup[t.type](t.headline,t.description,t.callback);this.queue={view:e,duration:Number.isInteger(t.duration)?t.duration:4},this.showNextNotification()}showNextNotification(){void 0!==this.notificationTimeoutId&&clearTimeout(this.notificationTimeoutId),this.currentNotification?this.hideCurrentNotification():this.queue&&(this.queue.view&&(this.currentNotification=this.queue.view,this.queue.duration&&(this.notificationTimeoutId=setTimeout((()=>{this.hideCurrentNotification()}),1e3*this.queue.duration)),this.currentNotification.show()),this.queue=null)}hideCurrentNotification(){void 0!==this.notificationTimeoutId&&clearTimeout(this.notificationTimeoutId),this.currentNotification&&(this.currentNotification.hide(),this.currentNotification=null),setTimeout((()=>{this.showNextNotification()}),200)}}class tt{constructor(){this.documentId=null,this.collection=null,this.bookmarks=F.instance,this.boundNotificationCallback=()=>this.notificationCallback()}execute(t,e){if(!g.A.instance.isLoggedIn)return h.A.publish(a.XA,{type:"bookmarks"}),void this.destroy();this.documentId=t,this.collection=e,this.addBookmark()}addBookmark(){const t=s.A.instance;this.bookmarks.add(this.documentId,this.collection).then((()=>{h.A.publish(a.Gr,this.documentId,this.collection);const e=t?.translations?.notification?.addBookmarkSuccess,i="recipe"===this.collection?"Rezept":"Artikel",s=e?.description?.replace("###COLLECTION###",i);X.instance.addNotification({type:l.Fn,headline:e?.headline||"",description:s||""}),c.A.isApp&&t?.app?.pageContext?.documentId===this.documentId&&t?.app?.pageContext?.collection===this.collection&&h.A.publish(a.pN,new z(this.documentId,this.collection,!0)),this.destroy()})).catch((()=>{h.A.publish(a.Bb,{type:l.Yj,documentId:this.documentId,collection:this.collection});const e=t?.translations?.notification?.addBookmarkFailure;X.instance.addNotification({type:l.KP,headline:e?.headline||"",description:e?.description||"",callback:this.boundNotificationCallback})}))}notificationCallback(){setTimeout((()=>{this.addBookmark()}),1e3)}destroy(){this.documentId=null,this.collection=null,this.bookmarks=null,this.boundNotificationCallback=null}}var et=i(902);class it{execute(t){Array.isArray(t)?!c.A.isApp||c.A.appVersion<et.A.instance.minAudioPlaylistVersion||"function"!=typeof et.A.instance.triggerAddToAudioPlaylist||0===t.length||(g.A.instance.isLoggedIn?et.A.instance.triggerAddToAudioPlaylist(t):h.A.publish(a.XA,{type:"playlist"})):console.warn("AddToPlaylistController - missing or malformed parameter `clips`",t)}}class st extends ${constructor(t){super(),this._target=t}get id(){return q.TK}get target(){return this._target}}const nt={appinfo:{isLoginRequired:!1},darkmode:{isLoginRequired:!1},fontsize:{isLoginRequired:!1},offlinelibrary:{isLoginRequired:!0,loginLayerType:"offlinelibrary"},playlist:{isLoginRequired:!0,loginLayerType:"playlist"},push:{isLoginRequired:!1}};class ot{execute({targetId:t=""}){if(!c.A.isApp||!t)return;const e=nt[t];e&&(!e.isLoginRequired||g.A.instance.isLoggedIn?h.A.publish(a.pN,new st(t)):e.loginLayerType&&h.A.publish(a.XA,{type:e.loginLayerType}))}}class at extends ${get id(){return q.Lw}}class rt{execute(){c.A.isApp&&(this.initBookmark(),h.A.publish(a.pN,new at),this.disableLinks())}initBookmark(){const t=s.A.instance;if("article"===R.A.instance.route&&t.app&&t.app.pageContext&&t.app.pageContext.documentId&&t.app.pageContext.collection){const e=F.instance;h.A.publish(a.pN,new z(t.app.pageContext.documentId,t.app.pageContext.collection,e.contains(t.app.pageContext.documentId,t.app.pageContext.collection)))}}disableLinks(){if(!(c.A.appCode&&s.A.instance.app&&s.A.instance.app.disabledLinks&&Array.isArray(s.A.instance.app.disabledLinks[c.A.appCode])))return;const t=s.A.instance.app.disabledLinks[c.A.appCode];let e=[];t.forEach((t=>{const i=Array.from(document.querySelectorAll(`a[href*="${t}"]`));e=e.concat(i)})),e.forEach((t=>{t.insertAdjacentHTML("afterend",t.textContent),t.remove()}))}}var lt=i(893);const ct=["emptied","loadstart","pause","play","playing","progress","ratechange","timeupdate","volumechange","waiting"],ht="MODE_DEFAULT",dt="MODE_AUTOPLAY",ut="MODE_RESUME",pt=new M.A("audio","local");let gt=null,mt=!1;const yt={mode:ht,_clip:null,_currentTime:0,_currentTimeUpdateTimeout:null,_playbackRate:1,_seekTime:0,_volume:1,buffered:[],duration:0,isClipFromLocalStorage:!1,isEnded:!1,isLoading:!1,isPaused:!0,isPlaying:!1,isRestored:!1,isSeeking:!1,init(){this.boundOnStateChanged=(0,lt.X)(this.onStateChanged,100,this),this.boundOnCanPlay=t=>this.onCanPlay(t),this.boundOnLoadedMetadata=t=>this.onLoadedMetadata(t),this.boundOnWindowStorage=t=>this.onWindowStorage(t),this.boundOnPointerInteractionEnd=t=>this.onPointerInteractionEnd(t),this.restoreFromLocalStorage()},onStateChanged(){this.updateStore(),this.updateLocalStorage()},onLoadedMetadata(){gt.removeEventListener("loadedmetadata",this.boundOnLoadedMetadata),this.onCanPlay()},onCanPlay(){gt.removeEventListener("canplay",this.boundOnCanPlay),window.removeEventListener("storage",this.boundOnWindowStorage),m.A.isMobileSafari||c.A.isIOSApp||this.restoreAudio(),gt.play().then((()=>{(m.A.isMobileSafari||c.A.isIOSApp)&&this.restoreAudio(),mt=!1})).catch((()=>{this.mode===dt&&(this.mode=ut,this.isRestored=!0,mt=!0,this.detachAudio(),this.onStateChanged())}))},onWindowStorage(t){t.key===pt.name&&(window.removeEventListener("storage",this.boundOnWindowStorage),this.mode=ut,this.isRestored=!0,this.detachAudio(),this.updateStore())},onPointerInteractionEnd(){if(this.isSeeking){if(!gt)return this._currentTime=this._seekTime,void this.endSeekingState();gt.addEventListener("timeupdate",(()=>this.endSeekingState()),{once:!0}),gt.currentTime=this._seekTime}},updateStore(){let t=gt&&gt.duration?gt.duration:0;!t&&this.clip&&Number.isInteger(this.clip.duration)&&(t=this.clip.duration/1e3);const e=[];if(gt&&gt.buffered&&gt.buffered.length>0)for(let t=0;t<gt.buffered.length;t++)e.push({start:gt.buffered.start(t),end:gt.buffered.end(t)});!mt&&gt&&gt instanceof HTMLAudioElement&&(this._currentTime=gt.currentTime,this._playbackRate=gt.playbackRate,this._volume=gt.volume),this.buffered=e,this.duration=t,this.isLoading=gt&&gt.readyState<HTMLMediaElement.HAVE_FUTURE_DATA&&!gt.ended,this.isPlaying=gt&&!gt.paused&&!gt.ended&&!this.isLoading,this.isEnded=gt&&gt.ended,this.isPaused=!gt||gt.paused},updateLocalStorage(){pt.setItem("clip",this.clip),pt.setItem("currentTime",this.currentTime),pt.setItem("volume",this.volume),pt.setItem("playbackRate",this.playbackRate),pt.setItem("isPlaying",gt&&!gt.paused&&!gt.ended),pt.setItem("updatedAt",(new Date).getTime())},play(){if(!this.clip)return;let t;switch(this.mode){case dt:t=this.clip.autoplayUrl?this.clip.autoplayUrl:this.clip.audioUrl;break;case ut:t=this.clip.resumeUrl?this.clip.resumeUrl:this.clip.audioUrl;break;default:t=this.clip.audioUrl}t&&(gt||this.attachAudio(),this.isRestored=!1,gt.src!==t?((m.A.isMobileSafari||c.A.isIOSApp)&&gt.addEventListener("loadedmetadata",this.boundOnLoadedMetadata),gt.addEventListener("canplay",this.boundOnCanPlay),mt=!0,gt.src=t):(gt.play(),mt=!1))},pause(){gt&&this.isPlaying&&"function"==typeof gt.pause&&gt.pause()},clear(){this._clip=null,this._currentTime=0,this._seekTime=0,this.isSeeking=!1,gt&&this.detachAudio(),this.onStateChanged()},attachAudio(){gt||(gt=document.createElement("audio"),(m.A.isMobileSafari||c.A.isIOSApp)&&gt.addEventListener("loadedmetadata",this.boundOnLoadedMetadata),gt.addEventListener("canplay",this.boundOnCanPlay),ct.forEach((t=>{gt.addEventListener(t,this.boundOnStateChanged)})),document.body.appendChild(gt),window.addEventListener("mouseup",this.boundOnPointerInteractionEnd),window.addEventListener("touchend",this.boundOnPointerInteractionEnd))},detachAudio(){window.removeEventListener("mouseup",this.boundOnPointerInteractionEnd),window.removeEventListener("touchend",this.boundOnPointerInteractionEnd),ct.forEach((t=>{gt.removeEventListener(t,this.boundOnStateChanged)})),gt.removeEventListener("loadedmetadata",this.boundOnLoadedMetadata),gt.removeEventListener("canplay",this.boundOnCanPlay),gt.remove(),gt=null},restoreFromLocalStorage(){const t=pt.getItem("playbackRate");if("number"!=typeof t||Number.isNaN(t)||(this._playbackRate=t),!pt.getItem("clip"))return void this.clearLocalStorage();if((new Date).getTime()-(pt.getItem("updatedAt")||0)>108e5)this.clearLocalStorage();else{this._clip=pt.getItem("clip"),this.isClipFromLocalStorage=!0;const t=pt.getItem("currentTime"),e=pt.getItem("volume");this.mode=pt.getItem("isPlaying")?dt:ht,"number"!=typeof t||Number.isNaN(t)||(this._currentTime=t),"number"!=typeof e||Number.isNaN(e)||(this._volume=e),this.updateStore(),this.mode===dt&&(window.addEventListener("storage",this.boundOnWindowStorage),this.play())}},restoreAudio(){gt.currentTime=this._currentTime,gt.volume=this._volume,gt.playbackRate=this._playbackRate},reloadLocaLStorage(){pt.reload(),this.restoreFromLocalStorage()},clearLocalStorage(){pt.removeItem("clip"),pt.removeItem("isPlaying"),pt.removeItem("currentTime"),pt.removeItem("volume"),pt.removeItem("updatedAt")},endSeekingState(){this._seekTime=0,this.isSeeking=!1,this._currentTimeUpdateTimeout&&clearTimeout(this._currentTimeUpdateTimeout)},get clip(){return this._clip},set clip(t){t&&t.id&&t.audioUrl&&(this.mode=ht,this.isClipFromLocalStorage=!1,mt=!0,gt&&gt.src&&(gt.src=""),this._currentTime=0,this._clip={audioUrl:t.audioUrl,autoplayUrl:t.autoplayUrl,resumeUrl:t.resumeUrl,downloadUrl:t.downloadUrl||t.audioUrl,duration:t.duration||0,headline:t.headline||"",id:t.id,kicker:t.kicker||"",posterUrl:t.posterUrl||"",chapters:t.chapters||null},this.onStateChanged())},get currentTime(){return this.isSeeking?this._seekTime:this._currentTime},set currentTime(t){const e=Math.max(parseFloat(t),0);Number.isNaN(e)||e>this.duration||(this._currentTimeUpdateTimeout&&(clearTimeout(this._currentTimeUpdateTimeout),this._currentTimeUpdateTimeout=null,this.isSeeking=!0),this.isSeeking?this._seekTime=e:this._currentTimeUpdateTimeout=setTimeout((()=>{this._currentTimeUpdateTimeout=null,gt?gt.currentTime=e:this._currentTime=e}),250))},get playbackRate(){return this._playbackRate},set playbackRate(t){const e=parseFloat(t);Number.isNaN(e)||e<.25||e>4||(gt?gt.playbackRate=e:(this._playbackRate=e,pt.setItem("playbackRate",e)))},get volume(){return this._volume},set volume(t){const e=parseFloat(t);Number.isNaN(e)||e<0||e>1||(gt?gt.volume=e:this._volume=e)},get chapterPositions(){return this.clip&&Array.isArray(this.clip.chapters)?this.clip.chapters.map((t=>t.position)):[]},get chapter(){if(!this.clip||!Array.isArray(this.clip.chapters))return null;let t=null;return this.clip.chapters.forEach((e=>{const i=t?t.position:-1;e.position>i&&e.position<=this.currentTime&&(t=e)})),t},get isDebuggingActive(){try{return"1"===localStorage.getItem("polygon_audio_debugging")}catch(t){return!1}}},ft={get instance(){return o.A.store("WebAudio")}};class bt{execute(){c.A.isApp&&et.A.isNativeAudioPlayerSupported||ft.instance.clear()}}class At{execute(){c.A.isApp&&et.A.isNativeAudioPlayerSupported||ft.instance.pause()}}class wt{execute(t){t&&t.id&&t.audioUrl&&!s.A.instance.preview&&(c.A.isApp&&et.A.instance.isNativeAudioPlayerSupported?et.A.instance.triggerNativeAudioPlayer(t):(ft.instance.clip=t,ft.instance.play()))}}class It{execute(){c.A.isApp&&et.A.isNativeAudioPlayerSupported||ft.instance.play()}}class vt{execute(t){c.A.isApp&&et.A.isNativeAudioPlayerSupported||(ft.instance.playbackRate=t)}}class St{execute(t){c.A.isApp&&et.A.isNativeAudioPlayerSupported||(ft.instance.currentTime=t)}}class Et{execute(t){c.A.isApp&&et.A.isNativeAudioPlayerSupported||(ft.instance.volume=t)}}var Pt=i(766);const kt=Symbol("INSTANCE"),Ct=Symbol("SINGELTONENFORCER");class _t{constructor(t){if(t!==Ct)throw new Error("Instantiation failed: Use BreakingNewsData.instance instead of new.");s.A.instance.disableBreakingnews||(this.init(),this.fetchBreakingNews())}static get instance(){return this[kt]||(this[kt]=new _t(Ct)),this[kt]}init(){if(Pt.A.getItem(l.AZ.breakingNews.name)){let t;try{t=JSON.parse(Pt.A.getItem(l.AZ.breakingNews.name))}catch(t){}if(t){const e=s.A.instance,i=e.cacheControl&&e.cacheControl.breakingnews&&Number.isInteger(e.cacheControl.breakingnews.sessionStorageMaxAge)?e.cacheControl.breakingnews.sessionStorageMaxAge:900,n=Date.now()-1e3*i;if(t.updated_at&&t.updated_at>=n&&t.items&&Array.isArray(t.items))return void(this._items=t.items)}}this._items=[]}fetchBreakingNews(){const t=s.A.instance;if(!t.urls||"string"!=typeof t.urls.assetsBasePath)return;const e=`${t.urls.assetsBasePath}/assets/news/breakingnews.json`;fetch(e,{method:"GET"}).then((t=>t.json())).then((t=>this.parseFetchedBreakingNews(t))).catch((()=>console.error("Error while fetching breaking news.")))}parseFetchedBreakingNews(t){t&&Array.isArray(t)&&(this.items=t)}updateSessionStorage(t){const e={items:t&&Array.isArray(t)?t:[],updated_at:Date.now()};Pt.A.setItem(l.AZ.breakingNews.name,JSON.stringify(e))}get items(){return this._items}set items(t){if(!t||!Array.isArray(t))return;let e=t.length!==this._items.length;e||t.forEach((t=>{-1===this._items.findIndex((e=>e.id===t.id))&&(e=!0)})),this._items=t,this.updateSessionStorage(t),e&&window.polygon&&window.polygon.componentLoader&&window.polygon.componentLoader.publish(a.TD,t)}}var Lt=i(117);class Tt{constructor(){this.link=null,this.boundNotificationCallback=()=>this.notificationCallback()}execute(t){t?(this.link=t,this.copyLinkToClipboard()):this.destroy()}copyLinkToClipboard(){const t=s.A.instance,e=Lt.A.copyToClipboard(this.link),i=t?.translations?.notification;e?X.instance.addNotification({type:l.Fn,headline:i?.copyGiftArticleLinkSuccess?.headline||"",description:i?.copyGiftArticleLinkSuccess?.description||""}):X.instance.addNotification({type:l.KP,headline:i?.copyGiftArticleLinkFailure?.headline||"",description:i?.copyGiftArticleLinkFailure?.description||"",callback:this.boundNotificationCallback})}notificationCallback(){setTimeout((()=>{this.copyLinkToClipboard()}),1e3)}destroy(){this.link=null,this.boundNotificationCallback=null}}const Ot=Symbol("INSTANCE"),xt=Symbol("SINGELTONENFORCER");class Nt{constructor(t){if(t!==xt)throw new Error("Instantiation failed: Use GiftService.instance instead of new.");this.init()}static get instance(){return this[Ot]||(this[Ot]=new Nt(xt)),this[Ot]}init(){const t=s.A.instance;t.thirdparty&&t.thirdparty.gift&&t.thirdparty.gift.apiUrl?this.apiUrl=t.thirdparty.gift.apiUrl:console.error("GiftService requires apiUrl for correct instantiation.")}getGiftCredits(){const t=`${this.apiUrl}/credits`;return new Promise(((e,i)=>{this.fetchUrl(t,"GET").then((t=>{t&&Number.isInteger(t.giftCredit)?e(t.giftCredit):e(0)})).catch((t=>i(t)))}))}createGiftArticle(t){if(!t||"string"!=typeof t)return Promise.reject(new Error("GiftService createGiftArticle - missing valid documentId function param"));const e=new URL(`${this.apiUrl}/create`);e.searchParams.set("article",t);return new Promise(((t,i)=>{this.fetchUrl(e.href,"GET").then((e=>{t(e)})).catch((t=>i(t)))}))}fetchUrl(t,e="GET"){return fetch(t,{method:e,headers:{"Content-Type":"text/plain"}}).then((t=>200!==t.status&&201!==t.status?t.text().then((t=>{throw new Error(t)})).catch((e=>Promise.reject(new Error(`GiftService fetchUrl - failed to get data from API, URL: ${t.url}, error: ${e.message}`)))):"GET"===e?t.json():Promise.resolve()))}}const Bt={isInitialized:!1,credits:null,tokenLookup:{},initialize(){Nt.instance.getGiftCredits().then((t=>{Number.isInteger(t)&&(this.credits=t,this.isInitialized=!0)})).catch((()=>{}))},addToken(t,e){t&&"string"==typeof t&&e&&(this.tokenLookup[t]=e)},getToken(t){return this.tokenLookup[t]}},Ut={get instance(){return o.A.store("Gift")}};class Rt{constructor(){this.documentId=null,this.giftService=Nt.instance,this.boundNotificationCallback=()=>this.notificationCallback()}execute(t){const e=g.A.instance;e.isLoggedIn&&e.hasPaidAccess?(this.documentId=t,this.createGiftArticle()):this.destroy()}createGiftArticle(){this.giftService.createGiftArticle(this.documentId).then((t=>{if(t.articleId!==this.documentId||!t.token)throw new Error("Invalid response");const e=Ut.instance;e.addToken(this.documentId,t.token),h.A.publish(a.aw,this.documentId,t.token),Number.isInteger(t.giftCredit)&&(e.credits=t.giftCredit),this.destroy()})).catch((()=>{X.instance.addNotification({type:l.KP,headline:"Fehler",description:'Beim Erstellen des Links ist ein Fehler aufgetreten. <a href="#" data-notification-el="trigger">Erneut versuchen</a>',callback:this.boundNotificationCallback})}))}notificationCallback(){setTimeout((()=>{this.createGiftArticle()}),1e3)}destroy(){this.documentId=null,this.giftService=null,this.boundNotificationCallback=null}}class Mt{execute(){A.A.clear(),Pt.A.clear(),setTimeout((()=>{const t=d.A.getAllItems();t&&Object.keys(t).forEach((t=>{d.A.removeItem(t),s.A.instance.cookieDomains&&Array.isArray(s.A.instance.cookieDomains)&&s.A.instance.cookieDomains.forEach((e=>{d.A.removeItem(t,{path:"/",domain:e,secure:!1}),d.A.removeItem(t,{path:"/",domain:e,secure:!0}),d.A.removeItem(t,{path:"/",domain:e,secure:!0,sameSite:"none"})}))})),h.A.publish(a.OF);const e=s.A.instance?.translations?.notification?.deleteCookiesSuccess?.headline;e&&X.instance.addNotification({type:l.Fn,headline:e})}),1e3)}}class Dt{constructor(){this.documentId=null,this.collection=null,this.bookmarks=F.instance,this.boundNotificationCallback=()=>this.notificationCallback()}execute(t,e){if(!g.A.instance.isLoggedIn)return h.A.publish(a.XA,{type:"bookmarks"}),void this.destroy();this.documentId=t,this.collection=e,this.deleteBookmark()}deleteBookmark(){const t=s.A.instance;this.bookmarks.delete(this.documentId,this.collection).then((()=>{h.A.publish(a.XH,this.documentId,this.collection);const e=t?.translations?.notification?.deleteBookmarkSuccess,i="recipe"===this.collection?"Rezept":"Artikel",s=e?.description?.replace("###COLLECTION###",i);X.instance.addNotification({type:l.Fn,headline:e?.headline||"",description:s||""}),c.A.isApp&&t?.app?.pageContext?.documentId===this.documentId&&t?.app?.pageContext?.collection===this.collection&&h.A.publish(a.pN,new z(this.documentId,this.collection,!1)),this.destroy()})).catch((()=>{h.A.publish(a.Bb,{type:l.qd,documentId:this.documentId,collection:this.collection});const e=t?.translations?.notification?.deleteBookmarkFailure,i="recipe"===this.collection?"Rezepts":"Artikels",s=e?.description?.replace("###COLLECTION###",i);X.instance.addNotification({type:l.KP,headline:e?.headline||"",description:s||"",callback:this.boundNotificationCallback})}))}notificationCallback(){setTimeout((()=>{this.deleteBookmark()}),1e3)}destroy(){this.documentId=null,this.collection=null,this.bookmarks=null,this.boundNotificationCallback=null}}class Vt{constructor(t,e,i,s="Ok",n="Abbrechen"){this.callback="function"==typeof t?t:null,this.headline=e,this.description=i,this.confirmButtonLabel=s,this.cancelButtonLabel=n,this.boundOnConfirmButtonClick=()=>this.onConfirmTriggered(),this.boundOnCancelTriggered=()=>this.onCancelTriggered(),this.boundOnKeyDown=t=>this.onKeyDown(t),this.init()}init(){if(this.container=document.querySelector('[data-confirmationlayer-el="container"]'),this.container||(this.container=document.body),this.el=j.A.createElementByPrototypeId(this.prototypeId),!this.el)return;const t=this.el.querySelector('[data-confirmationlayer-el="headline"]');t&&(this.headline?t.innerHTML=this.headline:h.A.toggleElementVisibility(t,!1));const e=this.el.querySelector('[data-confirmationlayer-el="description"]');if(e&&(this.description?e.innerHTML=this.description:h.A.toggleElementVisibility(e,!1)),this.confirmButton=this.el.querySelector('[data-confirmationlayer-el="confirmButton"]'),this.confirmButton)if(this.confirmButtonLabel){const t=this.confirmButton.querySelector("[data-label]");t&&(t.innerHTML=this.confirmButtonLabel),this.confirmButton.addEventListener("click",this.boundOnConfirmButtonClick)}else h.A.toggleElementVisibility(this.confirmButton,!1);if(this.cancelButton=this.el.querySelector('[data-confirmationlayer-el="cancelButton"]'),this.cancelButton)if(this.cancelButtonLabel){const t=this.cancelButton.querySelector("[data-label]");t&&(t.innerHTML=this.cancelButtonLabel),this.cancelButton.addEventListener("click",this.boundOnCancelTriggered)}else h.A.toggleElementVisibility(this.cancelButton,!1);this.closeIcon=this.el.querySelector('[data-confirmationlayer-el="closeIcon"]'),this.closeIcon&&this.closeIcon.addEventListener("click",this.boundOnCancelTriggered),this.background=this.el.querySelector('[data-confirmationlayer-el="background"]'),this.background&&this.background.addEventListener("click",this.boundOnCancelTriggered)}open(){this.container.appendChild(this.el),this.el.style.opacity=0,h.A.toggleElementVisibility(this.el,!0),this.returnFocusElement=window.document.activeElement,this.closeIcon.focus(),setTimeout((()=>{this.el.style.opacity=1}),0),window.document.addEventListener("keydown",this.boundOnKeyDown,!0)}close(){h.A.toggleElementVisibility(this.el,!1),this.returnFocusElement&&(this.returnFocusElement.focus(),this.returnFocusElement=null),h.A.publish(a.BQ),this.destroy()}onConfirmTriggered(){"function"==typeof this.callback&&this.callback(l.FQ),this.close()}onCancelTriggered(){"function"==typeof this.callback&&this.callback(l.BO),this.close()}onKeyDown(t){t.defaultPrevented||"Escape"!==t.key&&"Esc"!==t.key&&27!==t.keyCode||(t.preventDefault(),this.close())}destroy(){this.closeIcon&&this.closeIcon.removeEventListener("click",this.boundOnCancelTriggered),this.confirmButton&&this.confirmButton.removeEventListener("click",this.boundOnConfirmButtonClick),this.cancelButton&&this.cancelButton.removeEventListener("click",this.boundOnCancelTriggered),this.background&&this.closeIcon.removeEventListener("click",this.boundOnCancelTriggered),window.document.removeEventListener("keydown",this.boundOnKeyDown,!0),this.callback=null,this.el.parentNode&&this.el.parentNode.removeChild(this.el),this.el=null}get prototypeId(){return"prototype-confirmation-layer"}}const Ft=Symbol("INSTANCE"),qt=Symbol("SINGELTONENFORCER");class $t{constructor(t){if(t!==qt)throw new Error("Instantiation failed: Use ConfirmationLayerService.instance instead of new.");this.queue=[],this.currentConfirmationLayer=null,this.boundOnConfirmationLayerClosed=()=>this.onConfirmationLayerClosed(),this.init()}static get instance(){return this[Ft]||(this[Ft]=new $t(qt)),this[Ft]}init(){h.A.subscribe(a.BQ,this.boundOnConfirmationLayerClosed)}addConfirmationLayer(t){if(!t)return;this.removeConfirmationLayerById(t.id);const e=new Vt(t.callback,t.headline,t.description,t.confirmButtonLabel,t.cancelButtonLabel);this.queue.unshift({id:t.id||"",view:e}),this.currentConfirmationLayer||this.showNextConfirmationLayer()}removeConfirmationLayerById(t){if(!t)return;this.queue.filter((e=>e.id===t)).forEach((t=>{const e=this.queue.indexOf(t);-1!==e&&(t.view.destroy(),this.queue.splice(e,1))}))}showNextConfirmationLayer(){if(this.currentConfirmationLayer)return void this.currentConfirmationLayer.destroy();if(0===this.queue.length)return;const t=this.queue.pop();t.view&&(this.currentConfirmationLayer=t.view,this.currentConfirmationLayer.open())}onConfirmationLayerClosed(){this.currentConfirmationLayer&&(this.currentConfirmationLayer=null),setTimeout((()=>{this.showNextConfirmationLayer()}),400)}}class zt{constructor(){this.bookmarks=F.instance,this.boundConfirmationLayerCallback=t=>this.confirmationLayerCallback(t),this.boundNotificationCallback=()=>this.notificationCallback()}execute(){const t=s.A.instance,e=t?.translations?.confirmationLayer?.deleteAllBookmarks;$t.instance.addConfirmationLayer({id:"DeleteAllBookmarks",headline:e?.headline||"",description:e?.description||"",confirmButtonLabel:e?.confirmButtonLabel||"",cancelButtonLabel:e?.cancelButtonLabel||"",callback:this.boundConfirmationLayerCallback})}deleteAllBookmarks(){const t=s.A.instance;this.bookmarks.deleteAll().then((()=>{h.A.publish(a.sK);const e=t?.translations?.notification?.deleteAllBookmarksSuccess;X.instance.addNotification({type:l.Fn,headline:e?.headline||"",description:e?.description||""}),c.A.isApp&&t?.app?.pageContext?.documentId&&t?.app?.pageContext?.collection&&h.A.publish(a.pN,new z(t.app.pageContext.documentId,t.app.pageContext.collection,!1)),this.destroy()})).catch((e=>{h.A.publish(a.Bb,{type:l.oY});const i=t?.translations?.notification?.deleteAllBookmarksFailure;X.instance.addNotification({type:l.KP,headline:i?.headline||"",description:i?.description||"",callback:this.boundNotificationCallback}),console.error(e.message)}))}notificationCallback(){setTimeout((()=>{this.deleteAllBookmarks()}),1e3)}confirmationLayerCallback(t){t!==l.FQ?this.destroy():this.deleteAllBookmarks()}destroy(){this.bookmarks=null,this.boundConfirmationLayerCallback=null,this.boundNotificationCallback=null}}const jt=Symbol("INSTANCE"),Wt=Symbol("SINGELTONENFORCER");class Gt{constructor(t){if(t!==Wt)throw new Error("Instantiation failed: Use EventObserver.instance instead of new.");this.init()}static get instance(){return this[jt]||(this[jt]=new Gt(Wt)),this[jt]}init(){this.boundOnMouseDown=t=>this.onMouseDown(t),this.boundOnPageShow=t=>this.onPageShow(t),window.document.addEventListener("mousedown",this.boundOnMouseDown),window.addEventListener("pageshow",this.boundOnPageShow),this.initPageVisibilityAPI()}initPageVisibilityAPI(){this.hiddenPropertyName=void 0,this.visibilityChangeEventName=void 0,void 0!==document.hidden?(this.hiddenPropertyName="hidden",this.visibilityChangeEventName="visibilitychange"):void 0!==document.mozHidden?(this.hiddenPropertyName="mozHidden",this.visibilityChangeEventName="mozvisibilitychange"):void 0!==document.msHidden?(this.hiddenPropertyName="msHidden",this.visibilityChangeEventName="msvisibilitychange"):void 0!==document.webkitHidden?(this.hiddenPropertyName="webkitHidden",this.visibilityChangeEventName="webkitvisibilitychange"):this.visibilityChangeEventName="visibilitychange",this.currentVisibilityState=this.visibilityState,this.boundOnVisibilityChange=()=>this.onVisibilityChange(this.visibilityState),window.document.addEventListener(this.visibilityChangeEventName,this.boundOnVisibilityChange),this.boundOnPageHide=()=>this.onVisibilityChange("hidden"),window.addEventListener("pagehide",this.boundOnPageHide)}onVisibilityChange(t){this.currentVisibilityState!==t&&(this.currentVisibilityState=t,h.A.publish(a.oe,t))}get visibilityState(){return this.hiddenPropertyName?window.document[this.hiddenPropertyName]?"hidden":"visible":void 0!==window.document.visibilityState?window.document.visibilityState:void 0}onMouseDown(t){h.A.publish(a.D1,t)}onPageShow(t){t.persisted&&h.A.publish(a.wZ)}destroy(){window.document.removeEventListener("mousedown",this.boundOnMouseDown),window.removeEventListener("pageshow",this.boundOnPageShow),window.removeEventListener("pagehide",this.boundOnPageHide),window.document.removeEventListener(this.visibilityChangeEventName,this.boundOnVisibilityChange),window.removeEventListener("scroll",this.boundOnScroll),super.destroy()}}class Ht{constructor(){this.origin=null,this.target=null,this.targetImage=null,this.animationDuration=null,this.el=null}execute(t,e){if(this.origin=document.querySelector(`[data-image-animation-origin="${t}"]`),this.target=document.querySelector(`[data-image-animation-target="${t}"]`),!this.origin||!this.target)return void this.destroy();if(this.targetImage=this.target.querySelector("img"),this.animationDuration=e,this.el=j.A.createElementByPrototypeId("prototype-image-animation-element"),!this.el)return void this.destroy();const i=this.origin.getBoundingClientRect(),s={imageSrc:this.origin.currentSrc,animationDuration:this.animationDuration,width:this.origin.width,height:this.origin.height,top:i.top,left:i.left};this.el=j.A.populateElement(this.el,s),this.target.parentNode.insertBefore(this.el,this.target.nextSibling),this.el.style.transform=this.cssTransform,this.el.style.filter=this.cssFilter,window.setTimeout((()=>this.onAnimationCompleted()),this.animationDuration)}get cssTransform(){if(!this.el||!this.target)return"";const t=this.target.getBoundingClientRect(),e=this.el.getBoundingClientRect(),i=(t.height<window.innerHeight?t.height:window.innerHeight)/this.el.height,s=(t.width-this.el.width*i)/2;return`translate(${t.left-parseFloat(e.left)+s}px, ${t.top-parseFloat(e.top)}px) scale(${i})`}get cssFilter(){const t=this.target.getBoundingClientRect().height/this.el.height-1;return t<0?"blur(0)":`blur(${t}px)`}onAnimationCompleted(){this.targetImage.classList.contains("lazyloaded")||this.targetImage.classList.contains("ls-is-cached")||this.targetImage.complete?this.onTargetImageLoaded():(this.boundOnTargetImageLoaded=()=>this.onTargetImageLoaded(),this.targetImage.addEventListener("load",this.boundOnTargetImageLoaded))}onTargetImageLoaded(){window.setTimeout((()=>this.destroy()),this.animationDuration)}destroy(){this.boundOnTargetImageLoaded&&this.targetImage.removeEventListener("load",this.boundOnTargetImageLoaded),this.origin=null,this.target=null,this.targetImage=null,this.el&&(this.el.remove(),this.el=null)}}class Jt{execute(){const t=g.A.instance;t.isLoggedIn&&t.hasPaidAccess&&Ut.instance.initialize()}}const Zt=[],Qt=()=>{const t=t=>{if(!t||!t.target)return;const e=t.target,i=(t.pageX-e.getBoundingClientRect().left)/(e.getBoundingClientRect().right-e.getBoundingClientRect().left),s=parseFloat(e.getAttribute("min"))||0,n=parseFloat(e.getAttribute("max"))||100,o=parseFloat(e.getAttribute("step"))||1,a=Math.floor(o)===o?0:o.toString().split(".")[1].length||0;let r=(n-s)*i+s;r=r%o!=0?parseFloat(r-r%o+o).toFixed(a):r,e.value=r;const l=new Event("input",{bubbles:!0,cancelable:!0});e.dispatchEvent(l)};document.querySelectorAll("input[type=range]").forEach((e=>{e.hasAttribute("data-polyfilled")||(e.addEventListener("touchend",t,{passive:!0}),e.setAttribute("data-polyfilled",""))})),h.A.subscribe(a.zn,(()=>Qt()))};window.IntersectionObserver&&window.IntersectionObserverEntry||Zt.push(i.e(608).then(i.t.bind(i,127,23))),Zt.push(i.e(608).then(i.t.bind(i,196,23)).then((t=>{t.polyfill()}))),"function"!=typeof window.queueMicrotask&&Zt.push(void(window.queueMicrotask=t=>{Promise.resolve().then(t).catch((t=>setTimeout((()=>{throw t}))))})),Array.prototype.flatMap||Zt.push(void Object.defineProperty(Array.prototype,"flatMap",{configurable:!0,writable:!0,value:()=>Array.prototype.map.apply(void 0,arguments).flat(1)})),(m.A.isMobileSafari||c.A.isIOSApp)&&Zt.push(Qt());const Kt=Promise.all(Zt),Yt=Symbol("INSTANCE"),Xt=Symbol("SINGELTONENFORCER");class te{constructor(t){if(t!==Xt)throw new Error("Instantiation failed: Use KeyboardDetection.instance instead of new.");this.init()}static get instance(){return this[Yt]||(this[Yt]=new te(Xt)),this[Yt]}init(){this.el=document.documentElement,window.addEventListener("keydown",(t=>this.onKeyDown(t))),h.A.subscribe(a.D1,(()=>this.onMouseDown()))}onKeyDown(t){"Tab"!==t.key&&9!==t.keyCode||this.el.classList.add("keyboard-control")}onMouseDown(){this.el.classList.remove("keyboard-control")}}var ee=i(144),ie=i.n(ee);const se=Symbol("INSTANCE"),ne=Symbol("SINGELTONENFORCER");class oe{constructor(t){if(t!==ne)throw new Error("Instantiation failed: Use LazyLoading.instance instead of new.");this.init()}static get instance(){return this[se]||(this[se]=new oe(ne)),this[se]}init(){this.lazyload=new(ie())({elements_selector:".lazyload",use_native:!1,unobserve_entered:!0,unobserve_completed:!0}),this.lazytrigger=new(ie())({elements_selector:".lazytrigger",use_native:!1,unobserve_entered:!0,unobserve_completed:!0,callback_enter:t=>{t.dispatchEvent(new Event("lazybeforeunveil"))},callback_loaded:t=>{t.dispatchEvent(new Event("lazyloaded"))}}),h.A.subscribe(a.ph,(()=>this.onUpdateRequested()))}onUpdateRequested(){this.lazyload&&"function"==typeof this.lazyload.update&&this.lazyload.update(),this.lazytrigger&&"function"==typeof this.lazytrigger.update&&this.lazytrigger.update()}}class ae extends ${constructor(t,e){super(),this._documentId=t,this._collection=e}get id(){return q.lc}get documentId(){return this._documentId}get collection(){return this._collection}}class re{execute(t){t.documentId&&h.A.publish(a.HE,t.documentId,t.collection||"article")}}class le{execute(){if(c.A.isApp)if(s.A.instance&&s.A.instance.app&&s.A.instance.app.pageContext&&s.A.instance.app.pageContext.isAudioEnabled&&s.A.instance.app.pageContext.clip&&s.A.instance.app.pageContext.clip.hasAccess)h.A.publish(a.cB,[s.A.instance.app.pageContext.clip]);else{const t=s.A.instance,e=t?.translations?.notification?.addDocumentAudioToPlaylistFailure;X.instance.addNotification({type:l.KP,headline:e?.headline,description:e?.description})}}}class ce{execute(t){const e=g.A.instance;t.documentId&&e.isLoggedIn&&e.hasPaidAccess&&h.A.publish(a.ys,{documentId:t.documentId,documentUrl:t.documentUrl})}}class he extends ${constructor(t,e){super(),this._documentId=t,this._collection=e}get id(){return q.tH}get documentId(){return this._documentId}get collection(){return this._collection}}class de{execute(t){t.documentId&&h.A.publish(a.ZO,t.documentId,t.collection||"article")}}class ue{execute(t){if(!t.productId||"string"!=typeof t.formattedPrice)return;o.A.store("AppProducts").setFormattedPrice({productId:t.productId,basePlanId:t.basePlanId,offerId:t.offerId,formattedPrice:t.formattedPrice})}}class pe{execute(t){h.A.publish(a.uO)}}class ge extends ${constructor(t,e){super(),this._consentUUID=t,this._euconsent=e}get id(){return q.NS}get consentUUID(){return this._consentUUID}get euconsent(){return this._euconsent}}class me extends ${constructor({productId:t,basePlanId:e,basePlanIds:i,offerId:s,isSubscription:n=!0}){super(),this._productId=t,this._basePlanId=e,this._basePlanIds=i&&Array.isArray(i)?i:[],this._offerId=s,this._isSubscription=!!n}get id(){return q.u1}get productId(){return this._productId}get basePlanId(){return this._basePlanId}get basePlanIds(){return this._basePlanIds}get offerId(){return this._offerId}get isSubscription(){return this._isSubscription}}class ye extends ${constructor(t,e){super(),this._link=t,this._title=e}get id(){return q.BG}get link(){return this._link}get title(){return this._title}}class fe extends ${constructor(t){super(),this._pushTags=[],this._postponePermissionDialog=t&&t.postponePermissionDialog,t&&t.pushTags&&Array.isArray(t.pushTags)&&t.pushTags.forEach((t=>{"string"==typeof t.tag&&"boolean"==typeof t.isSubscribed?this._pushTags.push(t):console.warn("SubmitOnboardingMessage: malformed payload option `pushTags`, value is not a valid push tag",t)}))}get id(){return q.vQ}get pushTags(){return this._pushTags}get postponePermissionDialog(){return this._postponePermissionDialog}}const be=Symbol("INSTANCE"),Ae=Symbol("SINGELTONENFORCER");class we{constructor(t){if(t!==Ae)throw new Error("Instantiation failed: Use Messenger.instance instead of new.");this.handlerLookup={},this.messageLookup={},this.init()}static get instance(){return this[be]||(this[be]=new we(Ae)),this[be]}init(){this.initHandlerLookup(),this.initMessageLookup(),h.A.subscribe(a.yv,this.onMessageReceived,this),h.A.subscribe(a.pN,this.onMessageSend,this)}initHandlerLookup(){this.handlerLookup[q.lc]=re,this.handlerLookup[q.G7]=le,this.handlerLookup[q.zr]=ce,this.handlerLookup[q.Dj]=ue,this.handlerLookup[q.tH]=de,this.handlerLookup[q.uO]=pe}initMessageLookup(){this.messageLookup[q.lc]=ae,this.messageLookup[q.TK]=st,this.messageLookup[q.NS]=ge,this.messageLookup[q.tH]=he,this.messageLookup[q.u1]=me,this.messageLookup[q.BG]=ye,this.messageLookup[q.vQ]=fe,this.messageLookup[q.Lw]=at}onMessageReceived(t){if(!t||!t.id||!this.handlerLookup[t.id])return void console.error("Messenger received invalid or unknown message.");const e=new this.handlerLookup[t.id];"function"==typeof e.execute?e.execute(t):console.error(`Messenger "${e.constructor.name}" is missing an execute function.`)}onMessageSend(t){t&&t.id&&"function"==typeof t.toObject?et.A.instance.sendMessage(t.toObject()):console.error("Messenger cannot send invalid or unknown message.")}}class Ie{execute(){c.A.isApp&&this.updateBookmark()}updateBookmark(){const t=s.A.instance;if("article"===R.A.instance.route&&t.app&&t.app.pageContext&&t.app.pageContext.documentId&&t.app.pageContext.collection){const e=F.instance;h.A.publish(a.pN,new z(t.app.pageContext.documentId,t.app.pageContext.collection,e.contains(t.app.pageContext.documentId,t.app.pageContext.collection)))}}}class ve{constructor(){this.user=g.A.instance,this.currentUserAccess={...this.user.access},this.settings=s.A.instance,this.tcDataModel=v.instance,this.bookmarks=F.instance,this.webAudio=ft.instance}execute(t){if(this.user.update(),this.currentUserAccess.paid===this.user.access.paid&&this.currentUserAccess.conditional===this.user.access.conditional&&this.currentUserAccess.noAds===this.user.access.noAds){if(this.currentUserAccess={...this.user.access},c.A.isApp?window.navigator.webBridge.globalFontsize(et.A.instance.appFontSize):this.webAudio.reloadLocaLStorage(),!this.user.hasNoAdsAccess&&this.tcDataModel.ready){const t=x.instance;t&&"function"==typeof t.reloadAds&&t.reloadAds()}this.bookmarks.reloadLocaLStorage()}else window.location.reload()}}const Se=Symbol("INSTANCE"),Ee=Symbol("SINGELTONENFORCER");class Pe{constructor(t){if(t!==Ee)throw new Error("Instantiation failed: Use SourcepointModel.instance instead of new.");this.init()}static get instance(){return this[Se]||(this[Se]=new Pe(Ee)),this[Se]}init(){this.message="",this.errorOccurred=!1}}const ke=Symbol("INSTANCE"),Ce=Symbol("SINGELTONENFORCER");class _e{constructor(t){if(t!==Ce)throw new Error("Instantiation failed: Use LanguageModel.instance instead of new.");this.init()}static get instance(){return this[ke]||(this[ke]=new _e(Ce)),this[ke]}init(){window.polygon&&window.polygon.componentLoader&&window.polygon.componentLoader.subscribe(a.Fw,this.onSwitchLanguageTriggered,this)}determineLanguage(){const t=Pt.A.getItem(l.AZ.lang.name),e=navigator.language.slice(0,2);let i=t;i||(i="de"===e?"de":"en"),this._language=i}onSwitchLanguageTriggered(t){t&&(this.language=t)}get language(){return this._language||this.determineLanguage(),this._language}set language(t){if(this._language===t)return this._language;return Pt.A.setItem(l.AZ.lang.name,t)||console.warn("LanguageModel: Unable to store new language value permantly because sessionStorage is not available"),this._language=t,window.polygon&&window.polygon.componentLoader&&window.polygon.componentLoader.publish(a.jV,this._language),this._language}}const Le=Symbol("INSTANCE"),Te=Symbol("SINGELTONENFORCER");class Oe{constructor(t){if(t!==Te)throw new Error("Instantiation failed: Use ScriptUtils.instance instead of new.");this.pendingScripts={},this.loadedScripts={},this.scriptUrls=s.A.instance&&s.A.instance.thirdparty&&s.A.instance.thirdparty.jsSources?s.A.instance.thirdparty.jsSources:{}}static get instance(){return this[Le]||(this[Le]=new Oe(Te)),this[Le]}load(t){return this.scriptUrls[t]?this.loadedScripts[t]?Promise.resolve():new Promise(((e,i)=>{let s=this.pendingScripts[t];s||(s=document.createElement("script"),s.src=this.scriptUrls[t],s.dataset.name=t),s.addEventListener("load",(t=>this.onScriptLoaded(t,e)),{once:!0}),s.addEventListener("error",(t=>this.onScriptError(t,i)),{once:!0}),this.pendingScripts[t]||(this.pendingScripts[t]=s,document.body.appendChild(s))})):Promise.reject(new Error(`ScriptUtils error: unknown script name "${t}"`))}getScriptUrl(t){return this.scriptUrls[t]?this.scriptUrls[t]:""}onScriptLoaded(t,e){const i=t.target,s=i.dataset.name;this.loadedScripts[s]=i,delete this.pendingScripts[s],e()}onScriptError(t,e){const i=t.target.dataset.name;delete this.pendingScripts[i],e(new Error(`ScriptUtils error: failed to load script "${i}" from ${this.scriptUrls[i]}`))}}const xe=["de","en"],Ne=Symbol("INSTANCE"),Be=Symbol("SINGELTONENFORCER");class Ue{constructor(t){if(t!==Be)throw new Error("Instantiation failed: Use Sourcepoint.instance instead of new.");const e=s.A.instance;if(this.settingsType=g.A.instance.hasNoAdsAccess?"noads":"default",this.settings=e.thirdparty&&e.thirdparty.sourcepoint&&e.thirdparty.sourcepoint[this.settingsType]?e.thirdparty.sourcepoint[this.settingsType]:void 0,e.disableSourcepoint||!this.settings)return;const i=!(!e.consent||"boolean"!=typeof e.consent.disabled)&&e.consent.disabled;g.A.instance.hasNoAdsAccess||i||m.A.isCrawler||(this.requestMessage="consent-layer"),this.pendingChoiceId=null,this.isReloadMessagesPending=!1,this.isMessagePending=!1,this.init()}static get instance(){return this[Ne]||(this[Ne]=new Ue(Be)),this[Ne]}init(){h.A.subscribe(a.GQ,this.openPrivacyManager,this),h.A.subscribe(a.iU,this.rejectAll,this),h.A.subscribe(a.X2,this.reloadMessages,this),h.A.subscribe(a.vu,this.onChoiceSelect,this),h.A.subscribe(a.Ud,this.onTCDataUpdated,this),h.A.subscribe(a.Fw,this.onLanguageSwitched,this),h.A.subscribe(a.wZ,this.onPageResume,this),window.addEventListener("error",(t=>{this.onWindowError(t)})),this.initAuthIdCookie(),this.initSourcepointConfig(),this.initPrivacyManagerButtons(),g.A.instance.isNewLoggedIn&&g.A.instance.hasNoAdsAccess?this.deleteConsentDataHistory().catch((t=>{console.error(t.message)})).finally((()=>{this.initSourcepointScript()})):this.initSourcepointScript()}initAuthIdCookie(){const t=g.A.instance.hasNoAdsAccess&&g.A.instance.userId;if(!t)return void r.A.remove(l.AZ.authId.name);const e=r.A.get(l.AZ.authId.name);let i;t&&(i=g.A.instance.userId),!i||e&&e===i||r.A.set(l.AZ.authId.name,i,{expires:l.AZ.authId.expires})}initSourcepointConfig(){const{accountId:t,baseEndpoint:e,propertyHref:i,propertyId:n,campaignEnv:o}=this.settings,a=s.A.instance,r=g.A.instance,l=a.page&&a.page.category&&a.page.category.route?a.page.category.route:"";window._sp_queue=[],window._sp_={config:{accountId:t,baseEndpoint:e,isSPA:!0,consentLanguage:xe.includes(_e.instance.language)?_e.instance.language:"de",gdpr:{},events:{onPrivacyManagerAction:(...t)=>{2===t.length&&t[0];const e=2===t.length?t[1]:t[0];this.onPrivacyManagerAction(e)},onPMCancel:()=>{this.onPrivacyManagerCancel()},onMessageReady:(...t)=>{t[0]&&"string"==typeof t[0]&&t[0];this.onMessageReady()},onMessageReceiveData:(...t)=>{2===t.length&&t[0];const e=2===t.length?t[1]:t[0];this.onReceiveMessageData(e)},onMessageChoiceSelect:(...t)=>{3===t.length&&t[0];const e=3===t.length?t[1]:t[0],i=3===t.length?t[2]:t[1];this.onMessageChoiceSelect(e,i)},onMessageChoiceError:t=>{this.onMessageChoiceError(t)},onConsentReady:(...t)=>{4===t.length&&t[0];const e=4===t.length?t[1]:t[0],i=4===t.length?t[2]:t[1];this.onConsentReady(e,i)},onError:(...t)=>{console.error("Sourcepoint onError",t)}},targetingParams:{platform:c.A.isApp?"app":"web",is_phone:m.A.isPhone,is_tablet:m.A.isTablet,is_mobile:m.A.isMobile,route:l,is_loggedIn:r.isLoggedIn,has_paid_access:r.hasPaidAccess,has_noAds_access:r.hasNoAdsAccess,has_conditional_access:r.hasConditionalAccess,disable_consent:!(!a.consent||"boolean"!=typeof a.consent.disabled)&&a.consent.disabled,lang:_e.instance.language}}},i?window._sp_.config.propertyHref=i:n&&(window._sp_.config.propertyId=n),o&&"public"!==o&&(window._sp_.config.campaignEnv=o),"article"===l&&(window._sp_.config.targetingParams.paywall_is_active=a.paywall&&a.paywall.attributes&&a.paywall.attributes.is_active,window._sp_.config.targetingParams.paywall_type=a.paywall&&a.paywall.category&&a.paywall.category.type?a.paywall.category.type:""),c.A.isApp&&(c.A.isAndroidApp?window._sp_.config.targetingParams.os="Android":c.A.isIOSApp&&(window._sp_.config.targetingParams.os="iOS"),window._sp_.config.targetingParams.app_version=c.A.appVersion),this.requestMessage&&(window._sp_.config.targetingParams.requestMessage=this.requestMessage)}initPrivacyManagerButtons(){const t=Array.from(document.querySelectorAll('a[href^="#sp_privacy_manager"]'));if(t&&t.length>0)for(let e=0;e<t.length;e++){const i=t[e],s=i.hash.split("#sp_privacy_manager_")[1]?i.hash.split("#sp_privacy_manager_")[1]:"";i.addEventListener("click",(t=>{t.preventDefault(),h.A.publish(a.GQ,s)}))}}initSourcepointScript(){Oe.instance.load(`sourcepoint_${this.settingsType}`).then((()=>{this.onScriptElementLoaded()})).catch((t=>{this.onScriptElementError(t)}))}openPrivacyManager(t=""){const{privacyManagerId:e}=this.settings;if(e&&window._sp_){if("function"==typeof window._sp_.loadPrivacyManagerModal)window._sp_.loadPrivacyManagerModal(e,t);else{if(!window._sp_.gdpr||"function"!=typeof window._sp_.gdpr.loadPrivacyManagerModal)return;window._sp_.gdpr.loadPrivacyManagerModal(e,t)}this.attachPrivacyManagerResizeFix(),h.A.publish(a.bA)}}reloadMessages(){this.isReloadMessagesPending=!0,this.destroyMessages(),this.executeMessaging()}rejectAll(){const t=s.A.instance?.translations?.notification;b.instance.postRejectAll().then((()=>{X.instance.addNotification({type:l.Fn,headline:t?.rejectConsentSuccess?.headline}),this.requestMessage&&"consent-layer"!==this.requestMessage||this.reloadMessages()})).catch((()=>{X.instance.addNotification({type:l.KP,headline:t?.rejectConsentFailure?.headline,description:t?.rejectConsentFailure?.description})}))}deleteConsentDataHistory(){return new Promise(((t,e)=>{const i=s.A.instance,n=i.thirdparty&&i.thirdparty.sourcepoint&&i.thirdparty.sourcepoint.default?i.thirdparty.sourcepoint.default:void 0,{siteId:o,baseEndpoint:a}=n;let r,l,c;try{r=JSON.parse(A.A.getItem(`_sp_user_consent_${o}`))}catch(t){}if(r&&r.gdpr&&r.gdpr.authId?l=r.gdpr.authId:r&&r.authId?l=r.authId:r&&r.gdpr&&r.gdpr.uuid?c=r.gdpr.uuid:r&&r.consentUUID&&(c=r.consentUUID),o&&(c||l)){const i=new URL(`${a}/consent/tcfv2/consent/v3/${o}`);l?i.searchParams.set("authId",l):c&&i.searchParams.set("consentUUID",c);const s={method:"DELETE",headers:{"Content-Type":"text/plain"}};fetch(i.href,s).then((i=>{200!==i.status&&e(new Error(`Sourcepoint failed to delete consent data history, consentUUID: ${c}`)),t()})).catch((()=>{e(new Error(`Sourcepoint failed to delete consent data history, consentUUID: ${c}`))})).finally((()=>{A.A.removeItem(`_sp_user_consent_${o}`)}))}else e(new Error("Sourcepoint failed to delete consent data history, no data"))}))}onReceiveMessageData(t){this.isReloadMessagesPending&&(h.A.publish(a.Pd),this.isReloadMessagesPending=!1),t&&t.msgDescription?(this.isMessagePending=!0,Pe.instance.message=t.msgDescription):h.A.publish(a._9)}onMessageReady(){c.A.isAndroidApp&&window.scrollY<=0&&setTimeout((()=>{window.scrollTo({top:10,left:0,behavior:"smooth"})}),100),this.isMessagePending&&(h.A.publish(a.Co,Pe.instance.message),this.isMessagePending=!1)}onMessageChoiceSelect(t,e){e&&(h.A.publish(a.o$,e),this.onChoiceSelect(e))}onMessageChoiceError(t){h.A.publish(a.VR),Pe.instance.errorOccurred=!0}onPrivacyManagerAction(t){if(this.detachPrivacyManagerResizeFix(),t&&t.purposeConsent&&t.vendorConsent){let e;"all"===t.purposeConsent&&"all"===t.vendorConsent?(e=l.PH.accept_all,this.onChoiceSelect(l.r7.accept_all)):"none"===t.purposeConsent&&"none"===t.vendorConsent?(e=l.PH.reject_all,this.onChoiceSelect(l.r7.reject_all)):"some"!==t.purposeConsent&&"some"!==t.vendorConsent||(e=l.PH.save_and_exit,this.onChoiceSelect(l.r7.accept_some)),h.A.publish(a._0,e)}}onPrivacyManagerCancel(){h.A.publish(a._0,l.PH.cancel)}onChoiceSelect(t){this.pendingChoiceId||(t===l.r7.accept_all||t===l.r7.accept_some||t===l.r7.reject_all?this.pendingChoiceId=t:h.A.publish(a.fw,t))}onConsentReady(t,e){void 0!==this.consentReadyTimeoutId&&clearTimeout(this.consentReadyTimeoutId),this.pendingChoiceId&&(this.consentReadyTimeoutId=setTimeout((()=>{const t=this.pendingChoiceId;this.pendingChoiceId=null,h.A.publish(a.fw,t),t!==l.r7.reject_all||this.requestMessage&&"consent-layer"!==this.requestMessage||this.reloadMessages()}),2e3)),c.A.isApp&&h.A.publish(a.pN,new ge(t,e))}onTCDataUpdated(t){}onScriptElementLoaded(){window._sp_&&window._sp_.config&&window._sp_.config.isSPA&&"function"==typeof window._sp_.executeMessaging&&window._sp_.executeMessaging()}onLanguageSwitched(t){t&&window._sp_&&window._sp_.config&&(window._sp_.config.consentLanguage=xe.includes(t)?t:"de",this.executeMessaging())}onPageResume(){this.reloadMessages()}onScriptElementError(t){console.error("Sourcepoint onScriptElementError",t),h.A.publish(a.VR),Pe.instance.errorOccurred=!0}onWindowError(t){const e=Oe.instance.getScriptUrl(`sourcepoint_${this.settingsType}`);e&&t.filename&&t.filename===e&&(console.error("Sourcepoint onWindowError",t),h.A.publish(a.VR),Pe.instance.errorOccurred=!0)}destroyMessages(){Array.from(document.querySelectorAll('body [id^="sp_message_container"]')).filter((t=>t&&t.style&&"none"!==t.style.display)).length>0&&window._sp_&&"function"==typeof window._sp_.destroyMessages&&window._sp_.destroyMessages()}executeMessaging(){window._sp_&&"function"==typeof window._sp_.executeMessaging&&window._sp_.executeMessaging()}attachPrivacyManagerResizeFix(){m.A.isMobileSafari&&(this.boundOnWindowResize||(this.boundOnWindowResize=()=>{setTimeout((()=>{window.scrollTo(0,1)}),500)}),window.addEventListener("resize",this.boundOnWindowResize))}detachPrivacyManagerResizeFix(){m.A.isMobileSafari&&this.boundOnWindowResize&&window.removeEventListener("resize",this.boundOnWindowResize)}}class Re{static isUrlArticleContent(t){let e=!1;if(t){const i=new URL(t).pathname.split("/");if(i.length>1){const s=i[i.length-1];let n=-1!==s.indexOf("-a-");n=n||-1!==s.indexOf("-fotostrecke-"),n=n||-1!==s.indexOf("-video-"),n=n||0===s.indexOf("a-"),n=n||0===s.indexOf("fotostrecke-"),n=n||0===s.indexOf("video-"),e=this.isHomeDomain(t)&&n}}return e}static isHomeDomain(t){let e=!1;if(null!=t){const i=new URL(t);e=i.host&&i.host===window.location.host}return e}static fixUrlParamsFragmentsOrder(t){let e;const i=t.indexOf("#"),s=t.indexOf("?");return-1!==i&&s>i?(e=t.substr(0,i),e+=t.substr(s),e+=t.substr(i,s-i)):e=t,e}static getReferrerFromUrl(t){const e=new URL(t);return e.searchParams.get("ref")?e.searchParams.get("ref"):void 0}}const Me=Symbol("INSTANCE"),De=Symbol("SINGELTONENFORCER");class Ve{constructor(t){if(t!==De)throw new Error("Instantiation failed: Use SARAsData.instance instead of new.");this.init()}static get instance(){return this[Me]||(this[Me]=new Ve(De)),this[Me]}init(){const t=s.A.instance;this.application=t.application?t.application:{},this.editorial=t.editorial?t.editorial:void 0,this.external=t.external?t.external:{},this.page=t.page?t.page:{},this.paywall=t.paywall?t.paywall:void 0}set application(t){if(this._application={},t&&t.info&&(this._application.info=t.info),c.A.isApp){let t="";c.A.isAndroidApp?t="Android:":c.A.isIOSApp&&(t="iOS:"),t+=c.A.appVersion,this._application.info||(this._application.info={}),this._application.info.app_version=t}}get application(){return this._application}set editorial(t){this._editorial=t?{info:{...t.info?t.info:{}},attributes:{...t.attributes?t.attributes:{}},category:{...t.category?t.category:{}},author:{...t.author?t.author:{}}}:void 0}get editorial(){return this._editorial}set external(t){this._external={},t.vg_wort&&(this._external.vg_wort=t.vg_wort)}get external(){return this._external}set page(t){const e={platform:c.A.isApp?"app":"web"},i=Re.getReferrerFromUrl(window.location.href);i&&(e.referrer=i);let s="";switch(p.instance.breakpoint){case"lg":s="desktop";break;case"md":s="tablet";break;case"sm":s="mobile"}const n={viewport:s,is_darkmode:p.instance.colorScheme===l.xP};this._page={info:Object.assign(e,t.info?t.info:{}),attributes:Object.assign(n,t.attributes?t.attributes:{}),category:{...t.category?t.category:{}}}}get page(){return this._page}set paywall(t){this._paywall=t?{...t}:void 0}get paywall(){return this._paywall}get user(){const t=g.A.instance,e=s.A.instance,i={};t.trackingId&&(i.sso_tracking_id=t.trackingId),et.A.instance.advertisingId&&(i.device_advertising_id=et.A.instance.advertisingId);const n={is_phone:m.A.isPhone,is_tablet:m.A.isTablet,is_mobile:m.A.isMobile},o={access:t.accessInfo,is_loggedIn:t.isLoggedIn,has_adbrain_enabled:t.hasAdbrainEnabled,has_paid_access:t.hasPaidAccess,has_spiegelNoAdsMonthly_access:t.hasNoAdsAccess,has_conditional_access:t.hasConditionalAccess};return void 0!==t.meteredStatus?.credits&&(o.metered_access_count=`${t.meteredStatus.credits}/${t.meteredStatus.maxCredits??"4"}|${t.meteredStatus?.nextRefresh??""}`),R.A.instance.isGiftArticle&&(o.has_gift_article_access=!(t.hasPaidAccess||e.paywall&&e.paywall.attributes&&e.paywall.attributes.is_active)),{info:{...i},segment:o,device:n}}}const Fe=Symbol("INSTANCE"),qe=Symbol("SINGELTONENFORCER"),$e="tlp";class ze{constructor(t){if(t!==qe)throw new Error("Instantiation failed: Use SARAs.instance instead of new.");this.init()}static get instance(){return this[Fe]||(this[Fe]=new ze(qe)),this[Fe]}init(){s.A.instance.disableAdobeLaunch?this.data={}:(this.data=Ve.instance,h.A.subscribe(a.zG,this.onAdPositionInitialized,this),h.A.subscribe(a.UY,this.onJWPlayerInitialized,this),h.A.subscribe(a.wZ,this.onPageResume,this),h.A.subscribe(a.HE,this.onAddBookmark,this),h.A.subscribe(a.ZO,this.onDeleteBookmark,this),h.A.subscribe(a.y9,this.onDeleteAllBookmarks,this),h.A.subscribe(a.Z$,this.push,this),!g.A.instance.hasMeteredStatus||g.A.instance.meteredStatus?.isReady?this.sendPageLoadEvent():h.A.subscribe(a.XN,this.sendPageLoadEvent,this))}onAdPositionInitialized(t){if(!t||!t.positionName||"string"!=typeof t.positionName)return;const e=!!t.containsAd,i=!!t.isEmpty,s=!!t.isBackfill,n=Array.isArray(t.size)?t.size:[void 0,void 0],o=t.platform||"",a=t.cls||void 0;this.sendAdPositionInitializedEvent(t.positionName,e,i,s,n,o,a)}onAddBookmark(t,e){t&&e&&"article"===e&&this.sendCustomButtonClickEvent("add bookmark",{articleId:t,source:"bookmark-button"})}onDeleteBookmark(t,e){t&&e&&"article"===e&&this.sendCustomButtonClickEvent("delete bookmark",{articleId:t,source:"bookmark-button"})}onDeleteAllBookmarks(t){t&&"article"===t&&this.sendCustomButtonClickEvent("delete all bookmarks",{source:"bookmark-button"})}onJWPlayerInitialized(t){t&&this.sendJWPlayerInitializedEvent(t)}onPageResume(t={}){t&&t.platform&&"app"===t.platform&&this.sendVirtualPageEvent("app_call",t.trigger,t.referrer)}sendCustomButtonClickEvent(t,e){if(!t)return;const i={event:{info:{action:"button_click",name:t},attributes:{source:`${$e}|webview|${e&&e.source?e.source:"button"}`}}};e&&e.articleId&&(i.editorial={info:{article_id:e.articleId}}),this.push(i)}sendJWPlayerInitializedEvent(t){if(!t)return;const e={event:{info:{action:"jw-init"},attributes:{player_id:t,source:`${$e}|webview|video-player`}}};this.push(e)}sendComponentViewEvent(t,e=""){if(!t)return;const i={event:{info:{action:"component_view",name:e},attributes:{component_id:t,source:`${$e}|webview|component`}}};this.push(i)}sendAdPositionInitializedEvent(t,e,i,s,n,o,a){if(!t)return;const r={event:{info:{action:"adpos-init"},attributes:{pos:t,contains_ad:e,is_empty:i,is_backfill:s,size:n,platform:o,cls:a,source:`${$e}|webview|advertisement`}}};this.push(r)}sendPageLoadEvent(){let t={};t=Object.assign(t,{event:{info:{action:"page_data_ready",name:"generic"},attributes:{current_url:`${s.A.instance.urls.base}${window.location.pathname}${window.location.search}`,source:`${$e}|webview|page-tracking`}}}),this.data.application&&(t=Object.assign(t,{application:this.data.application})),this.data.external&&(t=Object.assign(t,{external:this.data.external})),this.data.page&&(t=Object.assign(t,{page:this.data.page})),this.data.editorial&&(t=Object.assign(t,{editorial:this.data.editorial})),this.data.paywall&&(t=Object.assign(t,{paywall:this.data.paywall})),this.data.user&&(t=Object.assign(t,{user:this.data.user})),this.push(t)}sendVirtualPageEvent(t="generic",e="generic_recall",i=void 0){let s={};s=Object.assign(s,{event:{info:{action:"virtual_page",name:t},attributes:{label:e,source:`${$e}|webview|page-tracking`}}}),i&&(s.page={info:{referrer:i}}),this.push(s)}push(t){return!s.A.instance.disableAdobeLaunch&&(t.event&&t.event.info&&t.event.info.action?window.SARAs_data?(window.SARAs_data.push(t),!0):(console.error(`SARAs->push: SARAs_data is not defined: ${JSON.stringify(t)}`),!1):(console.error(`SARAs->push: Event Param action is required: ${JSON.stringify(t)}`),!1))}}class je{execute(t){const{query:e,form:i}=t;if(e.startsWith("//iqkeywords:")||e.startsWith("//iqdeployment:")){const t=e.startsWith("//iqkeywords:")?"iqkeywords":"iqdeployment",s=e.split(`//${t}:`)[1];let n=!1;n=s?d.A.setItem(`polygon_${t}`,s):d.A.removeItem(`polygon_${t}`),X.instance.addNotification({type:n?l.Fn:l.KP,headline:`${t} update ${n?"successful":"failed"}`}),n&&i&&"function"==typeof i.reset&&i.reset()}}}class We{execute(t){const{to:e,subject:i,body:s}=t,n=Lt.A.getMailtoUrl(e,i,s);n&&(window.location.href=n)}}class Ge{execute(t){const e=[];t&&Array.isArray(t.pushTags)&&t.pushTags.forEach((t=>{"string"==typeof t.tag&&"boolean"==typeof t.isSubscribed&&e.push({tag:t.tag,isSubscribed:t.isSubscribed})}));const i=new fe({pushTags:e,postponePermissionDialog:t&&t.postponePermissionDialog});h.A.publish(a.pN,i)}}const He=Symbol("INSTANCE"),Je=Symbol("SINGELTONENFORCER");class Ze{constructor(t){if(t!==Je)throw new Error("Instantiation failed: Use TriggerHandler.instance instead of new.");this.init()}static get instance(){return this[He]||(this[He]=new Ze(Je)),this[He]}init(){this.registerEventHandlers()}registerEventHandlers(){window.polygon&&window.polygon.componentLoader&&(window.polygon.componentLoader.subscribe(a.h$,this.onAccountTriggered,this),window.polygon.componentLoader.subscribe(a.fX,this.onLoginTriggered,this),window.polygon.componentLoader.subscribe(a.cs,this.onLogoutTriggered,this),window.polygon.componentLoader.subscribe(a.pS,this.onRegisterTriggered,this),window.polygon.componentLoader.subscribe(a.MG,this.onOfferTriggered,this),window.polygon.componentLoader.subscribe(a.F,this.onRestorePurchasesTriggered,this),window.polygon.componentLoader.subscribe(a.Ox,this.onNavigationTriggered,this))}onAccountTriggered(t={}){const{path:e}=t,{isApp:i}=c.A,{urls:n}=s.A.instance;if(i){et.A.instance.triggerAccount(t)}else if(e&&n&&n.backofficeBaseUrl){const t=new URL(e,n.backofficeBaseUrl);window.location.assign(t.href)}else n&&n.user&&n.user.account&&window.location.assign(n.user.account)}onLoginTriggered(t={}){const{targetUrl:e}=t,{isApp:i}=c.A;if(i){et.A.instance.triggerLogin({targetUrl:e})}else{const{urls:t}=s.A.instance;if(t&&t.user&&t.user.login){const i=new URL(t.user.login);e?i.searchParams.set("targetUrl",e):i.searchParams.has("targetUrl")||i.searchParams.set("targetUrl",this.defaultTargetUrl),window.location.assign(i.href)}}}onLogoutTriggered(){const{isApp:t}=c.A;if(t){et.A.instance.triggerLogout()}else{const{urls:t}=s.A.instance;t&&t.user&&t.user.logout&&window.location.assign(t.user.logout)}}onRegisterTriggered(t={}){const{targetUrl:e}=t,{isApp:i}=c.A;if(i){et.A.instance.triggerRegister({targetUrl:e})}else{const{urls:t}=s.A.instance;if(t&&t.user&&t.user.register){const i=new URL(t.user.register);e?i.searchParams.set("targetUrl",e):i.searchParams.has("targetUrl")||i.searchParams.set("targetUrl",this.defaultTargetUrl),window.location.assign(i.href)}}}onOfferTriggered(t={}){const{product:e,plan:i,targetUrl:n}=t;if(!e)return;const{isApp:o}=c.A;if(o){let t;const{subscriptions:n}=s.A.instance;"object"==typeof n&&Object.keys(n).includes(e)&&("string"==typeof n[e]?t=n[e]:Array.isArray(n[e])&&n[e].length>0&&(t=n[e][0])),t=t||e;et.A.instance.triggerInAppPurchase({product:t,plan:i})}else{const{urls:t}=s.A.instance;if(t&&t.offers&&t.offers[e]){const i=new URL(t.offers[e]);n?i.searchParams.set("targetUrl",n):i.searchParams.has("targetUrl")||i.searchParams.set("targetUrl",this.defaultTargetUrl),window.location.assign(i.href)}}}onRestorePurchasesTriggered(t={}){const{targetUrl:e}=t,{isApp:i}=c.A;if(i){et.A.instance.triggerRestorePurchases({targetUrl:e||this.defaultTargetUrl})}}onNavigationTriggered(t={}){const{page:e}=t,{targetUrl:i}=t,{urls:n}=s.A.instance;if(n?.pages&&n.pages[e]){const t=new URL(n.pages[e]);i?t.searchParams.set("targetUrl",i):t.searchParams.has("targetUrl")||t.searchParams.set("targetUrl",this.defaultTargetUrl),window.location.assign(t.href)}}get defaultTargetUrl(){const t=new URLSearchParams(window.location.search);return(t.get("targetUrl")?decodeURIComponent(t.get("targetUrl")):void 0)||window.location.href}}var Qe=i(732);const Ke="WARDEN_LIMIT_EXCEEDED",Ye="WARDEN_LIMIT_OK";class Xe extends Qe.A{constructor({baseUrl:t,site:e,userId:i,fingerprint:s,limit:n}){super(),t&&e&&i&&s&&n?(this.baseUrl=t,this.site=e,this.userId=i,this.fingerprint=s,this.limit=n,this.tickTimeoutRef=null,this.baseUrl.endsWith("/")||(this.baseUrl+="/"),this.init()):console.error("Warden requires baseUrl, site, userId, limit for correct instantiation.")}init(){this.initPageVisibilityAPI(),this.tick()}initPageVisibilityAPI(){this.hiddenPropertyName=void 0,this.visibilityChangeEventName=void 0,void 0!==document.hidden?(this.hiddenPropertyName="hidden",this.visibilityChangeEventName="visibilitychange"):void 0!==document.mozHidden?(this.hiddenPropertyName="mozHidden",this.visibilityChangeEventName="mozvisibilitychange"):void 0!==document.msHidden?(this.hiddenPropertyName="msHidden",this.visibilityChangeEventName="msvisibilitychange"):void 0!==document.webkitHidden?(this.hiddenPropertyName="webkitHidden",this.visibilityChangeEventName="webkitvisibilitychange"):this.visibilityChangeEventName="visibilitychange",this.currentVisibilityState=this.visibilityState,this.boundOnVisibilityChange=()=>this.onVisibilityChange(this.visibilityState),window.document.addEventListener(this.visibilityChangeEventName,this.boundOnVisibilityChange),this.boundOnPageHide=()=>this.onVisibilityChange("hidden"),window.addEventListener("pagehide",this.boundOnPageHide)}onVisibilityChange(t){this.currentVisibilityState!==t&&(this.currentVisibilityState=t,"visible"===t?this.handleWindowIsActive():"hidden"===t&&this.handleWindowIsInactive())}get visibilityState(){return this.hiddenPropertyName?window.document[this.hiddenPropertyName]?"hidden":"visible":void 0!==window.document.visibilityState?window.document.visibilityState:void 0}handleWindowIsInactive(){this.tickTimeoutRef&&(clearTimeout(this.tickTimeoutRef),this.tickTimeoutRef=null,this.remove())}handleWindowIsActive(){this.dispatchWardenEvent(Ye),this.tickTimeoutRef||this.tick()}tick(){"visible"===this.visibilityState?fetch(this.tickUrl,{method:"GET"}).then((t=>{403===t.status?this.dispatchWardenEvent(Ke):this.dispatchWardenEvent(Ye)})).catch((t=>console.error("Warden - Error while fetching tick:",t))).finally((()=>{this.tickTimeoutRef=setTimeout((()=>this.tick()),3e3)})):this.tickTimeoutRef=null}remove(){fetch(this.removeUrl,{method:"GET",keepalive:!0}).then((()=>this.dispatchWardenEvent(Ye))).catch((t=>console.error("Warden - Error while fetching delete:",t)))}allow(){fetch(this.allowUrl,{method:"GET"}).then((()=>this.dispatchWardenEvent(Ye))).catch((t=>console.error("Warden - Error while fetching allow:",t)))}dispatchWardenEvent(t){if(!t)return;const e=new CustomEvent(t);super.dispatchEvent(e)}get tickUrl(){const t=new URL(`${this.baseUrl}api/v1/tick`);return t.searchParams.set("site",this.site),t.searchParams.set("user_id",this.userId),t.searchParams.set("fingerprint",this.fingerprint),t.searchParams.set("limit",this.limit),t.href}get removeUrl(){const t=new URL(`${this.baseUrl}api/v1/remove`);return t.searchParams.set("site",this.site),t.searchParams.set("user_id",this.userId),t.searchParams.set("fingerprint",this.fingerprint),t.searchParams.set("limit",this.limit),t.href}get allowUrl(){const t=new URL(`${this.baseUrl}api/v1/allow`);return t.searchParams.set("site",this.site),t.searchParams.set("user_id",this.userId),t.searchParams.set("fingerprint",this.fingerprint),t.searchParams.set("limit",this.limit),t.href}destroy(){window.document.removeEventListener(this.visibilityChangeEventName,this.boundOnVisibilityChange),window.removeEventListener("pagehide",this.boundOnPageHide),super.destroy()}}class ti{static endsWith(t,e){return!(!t||"string"!=typeof t||!e||"string"!=typeof e)&&(-1!==t.indexOf(e)&&t.indexOf(e)+e.length===t.length)}static getRandomString(t=4,e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789"){const i=e.length;let s="";for(let n=0;n<t;n++)s+=e.charAt(Math.floor(Math.random()*i));return s}static kebabCase(t){return[" ","_"].includes(t)?t:t.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[_\s]/,"-").toLowerCase()}static capitalizeFirstLetter(t){return"string"!=typeof t?t:t.charAt(0).toUpperCase()+t.slice(1)}}const ei=Symbol("INSTANCE"),ii=Symbol("SINGELTONENFORCER");class si{constructor(t){if(t!==ii)throw new Error("Instantiation failed: Use UserCapping.instance instead of new.");this.storageObject=null,this.boundOnWardenLimitExceeded=null,this.boundOnWardenLimitOk=null,this.init()}static get instance(){return this[ei]||(this[ei]=new si(ii)),this[ei]}init(){const t=s.A.instance.warden||{},e=!!t.enabled,{hasPaidAccess:i,hasNoAdsAccess:n,userId:o,sessionLimit:r}=g.A.instance;if(!e||!o||!r||!i&&!n)return;this.storageObject=new M.A("warden","local");let l="";this.storageObject.getItem("fingerprint")?l=this.storageObject.getItem("fingerprint"):(l=ti.getRandomString(16),this.storageObject.setItem("fingerprint",l)),this.warden=new Xe({baseUrl:t.baseUrl||"",site:s.A.instance.domain||"",userId:o,fingerprint:l,limit:r}),this.boundOnWardenLimitExceeded=()=>this.onWardenLimitExceeded(),this.warden.addEventListener(Ke,this.boundOnWardenLimitExceeded),this.boundOnWardenLimitOk=()=>this.onWardenLimitOk(),this.warden.addEventListener(Ye,this.boundOnWardenLimitOk),h.A.subscribe(a.b6,this.onUserCappingAllow,this)}onWardenLimitExceeded(){h.A.publish(a.$M)}onWardenLimitOk(){h.A.publish(a.w1)}onUserCappingAllow(){this.warden&&"function"==typeof this.warden.allow&&this.warden.allow()}}class ni extends Qe.A{constructor(){super(),this.state=null,this.isInitialized=!1,this.isPlayPending=!0,this.init()}init(){const t=ft.instance;t&&(this.state={mode:t.mode,clip:t.clip?JSON.parse(JSON.stringify(t.clip)):null,isPaused:t.isPaused,isEnded:t.isEnded,currentTime:t.currentTime,duration:t.duration,playbackRate:t.playbackRate,volume:t.volume},o.A.effect((()=>this.onUpdateMode(t.mode))),o.A.effect((()=>this.onUpdateClip(t.clip))),o.A.effect((()=>this.onUpdateIsPaused(t.isPaused))),o.A.effect((()=>this.onUpdateIsEnded(t.isEnded))),o.A.effect((()=>this.onUpdateDuration(t.duration))),o.A.effect((()=>this.onUpdateCurrentTime(t.currentTime))),o.A.effect((()=>this.onUpdatePlaybackRate(t.playbackRate))),o.A.effect((()=>this.onUpdateVolume(t.volume))),this.isInitialized=!0)}onUpdateMode(t){this.state.mode=t}onUpdateClip(t){this.state.clip=t?JSON.parse(JSON.stringify(t)):null,this.isPlayPending=!0,t?this.dispatchWebAudioEvent("WEB_AUDIO_EVENT_CLIP"):this.dispatchWebAudioEvent("WEB_AUDIO_EVENT_CLEAR")}onUpdateIsPaused(t){this.state.isPaused=!!t,t?this.dispatchWebAudioEvent("WEB_AUDIO_EVENT_PAUSE"):this.isPlayPending?(this.dispatchWebAudioEvent("WEB_AUDIO_EVENT_PLAY"),this.isPlayPending=!1):this.dispatchWebAudioEvent("WEB_AUDIO_EVENT_RESUME")}onUpdateIsEnded(t){this.state.isEnded=!!t,t&&this.dispatchWebAudioEvent("WEB_AUDIO_EVENT_END")}onUpdateDuration(t){this.state.duration=t}onUpdateCurrentTime(t){this.state.currentTime=t,this.dispatchWebAudioEvent("WEB_AUDIO_EVENT_TIME")}onUpdatePlaybackRate(t){this.state.playbackRate=t,this.dispatchWebAudioEvent("WEB_AUDIO_EVENT_PLAYBACK_RATE")}onUpdateVolume(t){this.state.volume=t,this.dispatchWebAudioEvent("WEB_AUDIO_EVENT_VOLUME")}dispatchWebAudioEvent(t){if(!this.isInitialized)return;const e=Object.assign(this.state,{action:t});super.dispatchEvent(new CustomEvent("WEB_AUDIO_EVENT",{detail:e}))}}class oi{defaultData(){return{}}constructor(){this.el=arguments[0],"undefined"!=typeof jQuery&&(this.$el=jQuery(this.el)),this.data=arguments[1],this.__mediator=arguments[2],this._configureData()}_configureData(){const t={};this.el&&this.el.attributes&&[].forEach.call(this.el.attributes,(e=>{if(e&&e.name&&/^data-/.test(e.name)){var i=e.name.substr(5).replace(/-(.)/g,((t,e)=>e.toUpperCase()));t[i]=e.value}})),this.data=Object.assign(this.defaultData?this.defaultData():{},t,this.data)}bind(){for(var t=0;t<arguments.length;t++){const e=arguments[t];this[e]=this[e].bind(this)}}publish(){this.__mediator.publish(...arguments)}subscribe(t,e){this.__mediator.subscribe(t,e,this)}unsubscribe(t,e){this.__mediator.unsubscribe(t,e,this)}scan(t){this.__mediator.scan(t)}defer(t,e=17){setTimeout(t,e)}destroy(){}}class ai{static isEqual(t,e){if(!Array.isArray(t)||!Array.isArray(e))throw new Error("ArrayUtils isEqual: Missing or malformed parameters, expected two Arrays");if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}}const ri=Symbol("INSTANCE"),li=Symbol("SINGELTONENFORCER");class ci{constructor(t){if(t!==li)throw new Error("Instantiation failed: Use TeaserRenderer.instance instead of new.");this.init()}static get instance(){return this[ri]||(this[ri]=new ci(li)),this[ri]}init(){this.prototypes={};document.querySelectorAll("template[data-teaser-prototype]").forEach((t=>{const{variant:e,type:i,domain:s}=t.dataset;e&&i&&s&&(this.prototypes[`${e}-${i}-${s}`]=t)}))}create(t={},e=l.Y7){const i=s.A.instance.domain,n=t.domain||"",o=t.type||"",a=Array.isArray(t.flags)?t.flags:[],r=Array.isArray(t.iconAuxiliaries)?t.iconAuxiliaries:[],c=this.prototypes[`${e}-${o}-${n}`]||this.prototypes[`${e}-news-${n}`]||this.prototypes[`${e}-${o}-${i}`]||this.prototypes[`${e}-news-${i}`]||this.prototypes[`${e}-card-${n}`]||this.prototypes[`${e}-card-${i}`],h=c&&c.content&&c.content.firstElementChild?c.content.firstElementChild.cloneNode(!0):null;if(!h)return console.warn(`TeaserFactory.render failed: No prototype found for teaser variant "${e}"`),null;const d=Array.from(h.querySelectorAll("[data-topmark-flag-name]"));let u=!1;Array.isArray(d)&&d.forEach((t=>{Array.isArray(a)&&a.includes(t.dataset.topmarkFlagName)?u=!0:t.parentElement.remove()}));const p=h.querySelector('[data-topmark-el="text"]');t.headline&&t.topmark&&(u||!p)&&(t.headline=`${t.topmark}: ${t.headline}`,delete t.topmark),!t.topmark&&p&&p.remove();const g=h.querySelector('[data-topmark-el="container"]');g&&(0===a.length&&!t.topmark||0===g.children.length)&&g.remove();const m=Array.from(h.querySelectorAll("[data-flag-name]"));Array.isArray(m)&&Array.isArray(a)&&m.forEach((t=>{a.includes(t.dataset.flagName)||t.remove()}));const y=Array.from(h.querySelectorAll("[data-contains-flags]"));Array.isArray(y)&&y.forEach((t=>{0!==a.length&&0!==t.children.length||t.remove()}));const f=Array.from(h.querySelectorAll("[data-flag-button-name]"));Array.isArray(f)&&f.forEach((e=>{t.style&&t.style===e.dataset.flagButtonName||e.remove()}));const b=Array.from(h.querySelectorAll("[data-icon-auxiliary]"));Array.isArray(b)&&Array.isArray(r)&&b.forEach((t=>{const e=t.dataset.iconAuxiliary||"";r.includes(e)||t.remove()}));const A=Array.from(h.querySelectorAll("[data-image]"));Array.isArray(A)&&!t.imageId&&A.forEach((e=>{if(t.imageSrc){e.querySelector("img").dataset.src=t.imageSrc}else e.remove()}));const w=Array.from(h.querySelectorAll("[data-headline-image]"));Array.isArray(w)&&!t.headlineImageId&&w.forEach((t=>{t.remove()}));const I=j.A.populateElement(h,t);let v=I.querySelectorAll("[data-auxiliary]");v.forEach((t=>{0===t.textContent.length&&(t.nextElementSibling.hasAttribute("data-auxiliary-bull")&&t.nextElementSibling.remove(),t.remove())})),v=I.querySelectorAll("[data-auxiliary]");const S=I.querySelector("[data-icon-auxiliary][data-auxiliary-bull]");return S&&0===v.length&&S.remove(),I}blocksContentArticleTeaserFull({teasers:t=[],headlineOffset:e=!1,showSeparator:i=!0}){const s=document.createElement("div");if(s.className="relative w-full flex flex-wrap",0===t.length)return s;let n=0,o=0,a=0,r=0;return t.forEach(((c,h)=>{let d=r;const u=0===h,p=h>=t.length-1,g=this.createTeaserWrapper(c);if(u&&e&&g.classList.add("sm:-mt-16"),"xxl"===c.layout){if(n=12,o=12,a=12,d=r+1,!u){const t=this.createBorderSeparator({direction:"horizontal",additionalClassesString:"sm:hidden"});s.appendChild(t)}const t=this.create({...c},l.e_);g.appendChild(t)}else if("m"===c.layout){if(n=12,o+=6,a+=4,a>=12&&16!==a&&(d+=1),!u){const t=this.createBorderSeparator({direction:"horizontal",additionalClassesString:`${a<=12?"lg:hidden":""}${o<=12?" md:hidden":""}`});s.appendChild(t)}o>12&&(o=6),a>12&&(a=4);const t=this.create({...c},l.dT);if(g.appendChild(t),i&&!p){const t=this.createBorderSeparator({direction:"vertical",additionalClassesString:`${a>=12?"lg:hidden":""}${o>=12?" md:hidden":""} sm:hidden`});g.appendChild(t)}}s.appendChild(g),r=d})),s}createTeaserWrapper(t){const e=document.createElement("div");return"xxl-title"===t.layout?e.className="z-10 lg:w-10/12 md:w-full sm:w-full":"m"===t.layout?e.className="z-10 lg:w-4/12 md:w-6/12 sm:w-full relative":e.className="z-10 w-full",e.setAttribute("data-area",`article_teaser>${t.type?t.type:"unknown"}${t.layout?`-${t.layout}`:""}`),e.setAttribute("data-block-el","articleTeaser"),e.setAttribute("data-sara-click-el","article_teaser"),e.setAttribute("data-pos",`${t.pos}`),e}createBorderSeparator({direction:t="horizontal",additionalClassesString:e=""}){let i;return i="vertical"===t?j.A.createElementByPrototypeId("prototype-border-separator-vertical"):j.A.createElementByPrototypeId("prototype-border-separator"),i&&(i=j.A.populateElement(i,{additionalClassesString:e})),i}}class hi{static convertArticleToTeaser(t){const e={};if(e.id=t.id?t.id:"",e.collection="article",e.domain=t.domain?t.domain:s.A.instance.domain,e.channel=t.channel&&t.channel.title?t.channel.title:"",e.headline=t.title?t.title:"",e.topmark=t.heading?t.heading:"",e.text=t.intro?t.intro:"",e.type=t.type?t.type:"news",e.style=t.teaser&&t.teaser.type?t.teaser.type:t.style||"default",e.url=t.url?t.url:"",e.imageId=t.header_image?t.header_image:"",!e.url||!e.url.length)return null;e.flags=[];const i=hi.getArticlePaidFlag(t);i&&e.flags.push(i);const n=s.A.instance.domain;let o=t.domain?t.domain:"";const a=hi.getArticleSubdomain(t);a&&(o=a),t.forward_to_canonical_url&&t.canonical_url&&(t.canonical_url.includes("spiegel.de/dein/")?(e.domain="spon",o="dein"):t.canonical_url.includes("spiegel.de")?(e.domain="spon",o="spon"):t.canonical_url.includes("manager-magazin.de/hbm/")||t.canonical_url.includes("manager-magazin.de/harvard/")?(e.domain="mmo",o="hbm"):t.canonical_url.includes("manager-magazin.de")?(e.domain="mmo",o="mmo"):t.canonical_url.includes("11freunde.de")?(e.domain="elf",o="elf"):t.canonical_url.includes("effilee.de")&&(e.domain="effi",o="effi"),e.flags.push("mmo")),n!==o&&e.flags.push(o),t.is_live&&e.flags.push("live"),t.is_breaking&&e.flags.push("breaking");e.style&&["gallery","video","audio"].includes(e.style)&&e.flags.push(e.style),e.iconAuxiliaries=[],"audio"===e.style?e.iconAuxiliaries.push("Audio"):"video"===e.style?e.iconAuxiliaries.push("Video"):"gallery"===e.style?e.iconAuxiliaries.push("Gallery"):e.iconAuxiliaries.push("Text");const r=t.teaser&&Number.isInteger(t.teaser.length)?t.teaser.length:0;if(r)if("gallery"===e.style)e.length=`${r} ${1===r?"Bild":"Bilder"}`,e.auxiliaryLength=e.length;else{const t=Math.round(r/60),i=r%60;e.length=`${`${t}`.padStart(2,"0")}:${`${i}`.padStart(2,"0")}`,e.auxiliaryLength=`${t<1?1:t} Min`}const l=t.publish_date?new Date(1e3*t.publish_date).toLocaleDateString("de-DE",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"";e.timestamp=l?`${l} Uhr`:"";const c=t.author_details_prefix?`${t.author_details_prefix} `:"Von ";let h=t.author_details_suffix?t.author_details_suffix:"";if(e.meta="",Array.isArray(t.authors)&&t.authors.length>0){let i="";t.authors.length>0&&(i=c,t.authors.forEach(((s,n)=>{if(!s||!s.name)return;const o=0===n,a=n===t.authors.length-1;o&&s.image&&!e.headlineImageId&&(e.headlineImageId=s.image),a&&t.authors.length>1?i+=" und ":0!==n&&(i+=", "),i+=s.name})));const n=s.A.instance.text&&s.A.instance.text.authorDetailsSuffix&&s.A.instance.text.authorDetailsSuffix.removeWhitespaceBeforeCharacters?s.A.instance.text.authorDetailsSuffix.removeWhitespaceBeforeCharacters:[];h&&Array.isArray(n)&&(n.includes(h.charAt(0))||(h=` ${h}`)),e.meta=i+h}return e}static getArticlePaidFlag(t){let e="",i=t.access_level?t.access_level:"free";return"conditional"===i&&(i=g.A.instance.hasConditionalAccess?"free":"paid"),"paid"===i&&(e="plus-paid"),e}static getArticleSubdomain(t){let e="";const i=t.channel&&t.channel.slug?t.channel.slug:"";return"hbm"===i&&(e="hbm"),"deinspiegel"===i&&(e="dein"),e}}class di{static convertRecipeToTeaser(t){const e={};if(e.id=t.id?t.id:"",e.collection="recipe",e.domain=t.domain?t.domain:s.A.instance.domain,e.headline=t.title?t.title:"",e.topmark=t.heading?t.heading:"",e.text=t.intro?t.intro:"",e.type="recipe",e.style="default",e.url=t.url?t.url:"",e.imageId=t.header_image?t.header_image:"",!e.url||!e.url.length)return null;e.flags=[];const i=di.getRecipePaidFlag(t);i&&e.flags.push(i);const n=s.A.instance.domain,o=t.domain?t.domain:"";n!==o&&e.flags.push(o);const a=(t.prep_time&&Number.isInteger(t.prep_time)?t.prep_time:0)+(t.cook_time&&Number.isInteger(t.cook_time)?t.cook_time:0);let r=Math.round(a);const l=Math.floor(r/60);let c;r%=60,l>0&&(c=`${l} Std`),r>0&&(c=c?`${c} `:"",c=`${c+r} Min`),c&&(e.iconAuxiliaries=["Briefing"]),e.auxiliaryLength=c;const h=[];return["cuisine","main_ingredient","categories"].forEach((e=>{Array.isArray(t[e])&&t[e].length>0&&t[e].forEach((t=>{t.title&&h.push(t.title)}))})),e.meta=h.join(", "),e}static getRecipePaidFlag(t){let e="",i=t.access_level?t.access_level:"free";return"conditional"===i&&(i=g.A.instance.hasConditionalAccess?"free":"paid"),"paid"===i&&(e="plus-paid"),e}}const ui=Symbol("INSTANCE"),pi=Symbol("SINGELTONENFORCER");class gi{constructor(t){if(t!==pi)throw new Error("Instantiation failed: Use SiteSearchAPI.instance instead of new.");this.init()}static get instance(){return this[ui]||(this[ui]=new gi(pi)),this[ui]}init(){const t=s.A.instance;t.thirdparty&&t.thirdparty.sitesearch&&t.thirdparty.sitesearch.apiUrl?this.apiUrl=t.thirdparty.sitesearch.apiUrl:console.error("SiteSearchAPI requires apiUrl for correct instantiation.")}getTeasersBySearchOptions(t={}){const{query:e,segments:i,author:s,fields:n,after:o,before:a,cooktimeMin:r,cooktimeMax:l,subdimensions:c,pageSize:h,page:d}=t;if(!i||!Array.isArray(i))return Promise.reject(new Error("SiteSearchAPI getTeasersBySearchOptions - missing required param `segments`"));if((!e||"string"!=typeof e)&&(!s||"string"!=typeof s)&&!i.length>0)return Promise.reject(new Error("SiteSearchAPI getTeasersBySearchOptions - missing required param `query` or `author`, please provide either or both"));const u=new URL(`${this.apiUrl}/search`);if(u.searchParams.set("segments",i.join(",")),e&&"string"==typeof e&&u.searchParams.set("q",e),s&&"string"==typeof s&&u.searchParams.set("author",s),n&&"string"==typeof n&&u.searchParams.set("fields",n),Number.isInteger(o)&&u.searchParams.set("after",o),Number.isInteger(a)&&u.searchParams.set("before",a),Number.isInteger(r)&&u.searchParams.set("cook_time_min",r),Number.isInteger(l)&&u.searchParams.set("cook_time_max",l),h&&Number.isInteger(h)&&h>=10&&u.searchParams.set("page_size",h),Number.isInteger(d)&&u.searchParams.set("page",d),c&&Object.keys(c).length>0){let t="";Object.keys(c).forEach((e=>{Array.isArray(c[e])&&c[e].length>0&&(t&&(t+="|"),t+=`${e}:${c[e]}`)})),t&&u.searchParams.set("recipe_dimensions",t)}return this.fetchUrl(u).then((t=>(t.success&&(t.teasers=Array.isArray(t.results)?t.results.map((t=>"recipe"===t.collection?di.convertRecipeToTeaser(t):hi.convertArticleToTeaser(t))):[],delete t.results),Promise.resolve(t))))}getTeasersByIds(t=[]){if(!t||!Array.isArray(t)||0===t.length||t.filter((t=>"string"!=typeof t)).length)return Promise.reject(new Error("SiteSearchAPI getTeasersByIds - missing or malformed required param `id`"));const e=new URL(`${this.apiUrl}/fetch`);return e.searchParams.set("ids",t.join(",")),this.fetchUrl(e).then((t=>{if(!t.success||!t.results||!Array.isArray(t.results))return Promise.resolve({success:!1,code:t.code||""});const e=t.results.map((t=>"recipe"===t.collection?di.convertRecipeToTeaser(t):hi.convertArticleToTeaser(t))),i=t.numResults||e.length;return Promise.resolve({success:!0,numResults:i,teasers:e})}))}fetchUrl(t){return fetch(t,{method:"GET",headers:{"Content-Type":"text/plain"}}).then((t=>t.json())).then((t=>{if(t.code)return Promise.resolve({success:!1,code:t.code});const e=t.results&&Array.isArray(t.results)?t.results:[],i=Number.isInteger(t.num_results)?t.num_results:e.length,s=t.aggregations?t.aggregations:{};return Promise.resolve({success:!0,numResults:i,results:e,aggregations:s})})).catch((()=>(console.warn(`SiteSearchAPI fetchUrl – failed to fetch url "${t}"`),Promise.resolve({success:!1,code:""}))))}}const mi="STATE_LOADING",yi="STATE_EMPTY",fi="STATE_ERROR",bi="STATE_DEFAULT";const Ai="STATE_ACTIVE",wi="STATE_INACTIVE";const Ii="STATE_LOADING",vi="STATE_EMPTY",Si="STATE_ERROR",Ei="STATE_DEFAULT";const Pi="STATE_LOADING",ki="STATE_EMPTY",Ci="STATE_ERROR",_i="STATE_DEFAULT";const Li=Symbol("INSTANCE"),Ti=Symbol("SINGELTONENFORCER");class Oi{constructor(t){if(t!==Ti)throw new Error("Instantiation failed: Use BrowserHistoryService.instance instead of new.");this.registeredLayers={},this.browserHistoryLayers=[],this.currentIndex=window.history?0:-1,this.currentHash="",this.id=Date.now(),this.init()}static get instance(){return this[Li]||(this[Li]=new Oi(Ti)),this[Li]}init(){window.history&&(window.history.state&&Number.isInteger(window.history.state.index)?this.currentIndex=window.history.state.index:(this.currentIndex=window.history.length-1,window.history.replaceState({layerServiceId:this.id,index:this.currentIndex,hash:"",isInitState:!0},""))),this.boundOnKeyDown=t=>this.onKeyDown(t),window.document.addEventListener("keydown",this.boundOnKeyDown),window.polygon&&window.polygon.componentLoader&&(window.polygon.componentLoader.subscribe(a.vh,this.onCloseLayerTriggered,this),window.polygon.componentLoader.subscribe(a.no,this.onOpenLayerTriggered,this)),window.addEventListener("popstate",(t=>this.onPopstate(t)))}register(t){t&&"string"==typeof t.id&&"string"==typeof t.hash&&"function"==typeof t.close&&"function"==typeof t.open?this.registeredLayers[t.id]=t:console.error("LayerService registration failed: layer needs to implement an id and hash string and a close and open function")}addLayerToBrowserHistory(t){if(this.currentHash&&this.currentHash===t.hash)return!1;if(window.history)if(window.history.state&&window.history.state.hash&&window.history.state.hash===t.hash){this.currentHash=t.hash?t.hash:"";const e={layerServiceId:this.id,index:this.currentIndex,hash:this.currentHash};window.history.replaceState(e,"",t.hash?`#${t.hash}`:"")}else{this.currentIndex<this.browserHistoryLayers.length-1&&(this.browserHistoryLayers=this.browserHistoryLayers.slice(0,this.currentIndex+1)),this.currentIndex+=1,this.currentHash=t.hash?t.hash:"";const e={layerServiceId:this.id,index:this.currentIndex,hash:this.currentHash};window.history.pushState(e,"",this.currentHash?`#${this.currentHash}`:"")}else this.currentIndex+=1;return this.browserHistoryLayers[this.currentIndex]=t,this.openLayer(this.currentIndex),this.onActiveLayerChanged(),!0}openLayer(t){const e=this.browserHistoryLayers[t];return!(!e||"function"!=typeof e.open)&&(e.open(),window.polygon&&window.polygon.componentLoader&&window.polygon.componentLoader.publish(a.aj,e.id),!0)}closeLayer(t){const e=this.browserHistoryLayers[t];return!(!e||"function"!=typeof e.close)&&(e.close(),window.polygon&&window.polygon.componentLoader&&window.polygon.componentLoader.publish(a.ru,e.id),!0)}back(){void 0!==this.browserHistoryLayers[this.currentIndex]&&(window.history&&"function"==typeof window.history.go?window.history.go(-1):(this.closeLayer(this.currentIndex),this.currentIndex=this.currentIndex>=0?this.currentIndex-1:-1,this.onActiveLayerChanged()))}goTo(t){if(this.currentIndex>t){const e=t>=0?t+1:0;for(let t=this.currentIndex;t>=e;t--)this.closeLayer(t);this.currentIndex=t,this.onActiveLayerChanged()}else if(this.currentIndex<t){for(let e=this.currentIndex>=0?this.currentIndex+1:0;e<=t;e++)this.openLayer(e);this.currentIndex=t,this.onActiveLayerChanged()}}restoreLayerByHash(t){let e=!1;Object.keys(this.registeredLayers).forEach((i=>{const s=this.registeredLayers[i];e||s.hash!==t||(this.addLayerToBrowserHistory(s),e=!0)}))}onPopstate(t){if(!t||!t.state)return;let e,i="",s="";if(t.state.layerServiceId===this.id){if(e=t.state&&Number.isInteger(t.state.index)?t.state.index:void 0,i=t.state&&t.state.hash?t.state.hash:"",t.state&&t.state.isInitState&&this.windowHash&&window.history){const t={layerServiceId:this.id,index:Number.isInteger(e)?e:this.currentIndex,hash:""};window.history.replaceState(t,"",window.location.pathname+window.location.search)}}else if(e=t.state&&Number.isInteger(t.state.index)?t.state.index:void 0,this.currentHash!==this.windowHash)s=this.windowHash;else if(window.history){const t={layerServiceId:this.id,index:Number.isInteger(e)?e:this.currentIndex,hash:""};window.history.replaceState(t,"",window.location.pathname+window.location.search)}void 0!==e&&this.currentIndex!==e&&(this.goTo(e),this.currentHash=i),s&&this.restoreLayerByHash(s)}onKeyDown(t){t.defaultPrevented||"Escape"!==t.key&&"Esc"!==t.key&&27!==t.keyCode||void 0===this.browserHistoryLayers[this.currentIndex]||(t.preventDefault(),this.back())}onOpenLayerTriggered(t){this.registeredLayers[t]&&"function"==typeof this.registeredLayers[t].close&&"function"==typeof this.registeredLayers[t].open&&this.addLayerToBrowserHistory(this.registeredLayers[t])}onCloseLayerTriggered(){this.back()}onActiveLayerChanged(){const t=this.browserHistoryLayers[this.currentIndex];t&&t.id&&window.polygon&&window.polygon.componentLoader&&window.polygon.componentLoader.publish(a.M2,t.id)}get windowHash(){return window.location.hash?window.location.hash.substring(1):""}}class xi{constructor(t,e){t&&t instanceof Element?(this.pinchCanvas=t,this.pinchTarget=e||this.pinchCanvas,this.scaleMin=1,this.scaleMax=2.3,this.scaleThreshold=1.65,this.transformProperty=Array.prototype.slice.call(getComputedStyle(this.pinchCanvas)).filter((t=>t.match(/^(-webkit-|-moz-|-ms-|-o-)?transform$/))).pop(),this.isInitalized=!1,this.isAttached=!1,this.isZoomed=!1,this.isZoomOngoing=!1,this.isPinchOngoing=!1,this.transitionDuration=200,this.scalingFactor=1,this.pinchStartScalingFactor=null,this.isPanning=!1,this.translation={x:0,y:0},this.panStartPointerPosition={x:null,y:null},this.panStartTranslation={x:null,y:null},this.isNativeTouchOngoing=!1,this.nativeTouchStartPosition={x:null,y:null},this.boundOnPinch=t=>this.onPinch(t),this.boundOnPinchStart=()=>this.onPinchStart(),this.boundOnPinchEnd=()=>this.onPinchEnd(),this.boundOnZoomedIn=()=>this.onZoomedIn(),this.boundOnZoomedOut=()=>this.onZoomedOut(),this.boundOnPanStart=t=>this.onPanStart(t),this.boundOnPan=t=>this.onPan(t),this.boundOnPanEnd=()=>this.onPanEnd(),this.boundOnTouchStart=t=>this.onTouchStart(t),this.boundOnTouchEnd=t=>this.onTouchEnd(t)):console.warn("PinchToZoom: invalid required argument `canvasElement`, must be of type `Element`")}init(){return m.A.isPhone?window.Hammer?(this.isInitalized=!0,Promise.resolve()):new Promise(((t,e)=>{Oe.instance.load("hammerjs").then((()=>{this.isInitalized=!0,t()})).catch((()=>e()))})):Promise.reject()}attach(){this.isInitalized&&!this.isAttached&&(this.zoomOut(),this.attachPinch(),this.isAttached=!0)}detach(){this.isInitalized&&this.isAttached&&(this.zoomOut(),this.detachPinch(),this.isAttached=!1)}onTouchStart(t){this.isNativeTouchOngoing=!0;const e=t.changedTouches[0];this.nativeTouchStartPosition.x=e.clientX,this.nativeTouchStartPosition.y=e.clientY}onTouchEnd(t){const e=t.changedTouches[0];this.isNativeTouchOngoing&&e.clientX!==this.nativeTouchStartPosition.x&&e.clientY!==this.nativeTouchStartPosition.y&&(this.detachPan(),this.detachPinch(),this.attachPinch(),this.attachPan(),this.isNativeTouchOngoing=!1)}onPinchStart(){this.isNativeTouchOngoing=!1,this.isPinchOngoing=!0,this.pinchStartScalingFactor=this.scalingFactor,this.updateZoom()}onPinch(t){const e=t.scale,i=Math.floor(100*e)/100,s=this.pinchStartScalingFactor*i;s>=this.scaleMin&&s<=this.scaleMax&&(this.scalingFactor=s)}onPinchEnd(){this.pinchStartScalingFactor=null,this.isPinchOngoing=!1,this.scalingFactor>=this.scaleThreshold?this.zoomIn():this.zoomOut()}onPanStart(t){this.isNativeTouchOngoing=!1,this.resetPan(),this.isPanning=!0,this.panStartPointerPosition={x:t.center.x,y:t.center.y},this.panStartTranslation=this.translation}onPan(t){if(this.isPanning){const e={x:(t.center.x-this.panStartPointerPosition.x)/this.scalingFactor,y:(t.center.y-this.panStartPointerPosition.y)/this.scalingFactor},i={x:this.translation.x-this.panStartTranslation.x,y:this.translation.y-this.panStartTranslation.y},s={x:e.x-i.x,y:e.y-i.y};(s.x||s.y)&&this.panBy(s)}}onPanEnd(){this.resetPan()}onZoomedIn(){this.resetTransition(),this.isZoomed=!0,this.attachPan(),this.isZoomOngoing=!1}onZoomedOut(){this.resetTransition(),this.isZoomed=!1,this.isZoomOngoing=!1}attachPinch(){this.hammer=new window.Hammer(this.pinchCanvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.on("pinchstart",this.boundOnPinchStart),this.hammer.on("pinch",this.boundOnPinch),this.hammer.on("pinchend",this.boundOnPinchEnd)}detachPinch(){this.hammer&&(this.hammer.off("pinchstart",this.boundOnPinchStart),this.hammer.off("pinch",this.boundOnPinch),this.hammer.off("pinchend",this.boundOnPinchEnd),this.hammer.destroy(),this.hammer=null)}attachPan(){this.hammer&&(this.hammer.on("panstart",this.boundOnPanStart),this.hammer.on("panmove",this.boundOnPan),this.hammer.on("panend",this.boundOnPanEnd),this.pinchCanvas.addEventListener("touchstart",this.boundOnTouchStart),this.pinchCanvas.addEventListener("touchend",this.boundOnTouchEnd))}detachPan(){this.hammer&&(this.resetPan(),this.resetTranslation(),this.hammer.off("panstart",this.boundOnPanStart),this.hammer.off("panmove",this.boundOnPan),this.hammer.off("panend",this.boundOnPanEnd),this.pinchCanvas.removeEventListener("touchstart",this.boundOnTouchStart),this.pinchCanvas.removeEventListener("touchend",this.boundOnTouchEnd))}updateZoom(){this.isPinchOngoing&&(this.applyTransform({scale:this.scalingFactor}),window.setTimeout(this.updateZoom.bind(this),15))}zoomIn(){this.isZoomOngoing=!0,this.scalingFactor=2.3,this.pinchTarget.style.transition=`${this.transformProperty} ${this.transitionDuration}ms ease-out`,this.applyTransform({scale:this.scalingFactor}),window.setTimeout(this.boundOnZoomedIn,this.transitionDuration);const t=new CustomEvent(a.w3,{detail:{zoomIn:!0,transitionDuration:this.transitionDuration}});this.pinchTarget.dispatchEvent(t)}zoomOut(){this.isZoomOngoing=!0,this.detachPan(),this.pinchTarget.style.transition=`${this.transformProperty} ${this.transitionDuration}ms ease-out`,this.scalingFactor=1,this.applyTransform({scale:1}),window.setTimeout(this.boundOnZoomedOut,this.transitionDuration);const t=new CustomEvent(a.w3,{detail:{zoomIn:!1,transitionDuration:this.transitionDuration}});this.pinchTarget.dispatchEvent(t)}panBy(t){if(!t.x&&!t.y)return;const e=this.pinchTarget.offsetWidth*this.scalingFactor,i=this.pinchTarget.offsetHeight*this.scalingFactor,s=(e-window.innerWidth)/2,n=(i-window.innerHeight)/2,o=s/this.scalingFactor,a=n/this.scalingFactor,r={x:this.translation.x+t.x,y:this.translation.y+t.y};Math.abs(r.x)>o&&(r.x=this.translation.x),Math.abs(r.y)>a&&(r.y=this.translation.y),r.x===this.translation.x&&r.y===this.translation.y||(this.translation=r,this.applyTransform({translation:r}))}applyTransform(t){let e=t.scale||this.scalingFactor,i=this.translation.x,s=this.translation.y;if(t.translation&&t.translation.x&&(i=t.translation.x),t.translation&&t.translation.y&&(s=t.translation.y),e>this.scaleMax&&(e=this.scaleMax),e<this.scaleMin&&(e=this.scaleMin),e<this.scaleMax){const t=(e-this.scaleMin)/(this.scaleMax-this.scaleMin);i*=t,s*=t}window.requestAnimationFrame((()=>{this.pinchTarget.style[this.transformProperty]=`scale(${e}) translate3d(${i}px,${s}px,0)`}))}resetTransition(){this.pinchTarget.style.transition=""}resetTranslation(){this.translation={x:0,y:0}}resetPan(){this.isPanning=!1,this.panStartPointerPosition={x:null,y:null},this.panStartTranslation={x:null,y:null}}destroy(){this.detach()}}const Ni=Symbol("INSTANCE"),Bi=Symbol("SINGELTONENFORCER");class Ui{constructor(t){if(t!==Bi)throw new Error("Instantiation failed: Use JWPlayerDeliveryAPI.instance instead of new.");this.init()}static get instance(){return this[Ni]||(this[Ni]=new Ui(Bi)),this[Ni]}init(){const t=s.A.instance;this.apiUrl=t.thirdparty?.jwplayer?.apiUrl??"https://cdn.jwplayer.com",this.adConfigId=t.thirdparty?.jwplayer?.adConfigId??"",this.siteId=t.thirdparty?.jwplayer?.siteId??""}getPlaybackMetadataByMediaId(t){if(!this.siteId)return Promise.reject(new Error("JWPlayerDeliveryAPI getPlaybackMetadataByMediaId - requires a configured JW Player site ID"));if(!t||"string"!=typeof t)return Promise.reject(new Error("JWPlayerDeliveryAPI getPlaybackMetadataByMediaId - missing valid mediaId function param"));const e=`${this.apiUrl}/v2/sites/${this.siteId}/media/${t}/playback.json`;return new Promise(((i,s)=>{this.fetchUrl({url:e}).then((e=>{e?i(e):s(new Error(`JWPlayerDeliveryAPI getPlaybackMetadataByMediaId - no playback metadata found for clipId: ${t}`))})).catch((t=>s(t)))}))}getMediaObjectByMediaId(t){if(!t||"string"!=typeof t)return Promise.reject(new Error("JWPlayerDeliveryAPI getMediaObjectByMediaId - missing valid mediaId function param"));const e=`${this.apiUrl}/v2/media/${t}`;return new Promise(((i,s)=>{this.fetchUrl({url:e}).then((e=>{e?i(e):s(new Error(`JWPlayerDeliveryAPI getMediaObjectByMediaId - no media object found for clipId: ${t}`))})).catch((t=>s(t)))}))}getPlaylistByPlaylistId(t){if(!t||"string"!=typeof t)return Promise.reject(new Error("JWPlayerDeliveryAPI getPlaylistByPlaylistId - missing valid playlistId function param"));const e=`${this.apiUrl}/v2/playlists/${t}`;return new Promise(((i,s)=>{this.fetchUrl({url:e}).then((e=>{e?i(e):s(new Error(`JWPlayerDeliveryAPI getPlaylistByPlaylistId - no playlist found for playlistId: ${t}`))})).catch((t=>s(t)))}))}getImageThumbnailByMediaObject(t,e=0){return this._getThumbnailByMediaObject(t,e,"image")}getVideoThumbnailByMediaObject(t,e=0){return this._getThumbnailByMediaObject(t,e,"video")}getVideoThumbnailByMediaId(t,e=0){return t?e&&e<=320?`${this.apiUrl}/v2/media/${t}/poster.mp4?width=320`:`${this.apiUrl}/v2/media/${t}/poster.mp4?width=640`:""}_getThumbnailByMediaObject(t,e=0,i="image"){if(!t)return"";let s=null;if(t.playlist&&Array.isArray(t.playlist)&&t.playlist.length>0){const n=t.playlist[0];if(n.images&&Array.isArray(n.images)&&n.images.length>0){const t="image"===i||"video"===i?i:"image",o=n.images.filter((e=>0===e.type.indexOf(t)));o.sort(((t,e)=>t.width-e.width)),o.forEach((t=>{(!s||t.width>s.width&&0===e||t.width>s.width&&s.width<e)&&(s=t)}))}}return s&&s.src?s.src:""}getVideoByMediaObject(t,e=0){if(!t)return"";let i=null;if(t.playlist&&Array.isArray(t.playlist)&&t.playlist.length>0){const s=t.playlist[0];if(s.sources&&Array.isArray(s.sources)&&s.sources.length>0){const t=s.sources.filter((t=>0===t.type.indexOf("video")));t.sort(((t,e)=>t.width-e.width)),t.forEach((t=>{(!i||t.width>i.width&&0===e||t.width>i.width&&i.width<e)&&(i=t)}))}}return i&&i.file?i.file:""}getAdScheduleById(t){return new Promise(((e,i)=>{t&&"string"==typeof t||i(new Error("JWPlayerDeliveryAPI getAdScheduleById - missing valid id function param"));const s=`${this.apiUrl}/v2/advertising/schedules/${t}.json`;this.fetchUrl({url:s}).then((s=>{s?e(s):i(new Error(`JWPlayerDeliveryAPI getAdScheduleById - no ad schedule found for id: ${t}`))})).catch((t=>i(t)))}))}getPlayerConfigById(t){return new Promise(((e,i)=>{t&&"string"==typeof t||i(new Error("JWPlayerDeliveryAPI getPlayerConfigById - missing valid id function param"));const n=`${this.apiUrl}/libraries/${t}.js`;this.fetchUrl({url:n,responseContentType:"text"}).then((i=>{if(!i)throw new Error(`JWPlayerDeliveryAPI getPlayerConfigById - no player found for id: ${t}`);{const s=i.match(/^[^]*?var jwDefaults = (?<json>.*[^]*?);[^]*?$/),n=s.groups?.json||null;let o=null;try{o=JSON.parse(n)}catch(t){}if(!o)throw new Error(`JWPlayerDeliveryAPI getPlayerConfigById - unable to extract config for id: ${t}`);e(o)}})).catch((n=>{s.A.instance.thirdparty?.jwplayer?.config?(console.warn(`JWPlayerDeliveryAPI getPlayerConfigById - unable to extract config for id: ${t} - using fallback config instead`),e(s.A.instance.thirdparty.jwplayer.config)):i(n)}))}))}getCustomAdCuepointsByMediaId(t){if(!t||"string"!=typeof t||!this.siteId||!this.adConfigId)return Promise.reject(new Error("JWPlayerDeliveryAPI getMediaObjectByMediaId - missing valid mediaId function param or siteId and/or adConfigId are not defined"));const e=`${this.apiUrl}/v2/sites/${this.siteId}/ad_configs/${this.adConfigId}/schedule.json?media_id=${t}`;return new Promise(((i,s)=>{this.fetchUrl({url:e,headers:null}).then((e=>{e?i(e):s(new Error(`JWPlayerDeliveryAPI getCustomAdCuepoints - no custom ad cuepoints found for id: ${t} `))})).catch((t=>s(t)))}))}fetchUrl({url:t,headers:e={"Content-Type":"text/plain"},responseContentType:i="json"}){const s={method:"GET"};return e&&(s.headers=e),fetch(t,s).then((t=>200!==t.status?Promise.reject(new Error(`JWPlayerDeliveryAPI fetchUrl - failed to get data from API, URL: ${t.url}`)):"text"===i?t.text():t.json()))}convertTimecodeToOffset(t){if(!t||"string"!=typeof t)return null;const e=t.split(":");let i=0,s=0,n=0,o=0;if(3===e.length)[i,s,n]=e.map(Number);else if(2===e.length)[s,n]=e.map(Number);else{if(1!==e.length)return null;n=Number(e[0])}n%1!=0&&(o=n%1,n=Math.floor(n));const a=3600*i+60*s+n+o;return Math.round(a)}}class Ri{constructor(){const t=s.A.instance;this.pubadsSettings=t.video&&t.video.pubads?t.video.pubads:void 0}getAdTag({adType:t="pre",overrideParams:e={}}){if(!(this.pubadsSettings&&this.pubadsSettings.baseUrl&&this.pubadsSettings.params&&this.pubadsSettings.params.default))return"";const i=new URL(this.pubadsSettings.baseUrl);return Object.entries(this.pubadsSettings.params.default).forEach((([s,n])=>{if("cust_params"===s){let o=n;if(o=o.replace(/<POS>/g,t),o=o.replace(/<TILE_SUFFIX>/g,"pre"===t?"":2),o=o.replace(/<KW>/g,window.IQD_varPack&&window.IQD_varPack.iqd_TestKW?window.IQD_varPack.iqd_TestKW:"iqlive"),e?.cust_params){const t=new URLSearchParams(o);new URLSearchParams(e.cust_params).forEach(((e,i)=>{if("kw"===i&&e){const i=t.get("kw")?`${t.get("kw")},${e}`:e;t.set("kw",i)}else"kw"!==i&&t.set(i,e)})),o=t.toString().replace(/%2C/g,",")}i.searchParams.set(s,o)}else"vpos"===s?i.searchParams.set(s,n.replace(/<VPOS>/g,"pre"===t?"preroll":"midroll")):"pod"===s?i.searchParams.set(s,n.replace(/<POD>/g,"pre"===t?1:2)):i.searchParams.set(s,n)})),e&&Object.keys(e).forEach((t=>{"cust_params"!==t&&i.searchParams.set(t,e[t])})),i.href}get initialized(){return new Promise((t=>{if(L.instance.isInitialized||L.instance.hasError)return void t(!0);const e=setTimeout((()=>{console.error("GoogleIMATagBuilder: IQD init timeout"),t(!1)}),2e3),i=()=>{void 0!==e&&clearTimeout(e),t(!0)};h.A.subscribe(a.Ap,i,this),h.A.subscribe(a.KO,i,this)}))}}class Mi{static deepclone(t){try{return JSON.parse(JSON.stringify(t))}catch(e){return t}}}const Di=Symbol("INSTANCE"),Vi=Symbol("SINGELTONENFORCER");class Fi{constructor(t){if(t!==Vi)throw new Error("Instantiation failed: Use RECO.instance instead of new.");this.init()}static get instance(){return this[Di]||(this[Di]=new Fi(Vi)),this[Di]}init(){const t=s.A.instance;t.thirdparty&&t.thirdparty.reco&&t.thirdparty.reco.apiUrl?this.apiUrl=t.thirdparty.reco.apiUrl:console.error("RECO service requires apiUrl for correct instantiation.")}getRecommendedArticles(){return g.A.instance.trackingId?new Promise(((t,e)=>{this.fetchUrl(`${this.apiUrl}/v1/recommendations?trackingId=${g.A.instance.trackingId}`).then((e=>{t({articleIds:e.article_ids&&Array.isArray(e.article_ids)?e.article_ids:[],runId:e.metadata?.run_id??"none",createdAt:e.metadata?.created_at??void 0})})).catch((t=>e(t)))})):Promise.reject(new Error("RECO getRecommendedArticles - User trackingId is missing"))}fetchUrl(t){return fetch(t,{method:"GET",headers:{"Content-Type":"text/plain"}}).then((t=>200!==t.status?t.text().then((t=>{throw new Error(t)})).catch((e=>Promise.reject(new Error(`RECO fetchUrl - failed to get data from API, URL: ${t.url}, error: ${e.message}`)))):t.json()))}}const qi="STATE_LOADING",$i="STATE_DEFAULT";const zi="MODE_PLAY",ji="MODE_PAUSE",Wi="MODE_STOP",Gi="STATE_DEFAULT",Hi="STATE_LOADING",Ji="STATE_WAITING",Zi="STATE_PLAYING",Qi="STATE_ERROR",Ki="AUTOPLAY_INTERSECTION",Yi="AUTOPLAY_MOUSEOVER",Xi="AUTOPLAY_NONE";const ts={_accepted:!1,eventName:a.Oh,init(){const t=r.A.get(l.AZ.affiliateConsent.name);this._accepted="true"===t},get accepted(){return this._accepted},set accepted(t){return this._accepted===t||(r.A.set(l.AZ.affiliateConsent.name,t,{expires:l.AZ.affiliateConsent.expires}),this._accepted=t,h.A.publish(a.Oh,{accepted:t})),this._accepted}},es={products:[],init(){const t=s.A.instance.app;if(!c.A.isApp||!t?.products?.[c.A.appCode])return;const e=t.products[c.A.appCode];this.sessionStorage=new M.A("info","session");const i=this.sessionStorage.getItem("appProducts"),n=void 0!==et.A.instance.minFormattedPriceVersion&&c.A.appVersion>=et.A.instance.minFormattedPriceVersion;Object.keys(e).forEach((t=>{e[t].forEach((e=>{if(e.minVersion>c.A.appVersion)return;const s={productId:e.id,subscription:t,minVersion:e.minVersion??0,plan:e.plan??"default",basePlanId:e.basePlanId,offerId:e.offerId,isSubscription:"boolean"!=typeof e.isSubscription||e.isSubscription};let o;i&&Array.isArray(i)&&(o=i.find((t=>t.subscription===s.subscription&&t.plan===s.plan&&t.basePlanId===s.basePlanId&&t.offerId===s.offerId&&t.isSubscription===s.isSubscription))),s.formattedPrice=o?.formattedPrice||"",s.isReady=!!s.formattedPrice||!n;const a=this.products.findIndex((t=>t.subscription===s.subscription&&t.plan===s.plan&&t.basePlanId===s.basePlanId&&t.offerId===s.offerId&&t.isSubscription===s.isSubscription));a<0?this.products.push(s):this.products[a].minVersion<s.minVersion&&(this.products[a]=s)}))}))},setFormattedPrice({productId:t,subscription:e,plan:i,basePlanId:s,offerId:n,formattedPrice:a}){if(!c.A.isApp||!t||"string"!=typeof a)return;this.getProducts({productId:t,subscription:e,plan:i||s||!c.A.isAndroidApp?null:"default",basePlanId:s,offerId:n}).forEach((t=>{t.formattedPrice=a,t.isReady=!0})),"function"==typeof this.sessionStorage?.setItem&&this.sessionStorage.setItem("appProducts",o.A.raw(this.products))},getProducts({productId:t,subscription:e,plan:i,isSubscription:s=!0,basePlanId:n,offerId:o}){return c.A.isApp&&(t||e)?this.products.filter((a=>!(t&&a.productId!==t||e&&a.subscription!==e||i&&a.plan!==i||n&&a.basePlanId!==n||o&&a.offerId!==o||a.isSubscription!==s))):[]},getProduct(t){const e=this.getProducts(t);return e.length>0?e[0]:void 0}},is={_accepted:!1,eventName:a.Hu,init(){this.tcDataModel=v.instance;const t=s.A.instance,e=g.A.instance.hasNoAdsAccess?"noads":"default",i=t.thirdparty&&t.thirdparty.sourcepoint&&t.thirdparty.sourcepoint[e]?t.thirdparty.sourcepoint[e]:void 0;this.purposeId=i&&i.purposeIds&&i.purposeIds.thirdparty?i.purposeIds.thirdparty:void 0,this._accepted=this.tcDataModel.isPurposeGrantedById(this.purposeId),h.A.subscribe(a.Nk,(()=>{this.accepted=this.tcDataModel.isPurposeGrantedById(this.purposeId)}))},accept(){this.accepted&&this.tcDataModel.isPurposeGrantedById(this.purposeId)||(this.tcDataModel.isPurposeGrantedById(this.purposeId)?this.accepted=!0:this.tcDataModel.grantPurposeById(this.purposeId).then((()=>{})).catch((()=>{h.A.publish(a.GQ)})))},reject(){},get accepted(){return this._accepted},set accepted(t){this._accepted!==t&&(this._accepted=t,h.A.publish(a.Hu,{accepted:t}))}},ss={eventName:a.U7,consents:{},init(){this.storageObject=new M.A(l.AZ.htmlEmbedConsent.name,"cookie",l.AZ.htmlEmbedConsent.expires,"");const t=this.storageObject.getItems();Object.keys(t).forEach((e=>{this.consents[e]=!!t[e]}))},setConsent({type:t="default",value:e=!1}){this.storageObject.getItem(t)!==e&&(this.storageObject.setItem(t,!!e),this.consents[t]=!!e,h.A.publish(a.U7,{type:t,value:!!e}))}};const ns=i(670).A.instance,os=g.A.instance;var as=i(342);class rs{static getPodcastPlatformLinks(t){const e=[],{itunesId:i,feedUrl:s,spotifyId:n,amazonMusicId:o,youtubeMusicId:a}=t;return i&&e.push({id:"apple-podcasts",platform:"Apple Podcasts",link:`https://podcasts.apple.com/podcast/id${i}`},{id:"castbox",platform:"Castbox",link:`https://castbox.fm/vic/${i}`}),s&&e.push({id:"google-podcasts",platform:"Google Podcasts",link:`https://podcasts.google.com/?feed=${as.A.encodeBase64(s)}`},{id:"rss",platform:"RSS",link:s}),n&&e.push({id:"spotify",platform:"Spotify",link:`https://open.spotify.com/show/${n}`}),o&&e.push({id:"amazon-music",platform:"Amazon Music",link:`https://music.amazon.com/podcasts/${o}`}),a&&e.push({id:"youtube-music",platform:"Youtube Music",link:`https://music.youtube.com/playlist?list=${a}`}),e}}const ls=Symbol("INSTANCE"),cs=Symbol("SINGELTONENFORCER");class hs{constructor(t){if(t!==cs)throw new Error("Instantiation failed: Use OmnyStudio.instance instead of new.");this.init()}static get instance(){return this[ls]||(this[ls]=new hs(cs)),this[ls]}init(){const t=s.A.instance;t.thirdparty&&t.thirdparty.omny&&t.thirdparty.omny.apiUrl&&t.thirdparty.omny.orgId?(this.apiUrl=t.thirdparty.omny.apiUrl,this.orgId=t.thirdparty.omny.orgId,this.programs=t.thirdparty.omny.programs?t.thirdparty.omny.programs:{}):console.error("OmnyStudio requires apiUrl and orgId for correct instantiation.")}getClipByClipId(t){if(!t||"string"!=typeof t)return Promise.reject(new Error("OmnyStudio getClipByClipId - missing valid clipId function param"));const e=`${this.apiUrl}/orgs/${this.orgId}/clips/${t}`;return new Promise(((i,s)=>{this.fetchUrl(e).then((e=>{if(e){const t=this.sanitizeFieldsInObject(e,["Title","Description"]);i(t)}else s(new Error(`OmnyStudio getClipByClipId - no clip found for clipId: ${t}`))})).catch((t=>s(t)))}))}getClipByPlaylistId(t){if(!t||"string"!=typeof t)return Promise.reject(new Error("OmnyStudio getClipByPlaylistId - missing valid playlistId function param"));const e=`${this.apiUrl}/orgs/${this.orgId}/playlists/${t}/clips/v2?pageSize=1`;return new Promise(((i,s)=>{this.fetchUrl(e).then((e=>{const n=e.Clips&&Array.isArray(e.Clips)&&"undefined"!==e.Clips[0]?e.Clips[0]:void 0;if(n){const t=this.sanitizeFieldsInObject(n,["Title","Description"]);i(t)}else s(new Error(`OmnyStudio getClipByPlaylistId - no clip found for playlistId: ${t}`))})).catch((t=>s(t)))}))}getClipsByPlaylistId(t,e=7){if(!t||"string"!=typeof t)return Promise.reject(new Error("OmnyStudio getClipByPlaylistId - missing valid playlistId function param"));const i=`${this.apiUrl}/orgs/${this.orgId}/playlists/${t}/clips/v2?pageSize=${e}`;return new Promise(((e,s)=>{this.fetchUrl(i).then((i=>{const n=i.Clips&&Array.isArray(i.Clips)&&i.Clips.length>0?i.Clips:void 0;if(n){const t=n.map((t=>this.sanitizeFieldsInObject(t,["Title","Description"])));e(t)}else s(new Error(`OmnyStudio getClipsByPlaylistId - no clips found for playlistId: ${t}`))})).catch((t=>s(t)))}))}getPlaylistByPlaylistId(t){if(!t||"string"!=typeof t)return Promise.reject(new Error("OmnyStudio getPlaylistByPlaylistId - missing valid playlistId function param"));const e=`${this.apiUrl}/orgs/${this.orgId}/playlists/${t}`;return new Promise(((i,s)=>{this.fetchUrl(e).then((e=>{if(e){const t=this.sanitizeFieldsInObject(e,["Title","Description"]);i(t)}else s(new Error(`OmnyStudio getPlaylistByPlaylistId - no playlist found for playlistId: ${t}`))})).catch((t=>s(t)))}))}getPlaylistIdFromClip(t){return void 0!==t&&t.PlaylistIds&&Array.isArray(t.PlaylistIds)?t.PlaylistIds[0]:""}getProgramIdFromClip(t){return void 0!==t&&t.ProgramId?t.ProgramId:""}getProgramNameByProgramId(t){return this.programs[t]&&this.programs[t].name?this.programs[t].name:""}getPlayButtonLabelByProgramId(t){return t&&this.programs[t]&&this.programs[t].playButtonLabel?this.programs[t].playButtonLabel:"Anhören"}getReplayButtonLabelByProgramId(t){return t&&this.programs[t]&&this.programs[t].replayButtonLabel?this.programs[t].replayButtonLabel:"Erneut anhören"}getPlatformLinksByPlaylistId(t){return new Promise(((e,i)=>{this.getPlaylistByPlaylistId(t).then((t=>{const i=this.getPlatformLinksByPlaylist(t);e(i)})).catch((t=>i(t)))}))}getPlatformLinksByClipId(t){return new Promise(((e,i)=>{this.getClipByClipId(t).then((e=>{const s=this.getPlaylistIdFromClip(e);return s||i(new Error(`OmnyStudio getPlatformLinksByClipId - no playlist found for clipId: ${t}`)),hs.instance.getPlaylistByPlaylistId(s)})).then((t=>{const i=this.getPlatformLinksByPlaylist(t);e(i)})).catch((t=>i(t)))}))}getPlatformLinksByPlaylist(t){if(!t||!t.Id)return this.onError(),null;const e=hs.instance.getItunesIdByPlaylist(t),i=hs.instance.getSpotifyIdByPlaylist(t),s=hs.instance.getFeedUrlByPlaylist(t),n=hs.instance.getAmazonMusicIdByPlaylist(t),o=hs.instance.getYoutubeMusicIdByPlaylist(t);return rs.getPodcastPlatformLinks({itunesId:e,feedUrl:s,spotifyId:i,amazonMusicId:n,youtubeMusicId:o})}getAmazonMusicIdByPlaylist(t){if(!t||!t.CustomFieldData||!t.CustomFieldData["amazon-music"])return null;const e=t.CustomFieldData["amazon-music"].match(/podcasts\/(?<amazonMusicId>[a-zA-Z0-9-]+)/);return e&&e.groups&&e.groups.amazonMusicId?e.groups.amazonMusicId:null}getYoutubeMusicIdByPlaylist(t){if(!t||!t.CustomFieldData||!t.CustomFieldData["youtube-music"])return null;const e=t.CustomFieldData["youtube-music"].match(/[?&]list=(?<youtubeMusicId>[^&#]+)/);return e&&e.groups&&e.groups.youtubeMusicId?e.groups.youtubeMusicId:null}getItunesIdByPlaylist(t){if(!t||!t.DirectoryLinks||!t.DirectoryLinks.ApplePodcasts)return null;const e=t.DirectoryLinks.ApplePodcasts.match(/id(?<itunesId>\d+)/);return e&&e.groups&&e.groups.itunesId?e.groups.itunesId:null}getSpotifyIdByPlaylist(t){if(!t||!t.DirectoryLinks||!t.DirectoryLinks.Spotify)return null;const e=t.DirectoryLinks.Spotify.match(/show\/(?<spotifyId>([A-Za-z]|\d)+)/);return e&&e.groups&&e.groups.spotifyId?e.groups.spotifyId:null}getFeedUrlByPlaylist(t){return t&&t.DirectoryLinks&&t.DirectoryLinks.RssFeed?t.DirectoryLinks.RssFeed:null}fetchUrl(t){return fetch(t,{method:"GET",headers:{"Content-Type":"text/plain"}}).then((t=>200!==t.status?Promise.reject(new Error(`OmnyStudio fetchUrl - failed to get data from API, URL: ${t.url}`)):t.json()))}sanitizeFieldsInObject(t,e){const i={...t};return e.forEach((t=>{i[t]&&"string"==typeof i[t]&&(i[t]=this.sanitizeString(i[t]))})),i}sanitizeString(t){return t.replace(/[AOUaou]\u0308/g,(t=>{switch(t.charCodeAt(0)){case 65:return"Ä";case 79:return"Ö";case 85:return"Ü";case 97:return"ä";case 111:return"ö";case 117:return"ü";default:return t}}))}}var ds=i(833),us=i(265);const ps=Symbol("INSTANCE"),gs=Symbol("SINGELTONENFORCER"),ms="STATE_READY",ys="STATE_LOADING",fs="STATE_ERROR";class bs{constructor(t){if(t!==gs)throw new Error("Instantiation failed: Use Secretbox.instance instead of new.");this._state=ys,this._tweetnaclTimeout=null,this.key=g.A.instance.secretboxKey,this.key?this.init():this._state=fs}static get instance(){return this[ps]||(this[ps]=new bs(gs)),this[ps]}init(){window.nacl&&window.nacl.secretbox?this.onTweetnaclSourceReady():Oe.instance.load("tweetnacl").then((()=>this.onTweetnaclSourceReady())).catch((t=>this.onTweetnaclSourceError(t)))}onTweetnaclSourceReady(){this.secretbox=window.nacl.secretbox,this._state=ms,h.A.publish(a.Q_)}onTweetnaclSourceError(t){this._state=fs,console.warn(t.message)}decrypt(t){if(this.state!==ms){let t="";switch(this.state){case fs:t="Secretbox is not available";break;case ys:t="Secretbox is not yet ready";break;default:t="Secretbox has not been initialized"}return console.error(t),""}const e=(0,ds.D4)(this.key),i=(0,ds.D4)(t),s=i.slice(0,this.secretbox.nonceLength),n=i.slice(this.secretbox.nonceLength),o=this.secretbox.open(n,s,e);if(!o)return console.error("Could not decrypt message"),"";return(0,us.D4)(o)}get ready(){return this.state===ms}get state(){return this._state}}function As(t){t.magic("audio",(e=>t.$data(e)._audio)),t.directive("audio-omny",((e,{expression:i})=>{const s=t.closestDataStack(e)[0];if(!s)throw new Error("x-audio-omny could not find data stack – use x-data to define one");s._audio={isInitialized:!1,hasError:!1,clips:[],clip:{},loadData:u};const n=h.A.parseBase64Settings(i),o=(Array.isArray(n.audios)?n.audios:[]).filter((t=>function(t){const{secretboxKey:e,subscriptions:i,hasGiftArticleAccess:s,hasMeteredAccess:n}=g.A.instance;let o=!t.isEncrypted;t.isEncrypted&&e&&Array.isArray(t.subscriptions)&&t.subscriptions.forEach((t=>{o=o||s||n||i.includes(t)}));return o}(t))),r=o.filter((t=>t.isEncrypted)).length>0;function l(){const t=bs.instance;o.forEach((e=>{e.isEncrypted&&e.omnystudioClipId&&(e.omnystudioClipId=t.decrypt(e.omnystudioClipId)),e.isEncrypted&&e.omnystudioPlaylistId&&(e.omnystudioPlaylistId=t.decrypt(e.omnystudioPlaylistId))})),d()}function d(){s._audio.isInitialized=!0,e.dispatchEvent(new CustomEvent("audio-omny-initialized")),n.autoload&&u()}function u(){return s._audio.isInitialized?new Promise(((t,i)=>{Promise.all(o.map((t=>{return t.omnystudioPlaylistId?(e=t.omnystudioPlaylistId,new Promise(((t,i)=>{const s={};hs.instance.getClipByPlaylistId(e).then((t=>(s.clip=t,hs.instance.getPlaylistByPlaylistId(e)))).then((e=>{s.playlist=e,t(s)})).catch((t=>i(t)))}))):t.omnystudioClipId?(i=t.omnystudioClipId,new Promise(((t,e)=>{const s={};hs.instance.getClipByClipId(i).then((e=>(s.clip=e,s.playlistId=hs.instance.getPlaylistIdFromClip(e),s.programId=hs.instance.getProgramIdFromClip(e),s.playlistId||(s.programName=s.programId?hs.instance.getProgramNameByProgramId(s.programId):"",t(s)),hs.instance.getPlaylistByPlaylistId(s.playlistId)))).then((e=>{s.playlist=e,t(s)})).catch((t=>e(t)))}))):Promise.resolve(null);var e,i}))).then((o=>{const a=[];if(Array.isArray(o)&&o.forEach((t=>{if(t){const e=function(t){if(!t.clip)return null;const e=n.posterSize||"small";let i=null;t.clip.ImageUrl?(i=new URL(t.clip.ImageUrl),i.searchParams.set("size",e)):t.playlist&&t.playlist.ArtworkUrl&&(i=new URL(t.playlist.ArtworkUrl),i.searchParams.set("size",e));const s=[];t.playlist&&t.playlist.DirectoryLinks&&Object.keys(t.playlist.DirectoryLinks).forEach((e=>{if(t.playlist.DirectoryLinks[e])switch(e){case"ApplePodcasts":{const e=t.playlist.DirectoryLinks.ApplePodcasts;-1===e.indexOf("https://podcasts.apple.com/")&&-1===e.indexOf("https://geo.itunes.apple.com/")||s.push({id:"apple-podcasts",service:e});break}case"GooglePodcasts":{const e=t.playlist.DirectoryLinks.GooglePodcasts;e&&s.push({id:"google-podcasts",service:e});break}case"Spotify":{const e=t.playlist.DirectoryLinks.Spotify;-1!==e.indexOf("https://open.spotify.com/")&&s.push({id:"spotify",service:e});break}case"Stitcher":{const e=t.playlist.DirectoryLinks.Stitcher;-1!==e.indexOf("https://castbox.fm/")&&s.push({id:"castbox",service:e});break}case"TuneIn":case"GooglePlay":default:break;case"RssFeed":{const e=t.playlist.DirectoryLinks.RssFeed;e&&s.push({id:"rss",service:e});break}}}));s.find((t=>"apple-podcasts"===t.id))||s.push({id:"apple-podcasts",service:""});const o=[];Array.isArray(t.clip.Chapters)&&t.clip.Chapters.forEach((t=>{const e=("string"==typeof t.Position?t.Position:"").match(/(?<hours>\d{2}):(?<minutes>\d{2}):(?<seconds>\d{2})\.?(?<fraction>\d+)?/);if(!e||!e.groups)return;const{hours:i,minutes:s,seconds:n,fraction:a}=e.groups,r=60*("string"==typeof i?parseInt(i,10):0)*60+60*("string"==typeof s?parseInt(s,10):0)+("string"==typeof n?parseInt(n,10):0)+("string"==typeof a?parseFloat(`0.${a}`):0);o.push({position:r,title:t.Name?t.Name:""})}));return{id:t.clip.Id?t.clip.Id:"",audioUrl:p(t.clip),autoplayUrl:m(t.clip),resumeUrl:y(t.clip),downloadUrl:f(t.clip),posterUrl:i?i.href:"",clients:s,duration:t.clip.DurationSeconds?Math.round(1e3*t.clip.DurationSeconds):-1,headline:t.clip.Title?t.clip.Title:"",kicker:t.playlist&&t.playlist.Title?t.playlist.Title:t.programName?t.programName:"",flags:b(t.clip.Id),playButtonLabel:hs.instance.getPlayButtonLabelByProgramId(t.programId),replayButtonLabel:hs.instance.getReplayButtonLabelByProgramId(t.programId),articleId:t.clip.Id?A(t.clip.Id):"",playlistId:hs.instance.getPlaylistIdFromClip(t.clip),chapters:o}}(t);e&&a.push(e)}})),0===a.length){const t=new Error("Error while fetching and parsing Omny data.");console.error(t.message),s._audio.hasError=!0,i(t)}s._audio.clips=a,s._audio.clip=a[0]||{},e.dispatchEvent(new CustomEvent("audio-omny-loaded")),t()})).catch((t=>{console.error(t.message),s._audio.hasError=!0,e.dispatchEvent(new CustomEvent("audio-omny-error")),i(t)}))})):Promise.reject(new Error("x-audio-omny audioLoadData() function called too early – audio is not initialized"))}function p(t){if(!t.AudioUrl)return"";const e=new URL(t.AudioUrl);if(g.A.instance.hasNoAdsAccess&&e.searchParams.set("ttag","offer:pur"),t.ModifiedAtUtc){const i=new Date(t.ModifiedAtUtc);i instanceof Date&&!Number.isNaN(i)&&!Number.isNaN(i.getTime())&&e.searchParams.set("d",i.getTime())}return c.A.isIOSApp?e.searchParams.set("utm_source","CustomPlayer3"):c.A.isAndroidApp?e.searchParams.set("utm_source","CustomPlayer4"):e.searchParams.set("utm_source","CustomPlayer1"),e.href}function m(t){if(!t.AudioUrl)return"";const e=new URL(t.AudioUrl);if(g.A.instance.hasNoAdsAccess&&e.searchParams.set("ttag","offer:pur"),t.ModifiedAtUtc){const i=new Date(t.ModifiedAtUtc);i instanceof Date&&!Number.isNaN(i)&&!Number.isNaN(i.getTime())&&e.searchParams.set("d",i.getTime())}return e.searchParams.set("utm_source","CustomPlayer10"),e.href}function y(t){if(!t.AudioUrl)return"";const e=new URL(t.AudioUrl);if(g.A.instance.hasNoAdsAccess&&e.searchParams.set("ttag","offer:pur"),t.ModifiedAtUtc){const i=new Date(t.ModifiedAtUtc);i instanceof Date&&!Number.isNaN(i)&&!Number.isNaN(i.getTime())&&e.searchParams.set("d",i.getTime())}return e.searchParams.set("utm_source","CustomPlayer11"),e.href}function f(t){if(!t.AudioUrl)return"";const e=new URL(t.AudioUrl);if(g.A.instance.hasNoAdsAccess&&e.searchParams.set("ttag","offer:pur"),t.ModifiedAtUtc){const i=new Date(t.ModifiedAtUtc);i instanceof Date&&!Number.isNaN(i)&&!Number.isNaN(i.getTime())&&e.searchParams.set("d",i.getTime())}return c.A.isIOSApp?e.searchParams.set("utm_source","CustomPlayer8"):c.A.isAndroidApp?e.searchParams.set("utm_source","CustomPlayer9"):e.searchParams.set("utm_source","CustomPlayer2"),e.searchParams.set("download","true"),e.href}function b(t){const e=[];return o.forEach((i=>{i.omnystudioClipId===t&&Array.isArray(i.flags)&&i.flags.forEach((t=>{const i=t.replace(/-(paid|conditional)/g,"");e.push(i)}))})),e}function A(t){let e="";return o.forEach((i=>{i.omnystudioClipId===t&&i.articleId&&(e=i.articleId)})),e}0===o.length||r&&!g.A.instance.secretboxKey||(r?bs.instance.ready?l():h.A.subscribe(a.Q_,l,this):d())}))}function ws(t){t.directive("embed-bridge-message",((t,{expression:e},{evaluateLater:i})=>{const s=i(e);window.addEventListener("message",(e=>{let i=e.data;if(e.origin===new URL(t.src).origin&&e.source===t.contentWindow){try{i=JSON.parse(i)}catch(t){return}["resize","track","login","logout","register"].includes(i.event)&&s((()=>{}),{scope:{$message:i}})}}))}))}function Is(t){if(c.A.isApp){Array.from(document.querySelectorAll("[x-app-ignore]")).forEach((t=>{t.setAttribute("x-ignore","")}))}}var vs=i(533);function Ss(t){document.addEventListener("alpine:init",(()=>{Array.from(document.querySelectorAll("[x-lazyload]")).forEach((t=>{t.setAttribute("x-ignore","")}));const e=new(ie())({elements_selector:"[x-lazyload]",use_native:!1,unobserve_entered:!0,unobserve_completed:!0,callback_enter:e=>{e.removeAttribute("x-ignore"),"function"==typeof t.nextTick&&"function"==typeof t.initTree&&t.nextTick((()=>t.initTree(e)))}});h.A.subscribe(a.ph,(()=>{e&&"function"==typeof e.update&&e.update()}))}))}class Es{static formatTime(t){if(!t||"number"!=typeof t)return"0:00";return`${Math.floor(t/60)}:${`${Math.floor(t%60)}`.padStart(2,"0")}`}static formatDate(t){if(!t)return"Ungültiges Datum";const e=new Date(t);if(Number.isNaN(e.getTime()))return"Ungültiges Datum";return e.toLocaleDateString("de-DE",{hour:"2-digit",minute:"2-digit",hour12:!1,weekday:"long",day:"numeric",month:"long",year:"numeric"})}}var Ps=i(764);const ks=Symbol("INSTANCE"),Cs=Symbol("SINGELTONENFORCER");class _s{constructor(t){if(t!==Cs)throw new Error("Instantiation failed: Use TickarooAPI.instance instead of new.");this.init()}static get instance(){return this[ks]||(this[ks]=new _s(Cs)),this[ks]}init(){const t=s.A.instance;this.apiUrl=t.thirdparty?.tickaroo?.apiUrl,this.clientId=t.thirdparty?.tickaroo?.clientId,this.apiUrl&&this.clientId||console.error("TickarooAPI requires apiUrl and clientId for correct instantiation.")}getHighlightPostsByLiveblogId({liveblogId:t,limit:e=5,reverse:i=!1}){return new Promise(((s,n)=>{t&&"string"==typeof t||n(new Error("TickarooAPI getHighlightPostsByLiveblogId - missing valid liveblogId function param"));const o=new URL(`${this.apiUrl}/api/v6/ticker/show.json`);o.searchParams.set("id",t),o.searchParams.set("client_id",this.clientId),o.searchParams.set("limit",e),o.searchParams.set("reverse",i),o.searchParams.set("highlights","inplace"),this.fetchUrl(o.href).then((e=>{if(Array.isArray(e?.events)){const t=[];e?.events.forEach((e=>{if(!e.contents||!e.contents[0]?.text)return;const i=e.contents[0].text.match(/<h2[^>]*>(?<headline>[\s\S]+?)<\/h2>/);if(!i.groups?.headline||!e.created_at)return;const s=i.groups.headline.replaceAll(/<[^>]+>/g,"");t.unshift({headline:s,createdAt:e.created_at||0})})),t.sort(((t,e)=>e.createdAt-t.createdAt)),s(t)}else n(new Error(`TickarooAPI getHighlightPostsByLiveblogId - no posts found for liveblogId: ${t}`))})).catch((t=>n(t)))}))}fetchUrl(t){return fetch(t,{method:"GET",headers:{"Content-Type":"text/plain"}}).then((t=>200!==t.status?Promise.reject(new Error(`TickarooAPI fetchUrl - failed to get data from API, URL: ${t.url}`)):t.json()))}}function Ls(t){t.magic("focus",(e=>i=>{const s=i||e;return t.nextTick((()=>s.focus()))}));let e=null,i=null,n=null;t.magic("getPodcastPlatformLinks",(()=>async({playlistId:t,clipId:s})=>{if(t&&t===e&&n||!t&&s&&s===i&&n)return n;e=null,i=null,n=null;try{t?(e=t,n=await hs.instance.getPlatformLinksByPlaylistId(t)):s&&(i=s,n=await hs.instance.getPlatformLinksByClipId(s))}catch(t){console.warn(`$getPodcastPlatformLinks error: ${t.message}`)}return n})),t.magic("cooldown",(e=>(i,s)=>new Promise((n=>{const o=Number.isInteger(i)?i:2e3,a=t.$data(e);e.setAttribute("disabled",!0),s&&(a[s]=!0),window.setTimeout((()=>{e.removeAttribute("disabled"),s&&(a[s]=!1),n()}),o)})))),t.magic("deepclone",(()=>t=>{try{return JSON.parse(JSON.stringify(t))}catch(e){return t}})),t.magic("searchParams",(()=>new URLSearchParams(window.location.search))),t.magic("tcfv2Purposes",(()=>l.cg)),t.magic("waitForConsent",(()=>P)),t.magic("waitForCustomVendorConsents",(()=>k)),t.magic("arePurposeIdsVerified",(()=>S)),t.magic("adBridge",(()=>x.instance));let o=null;t.magic("adTagBuilder",(()=>o||(o=new Ri,o))),t.magic("appBridge",(()=>et.A.instance)),t.magic("appUtils",(()=>c.A)),t.magic("browserHistory",(()=>Oi.instance)),t.magic("cookieStorageHelper",(()=>d.A)),t.magic("dateUtils",(()=>Es)),t.magic("jwPlayerDeliveryAPI",(()=>Ui.instance)),t.magic("meteredService",(()=>Ps.A.instance)),t.magic("notificationService",(()=>X.instance)),t.magic("omnyStudio",(()=>hs.instance)),t.magic("scriptUtils",(()=>Oe.instance)),t.magic("settings",(()=>s.A.instance)),t.magic("bookmarks",(()=>F.instance)),t.magic("storageObject",(()=>M.A)),t.magic("teaserFactory",(()=>ci.instance)),t.magic("tickarooAPI",(()=>_s.instance)),t.magic("userAgentUtils",(()=>m.A)),t.magic("webUtils",(()=>Lt.A))}function Ts(t){t.magic("sendMessage",(()=>(...t)=>{const e=t.shift(),i=we.instance;if(i&&i.messageLookup&&i.messageLookup[e]){const s=new i.messageLookup[e](...t);s&&h.A.publish(a.pN,s)}}))}function Os(t){t.magic("publish",(()=>(t,...e)=>{window.polygon&&window.polygon.componentLoader&&"function"==typeof window.polygon.componentLoader.publish&&window.polygon.componentLoader.publish(t,...e)})),t.magic("subscribe",(()=>(t,e,i)=>{window.polygon&&window.polygon.componentLoader&&"function"==typeof window.polygon.componentLoader.subscribe&&window.polygon.componentLoader.subscribe(t,e,i)})),t.magic("unsubscribe",(()=>(t,e)=>{window.polygon&&window.polygon.componentLoader&&"function"==typeof window.polygon.componentLoader.unsubscribe&&window.polygon.componentLoader.unsubscribe(t,e)})),t.directive("subscribe",((t,{modifiers:e,expression:i},{evaluateLater:s,cleanup:n})=>{if(!(Array.isArray(e)&&0!==e.length&&i&&window.polygon&&window.polygon.componentLoader&&"function"==typeof window.polygon.componentLoader.subscribe&&"function"==typeof window.polygon.componentLoader.unsubscribe))return;const o=e[0].toUpperCase(),a=s(i),r=(...t)=>{a((()=>{}),{scope:{$payload:t,$topic:o}})};window.polygon.componentLoader.subscribe(o,r),n((()=>{window.polygon.componentLoader.unsubscribe(o,r)}))}))}var xs=i(612),Ns=i(505);function Bs(t,e,i){if(!(t instanceof Element&&e))return;const s=`swiper-${ti.kebabCase(e)}`,n=new CustomEvent(s,{bubbles:!0,detail:i});t.dispatchEvent(n)}function Us(t){t.magic("swiper",(e=>t.$data(e)._swiper)),t.directive("swiper",((e,{expression:i},{evaluate:s,cleanup:n})=>{const o=t.closestDataStack(e)[0];if(!o)throw new Error("x-swiper could not find data stack – use x-data to define one");o._swiper&&"function"==typeof o._swiper.destroy&&o._swiper.destroy();const a=e.querySelector(".polygon-swiper")||e,r=e.querySelector(".polygon-swiper-button-prev"),l=e.querySelector(".polygon-swiper-button-next"),c=e.querySelector(".polygon-swiper-pagination"),h={containerModifierClass:"polygon-swiper-",slideClass:"polygon-swiper-slide",slideActiveClass:"polygon-swiper-slide-active",slideDuplicateActiveClass:"polygon-swiper-slide-duplicate-active",slideVisibleClass:"polygon-swiper-slide-visible",slideDuplicateClass:"polygon-swiper-slide-duplicate",slideNextClass:"polygon-swiper-button-next",slideDuplicateNextClass:"polygon-swiper-slide-duplicate-next",slidePrevClass:"polygon-swiper-button-prev",slideDuplicatePrevClass:"polygon-swiper-slide-duplicate-prev",wrapperClass:"polygon-swiper-wrapper",buttonDisabledClass:"polygon-swiper-button-disabled",noSwipingClass:"polygon-swiper-no-swiping",lazyLoadingClass:"polygon-swiper-lazy",lazyStatusLoadingClass:"polygon-swiper-lazy-loading",lazyStatusLoadedClass:"polygon-swiper-lazy-loaded",lazyPreloaderClass:"polygon-swiper-lazy-preloader",notificationClass:"polygon-swiper-notification",zoomContainerClass:"polygon-swiper-zoom-container",modules:[Ns.U1,Ns.zE,Ns.Vx,Ns.dK],navigation:{prevEl:r,nextEl:l,disabledClass:"hidden"},pagination:{el:c,bulletClass:"rounded-circle w-8 h-8 bg-white opacity-moderate mr-6",bulletActiveClass:"polygon-swiper-pagination-bullet-active [&.polygon-swiper-pagination-bullet-active]:opacity-full",clickableClass:"polygon-swiper-pagination-clickable",currentClass:"polygon-swiper-pagination-current",hiddenClass:"polygon-swiper-pagination-hidden",horizontalClass:"polygon-swiper-pagination-horizontal",lockClass:"polygon-swiper-pagination-lock",modifierClass:"polygon-swiper-pagination-",paginationDisabledClass:"polygon-swiper-pagination-disabled",progressbarFillClass:"polygon-swiper-pagination-progressbar-fill",progressbarOppositeClass:"polygon-swiper-pagination-progressbar-opposite",totalClass:"polygon-swiper-pagination-total",verticalClass:"polygon-swiper-pagination-vertical"},on:{init(){t.nextTick((()=>Bs(a,"init")),0)}},threshold:12},d=s(i);Object.keys(d).forEach((t=>{const e=h[t],i=d[t];h[t]="object"==typeof e&&"object"==typeof i?{...e,...i}:i})),o._swiper=new xs.A(a,h),o._swiper.onAny(((t,e,...i)=>{Bs(a,t,i)})),n((()=>{o._swiper&&(o._swiper.destroy(),delete o._swiper)}))}))}function Rs(t){const e={};t.directive("unique",((t,{expression:i})=>{i&&(e[i]=e[i]+1||1,e[i]>1&&t.remove())}))}window.polygon=window.polygon||{};const Ms=new class{constructor(t={},e={}){const i={contextEl:document,prefix:""};this.options=Object.assign({},i,e),this.initializedComponents={},this.numberOfInitializedComponents=0,this.components={},this.topics={},this._queuedScans=0,this._isScanning=!1,this.register(t)}register(t={}){Object.keys(t).forEach((e=>{this.components[e]=t[e]}))}unregister(t){delete this.components[t]}subscribe(t,e,i){this.topics.hasOwnProperty(t)||(this.topics[t]=[]),this.topics[t].push({context:i,callback:e})}unsubscribe(t,e,i){if(!this.topics.hasOwnProperty(t))return!1;for(let s=0,n=this.topics[t].length;s<n;s++)if(this.topics[t][s].callback===e&&(!i||this.topics[t][s].context===i))return this.topics[t].splice(s,1),!0;return!1}publish(t){if(!this.topics.hasOwnProperty(t))return!1;const e=new Array(arguments.length-1);for(var i=0;i<e.length;++i)e[i]=arguments[i+1];for(let i=0,s=this.topics[t].length;i<s;i++){let s=this.topics[t][i];s&&s.callback&&s.callback.apply(s.context,e)}return!0}scan(t={}){if(this._isScanning)return void(this._queuedScans+=1);this._isScanning=!0;const e={},i=this.options.contextEl.querySelectorAll(`[data-${this.options.prefix}component]`);[].forEach.call(i,(i=>{this._scanElement(i,e,t)})),this.numberOfInitializedComponents>0&&this.cleanUp_(e),this._isScanning=!1,this._queuedScans>0?(this._queuedScans-=1,this.scan()):this.publish(a.Zk)}_scanElement(t,e,i){let s=t.getAttribute(`data-${this.options.prefix}component-id`);s||(s=this._generateUUID(),t.setAttribute(`data-${this.options.prefix}component-id`,s));t.getAttribute(`data-${this.options.prefix}component`).match(/\S+/g).forEach((n=>{const o=`${n}-${s}`;e[o]=!0,this.initializedComponents[o]||this._initializeComponent(n,o,t,i)}))}_initializeComponent(t,e,i,s){const n=this.components[t];if("function"!=typeof n)return void(window.console&&window.console.warn&&window.console.warn(`ComponentLoader: unknown component '${t}'`));let o=new n(i,s,this);this.initializedComponents[e]=o,this.numberOfInitializedComponents++}_destroyComponent(t){const e=this.initializedComponents[t];e&&"function"==typeof e.destroy&&e.destroy(),delete this.initializedComponents[t],this.numberOfInitializedComponents--}cleanUp_(t={}){Object.keys(this.initializedComponents).forEach((e=>{t[e]||this._destroyComponent(e)}))}_generateUUID(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){const e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)}))}}({BookmarksCardsSlider:class extends oi{constructor(...t){super(...t),g.A.instance.isLoggedIn&&(this.dataSettings=this.data.settings?JSON.parse(this.data.settings):{},this.collection=this.dataSettings.collection,this.documentIds=[],this.teaserLookup={},this.bookmarks=F.instance,this.content=this.el.querySelector('[data-bookmarkscardsslider-el="content"]'),this.teaserlist=this.el.querySelector('[data-bookmarkscardsslider-el="teaserlist"]'),this.loader=this.el.querySelector('[data-bookmarkscardsslider-el="loader"]'),this.loaderOverlay=this.el.querySelector('[data-bookmarkscardsslider-el="loader-overlay"]'),this.emptyState=this.el.querySelector('[data-bookmarkscardsslider-el="emptyState"]'),this.error=this.el.querySelector('[data-bookmarkscardsslider-el="error"]'),this.state=mi,this.subscribe(a.Bb,this.onBookmarksError),this.bookmarks.isInitialized?this.init():this.subscribe(a.n8,this.init))}init(){this.subscribe(a.Gr,(()=>this.refresh())),this.subscribe(a.XH,(()=>this.refresh())),this.subscribe(a.sK,(()=>this.refresh())),this.subscribe(a.OL,(()=>this.refresh())),this.refresh()}onBookmarksError(t){t&&t.collection&&t.collection!==this.collection||(!t||t.type!==l.Yj&&t.type!==l.qd?this.state!==bi&&(this.state=fi):this.refresh())}refresh(){const t=this.bookmarks.documentIdsByCollection[this.collection]||[],e=t.length,i=t.length>3?t.length-3:0,s=t.slice(i,e);if(s.reverse(),ai.isEqual(s,this.documentIds)&&this.state===bi)return Promise.resolve();this.state=mi,this.documentIds=s;const n=this.documentIds.filter((t=>!this.teaserLookup[t]));return 0===n.length?(this.updateView(),Promise.resolve()):gi.instance.getTeasersByIds(n).then((t=>t.success?(Array.isArray(t.teasers)&&t.teasers.length&&t.teasers.forEach((t=>{if(!t.id)return;const e={...t};this.dataSettings.fallbackImageSrc&&(e.imageSrc=this.dataSettings.fallbackImageSrc),this.teaserLookup[e.id]=e})),this.updateView(),Promise.resolve()):n.length<this.documentIds.length?(this.updateView(),Promise.resolve()):(this.state=fi,Promise.reject())))}updateView(){const t=this.documentIds.filter((t=>!this.teaserLookup[t])),e=this.documentIds&&this.documentIds.length&&t.length<this.documentIds.length;this.state=e?bi:yi,this.renderTeasers()}renderTeasers(){this.teaserlist.innerHTML="",this.documentIds.forEach(((t,e)=>{const i=this.teaserLookup[t];if(!i)return;const s={...i},n=e===this.documentIds.length-1;s.additionalClassesString=n?"lg:mx-24 md:mx-24 sm:mx-16":"lg:ml-24 md:ml-24 sm:ml-16";const o=ci.instance.create(s,l.aj);o&&this.teaserlist.append(o)})),this.publish(a.ph),this.scan(),this.updateSwiper()}updateSwiper(){const t=this.el.querySelector('[data-bookmarkscardsslider-el="swiper"]');t&&t.swiper&&"function"==typeof t.swiper.update&&t.swiper.update()}get state(){return this._state||(this._state=bi),this._state}set state(t){switch(this._state=t,t){case mi:h.A.toggleElementVisibility(this.content,!0),h.A.toggleElementVisibility(this.loader,!0),h.A.toggleElementVisibility(this.loaderOverlay,this.teaserlist.hasChildNodes()),h.A.toggleElementVisibility(this.emptyState,!1),h.A.toggleElementVisibility(this.error,!1);break;case yi:h.A.toggleElementVisibility(this.content,!1),h.A.toggleElementVisibility(this.loader,!1),h.A.toggleElementVisibility(this.emptyState,!0),h.A.toggleElementVisibility(this.error,!1);break;case fi:h.A.toggleElementVisibility(this.content,!1),h.A.toggleElementVisibility(this.loader,!1),h.A.toggleElementVisibility(this.emptyState,!1),h.A.toggleElementVisibility(this.error,!0);break;default:h.A.toggleElementVisibility(this.content,!0),h.A.toggleElementVisibility(this.loader,!1),h.A.toggleElementVisibility(this.emptyState,!1),h.A.toggleElementVisibility(this.error,!1)}}},BookmarkButton:class extends oi{constructor(...t){super(...t),this.settings=this.data.settings?JSON.parse(this.data.settings):{},this.documentId=this.settings.documentId,this.collection=this.settings.collection,this.documentId&&this.collection?(this.bookmarks=F.instance,this.iconInactive=this.el.querySelector('[data-bookmark-button-el="icon-inactive"]'),this.iconActive=this.el.querySelector('[data-bookmark-button-el="icon-active"]'),this.label=this.el.querySelector('[data-bookmark-button-el="label"]'),this.boundOnClick=()=>this.onClick(),this.init()):h.A.toggleElementVisibility(this.el,!1)}init(){this.state=this.bookmarks.contains(this.documentId,this.collection)?Ai:wi,this.subscribe(a.Gr,this.onBookmarkAdded),this.subscribe(a.XH,this.onBookmarkDeleted),this.subscribe(a.sK,this.onAllBookmarksDeleted),this.subscribe(a.OL,this.onBookmarksUpdated),this.subscribe(a.Bb,this.onBookmarksError),this.el.addEventListener("click",this.boundOnClick)}onClick(){if(this.el.hasAttribute("disabled"))return;const t=this.state===wi?a.HE:a.ZO;this.publish(t,this.documentId,this.collection),this.state=this.state===wi&&g.A.instance.isLoggedIn?Ai:wi,this.el.setAttribute("disabled",""),setTimeout((()=>{this.el.removeAttribute("disabled")}),200)}onBookmarkAdded(t,e){this.documentId===t&&this.collection===e&&this.state!==Ai&&(this.state=Ai)}onBookmarkDeleted(t,e){this.documentId===t&&this.collection===e&&this.state!==wi&&(this.state=wi)}onAllBookmarksDeleted(t){this.collection===t&&this.state!==wi&&(this.state=wi)}onBookmarksUpdated(){this.refreshState()}onBookmarksError(t){!t||t.type!==l.Yj&&t.type!==l.qd||t.documentId!==this.documentId||t.collection!==this.collection||this.refreshState()}refreshState(){this.state=this.bookmarks.contains(this.documentId,this.collection)?Ai:wi}get labelText(){let t="";return this.state===Ai?t=s.A.instance?.translations?.bookmarkButton?.labelDelete:this.state===wi&&(t=s.A.instance?.translations?.bookmarkButton?.labelAdd),t||"Zur Merkliste hinzufügen"}get state(){return this._state||(this._state=wi),this._state}set state(t){t===Ai?(this._state=Ai,h.A.toggleElementVisibility(this.iconInactive,!1),h.A.toggleElementVisibility(this.iconActive,!0)):(this._state=wi,h.A.toggleElementVisibility(this.iconActive,!1),h.A.toggleElementVisibility(this.iconInactive,!0)),this.label.textContent=this.labelText,this.el.title=this.labelText}destroy(){this.el.removeEventListener("click",this.boundOnClick)}},BookmarksList:class extends oi{constructor(...t){super(...t),g.A.instance.isLoggedIn&&(this.dataSettings=this.data.settings?JSON.parse(this.data.settings):{},this.collection=this.dataSettings.collection,this.documentIds=[],this.teaserLookup={},this.bookmarks=F.instance,this.content=this.el.querySelector('[data-bookmarkslist-el="content"]'),this.teaserlist=this.el.querySelector('[data-bookmarkslist-el="teaserlist"]'),this.loader=this.el.querySelector('[data-bookmarkslist-el="loader"]'),this.loaderOverlay=this.el.querySelector('[data-bookmarkslist-el="loader-overlay"]'),this.error=this.el.querySelector('[data-bookmarkslist-el="error"]'),this.emptyState=this.el.querySelector('[data-bookmarkslist-el="emptyState"]'),this.emptyStateTitle=this.emptyState.querySelector("[data-title]"),this.emptyStateText=this.emptyState.querySelector("[data-text]"),this.headline=this.el.querySelector("[data-title]"),this.paginationEl=this.el.querySelector('[data-bookmarkslist-el="pagination"]'),this.paginationBackEl=this.el.querySelector('[data-pagination-el="back"]'),this.paginationForwardEl=this.el.querySelector('[data-pagination-el="forward"]'),this.paginationCurrentEl=this.el.querySelector('[data-pagination-el="current"]'),this.paginationTotalEl=this.el.querySelector('[data-pagination-el="total"]'),this.paginationPageSize=20,this._paginationItemsTotal=0,this._paginationPagesTotal=0,this._paginationCurrentPage=1,this.boundOnPaginationBackClick=t=>this.onPaginationBackClick(t),this.boundOnPaginationForwardClick=t=>this.onPaginationForwardClick(t),this.state=Ii,this.subscribe(a.Bb,this.onBookmarksError),this.bookmarks.isInitialized?this.init():this.subscribe(a.n8,this.init))}init(){this.paginationBackEl&&this.paginationBackEl.addEventListener("click",this.boundOnPaginationBackClick),this.paginationForwardEl&&this.paginationForwardEl.addEventListener("click",this.boundOnPaginationForwardClick),this.subscribe(a.Gr,(()=>this.refresh())),this.subscribe(a.XH,(()=>this.refresh())),this.subscribe(a.sK,(()=>this.refresh())),this.subscribe(a.OL,(()=>this.refresh())),this.subscribe(a.dM,(t=>{this.onChangeCollectionTriggered(t)})),this.refresh()}onChangeCollectionTriggered(t){t&&this.collection!==t&&(this.collection=t,this._paginationCurrentPage=1,this.updateCollectionSpecificTexts(t),this.refresh())}updateCollectionSpecificTexts(t){const e=s.A.instance?.translations,i=e?.bookmarksListTitle[t]||"",n=e?.bookmarksEmptyState?.title[t]||"",o=e?.bookmarksEmptyState?.text[t]||"";this.headline.textContent=i,this.emptyStateTitle.textContent=n,this.emptyStateText.textContent=o}onPaginationBackClick(t){t.preventDefault(),this.paginationCurrentPage>1&&(this.paginationCurrentPage-=1,this.refresh().then((()=>this.scrollToTop())).catch((()=>{})))}onPaginationForwardClick(t){t.preventDefault(),this.paginationCurrentPage<this.paginationPagesTotal&&(this.paginationCurrentPage+=1,this.refresh().then((()=>this.scrollToTop())).catch((()=>{})))}onBookmarksError(t){t&&t.collection&&t.collection!==this.collection||(!t||t.type!==l.Yj&&t.type!==l.qd?this.state=Si:this.refresh())}refresh(){const t=this.bookmarks.documentIdsByCollection[this.collection]||[];this.paginationItemsTotal=t.length;const e=this.paginationItemsTotal-(this.paginationCurrentPage-1)*this.paginationPageSize,i=e-this.paginationPageSize>0?e-this.paginationPageSize:0,s=t.slice(i,e);if(s.reverse(),ai.isEqual(s,this.documentIds)&&this.state===Ei)return Promise.resolve();this.state=Ii,this.documentIds=s;const n=this.documentIds.filter((t=>!this.teaserLookup[t]));return 0===n.length?(this.updateView(),Promise.resolve()):gi.instance.getTeasersByIds(n).then((t=>t.success?(Array.isArray(t.teasers)&&t.teasers.length&&t.teasers.forEach((t=>{if(!t.id)return;const e={...t};e.imageId||(e.classmodifier="disable-"),this.teaserLookup[e.id]=e})),this.updateView(),Promise.resolve()):n.length<this.documentIds.length?(this.updateView(),Promise.resolve()):(this.state=Si,Promise.reject())))}updateView(){const t=this.documentIds.filter((t=>!this.teaserLookup[t])),e=this.documentIds&&this.documentIds.length&&t.length<this.documentIds.length;this.state=e?Ei:vi,h.A.toggleElementVisibility(this.deleteAllLink,e),h.A.toggleElementVisibility(this.paginationEl,e),this.renderTeasers()}renderTeasers(){this.teaserlist.innerHTML="",this.documentIds.forEach((t=>{const e=this.teaserLookup[t];if(!e)return;const i=ci.instance.create(e,l.qi);if(i){if(this.teaserlist.hasChildNodes()){let t=j.A.createElementByPrototypeId("prototype-border-separator");t=j.A.populateElement(t),t&&this.teaserlist.append(t)}this.teaserlist.append(i)}})),this.publish(a.ph),this.scan()}scrollToTop(){window.scrollY>this.el.getBoundingClientRect().y&&Lt.A.scrollToElement(this.el)}get paginationCurrentPage(){return this._paginationCurrentPage}set paginationCurrentPage(t){!Number.isInteger(t)||t<=0||(this._paginationCurrentPage=t,h.A.toggleElementVisibility(this.paginationBackEl,t>1),h.A.toggleElementVisibility(this.paginationForwardEl,t<this.paginationPagesTotal),this.paginationCurrentEl.textContent=t)}get paginationPagesTotal(){return this._paginationPagesTotal}set paginationPagesTotal(t){!Number.isInteger(t)||t<0||(this._paginationPagesTotal=t,this.paginationTotalEl.textContent=t,0===t?this.paginationCurrentPage=1:this.paginationCurrentPage>t&&(this.paginationCurrentPage=t))}get paginationItemsTotal(){return this._paginationItemsTotal}set paginationItemsTotal(t){!Number.isInteger(t)||t<0||(this._paginationItemsTotal=t,this.paginationPagesTotal=Math.ceil(t/this.paginationPageSize),this.paginationCurrentPage=this.paginationCurrentPage||1)}get state(){return this._state||(this._state=Ei),this._state}set state(t){switch(this._state=t,t){case Ii:h.A.toggleElementVisibility(this.content,!0),h.A.toggleElementVisibility(this.loader,!0),h.A.toggleElementVisibility(this.loaderOverlay,this.teaserlist.hasChildNodes()),h.A.toggleElementVisibility(this.emptyState,!1),h.A.toggleElementVisibility(this.error,!1);break;case vi:h.A.toggleElementVisibility(this.content,!1),h.A.toggleElementVisibility(this.loader,!1),h.A.toggleElementVisibility(this.emptyState,!0),h.A.toggleElementVisibility(this.error,!1);break;case Si:h.A.toggleElementVisibility(this.content,!1),h.A.toggleElementVisibility(this.loader,!1),h.A.toggleElementVisibility(this.emptyState,!1),h.A.toggleElementVisibility(this.error,!0),this.scrollToTop();break;default:h.A.toggleElementVisibility(this.content,!0),h.A.toggleElementVisibility(this.loader,!1),h.A.toggleElementVisibility(this.emptyState,!1),h.A.toggleElementVisibility(this.error,!1)}}destroy(){this.deleteAllLink&&this.deleteAllLink.removeEventListener("click",this.boundOnDeleteAllClick)}},BookmarksShortList:class extends oi{constructor(...t){super(...t),g.A.instance.isLoggedIn&&(this.dataSettings=this.data.settings?JSON.parse(this.data.settings):{},this.collection=this.dataSettings.collection,this.bookmarks=F.instance,this.documentIds=[],this.teaserLookup={},this.loader=this.el.querySelector('[data-bookmarksshortlist-el="loader"]'),this.loaderOverlay=this.el.querySelector('[data-bookmarksshortlist-el="loader-overlay"]'),this.emptyState=this.el.querySelector('[data-bookmarksshortlist-el="emptyState"]'),this.error=this.el.querySelector('[data-bookmarksshortlist-el="error"]'),this.content=this.el.querySelector('[data-bookmarksshortlist-el="content"]'),this.teaserlist=this.el.querySelector('[data-bookmarksshortlist-el="teaserlist"]'),this.state=Pi,this.subscribe(a.Bb,this.onBookmarksError),this.boundOnLazyLoad=t=>this.onLazyLoad(t),this.el.addEventListener("lazybeforeunveil",this.boundOnLazyLoad))}init(){this.subscribe(a.Gr,(()=>this.refresh())),this.subscribe(a.XH,(()=>this.refresh())),this.subscribe(a.sK,(()=>this.refresh())),this.subscribe(a.OL,(()=>this.refresh())),this.refresh()}onLazyLoad(t){t.target===this.el&&(this.bookmarks.isInitialized?this.init():this.subscribe(a.n8,this.init))}onBookmarksError(t){t&&t.collection&&t.collection!==this.collection||(!t||t.type!==l.Yj&&t.type!==l.qd?this.state!==_i&&(this.state=Ci):this.refresh())}refresh(){const t=this.bookmarks.documentIdsByCollection[this.collection]||[],e=t.length,i=t.length>3?t.length-3:0,s=t.slice(i,e);if(s.reverse(),ai.isEqual(s,this.documentIds)&&this.state===_i)return Promise.resolve();this.state=Pi,this.documentIds=s;const n=this.documentIds.filter((t=>!this.teaserLookup[t]));return 0===n.length?(this.updateView(),Promise.resolve()):gi.instance.getTeasersByIds(n).then((t=>t.success?(Array.isArray(t.teasers)&&t.teasers.length&&t.teasers.forEach((t=>{t.id&&(this.teaserLookup[t.id]=t)})),this.updateView(),Promise.resolve()):n.length<this.documentIds.length?(this.updateView(),Promise.resolve()):(this.state=Ci,Promise.reject())))}updateView(){const t=this.documentIds.filter((t=>!this.teaserLookup[t])),e=this.documentIds&&this.documentIds.length&&t.length<this.documentIds.length;this.state=e?_i:ki,this.renderTeasers()}renderTeasers(){this.teaserlist.innerHTML="",this.documentIds.forEach(((t,e)=>{const i=this.teaserLookup[t];if(!i)return;const s={...i},n=0===e,o=e===this.documentIds.length-1;s.additionalClassesString=n?"lg:border-separator-r lg:pr-16 lg:w-4/12 md:mb-24 sm:mb-16":o?"lg:w-4/12 lg:pl-24 md:mb-24 sm:mb-16":"lg:border-separator-r lg:pl-24 lg:pr-16 lg:w-4/12 md:mb-24 sm:mb-16";const a=ci.instance.create(s,l.x8);a&&this.teaserlist.append(a)})),this.publish(a.ph)}get state(){return this._state||(this._state=_i),this._state}set state(t){switch(this._state=t,t){case Pi:h.A.toggleElementVisibility(this.content,!0),h.A.toggleElementVisibility(this.loader,!0),h.A.toggleElementVisibility(this.loaderOverlay,this.teaserlist.hasChildNodes()),h.A.toggleElementVisibility(this.emptyState,!1),h.A.toggleElementVisibility(this.error,!1);break;case ki:h.A.toggleElementVisibility(this.content,!1),h.A.toggleElementVisibility(this.loader,!1),h.A.toggleElementVisibility(this.emptyState,!0),h.A.toggleElementVisibility(this.error,!1);break;case Ci:h.A.toggleElementVisibility(this.content,!1),h.A.toggleElementVisibility(this.loader,!1),h.A.toggleElementVisibility(this.emptyState,!1),h.A.toggleElementVisibility(this.error,!0);break;default:h.A.toggleElementVisibility(this.content,!0),h.A.toggleElementVisibility(this.loader,!1),h.A.toggleElementVisibility(this.emptyState,!1),h.A.toggleElementVisibility(this.error,!1)}}},ImageZoomLayer:class extends oi{constructor(...t){super(...t),(this.el.dataset.settings||this.el.dataset.settings.id)&&(this.focusCatcher=this.el.querySelector("[data-zoom-focus]"),this.closeButton=this.el.querySelector("[data-zoom-close]"),this.backdrop=this.el.querySelector("[data-zoom-backdrop]"),this.background=this.el.querySelector("[data-zoom-background]"),this.isCaptionShown=!1,this.caption=this.el.querySelector("[data-zoom-caption]"),this.imageWrapper=this.el.querySelector("[data-zoom-image]"),this.image=this.el.querySelector('[data-image-el="img"]'),this.settings=JSON.parse(this.el.dataset.settings),this.hash=`bild-${this.settings.imageId}`,this.animationDuration=250,this.ignoreClicks=!1,this.pinchToZoom=new xi(this.el,this.image),this.image.classList.remove("opacity-full"),this.image.classList.add("opacity-none"),this.boundRepositionCloseButton=()=>this.repositionCloseButton(),this.boundCenterImage=()=>this.centerImage(),this.boundHandleWheel=t=>this.handleWheel(t),this.boundHandleClick=()=>this.handleClick(),this.boundClose=()=>{this.publish(a.vh)},this.boundOnPinchZoomChanged=t=>this.onPinchZoomChanged(t),this.pinchToZoom.init().catch((()=>{this.pinchToZoom.destroy(),this.pinchToZoom=null})).finally((()=>{Oi.instance.register(this),window.location.hash===`#${this.hash}`&&this.publish(a.no,this.id)})))}open(){m.A.isPhone&&m.A.isIOS&&(window.addEventListener("resize",this.boundRepositionCloseButton),window.addEventListener("resize",this.boundCenterImage),this.centerImage()),m.A.isPhone||this.el.addEventListener("wheel",this.boundHandleWheel),this.background&&this.background.addEventListener("click",this.boundHandleClick),this.toggleZoomLayer(!0),this.publish(a.L$,this),this.settings.zoomAnimation&&this.settings.zoomId?(this.publish(a.pH,this.settings.zoomId,this.animationDuration),window.setTimeout((()=>this.showImageOnLazyload()),this.animationDuration)):this.showImageOnLazyload(),this.showOverlay(),this.focusOverlay(),this.toggleInterface(!1),this.pinchToZoom&&(this.pinchToZoom.attach(),this.image.addEventListener(a.w3,this.boundOnPinchZoomChanged))}close(){window.removeEventListener("scroll",this.boundHandleScroll),window.removeEventListener("resize",this.boundRepositionCloseButton),window.removeEventListener("resize",this.boundCenterImage),this.background&&this.background.removeEventListener("click",this.boundHandleClick),this.hideOverlay(),this.hideImage(),this.toggleInterface(!0),this.publish(a.c3,this),window.setTimeout((()=>{this.toggleZoomLayer(!1)}),this.animationDuration),this.pinchToZoom&&(this.image.removeEventListener(a.w3,this.boundOnPinchZoomChanged),this.pinchToZoom.detach())}handleWheel(t){this.caption&&this.caption.contains(t.target)||(this.el.removeEventListener("wheel",this.boundHandleWheel),this.boundClose())}handleClick(){this.ignoreClicks||this.toggleInterface(this.isCaptionShown)}onPinchZoomChanged(t){t.detail&&"boolean"==typeof t.detail.zoomIn&&(this.toggleInterface(t.detail.zoomIn),Number.isInteger(t.detail.transitionDuration)&&(this.ignoreClicks=!0,window.setTimeout((()=>{this.ignoreClicks=!1}),t.detail.transitionDuration)))}toggleInterface(t){t?(this.hideCaption(),this.hideCloseButton(),this.isCaptionShown=!1):(this.showCaption(),this.showCloseButton(),this.isCaptionShown=!0)}toggleZoomLayer(t){this.el.classList.toggle("hidden",!t)}repositionCloseButton(){window.requestAnimationFrame((()=>{if(this.buttonTargetDistance=this.buttonTargetDistance?this.buttonTargetDistance:Number(window.getComputedStyle(this.closeButton).top.split("px")[0]),window.innerHeight>window.innerWidth)this.closeButton.style.top=`${this.buttonTargetDistance}px`;else{const t=this.closeButton.getBoundingClientRect().top;t!==this.buttonTargetDistance&&(this.closeButton.style.top=2*this.buttonTargetDistance-t+"px")}}))}centerImage(){window.requestAnimationFrame((()=>{window.innerHeight>window.innerWidth?this.image.offsetHeight>0&&window.setTimeout((()=>{const t=window.innerHeight-this.image.offsetHeight;this.imageWrapper.classList.add("absolute"),this.imageWrapper.style.top=t/2+"px"}),this.animationDuration):(this.imageWrapper.classList.remove("absolute"),this.imageWrapper.style.top="")}))}showOverlay(){this.backdrop.setAttribute("style",`transition: background-color ${this.animationDuration}ms ease-out;`),window.setTimeout((()=>{this.backdrop.classList.remove("bg-opacity-none")}),0)}focusOverlay(){this.focusCatcher.focus()}hideOverlay(){this.backdrop.classList.add("bg-opacity-none")}showCaption(){this.caption&&(this.caption.style.transform="translateY(100%)",window.setTimeout((()=>{this.caption.setAttribute("style",`transition: transform ${this.animationDuration}ms ease-out;`),this.caption.style.transform="translateY(0)"}),0))}hideCaption(){this.caption&&(this.caption.style.transform="translateY(100%)")}showCloseButton(){this.closeButton.addEventListener("click",this.boundClose),this.closeButton.style.transform="translateX(150%)",window.setTimeout((()=>{this.closeButton.setAttribute("style",`transition: transform ${this.animationDuration}ms ease-out;`),this.closeButton.style.transform="translateX(0)",this.repositionCloseButton()}),0)}hideCloseButton(){this.closeButton.removeEventListener("click",this.boundClose),this.closeButton.style.transform="translateX(150%)"}showImage(){this.image.classList.remove("opacity-full"),this.image.classList.add("opacity-none"),window.setTimeout((()=>{this.image.setAttribute("style",`transition: opacity ${this.animationDuration}ms ease-out;`),this.image.classList.remove("opacity-none"),this.image.classList.add("opacity-full")}),0),this.image.removeEventListener("load",this.boundShowImage)}hideImage(){this.image.classList.remove("opacity-full"),this.image.classList.add("opacity-none")}showImageOnLazyload(){this.image.classList.contains("lazyloaded")||this.image.classList.contains("ls-is-cached")||this.image.complete?this.showImage():(this.boundShowImage=()=>this.showImage(),this.image.addEventListener("load",this.boundShowImage))}get id(){return this.settings.zoomId}get preventScrolling(){return!0}destroy(){this.hideZoomLayer(),this.image.removeEventListener("load",this.boundShowImage),this.image.removeEventListener(a.w3,this.boundOnPinchZoomChanged),super.destroy()}},JWPlayer:class extends oi{constructor(...t){super(...t),this.settings=this.data.settings?JSON.parse(this.data.settings):{},this.id=this.settings.id,this.mediaId="",this.playlistItem=null,this.playlistId=null,this.adScheduleId=this.settings.adScheduleId?this.settings.adScheduleId:null,this.isConfigInitialized=!1,this.isJWPlayerReady=!1,this.isJWContentLoaded=!1,this.tcdataInitializationTimeoutId=null,this.loader=this.el.querySelector('[data-video-el="loader"]'),this.hasVideo=!1,this.hasAudio=!1,this.hasAdvertisement=!1,this.isAutoPaused=!1,this.hasCustomAdCuepoints=!1,this.playMidrollsFromLength=this.settings.playMidrollsFromLength?this.settings.playMidrollsFromLength:0;const{mediaIdFromUrl:e,durationInSeconds:i}=this.settings;this.durationInSeconds=Number.isInteger(i)?i:0;const n=new URLSearchParams(window.location.search);if(this.mediaId=e?decodeURIComponent(n.get("mediaid")):this.settings.mediaId?this.settings.mediaId:void 0,!this.mediaId)return void this.onError();const o=s.A.instance,r=g.A.instance,l=o.editorial&&o.editorial.attributes?o.editorial.attributes:{},c=o.editorial&&o.editorial.category?o.editorial.category:"";if(this.suppressAds=o.noAds||r.hasNoAdsAccess||"never"===this.settings.adBehavior||l.has_noAds||l.has_noContentAds||"sponsored"===c,this.consentGloballyDisabled=!(!o.consent||"boolean"!=typeof o.consent.globallyDisabled)&&o.consent.globallyDisabled,!this.suppressAds&&this.consentGloballyDisabled){this.suppressAds=!0;v.instance.ready?this.onTCDataReady():(this.tcdataInitializationTimeoutId=setTimeout((()=>{console.error("JWPlayer: TCData init timeout"),this.onTCDataReady()}),2e3),this.subscribe(a.YF,this.onTCDataReady,this))}else this.initConfig()}onTCDataReady(){if(this.tcdataInitializationTimeoutId&&clearTimeout(this.tcdataInitializationTimeoutId),this.suppressAds&&this.consentGloballyDisabled){v.instance.isPurposeGranted(l.cg.store_and_access_information_on_a_device)&&(this.suppressAds=!1)}this.initConfig()}initConfig(){if(this.isConfigInitialized)return;this.isConfigInitialized=!0;const{autostart:t,disableRelated:e,errors:i,skinUrl:s}=this.settings;this.config={mediaid:this.mediaId,playlist:[],intl:{de:{errors:i}}},t&&(this.config.autostart="viewable"),e&&(this.config.related={}),s&&(this.config.skin={url:s,name:"spgl"}),this.isJWPlayerReady="function"==typeof window.jwplayer,this.isJWPlayerReady?this.onJWPlayerSourceReady():this.subscribe(a.tA,this.onJWPlayerSourceReady,this)}onJWPlayerSourceReady(){this.isJWPlayerReady=!0,window.jwDefaults&&(this.config={...window.jwDefaults,...this.config}),this.config.advertising?.adscheduleid&&(this.adScheduleId=this.config.advertising.adscheduleid),this.loadJWContent()}async loadJWContent(){if(this.isJWContentLoaded)return;this.isJWContentLoaded=!0;let t=null;try{t=await Ui.instance.getMediaObjectByMediaId(this.mediaId)}catch(t){return void this.onError()}if(t&&this.parseJwPlayerMediaObject(t),this.playlistItem&&Array.isArray(this.playlistItem.sources)&&0!==this.playlistItem.sources.length){if(this.playlistId){let t=null;try{t=await Ui.instance.getPlaylistByPlaylistId(this.playlistId)}catch(t){}t&&this.parseJwPlayerPlaylist(t)}0===this.config.playlist.length&&this.config.playlist.push(this.playlistItem),this.initJWPlayer()}else this.onError()}parseJwPlayerMediaObject(t){t.feed_instance_id&&(this.config.feed_instance_id=t.feed_instance_id),t.jwpseg&&(this.config.jwpseg=t.jwpseg);let e=null;if(t.playlist&&Array.isArray(t.playlist)&&t.playlist.length>0){const i=t.playlist[0];i.ad_schedule_id&&(this.adScheduleId=i.ad_schedule_id),i.has_custom_ad_schedule&&(this.hasCustomAdCuepoints="true"===i.has_custom_ad_schedule.toLowerCase()),i.playlist_id&&(this.playlistId=i.playlist_id),e=this.parseJwPlayerPlaylistItem(i),this.settings.alternativeTitle&&(e.title=this.settings.alternativeTitle),this.settings.alternativeDescription&&(e.description=this.settings.alternativeDescription),this.hasAudio=e.sources.some((t=>"string"==typeof t.type&&t.type.includes("audio/"))),this.hasVideo=e.sources.some((t=>"string"==typeof t.type&&t.type.includes("video/"))),Number.isInteger(e.duration)&&(this.durationInSeconds=e.duration)}this.hasAudio&&!this.hasVideo&&(this.suppressAds=!0),this.playlistItem=e}parseJwPlayerPlaylist(t){if(!t||!Array.isArray(t.playlist)||0===t.playlist.length)return;const e=t.playlist.map((t=>this.parseJwPlayerPlaylistItem(t))),i=e.findIndex((t=>t.mediaid===this.mediaId));i>=0?(e.splice(i,1,this.playlistItem),this.config.playlist=e,this.config.playlistIndex=i):this.config.playlist=[this.playlistItem,...e]}parseJwPlayerPlaylistItem(t){const e={sources:[]};return t.title&&(e.title=t.title),t.description&&(e.description=t.description),t.image&&(e.image=t.image),Array.isArray(t.images)&&t.images.length>0&&(e.images=t.images.filter((t=>!t.type||"image"===t.type.split("/")[0]))),t.mediaid&&(e.mediaid=t.mediaid),"number"==typeof t.pubdate&&(e.pubdate=t.pubdate),t.sources&&Array.isArray(t.sources)&&t.sources.length>0&&t.sources.forEach((t=>{const i={...t};Number.isInteger(t.height)&&t.height>0&&(i.label=`${t.height}p`),e.sources.push(i)})),Number.isInteger(t.duration)&&(e.duration=t.duration),t.tracks&&Array.isArray(t.tracks)&&t.tracks.length>0&&(e.tracks=t.tracks),t.jwpseg&&Array.isArray(t.jwpseg)&&t.jwpseg.length>0&&(e.jwpseg=t.jwpseg),t.jwpseg_client_side&&Array.isArray(t.jwpseg_client_side)&&t.jwpseg_client_side.length>0&&(e.jwpseg_client_side=t.jwpseg_client_side),e}async initJWPlayer(){this.suppressAds?this.config.advertising={}:this.config.advertising=await this.getAdvertisingConfig();const t=this.getAutopauseConfig();t&&(this.config.autoPause=t),window.jwplayer?(window.jwplayer.key=s.A.instance.thirdparty?.jwplayer?.licenseKey??"",this.jwplayer=window.jwplayer(this.id).setup(this.config),this.jwplayer.on("beforePlay",(t=>this.onBeforePlay(t))),this.suppressAds||"googima"!==this.config.advertising?.client||(Oe.instance.load("googleImaVansAdapter"),this.jwplayer.on("adsManager",(t=>this.onAdsManager(t)))),this.jwplayer.on("ready",(()=>{this.onReady()}))):this.onError()}onBeforePlay(){if(this.isAutoPaused){this.jwplayer.pause();try{this.jwplayer.pauseAd(!0)}catch(t){console.error(`JWPlayer API - pauseAd error: ${t.message}`)}}}onAdsManager(t){const{iasConfig:e}=this.settings;if(!e)return;const{adsManager:i,videoElement:s}=t;window.googleImaVansAdapter&&"function"==typeof window.googleImaVansAdapter.init?this.initGoogleImaVansAdapter(i,s,e):Oe.instance.load("googleImaVansAdapter").then((()=>this.initGoogleImaVansAdapter(i,s,e))).catch((()=>{}))}initGoogleImaVansAdapter(t,e,i){window.googleImaVansAdapter&&"function"==typeof window.googleImaVansAdapter.init&&t&&e&&i&&window.googleImaVansAdapter.init(window.google,t,e,i)}getAutopauseConfig(){return c.A.isAndroidApp?{viewability:!0,pauseAds:!0}:this.hasAudio&&!this.hasVideo?{viewability:!1,pauseAds:!1}:!this.hasAdvertisement||"object"!=typeof this.config.autoPause||this.settings.multiboxId&&this.settings.multiboxId.length>0?void 0:{viewability:!0,pauseAds:!0}}async getAdvertisingConfig(){if(!this.config.advertising||"object"!=typeof this.config.advertising)return{};const t=Mi.deepclone(this.config.advertising);let e;if(this.adScheduleId&&(this.adScheduleId!==t.adscheduleid||!t.schedule)){const t=Ui.instance;e=await t.getAdScheduleById(this.adScheduleId)}let i=[];const s=[];if(e&&e.schedule&&Array.isArray(e.schedule)&&e.schedule.length>0?(Object.keys(e).forEach((i=>{"schedule"!==i&&(t[i]=e[i])})),i=e.schedule):t.schedule&&Array.isArray(t.schedule)&&t.schedule.length>0&&(i=t.schedule),this.hasCustomAdCuepoints){const t=Ui.instance,e=await t.getCustomAdCuepointsByMediaId(this.mediaId);if(e.media_timings&&e.media_timings.length>0){const s=[];i.forEach((i=>{const n={...i};if("number"==typeof n.offset){const i=e.media_timings.shift();i?.timecode&&(n.offset=t.convertTimecodeToOffset(i.timecode)??n.offset,s.push(n))}else s.push(n)})),i=s}else this.hasCustomAdCuepoints=!1}const n=t.client?t.client:"googima",o=new Ri;await o.initialized;const a=(t,e="mid")=>{const i={};try{new URL(t).searchParams.forEach(((t,e)=>{i[e]=t}))}catch(t){}return o&&"function"==typeof o.getAdTag?o.getAdTag({adType:e,videoContentDuration:this.durationInSeconds,overrideParams:i}):""};"googima"===n&&(t.omidSupport="enabled");const r=this.durationInSeconds>=this.playMidrollsFromLength;return"never"===this.settings.adBehavior||r||this.hasCustomAdCuepoints||(this.settings.adBehavior="prerolls"),i.forEach((t=>{if(!t.offset||!t.tag||Array.isArray(t.tag)&&0===t.tag.length)return;const e="pre"===t.offset||"post"===t.offset?t.offset:"mid";"pre"!==e&&"prerolls"===this.settings.adBehavior||("string"==typeof t.tag?t.tag=a(t.tag,e):Array.isArray(t.tag)&&(t.tag=t.tag.map((t=>a(t,e)))),s.push(t))})),t.schedule=s,this.hasAdvertisement=t.schedule&&Array.isArray(t.schedule)&&t.schedule.length>0,t}onReady(){this.loader&&this.loader.classList.add("hidden"),this.publish(a.UY,this.id),this.subscribe(a.oe,this.onVisibilityChange,this),this.jwplayer.on("adPause",(t=>{this.onAdPause(t)})),this.settings.multiboxId&&this.settings.multiboxId.length>0&&this.subscribe(a.Kn,(t=>{this.onCloseAccordion(t.id)}))}onError(){this.el.classList.add("hidden"),console.error(`JWPLayer: Unable to load video - mediaid: ${this.mediaId?this.mediaId:"undefined"}`)}onCloseAccordion(t){if(this.settings.multiboxId===t){this.jwplayer.pause();try{this.jwplayer.pauseAd(!0)}catch(t){console.error(`JWPlayer API - pauseAd error: ${t.message}`)}}}onVisibilityChange(t){if(this.jwplayer)if("hidden"===t){if(this.isPlaying)try{this.jwplayer.pauseAd(!0)}catch(t){console.error(`JWPlayer API - pauseAd error: ${t.message}`)}this.isAutoPaused=!0}else if("visible"===t&&this.isAutoPaused){try{this.jwplayer.pauseAd(!1)}catch(t){console.error(`JWPlayer API - pauseAd error: ${t.message}`)}this.isAutoPaused=!1}}onAdPause(t){t&&"object"==typeof t&&"pauseReason"in t&&"clickthrough"===t.pauseReason&&(this.isAutoPaused=!0)}get isPlaying(){if(!this.jwplayer||"function"!=typeof this.jwplayer.getState)return!1;const t=this.jwplayer.getState();return t&&"playing"===t}destroy(){super.destroy()}},RecommendationsBlock:class extends oi{constructor(...t){super(...t),this.dataSettings=this.data.settings?JSON.parse(this.data.settings):{},this.componentId=this.dataSettings.componentId??void 0,this.minRecoTeasers=this.dataSettings.minRecoTeasers??4,this.blockIndex=this.dataSettings.blockIndex??0,this.articleIds=this.dataSettings.articleIds??[],this.source=void 0,this.runId=void 0,this.createdAt=void 0,this.topMarksEnabled=!!this.dataSettings.topMarksEnabled,this.headlineOffset=!!this.dataSettings.headlineOffset,this.teaserLookup={},this.contentEl=this.el.querySelector('[data-recommendationsblock-el="content"]'),this.teasersEl=this.el.querySelector('[data-recommendationsblock-el="teasers"]'),this.loaderEl=this.el.querySelector('[data-recommendationsblock-el="loader"]'),this.state=qi,this.boundOnLazyLoad=t=>this.onLazyLoad(t),this.el.addEventListener("lazybeforeunveil",this.boundOnLazyLoad)}onLazyLoad(t){t.target===this.el&&this.init().then((()=>{this.state=$i,this.updateDataAttributes(),ze.instance.sendComponentViewEvent(this.componentId,"replace recommendation")})).catch((()=>{this.state=$i,this.updateDataAttributes(),ze.instance.sendComponentViewEvent(this.componentId,"show recommendation")}))}init(){return new Promise(((t,e)=>{const i=g.A.instance;if(!i.isLoggedIn||!i.hasRecommendationsEnabled||i.hasNoAdsAccess)throw new Error("user is not eligible for recommendations");k().then((()=>{const e=s.A.instance,i=g.A.instance.hasNoAdsAccess?"noads":"default",n=e?.thirdparty?.sourcepoint?.[i]||void 0;if(!S([n?.purposeIds?.recommendations||void 0]))throw new Error("user did not consent to recommendations");return this.load().then((()=>{t()}))})).catch((t=>{e(t)}))}))}load(){return this.state=qi,Fi.instance.getRecommendedArticles().then((t=>{if(!t?.articleIds||!Array.isArray(t.articleIds)||t.articleIds.length<this.minRecoTeasers)throw new Error("no or not enough recommandations received");return this.runId=t.runId,this.createdAt=t.createdAt??void 0,gi.instance.getTeasersByIds(t.articleIds).then((e=>{if(!e.success||!Array.isArray(e.teasers)||e.teasers.length<this.minRecoTeasers)throw new Error("no or not enough teasers found");e.teasers.forEach((t=>{if(!t.id)return;const e={...t};e.imageId||(e.classmodifier="disable-"),this.topMarksEnabled||(e.topmark=""),this.teaserLookup[e.id]=e}));const i=t.articleIds.filter((t=>!!this.teaserLookup[t]));if(i.length<this.minRecoTeasers)throw new Error("no or not enough valid teasers found");return this.articleIds=i,this.renderTeasers(),this.source="RECO",Promise.resolve()}))}))}updateDataAttributes(){if(this.runId){const t=this.el.dataset.saraComponent?JSON.parse(this.el.dataset.saraComponent):{};if(t.run_id=this.runId,t.created_at=this.createdAt,this.source){const e=this.articleIds.map(((t,e)=>({item_id:t,item_title:this.teaserLookup[t]?.headline||"",item_pos:e+1})));t.item_source=this.source,t.items=e,this.el.dataset.teaserCount=e.length}this.el.dataset.saraComponent=JSON.stringify(t)}this.el.dataset.saraAction="impression"}renderTeasers(){const t=[];if(this.articleIds.forEach((e=>{const i=this.teaserLookup[e];i&&t.push(i)})),t.forEach(((t,e)=>{t.pos=`${this.blockIndex+1}:${e+1}`,t.layout=0===e?"xxl":"m"})),this.teasersEl&&t.length>0){const e=this.teasersEl.querySelectorAll("svg[id]");if(e.length>0){const t=document.querySelector('[data-el="footerSvgs"]');t&&e.forEach((e=>t.append(e)))}this.teasersEl.innerHTML="";const i=ci.instance.blocksContentArticleTeaserFull({teasers:t.slice(0,this.minRecoTeasers),headlineOffset:this.headlineOffset});this.teasersEl.appendChild(i),this.publish(a.ph),this.scan()}}get state(){return this._state??""}set state(t){if(this._state=t,t===qi)h.A.toggleElementVisibility(this.teasersEl,!1),h.A.toggleElementVisibility(this.loaderEl,!0);else h.A.toggleElementVisibility(this.teasersEl,!0),h.A.toggleElementVisibility(this.loaderEl,!1)}},Search:class extends oi{constructor(...t){super(...t),this.settings=JSON.parse(this.data.settings),this.searchForm=this.el.querySelector("[data-search-form]"),this.searchHeadline=this.el.querySelector("[data-search-headline]"),this.searchInput=this.el.querySelector("[data-search-input] input"),this.searchInputClearIcon=this.el.querySelector('[data-search-input] [data-input-el="icon"]'),this.searchInputClearButton=this.el.querySelector("[data-search-input-clear-button]"),this.searchButton=this.el.querySelector("[data-search-button]"),this.searchFilters=document.querySelector("[data-search-filters]"),this.searchFilterIcon=this.el.querySelector("[data-search-filter-icon]"),this.searchFilterNotificationIcon=this.el.querySelector("[data-search-filter-notification-icon]"),this.searchFilterResetButtons=this.el.querySelectorAll("[data-search-filter-reset-button]"),this.searchLoader=this.el.querySelector("[data-search-loading]"),this.searchTimespanSelect=this.el.querySelector("[data-search-timespan-select] select"),this.searchFieldsetRadioGroup=this.searchFilters.elements.namedItem("fieldset"),this.searchCooktimeRadioGroup=this.searchFilters.elements.namedItem("cooktime"),this.searchSegmentsCheckboxes=this.searchFilters.elements.namedItem("segment")?Array.from(this.searchFilters.elements.namedItem("segment")):[],this.searchResultButton=this.searchFilters.querySelector("[data-search-result-button]"),this.searchSubdimensionCheckboxes={},this.settings.dimensions&&this.settings.dimensions.length>0&&this.settings.dimensions.forEach((t=>{this.searchSubdimensionCheckboxes[t]=Array.from(this.searchFilters.querySelectorAll(`[data-search-dimension="${t}"] [name="subdimension"]`))})),this.searchError=this.el.querySelector("[data-search-error]"),this.searchEmpty=this.el.querySelector("[data-search-empty]"),this.resultsList=this.el.querySelector("[data-search-results]"),this.pagination=this.el.querySelector("[data-search-pagination]"),this.paginationPrev=this.el.querySelector('[data-pagination-el="back"]'),this.paginationNext=this.el.querySelector('[data-pagination-el="forward"]'),this.paginationCurrentPage=this.el.querySelector('[data-pagination-el="current"]'),this.paginationLastPage=this.el.querySelector('[data-pagination-el="total"]'),this.searchResults=document.querySelector("#suchergebnisse"),this.urlSearchString="",this.searchResultsTotal=0,this.teasers=[],this.searchTopics=[],this.scrollTrigger=!1,this.searchResultPagination={current:1,last:0,pageSize:20},this.searchResultAggregations={},this.updateHtmlInputFieldsByUrlParams(),this.searchOptions={query:this.urlSearchString,displayQuery:this.urlSearchString,fields:"",before:null,after:null,segments:[],cookTimeMin:null,cooktimeMax:null,subdimensions:{}},this.updateFilters(),this.domain=s.A.instance&&s.A.instance.domain?s.A.instance.domain:"",this.init()}init(){this.user=g.A.instance,this.boundExecuteSearch=t=>this.executeSearch(t),this.searchForm.addEventListener("submit",this.boundExecuteSearch),this.searchFilters.addEventListener("submit",this.boundExecuteSearch),this.boundFilterResults=()=>{this.updateFilters(),this.executeSearch()},this.searchFilters.addEventListener("change",this.boundFilterResults),this.boundGoToNextPage=t=>{this.goToPage(t,this.searchResultPagination.current+1),Lt.A.scrollToElement(this.searchResults)},this.paginationNext.addEventListener("click",this.boundGoToNextPage),this.boundGoToPrevPage=t=>{this.goToPage(t,this.searchResultPagination.current-1),Lt.A.scrollToElement(this.searchResults)},this.paginationPrev.addEventListener("click",this.boundGoToPrevPage),this.boundResetFilters=t=>this.resetFilters(t),this.searchFilterResetButtons.forEach((t=>{t.addEventListener("click",this.boundResetFilters)})),h.A.toggleElementVisibility(this.searchInputClearIcon,""!==this.searchInput.value),h.A.toggleElementVisibility(this.searchInputClearButton,""!==this.searchInput.value),this.boundOnSearchInputValueChanged=()=>{h.A.toggleElementVisibility(this.searchInputClearIcon,""!==this.searchInput.value),h.A.toggleElementVisibility(this.searchInputClearButton,""!==this.searchInput.value)},this.searchInput.addEventListener("input",this.boundOnSearchInputValueChanged),this.boundOnClearIconClicked=()=>{this.searchInput.value="",h.A.toggleElementVisibility(this.searchInputClearIcon,!1),h.A.toggleElementVisibility(this.searchInputClearButton,!1),this.searchInput.focus(),this.settings.autostart&&this.executeSearch()},this.searchInputClearButton.addEventListener("click",this.boundOnClearIconClicked),this.subscribe(a.U9,(()=>{this.updateHtmlInputFieldsByAggregations(),this.createResultList(),this.updateResultTexts(),h.A.toggleElementVisibility(this.searchHeadline,!0),this.updatePagination()})),this.subscribe(a.c3,(t=>{"suchfilter"===t?.id&&this.updateUrlParams()})),this.executeSearch()}updateHtmlInputFieldsByUrlParams(){const t=new URL(window.location.href);this.urlSearchString=t.searchParams.get("suchbegriff")??"";const e=t.searchParams.get("zeitraum")??"",i=t.searchParams.get("inhalt")??"",s=t.searchParams.get("zubereitungszeit")??"",n=t.searchParams.get("erschienenBei")?t.searchParams.get("erschienenBei").split(","):[],o=t.searchParams.get("seite");this.searchResultPagination.current=o?Math.max(parseInt(o,10),1):1,this.searchFilters.removeEventListener("change",this.boundFilterResults),this.searchInput.value=this.urlSearchString,e&&this.searchTimespanSelect&&(this.searchTimespanSelect.value=e),this.searchFieldsetRadioGroup&&(this.searchFieldsetRadioGroup.value=i||this.defaultFieldsetSlug),this.searchCooktimeRadioGroup&&(this.searchCooktimeRadioGroup.value=s||this.defaultCooktimeSlug),n.length>0&&this.searchSegmentsCheckboxes&&this.searchSegmentsCheckboxes.length>0&&this.searchSegmentsCheckboxes.forEach((t=>{t.checked=n.includes(t.value)})),this.settings.dimensions&&this.settings.dimensions.length>0&&this.settings.dimensions.forEach((e=>{const i=t.searchParams.get(e)?t.searchParams.get(e).split(","):[];i.length>0&&this.searchSubdimensionCheckboxes[e]&&this.searchSubdimensionCheckboxes[e].length>0&&this.searchSubdimensionCheckboxes[e].forEach((t=>{t.checked=i.includes(t.value)}))})),this.searchFilters.addEventListener("change",this.boundFilterResults)}updateHtmlInputFieldsByAggregations(){Object.keys(this.searchSubdimensionCheckboxes).forEach((t=>{const e=this.searchResultAggregations[t]?.buckets||[];this.searchSubdimensionCheckboxes[t]&&this.searchSubdimensionCheckboxes[t].length>0&&this.searchSubdimensionCheckboxes[t].forEach((t=>{const i=e.find((e=>t.value===e.key));if(i?.doc_count||t.checked){const e=t.parentElement.querySelector("[data-label-suffix]");e&&(e.innerText=`(${i?.doc_count||0})`),h.A.toggleElementVisibility(t.parentElement,!0)}else h.A.toggleElementVisibility(t.parentElement,!1),t.checked=!1}))}))}executeSearch(t){t&&(t.preventDefault(),"submit"===t.type&&t.target===this.searchForm&&(this.searchResultPagination.current=1,document.activeElement.blur())),this.teasers=[],this.searchOptions.query=this.searchInput.value,this.parseNeedle(),this.parseDisplaySearchString(),this.searchResultsTotal=0,this.clearResults(),h.A.toggleElementVisibility(this.searchHeadline,!1),h.A.toggleElementVisibility(this.searchError,!1),h.A.toggleElementVisibility(this.pagination,!1),this.updateUrlParams(),this.validateSearchInput()||this.settings.autostart?(h.A.toggleElementVisibility(this.searchResults,!0),h.A.toggleElementVisibility(this.searchLoader,!0),h.A.toggleElementVisibility(this.searchEmpty,!1),this.fetchResults()):(h.A.toggleElementVisibility(this.searchEmpty,!0),this.updateResultTexts())}parseNeedle(){this.searchOptions.displayQuery=this.searchOptions.query,this.searchOptions.query=this.searchOptions.query.replace(/ /g,"+")}parseDisplaySearchString(){this.searchOptions.displayQuery=0===this.searchOptions.displayQuery.indexOf('"')?this.searchOptions.displayQuery.substring(1):this.searchOptions.displayQuery,this.searchOptions.displayQuery='"'===this.searchOptions.displayQuery.charAt(this.searchOptions.displayQuery.length-1)?this.searchOptions.displayQuery.slice(0,-1):this.searchOptions.displayQuery}validateSearchInput(){return this.searchOptions.query.length>0}validateSearchFilter(){if(this.timespanSlug&&this.timespanSlug!==this.defaultTimespanSlug)return!0;if(this.fieldsetSlug&&this.fieldsetSlug!==this.defaultFieldsetSlug)return!0;if(this.cooktimeSlug&&this.cooktimeSlug!==this.defaultCooktimeSlug)return!0;if(this.searchSegmentsCheckboxes&&this.searchSegmentsCheckboxes.length>0){if(this.searchSegmentsCheckboxes.some((t=>{const e=this.settings.segments[t.value];return e&&t.checked!==e.default})))return!0}if(this.searchSubdimensionCheckboxes&&Object.keys(this.searchSubdimensionCheckboxes).length>0){if(Object.keys(this.searchSubdimensionCheckboxes).some((t=>!!this.searchSubdimensionCheckboxes[t]&&this.searchSubdimensionCheckboxes[t].some((t=>t.checked)))))return!0}return!1}updateUrlParams(){if(!window.history||"function"!=typeof window.history.replaceState)return;const t=new URL(`${s.A.instance.urls.base}${window.location.pathname}`);if(t.hash=window.location.hash,this.searchOptions.query||this.settings.autostart){this.searchOptions.query?t.searchParams.set("suchbegriff",this.searchOptions.query):t.searchParams.delete("suchbegriff"),this.searchResultPagination.current>1&&t.searchParams.set("seite",this.searchResultPagination.current),this.timespanSlug&&this.timespanSlug!==this.defaultTimespanSlug&&t.searchParams.set("zeitraum",this.timespanSlug),this.fieldsetSlug&&this.fieldsetSlug!==this.defaultFieldsetSlug&&t.searchParams.set("inhalt",this.fieldsetSlug),this.cooktimeSlug&&this.cooktimeSlug!==this.defaultCooktimeSlug&&t.searchParams.set("zubereitungszeit",this.cooktimeSlug);let e=!0;this.searchSegmentsCheckboxes&&this.searchSegmentsCheckboxes.length>0&&this.searchSegmentsCheckboxes.forEach((t=>{const i=this.settings.segments[t.value];i&&t.checked!==i.default&&(e=!1)})),e||t.searchParams.set("erschienenBei",this.segmentSlugs),this.subdimensionSlugs&&Object.keys(this.subdimensionSlugs).length>0&&Object.keys(this.subdimensionSlugs).forEach((e=>{if(this.subdimensionSlugs[e].length>0){const i=this.subdimensionSlugs[e];t.searchParams.set(e,i)}}))}window.location.href!==t.href&&window.history.replaceState(window.history.state,"",t.href)}clearResults(){this.resultsList.innerHTML=""}fetchResults(){const t={...Mi.deepclone(this.searchOptions),pageSize:this.searchResultPagination.pageSize,page:this.searchResultPagination.current};this.settings.fixedSegments&&this.settings.fixedSegments.length>0&&t.segments.push(...this.settings.fixedSegments),"authors"===t.fields&&(t.author=t.query,t.query="",t.fields=""),gi.instance.getTeasersBySearchOptions(t).then((t=>{if(t.code&&"page_out_of_range"===t.code)return this.searchResultPagination.current=1,void this.executeSearch();t.success?(this.teasers=Array.isArray(t.teasers)?t.teasers:[],this.searchResultsTotal=Number.isInteger(t.numResults)?t.numResults:0,this.searchResultPagination.last=Math.ceil(this.searchResultsTotal/this.searchResultPagination.pageSize),this.searchResultAggregations=t.aggregations?t.aggregations:{},this.publish(a.U9)):this.showFetchError()})).catch((()=>this.showFetchError()))}showFetchError(){h.A.toggleElementVisibility(this.searchLoader,!1),h.A.toggleElementVisibility(this.searchError,!0)}createResultList(){h.A.toggleElementVisibility(this.searchLoader,!1),0!==this.teasers.length?(this.teasers.forEach((t=>{const e="article"===t.collection;let i="m-list-wide-compact";e||(i="m-list-wide-left",t.imageId||(t.classmodifier="disable-"));const s=ci.instance.create(t,i);if(s){if(e){const t=j.A.populateElement(j.A.createElementByPrototypeId("prototype-border-separator"));t&&this.resultsList.append(t)}else s.classList.add("lg:mb-24","md:mb-16","sm:mb-16");this.resultsList.append(s)}})),h.A.toggleElementVisibility(this.pagination,!0),this.publish(a.ph),this.scan()):h.A.toggleElementVisibility(this.searchEmpty,!0)}updateFilters(){const t=this.settings.fieldsets[this.fieldsetSlug];this.searchOptions.fields=t&&t.value?t.value:"";const e=this.segmentSlugs.length>0?this.segmentSlugs:this.defaultSegmentSlugs;this.searchOptions.segments=e.map((t=>this.settings.segments&&this.settings.segments[t]&&this.settings.segments[t].value?this.settings.segments[t].value:""));const i=this.settings.timespans[this.timespanSlug];i&&Number.isInteger(i.after)&&Number.isInteger(i.before)&&(this.searchOptions.after=i.after,this.searchOptions.before=i.before);const s=this.settings.cooktimes[this.cooktimeSlug];this.searchOptions.cooktimeMin=s&&Number.isInteger(s.cooktimeMin)?s.cooktimeMin:null,this.searchOptions.cooktimeMax=s&&Number.isInteger(s.cooktimeMax)?s.cooktimeMax:null,this.searchOptions.subdimensions=this.subdimensionSlugs,this.searchFilterIcon&&this.searchFilterNotificationIcon&&(h.A.toggleElementVisibility(this.searchFilterIcon,!this.validateSearchFilter()),h.A.toggleElementVisibility(this.searchFilterNotificationIcon,this.validateSearchFilter())),this.searchFilterResetButtons.forEach((t=>{h.A.toggleElementVisibility(t,this.validateSearchFilter())}))}updateResultTexts(){const t=`${new Intl.NumberFormat("de-DE",{style:"decimal"}).format(this.searchResultsTotal)} Ergebnis${1!==this.searchResultsTotal?"se":""}`,e=this.searchHeadline.querySelector("[data-search-result-headline]");if(e)if(this.validateSearchFilter()||this.validateSearchInput()){const i=this.searchOptions.displayQuery||this.searchOptions.query;let s=t;i&&(s+=` für „${ti.capitalizeFirstLetter(i)}“`),e.textContent=s}else this.validateSearchFilter()||this.validateSearchInput()||0===this.searchResultsTotal||(e.textContent=this.settings.resultHeadlineAll?this.settings.resultHeadlineAll:"Alle Ergebnisse");if(this.searchResultButton){const e=this.searchResultButton.querySelector("[data-label]");e&&(e.textContent=t)}}updatePagination(){this.paginationCurrentPage.innerText=this.searchResultPagination.current,this.paginationLastPage.innerText=this.searchResultPagination.last,this.paginationPrev.classList.toggle("hidden",this.searchResultPagination.current<=1),this.paginationNext.classList.toggle("hidden",this.searchResultPagination.current===this.searchResultPagination.last)}goToPage(t,e){t.preventDefault();let i=e||1;i=i>1?e:1,i=i<this.searchResultPagination.last?i:this.searchResultPagination.last,this.searchResultPagination.current=i,this.executeSearch(),this.searchResults&&(this.scrollTrigger=!0)}resetFilters(t){t.preventDefault(),this.searchTimespanSelect&&(this.searchTimespanSelect.value=this.defaultTimespanSlug||this.searchTimespanSelect.querySelector("option").value),this.searchFieldsetRadioGroup&&(this.searchFieldsetRadioGroup.value=this.defaultFieldsetSlug),this.searchCooktimeRadioGroup&&(this.searchCooktimeRadioGroup.value=this.defaultCooktimeSlug),this.searchSegmentsCheckboxes&&this.searchSegmentsCheckboxes.length>0&&this.searchSegmentsCheckboxes.forEach((t=>{const e=this.settings.segments[t.value];t.checked=e&&e.default})),this.searchSubdimensionCheckboxes&&Object.keys(this.searchSubdimensionCheckboxes).forEach((t=>{this.searchSubdimensionCheckboxes[t].forEach((t=>{t.checked=!1}))})),this.updateUrlParams(),this.updateFilters(),this.executeSearch()}get timespanSlug(){return this.searchTimespanSelect?this.searchTimespanSelect.value:""}get defaultTimespanSlug(){return this.settings.timespans?Object.keys(this.settings.timespans).find((t=>!!this.settings.timespans[t].default)):""}get fieldsetSlug(){return this.searchFieldsetRadioGroup?this.searchFieldsetRadioGroup.value:""}get defaultFieldsetSlug(){return this.settings.fieldsets?Object.keys(this.settings.fieldsets).find((t=>!!this.settings.fieldsets[t].default)):""}get cooktimeSlug(){return this.searchCooktimeRadioGroup?this.searchCooktimeRadioGroup.value:""}get defaultCooktimeSlug(){return this.settings.cooktimes?Object.keys(this.settings.cooktimes).find((t=>!!this.settings.cooktimes[t].default)):""}get segmentSlugs(){return this.searchSegmentsCheckboxes?this.searchSegmentsCheckboxes.filter((t=>!!t.checked)).map((t=>t.value)):[]}get defaultSegmentSlugs(){return this.settings.segments?Object.keys(this.settings.segments).filter((t=>!!this.settings.segments[t].default)):[]}get subdimensionSlugs(){return!this.settings.dimensions||!this.settings.dimensions.length>0?{}:Object.fromEntries(this.settings.dimensions.map((t=>{if(!this.searchSubdimensionCheckboxes[t])return[t,[]];return[t,this.searchSubdimensionCheckboxes[t].filter((t=>!!t.checked)).map((t=>t.value))]})))}destroy(){this.searchForm.removeEventListener("submit",this.boundExecuteSearch),this.searchFilters.removeEventListener("submit",this.boundExecuteSearch),this.searchFilters.removeEventListener("change",this.boundFilterResults),this.searchFilterResetButtons.forEach((t=>{t.removeEventListener("click",this.boundResetFilters)})),this.paginationNext.removeEventListener("click",this.boundGoToNextPage),this.paginationPrev.removeEventListener("click",this.boundGoToPrevPage),this.searchInput.removeEventListener("input",this.boundOnSearchInputValueChanged),this.searchInputClearButton.removeEventListener("click",this.boundOnClearIconClicked),super.destroy()}},Video:class extends oi{constructor(...t){super(...t),this.video=this.el.querySelector('[data-video-el="video"]'),this.poster=this.el.querySelector('[data-video-el="poster"]'),this.loader=this.el.querySelector('[data-video-el="loader"]'),!m.A.isInternetExplorer&&Element.prototype.closest&&(this.mouseTarget=this.el.closest('[data-video-el="mouseTarget"]')),this.mouseTarget=this.mouseTarget||this.el,this.settings=this.data.settings?JSON.parse(this.data.settings):{},this.dataSrc=this.video?this.video.getAttribute("data-src"):"",this.jwplayerMediaId=this.settings.jwplayerMediaId?this.settings.jwplayerMediaId:"",this.useJwplayerVideoThumbnail=!!this.settings.useJwplayerVideoThumbnail,this.useJwplayerDeliveryAPI=!!this.settings.useJwplayerDeliveryAPI,this.lazyload=!!this.settings.lazyload,this.loop=!!this.settings.loop,this.backgroundColor=this.settings.backgroundColor?this.settings.backgroundColor:"",this.blurredBackgroundClasses=Array.isArray(this.settings.blurredBackgroundClasses)?this.settings.blurredBackgroundClasses:[],this.autoplayModeOnMouseOver=!!this.settings.autoplayOnMouseOver,this.maxPlays=Number.isInteger(this.settings.maxPlays)?this.settings.maxPlays:null,this.settings.autoplay?this.autoplayMode=!m.A.isMobile&&this.autoplayModeOnMouseOver?Yi:Ki:this.autoplayMode=Xi,this.boundOnMouseEnter=t=>this.onMouseEnter(t),this.boundOnMouseMove=t=>this.onMouseMove(t),this.boundOnLazyLoad=t=>this.onLazyLoad(t),this.boundOnVideoCanPlay=()=>this.onVideoCanPlay(),this.boundOnVideoLoadedMetadata=()=>this.onVideoLoadedMetadata(),this.boundOnVideoPlaying=()=>this.onVideoPlaying(),this.boundOnVideoWaiting=()=>this.onVideoWaiting(),this.boundOnVideoEnded=()=>this.onVideoEnded(),this.boundOnVideoError=()=>this.onError(),this.completedPlays=0,this.isInitialized=!1,this.isLoaded=!1,this.mode=Wi,this.state=Gi,this.video&&(this.dataSrc||this.jwplayerMediaId)?this.init():this.onError()}init(){(m.A.isMobileSafari||c.A.isIOSApp)&&this.video.addEventListener("loadedmetadata",this.boundOnVideoLoadedMetadata),this.video.addEventListener("canplay",this.boundOnVideoCanPlay),this.video.addEventListener("playing",this.boundOnVideoPlaying),this.video.addEventListener("waiting",this.boundOnVideoWaiting),this.video.addEventListener("ended",this.boundOnVideoEnded),this.video.addEventListener("error",this.boundOnVideoError),this.autoplayMode!==Xi&&(this.intersectionObserverTarget=this.el,this.intersectionObserver=null,this.initIntersectionObserver(),this.autoplayMode===Yi&&this.mouseTarget.addEventListener("mouseenter",this.boundOnMouseEnter)),this.lazyload?this.el.addEventListener("lazybeforeunveil",this.boundOnLazyLoad):this.loadVideo()}loadVideo(){this.dataSrc?(this.loadVideoByDataSrc(),this.loadPosterFallback()):this.jwplayerMediaId&&this.useJwplayerVideoThumbnail&&!this.useJwplayerDeliveryAPI?(this.loadJwVideoThumbnailWithAssembledUrl(),this.loadPosterFallback()):this.jwplayerMediaId&&this.useJwplayerDeliveryAPI?this.loadJwVideoFromApi():this.onError()}loadVideoByDataSrc(){this.dataSrc&&(this.src=this.dataSrc)}loadJwVideoThumbnailWithAssembledUrl(){if(!this.jwplayerMediaId)return;const t=Ui.instance.getVideoThumbnailByMediaId(this.jwplayerMediaId,this.offsetWidth);t?this.src=t:this.onError()}loadJwVideoFromApi(){if(!this.jwplayerMediaId)return;const t=Ui.instance;t.getMediaObjectByMediaId(this.jwplayerMediaId).then((e=>{let i="";i=this.useJwplayerVideoThumbnail?t.getVideoThumbnailByMediaObject(e,this.offsetWidth):t.getVideoByMediaObject(e,this.offsetWidth),i?(this.src=i,this.poster||this.videoPoster||(this.videoPoster=t.getImageThumbnailByMediaObject(e,this.offsetWidth))):this.onError()})).catch((()=>this.onError()))}loadPosterFallback(){if(!this.poster&&!this.videoPoster&&this.jwplayerMediaId){const t=Ui.instance;t.getMediaObjectByMediaId(this.jwplayerMediaId).then((e=>{this.videoPoster=t.getImageThumbnailByMediaObject(e,this.offsetWidth)})).catch((()=>{}))}}initIntersectionObserver(){this.intersectionObserverTarget&&(this.intersectionObserver=new IntersectionObserver((t=>this.onIntersectionChanged(t)),{threshold:[0,.5]}),this.intersectionObserver.observe(this.intersectionObserverTarget))}play(){"function"==typeof this.video.play&&this.video.play()}pause(){this.isPlaying&&"function"==typeof this.video.pause&&this.video.pause()}stop(){this.isPlaying&&"function"==typeof this.video.pause&&(this.video.pause(),this.video.currentTime=0,this.videoPoster&&"function"==typeof this.video.load&&this.video.load())}onLazyLoad(t){t.target===this.el&&this.loadVideo()}onVideoLoadedMetadata(){this.onVideoCanPlay()}onVideoCanPlay(){this.isLoaded||(this.isLoaded=!0,this.mode===zi&&this.play())}onVideoPlaying(){this.mode===Wi?this.stop():this.state=Zi}onVideoWaiting(){this.state=Ji}onVideoEnded(){this.completedPlays+=1,Number.isInteger(this.maxPlays)&&this.completedPlays>=this.maxPlays?(this.mode=Wi,this.destroy()):this.loop&&this.completedPlays<this.maxPlays?this.play():this.mode=Wi}onIntersectionChanged(t){t[0].isIntersecting?this.autoplayMode===Ki&&t[0].intersectionRatio>=.5&&(this.mode=zi):!this.maxPlays&&this.useJwplayerVideoThumbnail?this.mode=Wi:this.mode=ji}onMouseEnter(){this.mode=zi}onMouseMove(t){this.isMousePositionInside(t.clientX,t.clientY)||(this.mode=Wi)}onError(){this.state=Qi,this.destroy()}isMousePositionInside(t,e){if(!Number.isInteger(t)||!Number.isInteger(e))return!1;const i=this.mouseTarget.getBoundingClientRect(),s=t-i.left,n=e-i.top;return s>=0&&s<=i.width&&n>=0&&n<=i.height}togglePoster(t){"blur"===this.backgroundColor&&this.blurredBackgroundClasses.length>0?this.blurredBackgroundClasses.forEach((e=>{this.poster.classList.toggle(e,!t)})):h.A.toggleElementVisibility(this.poster,t)}get offsetWidth(){return this.el&&this.el.offsetWidth?this.el.offsetWidth:0}get isPlaying(){return this.video&&this.video.currentTime>0&&!this.video.paused&&!this.video.ended&&this.video.readyState>this.video.HAVE_CURRENT_DATA}get src(){return this._src?this._src:""}set src(t){t&&this.video&&!this.video.getAttribute("src")&&(this._src=t,this.video.setAttribute("src",t))}get videoPoster(){return this.video&&this.video.getAttribute("poster")?this.video.getAttribute("poster"):""}set videoPoster(t){t&&this.video&&!this.video.getAttribute("poster")&&this.video.setAttribute("poster",t)}get mode(){return this._mode?this._mode:""}set mode(t){if(this._mode!==t)switch(this._mode=t,t){case zi:this.isLoaded?this.play():this.state=Hi,this.autoplayMode===Yi&&window.addEventListener("mousemove",this.boundOnMouseMove);break;case ji:this.isLoaded&&this.pause(),this.autoplayMode===Yi&&window.removeEventListener("mousemove",this.boundOnMouseMove);break;default:this.state=Gi,this.isLoaded&&this.stop(),this.autoplayMode===Yi&&window.removeEventListener("mousemove",this.boundOnMouseMove)}}set state(t){if(this._state!==t)switch(this._state=t,t){case Hi:h.A.toggleElementVisibility(this.loader,!0),this.poster?(this.togglePoster(!0),h.A.toggleElementVisibility(this.video,!1)):h.A.toggleElementVisibility(this.video,!0);break;case Ji:h.A.toggleElementVisibility(this.loader,!0),this.togglePoster(!1),h.A.toggleElementVisibility(this.video,!0);break;case Zi:h.A.toggleElementVisibility(this.loader,!1),this.togglePoster(!1),h.A.toggleElementVisibility(this.video,!0);break;default:h.A.toggleElementVisibility(this.loader,!1),this.poster?(this.togglePoster(!0),h.A.toggleElementVisibility(this.video,!1)):h.A.toggleElementVisibility(this.video,!0)}}destroy(){this.el.removeEventListener("lazybeforeunveil",this.boundOnLazyLoad),this.mouseTarget.removeEventListener("mouseenter",this.boundOnMouseEnter),window.removeEventListener("mousemove",this.boundOnMouseMove),this.intersectionObserver&&"function"==typeof this.intersectionObserver.disconnect&&this.intersectionObserver.disconnect(),this.video&&(this.video.removeEventListener("canplay",this.boundOnVideoCanPlay),this.video.removeEventListener("loadedmetadata",this.boundOnVideoLoadedMetadata),this.video.removeEventListener("playing",this.boundOnVideoPlaying),this.video.removeEventListener("waiting",this.boundOnVideoWaiting),this.video.removeEventListener("ended",this.boundOnVideoEnded),this.video.removeEventListener("error",this.boundOnVideoError)),super.destroy()}}});Kt.then((()=>(()=>{window.polygon.componentLoader&&"function"==typeof window.polygon.componentLoader.destroy?window.polygon.componentLoader.destroy(Ms):window.polygon.componentLoader=Ms;const t={};t[a.TK]=ot,t[a.gw]=rt,t[a.pM]=bt,t[a.IO]=At,t[a.uf]=wt,t[a.ZV]=It,t[a.GS]=St,t[a.Vv]=vt,t[a.nw]=Et,t[a.HE]=tt,t[a.ZO]=Dt,t[a.y9]=zt,t[a.OL]=Ie,t[a.qT]=Mt,t[a.eY]=Tt,t[a.oW]=Rt,t[a.BJ]=Jt,t[a.pH]=Ht,t[a.wZ]=ve,t[a.JI]=Ge,t[a.cB]=it,t[a.$S]=je,t[a.K_]=We,Object.keys(t).forEach((e=>{h.A.subscribe(e,((...i)=>{const s=new t[e];"function"==typeof s.execute?s.execute(...i):console.error(`Controller "${s.constructor.name}" is missing an execute function.`)}))})),setTimeout((()=>{window.Alpine=o.A,o.A.plugin(As),o.A.plugin(ws),o.A.plugin(Is),o.A.plugin(vs.A),o.A.plugin(Ss),o.A.plugin(Ls),o.A.plugin(Ts),o.A.plugin(Os),o.A.plugin(Us),o.A.plugin(Rs),o.A.store("AffiliateConsent",ts),o.A.store("AppProducts",es),o.A.store("HtmlEmbedConsent",ss),o.A.store("Gift",Bt),o.A.store("MediaQuery",u),o.A.store("StoryHistory",ns),o.A.store("User",os),o.A.store("ThirdpartyConsent",is),o.A.store("WebAudio",yt)}),0),setTimeout((()=>{window.polygon.saras=ze.instance,window.polygon.appBridge=et.A.instance,window.polygon.adBridge=x.instance,window.polygon.keyboardDetection=te.instance,window.polygon.breakingNewsData=_t.instance,window.polygon.tcDataModel=v.instance,window.polygon.triggerHandler=Ze.instance,window.polygon.browserHistoryService=Oi.instance,window.polygon.overlayHandler=H.instance,window.polygon.messenger=we.instance,window.polygon.bookmarks=F.instance,window.polygon.eventObserver=Gt.instance,window.polygon.userCapping=si.instance,window.polygon.sourcepoint=Ue.instance,h.A.publish(a.gw),window.polygon.lazyLoading=oe.instance,window.polygon.componentLoader.scan(),window.polygon.webAudio=new ni}),0),setTimeout((()=>{o.A.start()}),0)})()))}},t=>{t.O(0,[608],(()=>{return e=382,t(t.s=e);var e}));t.O()}]);