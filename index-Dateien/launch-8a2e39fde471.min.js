// For license information, see `https://assets.adobedtm.com/cc10f7b4369d/32ae8c3350c5/launch-8a2e39fde471.js`.
window._satellite=window._satellite||{},window._satellite.container={buildInfo:{minified:!0,buildDate:"2025-05-15T14:39:31Z",turbineBuildDate:"2024-08-22T17:32:44Z",turbineVersion:"28.0.0"},environment:{id:"ENfa586d63c8224310a6b074c863a06fc4",stage:"production"},dataElements:{"User | Cookie: Session [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(){let e=_satellite.getVar("Storage | Usage: Session [co]").name;return _satellite.saraCookieRead(e)||(_satellite.preCookie?_satellite.preCookie[e]:"")}}},"XDM | Analytics: eVar104 - Media Headline [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n=_satellite.getVar("Event | Action [gl]",a),r="audio"===n||"video"===n,o=0===_satellite.getVar("Event | Name [gl]",a).indexOf("ivw")||"audio"===n&&"podlove"==_satellite.getVar("Event | Source [gl]",a)&&a.detail.state.audio;if(r&&!o)return _satellite.getVar("Event | Item: Title [co]",a)}}},"Event Value | event40: Performance: Server Response Time [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){if(_satellite.getVar("Page | Previous Data JSON [co]",a)&&"page_data_ready"==_satellite.getVar("Event | Action [gl]",a)){var n=_satellite.getVar("Page | Previous Page Timing: Performance: Server Response [co]",a);return n||void 0}}}},"XDM | Analytics: eVar103 - Media Style [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n=_satellite.getVar("Event | Action [gl]",a),r="audio"===n||"video"===n,o="audio"===n&&"podlove"==_satellite.getVar("Event | Source [gl]",a)&&a.detail.state.audio;if(r&&!o)return _satellite.getVar("Event | Item: Type [co]",a)+"|"+_satellite.getVar("Event | Stream Type [co]",a)}}},"Event | Target URL [gl]":{defaultValue:"",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"event.attributes.target_url",callback:function(){},doCustomCode:!1,convertToString:!1}},"Component | Article Information (Array) [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(){let e=SARAs_data&&SARAs_data.getState&&SARAs_data.getState().event&&SARAs_data.getState().event.attributes&&SARAs_data.getState().event.attributes.component_id;if(e)try{const t=document.querySelectorAll("[data-sara-action=impression]"),a=Array.from(t).map((e=>{try{return JSON.parse(e.dataset.saraComponent)}catch(e){return _satellite.logger.info("Fehler beim Parsen von JSON:",e),null}})).find((t=>t&&t.id===e));if(a){let e=[];return a.items.forEach((t=>e.push("artId="+t.item_id+";artPos="+t.item_pos+";artTi="+t.item_title))),e}}catch(e){_satellite.logger.info("Ein Fehler ist aufgetreten:",e)}}}},"Event Value | event43: Performance: DOM Complete Time [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){if(_satellite.getVar("Page | Previous Data JSON [co]",a)&&"page_data_ready"==_satellite.getVar("Event | Action [gl]",a))return _satellite.getVar("Page | Previous Page Timing: Performance: Dom Complete [co]",a)}}},"Editorial | has Audio Embed (String) [co]":{defaultValue:"",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"editorial.attributes.has_audio_embed",callback:function(e){return!0===e?"has_audio_embed":"no_audio_embed"},doCustomCode:!0,convertToString:!1}},"XDM | Analytics: Link Click Name [gl-lo]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n=_satellite.getVar("Event | Action [gl]",a);return"link_click_external"===n||"link_click_download"===n?_satellite.getVar("Event | Target URL [gl]",a):n+"::"+_satellite.getVar("Event | Name [gl]",a)}}},"XDM | Analytics: eVar29 - Click Element URL [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n=_satellite.getVar("Event | Action [gl]",a);if("button_click"===n||"link_click_external"===n)return _satellite.getVar("Event | Target URL [gl]",a)}}},"Storage | Campaign: External [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(){return{name:"sara_cid_ext",expiry:"session",purposes:["PuV-KM"]}}}},"Page | URL: Hash [gl]":{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/javascriptVariable.js",settings:{path:"document.location.hash"}},"XDM | Analytics: errorPage [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){return"page_data_ready"===_satellite.getVar("Event | Action [gl]",a)&&"404"==_satellite.getVar("Page | URL: Query Parameter: from [gl]",a)}}},"Event Value | event808: Any Consent Rejects [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){let n=_satellite.getVar("Event | Action [gl]",a),r=_satellite.getVar("Consent | CMP: Type [co]",a),o=_satellite.getVar("Consent | CMP: Action [co]",a);if(n.includes("consent_completed")&&r&&"rejected"==o)return 1}}},"XDM | Analytics: eVar115 - Engagement Type in Article [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){if("component_click"===_satellite.getVar("Event | Action [gl]",a)&&"gallery - engage"===_satellite.getVar("Event | Name [gl]",a)&&!_satellite.getVar("Event | Click ID [gl]",a).includes("sensitivemediawarning"))return _satellite.getVar("Component | Name [gl]",a)}}},"XDM | Analytics: eVar38 - Daily Usage [co][consent:PuV-Na]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){let n=["page_data_ready","consent_completed"].indexOf(_satellite.getVar("Event | Action [gl]",a))>-1,r=_satellite.getVar("Util | Function: Get Purpose Consent Mapping [gl-lo]")(["PuV-Na"]);if(Object.keys(r).filter((e=>r[e].length>0)).length>0&&n)return _satellite.getVar("User | Cookie: Usage [co]",a)}}},"XDM | Analytics: eVar152 - Google GCLID [gl][consent:PuV-KM]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){let n=["page_data_ready","virtual_page","consent_completed"].indexOf(_satellite.getVar("Event | Action [gl]",a))>-1,r=_satellite.getVar("Storage | Click ID: Google [gl]"),o=_satellite.getVar("Util | Function: Get Purpose Consent Mapping [gl-lo]")(r.purposes),i=_satellite.getVar("Page | URL: Query Parameter: gclid [gl]",a);if(Object.keys(o).filter((e=>o[e].length>0)).length>0&&n){let e=i;return e?window._satellite.getValOnce(e,r.name):e}if(n&&i){let e="(not yet approved)";return e?window._satellite.getValOnce(e,r.name):e}}}},"Product | Type in App [co]":{defaultValue:"not_defined",modulePath:"mapping-table/src/lib/dataElements/mappingTable.js",settings:{0:{input:"sp_iap_subscription_audioplus",method:"regex",output:"AUDIO+"},1:{input:"sp\\w+iap\\w+subscription",method:"regex",output:"SPIEGEL+"},2:{input:"spiegel_no_ads_monthly\\w*",method:"regex",output:"PUR"},3:{input:"de\\.spiegel\\.spon\\.(\\w+\\.)?SpiegelPlusMonthly\\w*",method:"regex",output:"SPIEGEL+"},4:{input:"de\\.spiegel\\.spon\\.(\\w+\\.)?SpiegelAdFreeMonthly\\w*",method:"regex",output:"PUR"},5:{input:"de\\.spiegel\\.spon\\.(\\w+\\.)?AudioPlusMonthly\\w*",method:"regex",output:"AUDIO+"},size:6,dataElement:"%Product | ID in App [co]%",defaultValueEmpty:!1}},"Event Value | event232: Create Gift Link Clicks [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){const n=/^button_click|link_click_external$/.test(_satellite.getVar("Event | Action [gl]",a)),r=/^gift-box.*?primary$/.test(_satellite.getVar("Event | Name [gl]",a));if(n&&r)return 1}}},"Storage | Click ID: Facebook [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(){return{name:"sara_cid_fb",expiry:"session",purposes:["PuV-KM"]}}}},"Marketing Pixel | Google ID: Account [sm]":{modulePath:"core/src/lib/dataElements/constant.js",settings:{value:"1036667778"}},"Event Value | event54: Engagement: Total Time [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){if(_satellite.getVar("Page | Previous Data JSON [co]",a)&&"page_data_ready"==_satellite.getVar("Event | Action [gl]",a))return _satellite.getVar("Page | Previous Page Timing: Engagement: Total [co]",a)}}},"Event Value | event233: Share Gift Link Clicks [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){const n=/^button_click|link_click_external$/.test(_satellite.getVar("Event | Action [gl]",a)),r=/^gift-box.*?gift-(?:copy|mail|share)$/.test(_satellite.getVar("Event | Name [gl]",a));if(n&&r)return 1}}},"Consent Setting | Purpose - PuV granted [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(){let e=["PuV-Au","PuV-Na","PuV-KM","PuV-Um","PuV-Pr"],t=_satellite.getVar("Util | Function: Get Purpose Consent Mapping [gl-lo]")(e),a=!0;return e.forEach((function(e){t[e]&&t[e].length<1&&(a=!1)})),a}}},"Editorial | Magazine [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"editorial.attributes.magazine",callback:function(){},doCustomCode:!1,convertToString:!1}},"Event | Headline [co]":{defaultValue:"",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"event.attributes.headline",callback:function(){},doCustomCode:!1,convertToString:!1}},"Consent | CMP: Type [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"consent.category.type",callback:function(){},doCustomCode:!1,convertToString:!1}},"XDM | Analytics: eVar95 - Editorial Author Abbreviations [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n="virtual_page"===_satellite.getVar("Event | Action [gl]",a),r="page_data_ready"===_satellite.getVar("Event | Action [gl]",a),o="article"===_satellite.getVar("Page | Route [gl]",a);return(n||r)&&o?(returnVal=_satellite.getVar("Editorial | Author: Abbreviations [co]",a),window._satellite.pageDataToPersist.eVar95=returnVal,returnVal):window._satellite.pageDataToPersist.eVar95?window._satellite.pageDataToPersist.eVar95:void 0}}},"XDM | Analytics: prop57 - User Has No Consent [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){return["page_data_ready","virtual_page","consent_completed"].indexOf(_satellite.getVar("Event | Action [gl]",a))>-1?(returnVal=_satellite.getVar("User | Current Consent: no Consent (String) [gl]",a),window._satellite.pageDataToPersist.prop57=returnVal,returnVal):window._satellite.pageDataToPersist.prop57?window._satellite.pageDataToPersist.prop57:void 0}}},"Consent | CONSTANT: fullAA [co]":{modulePath:"core/src/lib/dataElements/constant.js",settings:{value:"fullAA"}},"XDM | Analytics: eVar101 - Media Status [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n=_satellite.getVar("Event | Action [gl]",a),r=0===_satellite.getVar("Event | Name [gl]",a).indexOf("ivw")||"audio"===n&&"podlove"==_satellite.getVar("Event | Source [gl]",a)&&a.detail.state.audio;return"audio"!==n||r?"video"!==n||r?void 0:_satellite.getVar("Event | Autostart (String) [co]",a)+"::"+_satellite.getVar("Event | Muted (String) [co]",a):_satellite.getVar("Event | Autostart (String) [co]",a)+"::"+_satellite.getVar("Event | Muted (String) [co]",a)+"::"+_satellite.getVar("Event | State [gl]",a)}}},"Event Value | event51: Engagement: Visible Time [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){if(_satellite.getVar("Page | Previous Data JSON [co]",a)&&"page_data_ready"==_satellite.getVar("Event | Action [gl]",a))return _satellite.getVar("Page | Previous Page Timing: Engagement: Visibility [co]",a)}}},"Editorial | Date: isRecent [co]":{modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){function e(e){const t=new Date(e),a=new Date,n=new Date(a);return n.setTime(a.getTime()-1728e5),t>=n}const t=_satellite.getVar("Editorial | Date: Published [co]");return e(t),e(t)}}},"Event | URL: Pathname [gl]":{defaultValue:"",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){return new URL(_satellite.getVar("Event | Target URL [gl]",a)).pathname}}},"Event Value | event135: Media Milestones 75 [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n=_satellite.getVar("Event | Action [gl]",a),r="audio"===n||"video"===n,o=0===_satellite.getVar("Event | Name [gl]",a).indexOf("ivw")||"audio"===n&&"podlove"==_satellite.getVar("Event | Source [gl]",a)&&a.detail.state.audio;if(r&&"milestone 75%"===_satellite.getVar("Event | Name [gl]",a)&&!o)return 1}}},"XDM | Analytics: eVar52 - Editorial has Paywall [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n="virtual_page"===_satellite.getVar("Event | Action [gl]",a),r="page_data_ready"===_satellite.getVar("Event | Action [gl]",a),o="article"===_satellite.getVar("Page | Route [gl]",a);return(n||r)&&o?(returnVal=_satellite.getVar("Paywall | is Active (String) [co]",a),window._satellite.pageDataToPersist.eVar52=returnVal,returnVal):window._satellite.pageDataToPersist.eVar52?window._satellite.pageDataToPersist.eVar52:void 0}}},"User | Dynamic Targeting String [co]":{modulePath:"data-element-assistant/src/lib/dataElements/concatenate.js",settings:{returnEmpty:!1,trailingDelimiter:"",dataElementsAndDelimiters:[{path:"",delimiter:"",inputType:"dataelement",dataElement:"%Cookie | Dynamic Paygate [co]%",omitWhenEmpty:!0},{path:"",delimiter:";",inputType:"dataelement",dataElement:"%Cookie | Dynamic Homepage Teaser [co]%",omitWhenEmpty:!0},{path:"",delimiter:";",inputType:"dataelement",dataElement:"%Cookie | Dynamic Adbrain Test [co]%",omitWhenEmpty:!0},{path:"",delimiter:";",inputType:"dataelement",dataElement:"%Cookie | Personalisierte Inhaltsempfehlungen [co]%",omitWhenEmpty:!1}]}},"Page | Empty Adslots Count [co]":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){function e(e){"load"==e.event.info.action&&++t}var t=0;return SARAs_data.getEventHistory().forEach(e),t}}},"XDM | Analytics: eVar20 - Component String [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n=_satellite.getVar("Event | Action [gl]",a),r=["page_data_ready","virtual_page"];if(["button_click","component_view","component_click","consent_completed","layer_open","link_click_external"].includes(n))return _satellite.getVar("Component | Tracking String [gl]",a);if(r.indexOf(n)>-1){let e=_satellite.getVar("Post Click | Click Attributes JSON [gl]",a)&&JSON.parse(_satellite.getVar("Post Click | Click Attributes JSON [gl]",a));return e&&e.item_source?e.component+";is="+e.item_source+";ver="+e.run_id+";cra="+e.created_at:""}}}},"Form | Class [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"form.category.class",callback:function(){},doCustomCode:!1,convertToString:!1}},"Config | Data Model Version [gl-lo]":{defaultValue:"",modulePath:"core/src/lib/dataElements/constant.js",settings:{value:"w2.5.2_core-20250515_local:sp_1608_update"}},"Click | Element String [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"event.attributes",callback:function(e){if(e)return"cta="+e.cta+";en="+e.element_name+";et="+e.element_text},doCustomCode:!0,convertToString:!1}},"Marketing Pixel | Outbrain ID [sm]":{defaultValue:"",modulePath:"core/src/lib/dataElements/constant.js",settings:{value:"00bf784a92253a49c50216eea8b47eb721"}},"Event Value | event45: Performance: Load Library Time [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){if(_satellite.getVar("Page | Previous Data JSON [co]",a)&&"page_data_ready"==_satellite.getVar("Event | Action [gl]",a))return _satellite.getVar("Page | Previous Page Timing: Performance: Load Libraries [co]",a)}}},"Event Value | event241: Bookmarks Removed [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){if("button_click"===_satellite.getVar("Event | Action [gl]",a)&&"bookmark - delete"===_satellite.getVar("Event | Name [gl]",a))return 1}}},"Event Value | event917: End of HP [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){if("scroll"===_satellite.getVar("Event | Action [gl]",a)&&"editorial - complete"===_satellite.getVar("Event | Name [gl]",a)&&"homepage"===_satellite.getVar("Page | Route [gl]",a))return 1}}},"Event Value | event801: General Consent Rejects [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){let n=_satellite.getVar("Event | Action [gl]",a),r=_satellite.getVar("Consent | CMP: Type [co]",a),o=_satellite.getVar("Consent | CMP: Action [co]",a);if("consent_completed"===n&&"general"===r&&"rejected"==o)return 1}}},"Paywall | Type [co]":{defaultValue:"",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"paywall.category.type",callback:function(){},doCustomCode:!1,convertToString:!1}},"XDM | Analytics: prop2 - R1D2 Referrer Category [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n=_satellite.getVar("Event | Action [gl]",a);return"virtual_page"===n||"page_data_ready"===n?_satellite.getVar("Page | Referrer: Category [gl]",a):"link_click_external"===n&&"homepage"===_satellite.getVar("Page | Route [gl]",a)?"from_int_homepage":void 0}}},"Page | URL: Query Parameter: fbclid [gl]":{modulePath:"core/src/lib/dataElements/queryStringParameter.js",settings:{name:"fbclid",caseInsensitive:!0}},"Storage | Campaign: Target Activity [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(){return{name:"sara_cid_at",expiry:"session",purposes:["PuV-KM","pVa-Me"]}}}},"Editorial | is Breaking News (String) [co]":{defaultValue:"",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"editorial.attributes.is_breaking",callback:function(e){return!0===e?"is_breakingNews":"not_breakingNews"},doCustomCode:!0,convertToString:!1}},"Page | URL: Query Parameter: sara_ref [co]":{forceLowerCase:!0,cleanText:!0,modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(){return new URLSearchParams(_satellite.getVar("Page | URL: Query Parameter [gl]")).get("sara_ref")}}},"Event Value | event8: Download Link Clicks [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){if("link_click_download"===_satellite.getVar("Event | Action [gl]",a))return 1}}},"Media | Playtime [co]":{defaultValue:"",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"event.attributes.dtPlayed",callback:function(e){return Math.round(e/1e3)},doCustomCode:!0,convertToString:!1}},"XDM | Analytics: prop73 - Launch Property + General Info [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n=_satellite.getVar("Event | Action [gl]",a);if("page_data_ready"===n||"virtual_page"===n)return returnVal=_satellite.getVar("QS | Launch: Property + Version + Version Date [gl]",a),returnVal}}},"Event | URL: Name String [gl]":{defaultValue:"",modulePath:"data-element-assistant/src/lib/dataElements/concatenate.js",settings:{returnEmpty:!1,trailingDelimiter:"",dataElementsAndDelimiters:[{path:"",delimiter:"",inputType:"dataelement",dataElement:"%Event | URL: Name: Prefix [gl]%",omitWhenEmpty:!1},{path:"",delimiter:".",inputType:"dataelement",dataElement:"%Event | URL: Subdomains [gl]%",omitWhenEmpty:!1},{path:"",delimiter:">",inputType:"dataelement",dataElement:"%Event | URL: Name: Substring [gl]%",omitWhenEmpty:!1}]}},"Editorial | Genre [co]":{defaultValue:"",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"editorial.category.genre",callback:function(){},doCustomCode:!1,convertToString:!1}},"Consent | CONSTANT: basic [gl]":{modulePath:"core/src/lib/dataElements/constant.js",settings:{value:"basic"}},"XDM | Analytics: eVar16 - Page Pure Tracking Option [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n=_satellite.getVar("Event | Action [gl]",a);return"page_data_ready"===n||"virtual_page"===n?(returnVal=_satellite.getVar("Page | PUR Tracking (String) [co]",a),window._satellite.pageDataToPersist.eVar16=returnVal,returnVal):window._satellite.pageDataToPersist.eVar16?window._satellite.pageDataToPersist.eVar16:void 0}}},"Other Pixel | VG Wort: ID [co]":{defaultValue:"",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"external.vg_wort.id",callback:function(){},doCustomCode:!1,convertToString:!1}},"Editorial | has noContentAds (String)  [co]":{defaultValue:"",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"editorial.attributes.has_noContentAds",callback:function(e){return!0===e?"no_contentAds":"has_contentAds"},doCustomCode:!0,convertToString:!1}},"XDM | Analytics: eVar150 - Traffic Campaign (sara_ref) [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){let n;return/^virtual_page|page_data_ready$/.test(_satellite.getVar("Event | Action [gl]",a))&&(n=_satellite.getVar("Page | URL: Query Parameter: sara_ref [co]",a),n=null===n&&/^\#ref\=rss/.test(_satellite.getVar("Page | URL: Hash [gl]"))?"re-rss":n,window._satellite.pageDataToPersist.eVar150=n),window._satellite.pageDataToPersist.eVar150&&(n=window._satellite.pageDataToPersist.eVar150),n}}},"Editorial | Headline [co]":{defaultValue:"",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"editorial.info.headline",callback:function(){},doCustomCode:!1,convertToString:!1}},"Form | Field email [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"form.fields.email",callback:function(){},doCustomCode:!1,convertToString:!1}},"XDM | Analytics: eVar102 - Media Type [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n=_satellite.getVar("Event | Action [gl]",a),r=0===_satellite.getVar("Event | Name [gl]",a).indexOf("ivw")||"audio"===n&&"podlove"==_satellite.getVar("Event | Source [gl]",a)&&a.detail.state.audio;return"audio"!==n||r?"video"!==n||r?void 0:"video":"audio"}}},"Config | App: Measurement Manager Compatibility Version: iOS [co-lo]":{modulePath:"core/src/lib/dataElements/constant.js",settings:{value:"163"}},"Consent | CMP: Action [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"consent.info.action",callback:function(){},doCustomCode:!1,convertToString:!1}},"Event Value | event41: Performance: Response Complete Time [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){if(_satellite.getVar("Page | Previous Data JSON [co]",a)&&"page_data_ready"==_satellite.getVar("Event | Action [gl]",a)){var n=_satellite.getVar("Page | Previous Page Timing: Performance: Response Complete [co]",a);return n||void 0}}}},"Page | Platform [gl]":{defaultValue:"",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"page.info.platform",callback:function(){},doCustomCode:!1,convertToString:!1}},"Cookie | Dynamic Homepage Teaser [co]":{modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){if("mobile"==_satellite.getVar("Page | Viewport [co]")){let e,t;return t=_satellite.cookie.get("sara_target_teaser")&&decodeURIComponent(_satellite.cookie.get("sara_target_teaser"))||"hp=not_set",e="homepage"==_satellite.getVar("Page | Route [gl]")?t.includes(":")?":"+_satellite.getVar("Homepage | Test Teaser Count: Case 1 [lo]"):":default:"+_satellite.getVar("Homepage | Test Teaser Count: Case 1 [lo]"):"",t+e}}}},"Page | URL: Query Parameter: sara_at [gl]":{modulePath:"core/src/lib/dataElements/queryStringParameter.js",settings:{name:"sara_at",caseInsensitive:!0}},"XDM | Analytics: eVar12 - Page Referral URL [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){if(/^(?:page_data_ready|virtual_page|direct_call)$/.test(_satellite.getVar("Event | Action [gl]",a)))return _satellite.getVar("Page | Referrer: URL without Query [gl]",a)}}},"User | Current Consents [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){let n=_satellite.getVar("Util | Function: Get Purpose Consent Mapping [gl-lo]",a)(["pWxi-Any","pWxc-Rt","DaN-Au","prI-Au","prI-Me","prI-Pr","pVa-Au","pVa-Me","pVa-Pr","PuV-Na","PuV-Au","PuV-KM","PuV-Um","PuV-Pr"]),r={};return r.has_consent=Object.keys(n).filter((e=>n[e].length>0)),r.no_consent=Object.keys(n).filter((e=>0===n[e].length)),r}}},"Util | Target Test Cookie [gl[at]]":{defaultValue:"",modulePath:"core/src/lib/dataElements/cookie.js",settings:{name:"target_test"}},"XDM | Analytics: eVar79 - Editorial has Video [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n="virtual_page"===_satellite.getVar("Event | Action [gl]",a),r="page_data_ready"===_satellite.getVar("Event | Action [gl]",a),o="article"===_satellite.getVar("Page | Route [gl]",a);return(n||r)&&o?(returnVal=_satellite.getVar("Editorial | has Video (String) [co]",a),window._satellite.pageDataToPersist.eVar79=returnVal,returnVal):window._satellite.pageDataToPersist.eVar79?window._satellite.pageDataToPersist.eVar79:void 0}}},"Storage | Campaign: Internal [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(){return{name:"sara_cid_int",expiry:"session",purposes:["PuV-KM","pVa-Me"]}}}},"XDM | Analytics: eVar178 - User Conditional Status [sm]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){if(/^(?:page_data_ready|virtual_page|direct_call)$/.test(_satellite.getVar("Event | Action [gl]",a)))return _satellite.getVar("User | Condtitional Access String [sm]",a)}}},"Event ID | event112: Plus Article Metered Access [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){const n=/^(?:page_data_ready|virtual_page)$/.test(_satellite.getVar("Event | Action [gl]",a)),r="metered unlocked"===_satellite.getVar("XDM | Analytics: eVar139 - Paywall State [co]"),o=_satellite.getVar("User | SSO Tracking ID [gl[sso]-sm]"),i=_satellite.getVar("Editorial | Article ID [co]"),s=e=>/^(?:string|number)$/.test(typeof e)&&String(e).length>10;if(n&&r&&s(o)&&s(i))return _satellite.getVar("Util | Function: Event ID [gl]",o+i)}}},"XDM | Analytics: prop8 - Channels [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n="virtual_page"===_satellite.getVar("Event | Action [gl]",a),r="page_data_ready"===_satellite.getVar("Event | Action [gl]",a);if(n||r)return _satellite.getVar("Editorial | Channel [co]",a)}}},"Marketing Pixel | TikTok ID [sm]":{modulePath:"mapping-table/src/lib/dataElements/mappingTable.js",settings:{0:{input:"spon",method:"exact match",output:"CP1KTSRC77U6LQO16PNG"},size:1,dataElement:"%Page | Domain [gl]%",defaultValueEmpty:!0}},"Page | Viewport [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"page.attributes.viewport",callback:function(e){return e||(window.matchMedia("(max-width: 719px)").matches?"mobile":null)},doCustomCode:!0,convertToString:!1}},"XDM | Analytics: eVar90 - Hierarchy1 [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n="virtual_page"===_satellite.getVar("Event | Action [gl]",a),r="page_data_ready"===_satellite.getVar("Event | Action [gl]",a);if(n||r)return[_satellite.getVar("Page | Name: Prefix [gl-lo]",a),_satellite.getVar("Page | URL: Subdomain [gl]",a),_satellite.getVar("Page | Channel Slug [co]",a),_satellite.getVar("Page | Subchannel Slug [co]",a)].join("|")}}},"User | Access Feature Spmetered (Boolean) [sm]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"user.segment.access.Spmetered",callback:function(e){return"boolean"==typeof e&&e},doCustomCode:!0,convertToString:!1}},"Util | Function: Get Purpose Consent Mapping [gl-lo]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){return function(e){let t,n={},r={"DaN-Au":"655f1ab47129a00595f31a5e","prI-Au":"655f1ab47129a00595f31a65","prI-Me":"655f1ab47129a00595f31a68","prI-Pr":"655f1ab47129a00595f31a6c","pVa-Au":"655f1ab47129a00595f31a73","pVa-Me":"655f1ab47129a00595f31a78","pVa-Pr":"655f1ab47129a00595f31a80","PuV-Na":"655f1ab47129a00595f31a86","PuV-Au":"655f1ab47129a00595f31a96","PuV-KM":"655f1ab47129a00595f31a9d","PuV-Um":"655f1ab47129a00595f31aa5","PuV-Pr":"655f1ab47129a00595f31aaa","pWxc-Rt":"655f1ab47129a00595f31a57","pWxi-Any":"655f1ab37129a00595f30bd1"},o={"DaN-Au":"64bf9cc6b4a67c0535f6620c","prI-Au":"64bf9cc6b4a67c0535f66213","prI-Me":"64bf9cc6b4a67c0535f66216","prI-Pr":"64bf9cc6b4a67c0535f66219","pVa-Au":"64bf9cc6b4a67c0535f6621f","pVa-Me":"64bf9cc6b4a67c0535f6621d","pVa-Pr":"64bf9cc6b4a67c0535f6621b","PuV-Na":"64bf9cc6b4a67c0535f66221","PuV-Au":"64bf9cc6b4a67c0535f66227","PuV-KM":"64f4c5ec9d191a06ba6cb797","PuV-Um":"64bf9cc6b4a67c0535f66224","PuV-Pr":"64f4c5ec9d191a06ba6cb79c"};return"string"==typeof e&&(e=[e]),e.forEach((function(e){t=_satellite.getVar("User | has No Ads Access [sm]")?o[e]:r[e],"string"==typeof t&&(n[e]=_satellite.getVar("Consent Setting | Consented Purposes [gl]",a).filter((e=>t.includes(e._id))))})),n}}}},"Storage | Click ID: Meta Own (_fbp) [sm]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(){return{name:"_fbp",expiry:"30 days",purposes:["pWx-Me"]}}}},"XDM | Analytics: prop67 - QS Non Human Visitor [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(){return _satellite.getVar("Util | Boolean: Non Human Visitor [gl]")}}},"XDM | Analytics: eVar175 - Logged In String [gl[sso]]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){if(["page_data_ready","virtual_page"].indexOf(_satellite.getVar("Event | Action [gl]",a))>-1)return _satellite.getVar("User | Logged In String [gl[sso]-sm]",a)}}},"XDM | Analytics: eVar61 - Editorial Channel/Subchannel [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n="virtual_page"===_satellite.getVar("Event | Action [gl]",a),r="page_data_ready"===_satellite.getVar("Event | Action [gl]",a),o="article"===_satellite.getVar("Page | Route [gl]",a)
;return(n||r)&&o?(returnVal=_satellite.getVar("Editorial | Channel+Subchannel [co]",a),window._satellite.pageDataToPersist.eVar61=returnVal,returnVal):window._satellite.pageDataToPersist.eVar61?window._satellite.pageDataToPersist.eVar61:void 0}}},"XDM | Analytics: prop5 - Subscription Conversion Type [cc]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n=_satellite.getVar("Event | Action [gl]",a),r=_satellite.getVar("Component | Name [gl]",a),o=_satellite.getVar("Event | Attributes [gl]",a).cta||"",i="virtual_page"===n,s="page_data_ready"===n,l="article"===_satellite.getVar("Page | Route [gl]",a);return(i||s)&&l?_satellite.getVar("RADAR | Subscription String [gl]",a):"button_click"===n&&r.indexOf("paywall")>-1&&o.indexOf("primary")>-1?"paywall:click:"+_satellite.getVar("Page | Platform [gl]",a):1===_satellite.getVar("Event Value | Purchase (in App) [co]",a)?"conversion:"+_satellite.getVar("Page | Platform [gl]",a):void 0}}},"Device | is Mobile [gl]":{storageDuration:"pageview",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"user.device.is_mobile",callback:function(){},doCustomCode:!1,convertToString:!1}},"Config | Target Property: per Consent [gl-lo]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n=_satellite.getVar("User | Current Consent Status [gl-co]",a);if(n===_satellite.getVar("Consent | CONSTANT: allToolsWithoutPrI [co]",a)||n===_satellite.getVar("Consent | CONSTANT: allTools [gl]",a))return _satellite.getVar("Config | Target Property [lo]",a)}}},"Editorial | has Audio (String) [co]":{defaultValue:"",modulePath:"data-element-assistant/src/lib/dataElements/concatenate.js",settings:{returnEmpty:!1,trailingDelimiter:"",dataElementsAndDelimiters:[{path:"",delimiter:"",inputType:"dataelement",dataElement:"%Editorial | has Audio Embed (String) [co]%",omitWhenEmpty:!1},{path:"",delimiter:";",inputType:"dataelement",dataElement:"%Editorial | has Article Audio (String) [co]%",omitWhenEmpty:!1},{path:"",delimiter:":",inputType:"dataelement",dataElement:"%Editorial | Article Audio Type [co]%",omitWhenEmpty:!1}]}},"XDM | Analytics: eVar139 - Paywall State [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){const n=/^(?:virtual_page|page_data_ready)$/.test(_satellite.getVar("Event | Action [gl]",a)),r="article"===_satellite.getVar("Page | Route [gl]",a),o=_satellite.getVar("Paywall | is Active [co]",a),i=/^(?:paid|conditional)$/.test(_satellite.getVar("Paywall | Type [co]",a)),s=_satellite.getVar("User | Access Feature Spmetered (Boolean) [sm]"),l=_satellite.getVar("User | Access Feature Spplus (Boolean) [sm]"),c=/^0\/\d\|\d$/.test(_satellite.getVar("User | Metered Access Count (String) [co]")),d=_satellite.getVar("User | has Gift Article Access [co]");let u="[n/a]";return n&&r&&i&&(o&&s&&!l&&!c?u="metered":o&&s&&!l&&c?u="metered exhausted":o?u="plus":o||!s||l||d?!o&&d&&(u="gifted"):u="metered unlocked"),u}}},"Form | Status Code [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"form.status.code",callback:function(){},doCustomCode:!1,convertToString:!1}},"Editorial | has Affiliate (String) [co]":{defaultValue:"",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"editorial.attributes.has_affiliate",callback:function(e){return!0===e?"has_affiliate":!1===e?"no_affiliate":void 0},doCustomCode:!0,convertToString:!1}},"Event Value | event3: On-Site Interactions [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n=_satellite.getVar("Event | Action [gl]",a),r=_satellite.getVar("Event | Name [gl]",a),o=["button_click","layer_open","component_view","component_click","link_click_external","link_click_download","submit","consent_completed"],i="tcdata_change"===n&&"granted"===_satellite.getVar("Consent | CMP: Action [co]",a)&&"useractioncomplete"===_satellite.getVar("Consent | CMP: Event Status [co]",a),s="scroll"===n&&("editorial - complete"===r||"page - complete"===r);if(o.includes(n)||i||s)return 1;var l="audio"===n||"video"===n,c=0===r.indexOf("ivw")||"podlove"==_satellite.getVar("Event | Source [gl]",a)&&_satellite.getVar("Event | State [gl]",a).audio;return l&&!c?1:void 0}}},"Page | URL: Query Parameter: from [gl]":{defaultValue:"",modulePath:"core/src/lib/dataElements/queryStringParameter.js",settings:{name:"from",caseInsensitive:!0}},"Event Value | event168: Gallery Layer Open Clicks [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){if("component_click"===_satellite.getVar("Event | Action [gl]",a)&&"gallery - engage"===_satellite.getVar("Event | Name [gl]",a)&&!_satellite.getVar("Event | Click ID [gl]",a).includes("sensitivemediawarning"))return 1}}},"Page | URL: Query Parameter: gclid [gl]":{modulePath:"core/src/lib/dataElements/queryStringParameter.js",settings:{name:"gclid",caseInsensitive:!0}},"XDM | Analytics: eVar10 - Page URL Fragment [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n="virtual_page"===_satellite.getVar("Event | Action [gl]",a),r="page_data_ready"===_satellite.getVar("Event | Action [gl]",a);if(n||r)return _satellite.getVar("Page | URL: Hash [gl]",a)}}},"User | Access Object String [gl[sso]]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"user.segment.access",callback:function(e){let t;return"object"==typeof e&&(t=Object.keys(e).filter((t=>!0===e[t])).join("~")),t},doCustomCode:!0,convertToString:!1}},"Event | Attributes [gl]":{defaultValue:"",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"event.attributes",callback:function(){},doCustomCode:!1,convertToString:!1}},"Event | Source [gl]":{defaultValue:"",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"event.attributes.source",callback:function(){},doCustomCode:!1,convertToString:!1}},"Device | Phone String [gl]":{storageDuration:"pageview",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e){let t;return t=e.user.device?e.user.device.is_phone:e.page.attributes.is_phone,!0===t&&"phone"}}},"Event Value | event291: Secondary Conversion Button Clicks [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n=_satellite.getVar("Event | Attributes [gl]",a).cta||"";if("button_click"===_satellite.getVar("Event | Action [gl]",a)&&n.startsWith("secondary"))return 1}}},"Event Value | event133: Media Milestones 25 [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n=_satellite.getVar("Event | Action [gl]",a),r="audio"===n||"video"===n,o=0===_satellite.getVar("Event | Name [gl]",a).indexOf("ivw")||"audio"===n&&"podlove"==_satellite.getVar("Event | Source [gl]",a)&&a.detail.state.audio;if(r&&"milestone 25%"===_satellite.getVar("Event | Name [gl]",a)&&!o)return 1}}},"Consent Setting | Purpose - prI granted [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(){let e=["prI-Au","prI-Me","prI-Pr"],t=_satellite.getVar("Util | Function: Get Purpose Consent Mapping [gl-lo]")(e),a=!0;return e.forEach((function(e){t[e]&&t[e].length<1&&(a=!1)})),a}}},"XDM | Analytics: eVar50 - Article ID [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){const n=_satellite.getVar("Event | Action [gl]",a),r="virtual_page"===n,o="page_data_ready"===n,i="button_click"===n&&"bookmark - add"===_satellite.getVar("Event | Name [gl]",a),s="article"===_satellite.getVar("Page | Route [gl]",a);return(r||o)&&s||i?(returnVal=_satellite.getVar("Editorial | Article ID [co]",a),window._satellite.pageDataToPersist.eVar50=returnVal,returnVal):window._satellite.pageDataToPersist.eVar50?window._satellite.pageDataToPersist.eVar50:void 0}}},"XDM | Analytics: eVar97 - Editorial Author Names [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n="virtual_page"===_satellite.getVar("Event | Action [gl]",a),r="page_data_ready"===_satellite.getVar("Event | Action [gl]",a),o="article"===_satellite.getVar("Page | Route [gl]",a);if((n||r)&&o){var i=_satellite.getVar("Editorial | Author: Names [co]",a),s=Array.isArray(i)?i.join(","):i;return window._satellite.pageDataToPersist.eVar97=s,s}if(window._satellite.pageDataToPersist.eVar97)return window._satellite.pageDataToPersist.eVar97}}},"User | has SSO Tracking ID [gl[sso]-sm]":{defaultValue:"",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"user.info.sso_tracking_id",callback:function(e){return"string"==typeof e?"has_ssoID":"no_ssoID"},doCustomCode:!0,convertToString:!1}},"XDM | Analytics: Referrer [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n=_satellite.getVar("Event | Action [gl]",a);return"page_data_ready"===n&&"404"===_satellite.getVar("Page | URL: Query Parameter: from [gl]",a)?_satellite.getVar("Page | URL: Query Parameter: ref [gl]",a):"virtual_page"===n||"page_data_ready"===n?_satellite.getVar("Page | Referrer [gl]",a):void 0}}},"XDM | Marketing Event [sm-co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){if(_satellite.getVar("Paywall | is Active [co]",a))return"ViewPaywall"}}},"Event Value | event802: General Consent Layer Shown [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){let n=_satellite.getVar("Event | Action [gl]",a),r=_satellite.getVar("Consent | CMP: Type [co]",a),o=_satellite.getVar("Consent | CMP: Action [co]",a);if("layer_open"===n&&"general"==r&&"waiting"==o)return 1}}},"XDM | Analytics: eVar137 - Paywall Type [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n="virtual_page"===_satellite.getVar("Event | Action [gl]",a),r="page_data_ready"===_satellite.getVar("Event | Action [gl]",a),o="article"===_satellite.getVar("Page | Route [gl]",a),i=!0===_satellite.getVar("Paywall | is Active [co]",a),s=_satellite.getVar("Paywall | Type [co]",a),l=!("string"!=typeof s||!/paid|conditional/.test(s));if((n||r)&&o&&i&&l)return _satellite.getVar("Paywall | Type [co]",a)}}},"Config | DataStream: Target Only [co-lo]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){return"production"===_satellite.getVar("QS | Launch: Environment Stage [gl]",a)?"e45e7243-b241-40dd-8440-4b699d5ec514":"f24d8d75-fea2-4204-8695-34301c636c08"}}},"Storage | Usage: Session ID [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(){return{name:"sara_user_session-id",expiry:"session",purposes:["PuV-Na","pVa-Pr","prI-Pr"]}}}},"XDM | Analytics: eVar58 - Editorial Style [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n="virtual_page"===_satellite.getVar("Event | Action [gl]",a),r="page_data_ready"===_satellite.getVar("Event | Action [gl]",a),o="article"===_satellite.getVar("Page | Route [gl]",a);return(n||r)&&o?(returnVal=_satellite.getVar("Editorial | Style [co]",a),window._satellite.pageDataToPersist.eVar58=returnVal,returnVal):window._satellite.pageDataToPersist.eVar58?window._satellite.pageDataToPersist.eVar58:void 0}}},"Editorial | Topics (Array) [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"editorial.info.topics",callback:function(){},doCustomCode:!1,convertToString:!1}},"QS | Event: Action + Name + Label [gl]":{defaultValue:"",modulePath:"data-element-assistant/src/lib/dataElements/concatenate.js",settings:{returnEmpty:!1,trailingDelimiter:"",dataElementsAndDelimiters:[{path:"",delimiter:"",inputType:"dataelement",dataElement:"%Event | Action [gl]%",omitWhenEmpty:!1},{path:"",delimiter:"|",inputType:"dataelement",dataElement:"%Event | Name [gl]%",omitWhenEmpty:!1},{path:"",delimiter:"|",inputType:"dataelement",dataElement:"%Event | Label [gl]%",omitWhenEmpty:!1}]}},"XDM | Analytics: eVar60 - Editorial Channel [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n="virtual_page"===_satellite.getVar("Event | Action [gl]",a),r="page_data_ready"===_satellite.getVar("Event | Action [gl]",a),o="article"===_satellite.getVar("Page | Route [gl]",a);return(n||r)&&o?(returnVal=_satellite.getVar("Editorial | Channel [co]",a),window._satellite.pageDataToPersist.eVar60=returnVal,returnVal):window._satellite.pageDataToPersist.eVar60?window._satellite.pageDataToPersist.eVar60:void 0}}},"Storage | Usage: Previous Page [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(){return{name:"sara_gpv_page",expiry:"session",purposes:["PuV-Na"]}}}},"Util | Boolean: Non Human Visitor [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(){if(_satellite.getVar("User | is Logged In [co]")&&_satellite.getVar("User | has Paid Access [sm]"))return!1;const e={web_driver:navigator.webdriver,headless_browser:navigator.userAgent?.includes("Headless"),no_languages:0===(navigator.languages?.length||0),suspicious_user_agent_string:/(?<!cu)bot|crawl|spider|headless|preview|scrape|copy|parse|fetch|ia_archiver|sogou|httpclient|http-client|mechanize|node-fetch|okhttp|facebookexternalhit|python|nessus|curl|lighthouse|axios|ptst|cloudfront|feedfetcher|mediapartners|inspectiontool|slurp|wget|linkedinbot|libwww-perl|httpunit|googleother|google-extended|anthropic-ai|cohere-ai|chatgpt|yeti|jetoctopus|contentking|guzzlehttp|httpie|restsharp|http-kit|http\.rb|aiohttpimport\.io|webhose\.io|dexi\.io|zyte|outwit|getleft|httrack|sequentum|webharvy/i.test(navigator.userAgent)};for(const t in e)if(e[t])return!0;return!1}}},"Marketing Pixel | Handle: Meta Identifier (_fbp) [sm-lo][consent]":{storageDuration:"pageview",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){if(_satellite.getVar("User | Current Consent Status [gl-co]",a)===_satellite.getVar("Consent | CONSTANT: allTools [gl]",a)){let e=_satellite.getVar("Storage | Click ID: Meta Own (_fbp) [sm]").name;return _satellite.saraCookieRead(e)}}}},"Post Click | Click: Headline [gl]":{defaultValue:"",storageDuration:"pageview",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){try{return JSON.parse(_satellite.getVar("Post Click | Click Attributes JSON [gl]",a)).headline}catch(e){return}}}},"XDM | Analytics: eVar43 - Active Time on Page [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n=_satellite.getVar("Event | Action [gl]",a),r=_satellite.getVar("Event | Name [gl]",a);if("component_view"===n||"scroll"===n&&("editorial - complete"===r||"page - complete"===r)||"consent_completed"===n)return _satellite.getVar("Page | Timing: Engagement: Active (sec) [co]",a)}}},"Event | URL: Name: Substring [gl]":{defaultValue:"",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n=_satellite.getVar("Event | URL: Pathname [gl]",a),r=n.match(/(\/.+\/)/g),o=/(\w+)-(\d{5,}){1}-?\d{0,2}\.html|(\w+)-([a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}){1}|(\d+)\/(?:#\w+)*$/g.exec(n);if(o){var i=o[4]||_satellite.getVar("Util | Function: Get Polygon from CE ID [gl]",a)(o[2]),s=o[1]||o[3];switch(s){case"a":s="article";break;case"fotostrecke":s="gallery"}return[s,i].join(" > ")}return["other",r].join(" > ").replace(/.>.$/,"")}}},"Storage | Purchase [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(){return{name:"sara_purchase",expiry:"session",purposes:[""]}}}},"Page | Article Attention Level (AAL) Trigger":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"event.attributes.trigger",callback:function(e){return"string"==typeof e?String(e):void 0},doCustomCode:!0,convertToString:!1}},"Event Value | event383: Paywall Subscription Clicks [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n=_satellite.getVar("Event | Action [gl]",a),r="button_click"===n,o=_satellite.getVar("Component | Name [gl]",a).includes("paywall");return r&&o&&_satellite.getVar("Event | Attributes [gl]",a).cta.startsWith("primary")||"link_click_external"===n&&_satellite.getVar("Event | Name [gl]",a).includes("friendly")&&_satellite.getVar("Event | Click ID [gl]",a).includes("paywall-purchase-button")?1:void 0}}},"Event | Item: Media ID [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"event.attributes.item.mediaid",callback:function(e){return e||void 0},doCustomCode:!0,convertToString:!1}},"XDM | Analytics: eVar74 - Editorial is list Excluded [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n="virtual_page"===_satellite.getVar("Event | Action [gl]",a),r="page_data_ready"===_satellite.getVar("Event | Action [gl]",a),o="article"===_satellite.getVar("Page | Route [gl]",a);return(n||r)&&o?(returnVal=_satellite.getVar("Editorial | List Excluded (String) [co]",a),window._satellite.pageDataToPersist.eVar74=returnVal,returnVal):window._satellite.pageDataToPersist.eVar74?window._satellite.pageDataToPersist.eVar74:void 0}}},"XDM | Analytics: eVar57 - Editorial Genre [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n="virtual_page"===_satellite.getVar("Event | Action [gl]",a),r="page_data_ready"===_satellite.getVar("Event | Action [gl]",a),o="article"===_satellite.getVar("Page | Route [gl]",a);return(n||r)&&o?(returnVal=_satellite.getVar("Editorial | Genre [co]",a),window._satellite.pageDataToPersist.eVar57=returnVal,returnVal):"string"==typeof window._satellite.pageDataToPersist.eVar57?window._satellite.pageDataToPersist.eVar57:void 0}}},"Component | Component (Array) [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){return[_satellite.getVar("Component | Tracking String [gl]",a)+";pos="+_satellite.getVar("Component | Position String [gl]")].concat(_satellite.getVar("Component | Article Information (Array) [gl]"))}}},"Form | Name [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"form.info.name",callback:function(){},doCustomCode:!1,convertToString:!1}},"Util | Function: Check Campaign Parameter [gl]":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){return function(e,t){var a="sea";if("string"!=typeof e)return"";if("sea_pd_"!==e.substring(0,7))return"";var n,r,o,i,s,l,c=e.split("_");if("dcid"==t?(n=c[c.length-6]||"noNetwork",r=c[c.length-5]||"noCampaignID",i=c[c.length-4]||"noAdgroupID",s=c[c.length-3],o=c[c.length-2],l=c[c.length-1]):"asa"==c[2]?(n=c[2]||"noNetwork",i=c[3]||"noAdgroupID",s="kwd-"+c[4]||"noKWD",o=c[5],r=c[6]):(n=c[2]||"noNetwork",i=c[3]||"noAdgroupID",s=c[4],o=c[5],l=c[6]),"novt"===n)return e;if("string"==typeof s&&""!==s){var d={};s.split(":").forEach((function(e){var t=e.split("-");d[t[0]]=t[1]})),s=d}else s={};let u=i,g="noMatchingID";return s&&s.pla?(g=l||"noProductID",n+="s"):"d"===n?(g=o||"noCreative",a="disp"):"x"===n?(u=r,g=l||"noProductID"):g=s.kwd||s.dsa||"noKWD",[a,"pd",n,u,g].join("_")}}}},"Component | Type [gl]":{forceLowerCase:!0,modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"event.attributes.component_type",callback:function(){},doCustomCode:!1,convertToString:!1}},"Page | ID [co]":{defaultValue:"",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"page.info.id",callback:function(){},doCustomCode:!1,convertToString:!1}},"User | Current Consent: no Consent (String) [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(){return _satellite.getVar("User | Current Consents [gl]").no_consent.join("~")}}},"Page | Timing: Performance: Page Render [co]":{defaultValue:"",modulePath:"accessible-page-speed-metrics/src/lib/dataElements/pageRenderTime.js",settings:{}},"Storage | Campaign: Any [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(){return{name:"sara_cid_any",expiry:"session",purposes:["PuV-KM","pVa-Me"]}}}},"Event | URL: Name: Prefix [gl]":{modulePath:"mapping-table/src/lib/dataElements/mappingTable.js",settings:{0:{input:"manager-magazin.de",method:"contains",output:"mm"},1:{input:"spiegel.de",method:"contains",output:"sp"},size:2,dataElement:"%Event | URL: Hostname [gl]%",defaultValueEmpty:!0}},"Page | Previous Page Timing: First Visible [co]":{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){return JSON.parse(_satellite.getVar("Page | Previous Data JSON [co]")).engagement.time_first_visible}}},"XDM | Analytics: eVar177 - User Paid Status [sm]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){if(/^(?:page_data_ready|virtual_page|direct_call)$/.test(_satellite.getVar("Event | Action [gl]",a)))return _satellite.getVar("User | Paid Access String [sm]",a)}}},"Event Value | event141: Media FIrst Minutes Watched [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n=_satellite.getVar("Event | Action [gl]",a),r="audio"===n||"video"===n,o="audio"===n&&"podlove"==_satellite.getVar("Event | Source [gl]",a)&&_satellite.getVar("Event | State [gl]",a).audio;if(r&&"first-minute"===_satellite.getVar("Event | Name [gl]",a)&&!o)return 1}}},"Editorial | is Exclusive (String) [co]":{defaultValue:"",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"editorial.attributes.is_exclusive",callback:function(e){return!0===e?"is_exclusive":"not_exclusive"},doCustomCode:!0,convertToString:!1}},"Event Value | event53: Engagement: Active Time [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){if(_satellite.getVar("Page | Previous Data JSON [co]",a)&&"page_data_ready"==_satellite.getVar("Event | Action [gl]",a))return _satellite.getVar("Page | Previous Page Timing: Engagement: Active [co]",a)}}},"Other Pixel | VG Wort: Request URL [co]":{defaultValue:"",modulePath:"mapping-table/src/lib/dataElements/mappingTable.js",settings:{0:{input:"paid\\|.+",method:"regex",output:"https://spiegel.met.vgwort.de/na/pw-%Other Pixel | VG Wort: ID [co]%"},1:{input:"\\w+\\|.+",method:"regex",output:"https://spiegel.met.vgwort.de/na/%Other Pixel | VG Wort: ID [co]%"},2:{input:"paid\\|$",method:"regex",output:"https://spiegel.met.vgwort.de/na/pw-vgzm.2780134-%Editorial | Article ID [co]%"},3:{input:"\\w+\\|$",method:"regex",output:"https://spiegel.met.vgwort.de/na/vgzm.2780134-%Editorial | Article ID [co]%"},size:4,dataElement:"%Paywall | Type [co]%|%Other Pixel | VG Wort: ID [co]%",defaultValueEmpty:!0}},"XDM | Analytics: eVar3 - Page Delivery Platform [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n=_satellite.getVar("Event | Action [gl]",a);return"page_data_ready"===n||"virtual_page"===n?(returnVal=_satellite.getVar("Page | Platform [gl]",a),window._satellite.pageDataToPersist.eVar3=returnVal,returnVal):window._satellite.pageDataToPersist.eVar3?window._satellite.pageDataToPersist.eVar3:void 0}}},"XDM | Analytics: eVar130 - Form Name [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){if("submit"===_satellite.getVar("Event | Action [gl]",a))return _satellite.getVar("Form | Name [gl]",a)}}},"Event Value | event137: Media Completes [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n=_satellite.getVar("Event | Action [gl]",a),r="audio"===n||"video"===n,o=0===_satellite.getVar("Event | Name [gl]",a).indexOf("ivw")||"audio"===n&&"podlove"==_satellite.getVar("Event | Source [gl]",a)&&a.detail.state.audio;if(r&&"complete"===_satellite.getVar("Event | Name [gl]",a)&&!o)return 1}}},"Page | Previous Page Timing: Engagement: Hidden [co]":{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){return JSON.parse(_satellite.getVar("Page | Previous Data JSON [co]")).engagement.time_hidden}}},"XDM | Analytics: eVar24 - Click Position: Steps [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n=_satellite.getVar("Event | Action [gl]",a),r="virtual_page"===n,o="page_data_ready"===n,i=_satellite.getVar("Post Click | Click Attributes JSON [gl]",a),s=_satellite.getVar("Post Click | Click: Referrer [gl]",a)===_satellite.getVar("Page | Canonical URL [gl]",a);return(r||o)&&i&&!s?_satellite.getVar("Post Click | Click: Position [gl]",a):"link_click_external"===n?_satellite.getVar("Event | Pos [gl]",a):["button_click","component_click","component_view","consent_completed","layer_open"].includes(n)?_satellite.getVar("Component | Position String [gl]",a):void 0}}},"XDM | Analytics: eVar181 - Serverside Testing Cookie Values [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n=_satellite.getVar("Event | Action [gl]",a);if("virtual_page"===n||"page_data_ready"===n)return _satellite.getVar("User | Dynamic Targeting String [co]",a)}}},"Homepage | Test Teaser Count: Case 1 [lo]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){let n,r,o,i,s,l;if(_satellite.getVar("User | has Paid Access [co]",a)?i="data-has-paid-access-hidden":_satellite.getVar("User | has Paid Access [co]",a)||(i="data-has-no-paid-access-hidden"),o=document.querySelectorAll('[data-area^="block>topic"]:not(['+i+']) :not([data-pos$=":1"])>[data-target-teaser] [data-target-teaser-el="text"]'),s=document.querySelectorAll('[data-area="news-section"] [data-area^="block>topic"]:not(['+i+']) :not([data-pos$=":1"])>[data-target-teaser] [data-target-teaser-el="text"]').length,l=document.querySelectorAll('[data-area="additional-section"] [data-area^="block>topic"]:not(['+i+']) :not([data-pos$=":1"])>[data-target-teaser] [data-target-teaser-el="text"]').length,o.length>0){for(r=o[0].parentElement,n=r.offsetTop;r.offsetParent;)r=r.offsetParent,n+=r.offsetTop;return"tc_"+s+"+"+l+"-dsr_"+Math.round(n/window.innerHeight*10)/10}return"tc_0"}}},"XDM | Analytics: products [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"product",callback:function(e,t){function a(e){prod={},prod.SKU=e.info.id,prod.quantity=1,prod.priceTotal=e.price.price,prod._experience.analytics.customDimensions.eVars.eVar161=e.info.id,prod._experience.analytics.customDimensions.eVars.eVar162=e.attributes.paywall_id,prod._experience.analytics.customDimensions.eVars.eVar163=e.category.type,n.push(prod)}if(1===_satellite.getVar("Event Value | Purchase (in App) [co]",t)){var n=[];return e.forEach(a),n}},doCustomCode:!0,convertToString:!1}},"XDM | Analytics: eVar80 - Editorial has Gallery [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n="virtual_page"===_satellite.getVar("Event | Action [gl]",a),r="page_data_ready"===_satellite.getVar("Event | Action [gl]",a),o="article"===_satellite.getVar("Page | Route [gl]",a);return(n||r)&&o?(returnVal=_satellite.getVar("Editorial | has Gallery (String) [co]",a),window._satellite.pageDataToPersist.eVar80=returnVal,returnVal):window._satellite.pageDataToPersist.eVar80?window._satellite.pageDataToPersist.eVar80:void 0}}},"Page | URL: Query Parameter: sara_ecid [gl]":{defaultValue:"",modulePath:"core/src/lib/dataElements/queryStringParameter.js",settings:{name:"sara_ecid",caseInsensitive:!0}},"Campaign | ID: External (sara_dcid, sara_ecid) [gl]":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){let t=_satellite.getVar("Page | URL: Query Parameter: sara_ecid [gl]",e),a=_satellite.getVar("Page | URL: Query Parameter: sara_dcid [gl]",e),n=t||a;return"object"==typeof n&&(n=n.find((e=>/sea_pd_\w+_/.test(e)))),"string"!=typeof n?"":t&&/sea_pd_\w+_/.test(n)?_satellite.getVar("Util | Function: Check Campaign Parameter [gl]")(n,"ecid"):a&&/sea_pd_\w+_/.test(n)?_satellite.getVar("Util | Function: Check Campaign Parameter [gl]")(n,"dcid"):n||void 0}}},"Page | Timing: Mark: Track Pageview [co]":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{return Math.round(performance.getEntriesByName("sara_track_pageview")[0].startTime)}catch(e){return}}}},"Event Value | event106: End of Article Scrolls [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){if("scroll"===_satellite.getVar("Event | Action [gl]",a)&&window._satellite.persistVals&&window._satellite.persistVals.event106)return window._satellite.persistVals.event106}}},"XDM | Analytics: eVar72 - Editorial is exclusive [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n="virtual_page"===_satellite.getVar("Event | Action [gl]",a),r="page_data_ready"===_satellite.getVar("Event | Action [gl]",a),o="article"===_satellite.getVar("Page | Route [gl]",a);return(n||r)&&o?(returnVal=_satellite.getVar("Editorial | is Exclusive (String) [co]",a),window._satellite.pageDataToPersist.eVar72=returnVal,returnVal):window._satellite.pageDataToPersist.eVar72?window._satellite.pageDataToPersist.eVar72:void 0}}},"Event Value | event100: Editorial Page Views [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n="virtual_page"===_satellite.getVar("Event | Action [gl]",a),r="page_data_ready"===_satellite.getVar("Event | Action [gl]",a),o="article"===_satellite.getVar("Page | Route [gl]",a);if((n||r)&&o)return 1}}},"Page | URL: Hostname [gl]":{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/pageInfo.js",settings:{attribute:"hostname"}},"Campaign | ID: External (utm) [gl]":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){const e=new URLSearchParams(_satellite.getVar("Page | URL: Query Parameter [gl]"));let t=[];if(e.get("utm_campaign")&&t.push("ca_"+e.get("utm_campaign")),e.get("utm_medium")&&t.push("me_"+e.get("utm_campaign")),e.get("utm_source")&&t.push("so_"+e.get("utm_campaign")),e.get("utm_content")&&t.push("co_"+e.get("utm_campaign")),e.get("utm_term")&&t.push("te_"+e.get("utm_campaign")),t.length>0)return"utm:"+t.join("~")}}},"Event Value | event122: Recommendation Click [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){let n;try{if(n=JSON.parse(_satellite.getVar("Post Click | Click Attributes JSON [gl]",a)),
n&&n.item_source)return 1}catch(e){return}}}},"Marketing Pixel | Handle: Meta Click ID (_fbc) [sm-lo][consent]":{storageDuration:"pageview",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){if(_satellite.getVar("User | Current Consent Status [gl-co]",a)===_satellite.getVar("Consent | CONSTANT: allTools [gl]",a)){let e=_satellite.getVar("Storage | Click ID: Meta Own (_fbc) [sm]").name;return _satellite.saraCookieRead(e)||_satellite.getVar("Page | URL: Query Parameter: fbclid [gl]")&&"fb.1."+(new Date).getTime()+"."+_satellite.getVar("Page | URL: Query Parameter: fbclid [gl]")}}}},"Component | Name [gl]":{defaultValue:"",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"event.attributes.component_name",callback:function(){},doCustomCode:!1,convertToString:!1}},"User | has Gift Article Access [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"user.segment.has_gift_article_access",callback:function(e){return"boolean"==typeof e&&e},doCustomCode:!0,convertToString:!1}},"Event Value | event121: Recommendation impression [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){if("component_view"===_satellite.getVar("Event | Action [gl]",a)&&_satellite.getVar("Event | Name [gl]",a).indexOf("recommendation")>=0&&-1===_satellite.getVar("Event | Name [gl]",a).indexOf("impression"))return 1}}},"QS | Launch: Environment [gl]":{defaultValue:"",modulePath:"core/src/lib/dataElements/javascriptVariable.js",settings:{path:"_satellite.environment.stage"}},"Editorial | Date: Modified [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"editorial.info.date_modified",callback:function(){},doCustomCode:!1,convertToString:!1}},"Page | Path Depth [gl]":{defaultValue:"",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){return _satellite.getVar("Page | URL: Path [gl]",a).split("/").length-1}}},"Event | Item: Type [co]":{defaultValue:"",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"event.attributes.item.type",callback:function(){},doCustomCode:!1,convertToString:!1}},"Editorial | Type (Array) [co]":{defaultValue:"",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"editorial.category.type",callback:function(){},doCustomCode:!1,convertToString:!1}},"User | Access Feature Spplus (Boolean) [sm]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"user.segment.access.Spplus",callback:function(e){return"boolean"==typeof e&&e},doCustomCode:!0,convertToString:!1}},"Event | Contains Ad [gl]":{defaultValue:"",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"event.attributes.contains_ad",callback:function(){},doCustomCode:!1,convertToString:!1}},"Event Value | event382: Paywall Clicks [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n="button_click"===_satellite.getVar("Event | Action [gl]",a),r=_satellite.getVar("Component | Name [gl]",a).indexOf("paywall")>-1;if(n&&r)return 1}}},"XDM | Analytics: eVar132 - Form Fields [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){if("submit"===_satellite.getVar("Event | Action [gl]",a))return _satellite.getVar("Form | Fields Total Count [gl]",a)+"::"+_satellite.getVar("Form | Field Opt-In (String) [gl]",a)+"::"+_satellite.getVar("Form | Field email [gl]",a)}}},"Marketing Pixel | Meta Ads ID [sm]":{modulePath:"mapping-table/src/lib/dataElements/mappingTable.js",settings:{0:{input:"spon",method:"exact match",output:"468291950412468"},1:{input:"mmo",method:"exact match",output:"532956320481121"},2:{input:"elf",method:"exact match",output:"1066566697702757"},size:3,dataElement:"%Page | Domain [gl]%",defaultValueEmpty:!0}},"Page | Timing: Mark: Load Libraries [co]":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){return Math.round(performance.getEntriesByName("sara_load_libraries")[0].startTime)}}},"User | TEMP Adbrain Enabled String [co]":{defaultValue:"",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"user.segment.has_adbrain_enabled",callback:function(e){return!0===e?"has_adbrainEnabled":!1===e?"no_adbrainEnabled":e},doCustomCode:!0,convertToString:!1}},"Event Value | event5: Exit Link Clicks [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){if("link_click_external"===_satellite.getVar("Event | Action [gl]",a))return 1}}},"XDM | Analytics: eVar100 - Media ID [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n=_satellite.getVar("Event | Action [gl]",a),r="audio"===n||"video"===n,o=0===_satellite.getVar("Event | Name [gl]",a).indexOf("ivw")||"audio"===n&&"podlove"==_satellite.getVar("Event | Source [gl]",a)&&a.detail.state.audio;if(r&&!o)return _satellite.getVar("Event | Item: Media ID [co]",a)}}},"XDM | Analytics: prop9 - URL Path [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n="virtual_page"===_satellite.getVar("Event | Action [gl]",a),r="page_data_ready"===_satellite.getVar("Event | Action [gl]",a);if(n||r)return _satellite.getVar("Page | URL: Path [gl]",a)}}},"Page | Darkmode [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"page.attributes.is_darkmode",callback:function(e){return"boolean"==typeof e?e?"is_darkmode":"NO_darkmode":"[n/a]"},doCustomCode:!0,convertToString:!1}},"XDM | Analytics: eVar21 - Click ID [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n=_satellite.getVar("Event | Action [gl]",a),r="virtual_page"===n,o="page_data_ready"===n,i=_satellite.getVar("Post Click | Click Attributes JSON [gl]",a),s=_satellite.getVar("Post Click | Click: Referrer [gl]",a)===_satellite.getVar("Page | Canonical URL [gl]",a);return(r||o)&&i&&!s?_satellite.getVar("Post Click | Click: ID [gl]",a):["button_click","component_click","link_click_external"].includes(n)?_satellite.getVar("Event | Click ID [gl]",a):void 0}}},"Event | Autostart (String) [co]":{defaultValue:"",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"event.attributes.autostart",callback:function(e){return!0===e?"has_autostart":"no_autostart"},doCustomCode:!0,convertToString:!1}},"Page | Type [co]":{defaultValue:"",modulePath:"mapping-table/src/lib/dataElements/mappingTable.js",settings:{0:{input:"article",method:"exact match",output:"%Editorial | Style [co]%"},1:{input:".*",method:"regex",output:"%Page | Route [gl]%"},size:2,dataElement:"%Page | Route [gl]%",defaultValueEmpty:!0}},"XDM | Analytics: prop31 - App Version [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n=_satellite.getVar("Event | Action [gl]",a);return"page_data_ready"===n||"virtual_page"===n?(returnVal=_satellite.getVar("App | Version [co]",a),window._satellite.pageDataToPersist.prop31=returnVal,returnVal):window._satellite.pageDataToPersist.prop31?window._satellite.pageDataToPersist.prop31:void 0}}},"User | is Logged In [co]":{defaultValue:"",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"user.segment.is_loggedIn",callback:function(){},doCustomCode:!1,convertToString:!1}},"Event Value | event143: Media Subscription Click [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n=_satellite.getVar("Event | Action [gl]",a),r="audio"===n||"video"===n,o="audio"===n&&"podlove"==_satellite.getVar("Event | Source [gl]",a)&&_satellite.getVar("Event | State [gl]",a).audio;if(r&&"click-button-subscribe"===_satellite.getVar("Event | Name [gl]",a)&&!o)return 1}}},"Page | Timing: Engagement: Total [co]":{defaultValue:"",modulePath:"core/src/lib/dataElements/javascriptVariable.js",settings:{path:"window.stats.status.timeTotal"}},"Page | Previous Page Timing: Performance: Dom Complete [co]":{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){return JSON.parse(_satellite.getVar("Page | Previous Data JSON [co]")).performance.dom_complete}}},"Post Click | Click: ID [gl]":{defaultValue:"",storageDuration:"pageview",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){try{return JSON.parse(_satellite.getVar("Post Click | Click Attributes JSON [gl]",a)).click_id}catch(e){return}}}},"Event ID | event101: Editorial Page Views [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){if(_satellite.getVar("Event Value | event100: Editorial Page Views [co]",a))return _satellite.getVar("Editorial | Article ID (20 chars) [co]",a)}}},"XDM | Analytics: eVar33 - Spiegel Device Type [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n=_satellite.getVar("Event | Action [gl]",a);return"page_data_ready"===n||"virtual_page"===n?(returnVal=_satellite.getVar("Device | Type [gl]",a),window._satellite.pageDataToPersist.eVar33=returnVal,returnVal):window._satellite.pageDataToPersist.eVar33?window._satellite.pageDataToPersist.eVar33:void 0}}},"Storage | Click ID: Google [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(){return{name:"sara_cid_go",expiry:"session",purposes:["PuV-KM"]}}}},"Consent | consent ready (String) [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"consent.info.ready",callback:function(e){return!0===e?"true":"false"},doCustomCode:!0,convertToString:!1}},"Util | Function: Get Polygon from CE ID [gl]":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){return function(e){function t(e,t,a){var n=t-e.length,r=a||" ";return n<=0?e:new Array(n+1).join(r)+e}function a(e){return t((n.str(e)>>>0).toString(16),8,"0")+"-0001-0001-0000-"+t(e,12,"0")}var n,r;return r=function(e){function t(){for(var e=0,t=new Array(256),a=0;256!=a;++a)e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=a)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1,t[a]=e;return"undefined"!=typeof Int32Array?new Int32Array(t):t}function a(e,t){for(var a=~t,n=e.length-1,r=0;r<n;)a=(a=a>>>8^i[255&(a^e.charCodeAt(r++))])>>>8^i[255&(a^e.charCodeAt(r++))];return r===n&&(a=a>>>8^i[255&(a^e.charCodeAt(r))]),~a}function n(e,t){if(e.length>1e4)return r(e,t);for(var a=~t,n=e.length-3,o=0;o<n;)a=(a=(a=(a=a>>>8^i[255&(a^e[o++])])>>>8^i[255&(a^e[o++])])>>>8^i[255&(a^e[o++])])>>>8^i[255&(a^e[o++])];for(;o<n+3;)a=a>>>8^i[255&(a^e[o++])];return~a}function r(e,t){for(var a=~t,n=e.length-7,r=0;r<n;)a=(a=(a=(a=(a=(a=(a=(a=a>>>8^i[255&(a^e[r++])])>>>8^i[255&(a^e[r++])])>>>8^i[255&(a^e[r++])])>>>8^i[255&(a^e[r++])])>>>8^i[255&(a^e[r++])])>>>8^i[255&(a^e[r++])])>>>8^i[255&(a^e[r++])])>>>8^i[255&(a^e[r++])];for(;r<n+7;)a=a>>>8^i[255&(a^e[r++])];return~a}function o(e,t){for(var a,n,r=~t,o=0,s=e.length;o<s;)(a=e.charCodeAt(o++))<128?r=r>>>8^i[255&(r^a)]:a<2048?r=(r=r>>>8^i[255&(r^(192|a>>6&31))])>>>8^i[255&(r^(128|63&a))]:a>=55296&&a<57344?(a=64+(1023&a),n=1023&e.charCodeAt(o++),r=(r=(r=(r=r>>>8^i[255&(r^(240|a>>8&7))])>>>8^i[255&(r^(128|a>>2&63))])>>>8^i[255&(r^(128|n>>6&15|(3&a)<<4))])>>>8^i[255&(r^(128|63&n))]):r=(r=(r=r>>>8^i[255&(r^(224|a>>12&15))])>>>8^i[255&(r^(128|a>>6&63))])>>>8^i[255&(r^(128|63&a))];return~r}e.version="1.2.0";var i=t();e.table=i,e.bstr=a,e.buf=n,e.str=o},"undefined"==typeof DO_NOT_EXPORT_CRC?"object"==typeof exports?r(exports):"function"==typeof define&&define.amd?define((function(){var e={};return r(e),e})):r(n={}):r(n={}),a(e)}}}},"Event Value | event200: Engagement Interaction [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){if("component_click"===_satellite.getVar("Event | Action [gl]",a))return 1}}},"Event Value | event134: Media Milestones 50 [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n=_satellite.getVar("Event | Action [gl]",a),r="audio"===n||"video"===n,o=0===_satellite.getVar("Event | Name [gl]",a).indexOf("ivw")||"audio"===n&&"podlove"==_satellite.getVar("Event | Source [gl]",a)&&a.detail.state.audio;if(r&&"milestone 50%"===_satellite.getVar("Event | Name [gl]",a)&&!o)return 1}}},"QS | Launch: Environment Stage [gl]":{modulePath:"core/src/lib/dataElements/runtimeEnvironment.js",settings:{attribute:"environmentStage"}},"XDM | Identity Map [gl[sso]]":{modulePath:"adobe-alloy/dist/lib/dataElements/identityMap/index.js",settings:{SWD:[{id:"%User | SSO Tracking ID [gl[sso]-sm]%",primary:!0,authenticatedState:"authenticated"}],ecid_sync:[{id:"%Identity | ECID after consent [gl]%",primary:!1,authenticatedState:"ambiguous"}]}},"Event Value | event805: Special Consent Rejects [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){let n=_satellite.getVar("Event | Action [gl]",a),r=_satellite.getVar("Consent | CMP: Type [co]",a),o=_satellite.getVar("Consent | CMP: Action [co]",a);if("special_consent_completed"===n&&"special"===r&&"rejected"==o)return 1}}},"XDM | XDM Object Global [gl[sso]-lo]":{modulePath:"adobe-alloy/dist/lib/dataElements/xdmObject/index.js",settings:{data:{web:{webReferrer:{URL:"%XDM | Analytics: Referrer [gl]%"},webInteraction:{URL:"%Event | Target URL [gl]%",name:"%XDM | Analytics: Link Click Name [gl-lo]%",type:"%XDM | Analytics: Link Click Type [gl-lo]%",linkClicks:{value:"%Event Value | Link Click Event [gl-lo]%"}},webPageDetails:{name:"%XDM | Analytics: pageName [gl]%",server:"%Page | URL: Hostname [gl]%",pageViews:{value:"%Event Value | event1: Page Views [gl]%"},isHomePage:"%XDM | Analytics: is Homepage [gl]%",isErrorPage:"%XDM | Analytics: errorPage [gl]%",siteSection:"%XDM | Analytics: channel [co]%"}},_spiegel:{marketing:{MetaAds:{pixelId:"%Marketing Pixel | Meta Ads ID [sm]%",facebookClickId:"%Marketing Pixel | Handle: Meta Click ID (_fbc) [sm-lo][consent]%",facebookBrowserId:"%Marketing Pixel | Handle: Meta Identifier (_fbp) [sm-lo][consent]%"},eventName:"%XDM | Marketing Event [sm-co]%",eventMergeId:"%Event | Merge ID [gl]%"}},commerce:{order:{payments:[{transactionID:"%Analytics | Analytics: Transaction ID [gl][consent:PuV-Na]%"}],currencyCode:"EUR"},purchases:{value:"%Event Value | Purchase (in App) [co]%"}},marketing:{trackingCode:"%XDM | Analytics: campaign [gl][consent:PuV-KM]%"},_experience:{analytics:{event1to100:{event1:{value:"%Event Value | event1: Page Views [gl]%"},event3:{value:"%Event Value | event3: On-Site Interactions [gl]%"},event4:{value:"%Event Value | event4: Homepage Clicks [gl]%"},event5:{value:"%Event Value | event5: Exit Link Clicks [gl]%"},event6:{value:"%Event Value | event6: Routing Link Clicks [gl]%"},event8:{value:"%Event Value | event8: Download Link Clicks [gl]%"},event10:{value:"%Event Value | event10: User Has Consent [gl]%"},event12:{value:"%Event Value | event12: Homepage Page Views [co]%"},event20:{value:"%Event Value | event20: Overlay Views [gl]%"},event40:{value:"%Event Value | event40: Performance: Server Response Time [co]%"},event41:{value:"%Event Value | event41: Performance: Response Complete Time [co]%"},event42:{value:"%Event Value | event42: Performance: Page Render Time [co]%"},event43:{value:"%Event Value | event43: Performance: DOM Complete Time [co]%"},event44:{value:"%Event Value | event44: Performance: Total Page Load Time [co]%"},event45:{value:"%Event Value | event45: Performance: Load Library Time [co]%"},event50:{value:"%Event Value | event50: Engagement: Time to First Visible [co]%"},event51:{value:"%Event Value | event51: Engagement: Visible Time [co]%"},event53:{value:"%Event Value | event53: Engagement: Active Time [co]%"},event54:{value:"%Event Value | event54: Engagement: Total Time [co]%"},event60:{value:"%Event Value | event60: End of Page Scrolls [co]%"},event100:{value:"%Event Value | event100: Editorial Page Views [co]%"}},event101to200:{event101:{id:"%Event ID | event101: Editorial Page Views [co]%",value:"%Event Value | event100: Editorial Page Views [co]%"},event106:{value:"%Event Value | event106: End of Article Scrolls [co]%"},event107:{value:"%Event Value | event107: End of Article Page Scrolls [co]%"},event110:{value:"%Event Value | event110/event380: Paid Article View with Paywall [co]%"},event111:{value:"%Event Value | event111: Paid Article View without Paywall [co]%"},event112:{id:"%Event ID | event112: Plus Article Metered Access [gl]%",value:"%Event Value | event112: Plus Article Metered Access [gl]%"},event121:{value:"%Event Value | event121: Recommendation impression [co]%"},event122:{value:"%Event Value | event122: Recommendation Click [co]%"},event130:{value:"%Event Value | event130: Media Plays [co]%"},event131:{id:"%Event ID | event131: Media Plays [co]%",value:"%Event Value | event130: Media Plays [co]%"},event133:{value:"%Event Value | event133: Media Milestones 25 [co]%"},event134:{value:"%Event Value | event134: Media Milestones 50 [co]%"},event135:{value:"%Event Value | event135: Media Milestones 75 [co]%"},event136:{value:"%Event Value | event136: Media Milestones 95 [co]%"},event137:{value:"%Event Value | event137: Media Completes [co]%"},event138:{value:"%Event Value | event138: Media Playtime [co]%"},event140:{value:"%Event Value | event140: Media Unmutes [co]%"},event141:{value:"%Event Value | event141: Media FIrst Minutes Watched [co]%"},event142:{value:"%Event Value | event142: Media Five Minute Tracker [co]%"},event143:{value:"%Event Value | event143: Media Subscription Click [co]%"},event168:{value:"%Event Value | event168: Gallery Layer Open Clicks [co]%"},event190:{value:"%Event Value | event190: End of HP Scrolls [co]%"},event195:{value:"%Event Value | event195: End of Homepage Scrolls [co]%"},event200:{value:"%Event Value | event200: Engagement Interaction [co]%"}},event201to300:{event232:{value:"%Event Value | event232: Create Gift Link Clicks [co]%"},event233:{value:"%Event Value | event233: Share Gift Link Clicks [co]%"},event240:{value:"%Event Value | event240: Bookmarks Added [co]%"},event241:{value:"%Event Value | event241: Bookmarks Removed [co]%"},event260:{value:"%Event Value | event260: Article Attention Level (AAL) [co]%"},event290:{value:"%Event Value | event290: Primary Conversion Button Clicks [gl]%"},event291:{value:"%Event Value | event291: Secondary Conversion Button Clicks [gl]%"}},event301to400:{event310:{value:"%Event Value | event310: To Aboshop Clicks %"},event360:{value:"%Event Value | event360: Free Adslots on page [co]%"},event380:{value:"%Event Value | event110/event380: Paid Article View with Paywall [co]%"},event381:{value:"%Event Value | event381: Paywall Impressions [co]%"},event382:{value:"%Event Value | event382: Paywall Clicks [co]%"},event383:{value:"%Event Value | event383: Paywall Subscription Clicks [co]%"},event384:{value:"%Event Value | event384: Paywall Login Clicks [co]%"}},event501to600:{event504:{value:"%Event Value | event504: Newsletter Registrations Starts [cc]%"},event506:{value:"%Event Value | event506: Newsletter Subscriptions Completed [cc]%"}},event701to800:{event800:{value:"%Event Value | event800: General Consent Accepts [gl]%"}},event801to900:{event801:{value:"%Event Value | event801: General Consent Rejects [gl]%"},event802:{value:"%Event Value | event802: General Consent Layer Shown [gl]%"},event803:{value:"%Event Value | event803: General Consent Preferences Clicks [gl]%"},event804:{value:"%Event Value | event804: Special Consent Accepts [co]%"},event805:{value:"%Event Value | event805: Special Consent Rejects [co]%"},event806:{value:"%Event Value | event806: Special Consent Layer Shown [gl]%"},event807:{value:"%Event Value | event807: Any Consent Accepts [gl]%"},event808:{value:"%Event Value | event808: Any Consent Rejects [gl]%"},event809:{value:"%Event Value | event809: Any Consent Layer Shown [gl]%"}},event901to1000:{event916:{value:"%Event Value | event916: End of Article [co]%"},event917:{value:"%Event Value | event917: End of HP [co]%"},event918:{value:"%Event Value | event918: End of Page [co]%"},event972:{value:"%Event Value | event972: Timer [co]%"},event973:{value:"%Event Value | event973: Timer (ms) [co] %"}},customDimensions:{eVars:{eVar1:"%XDM | Analytics: eVar1 - Page Identifier [gl]%",eVar2:"%XDM | Analytics: eVar2 - Page Canonical URL [gl]%",eVar3:"%XDM | Analytics: eVar3 - Page Delivery Platform [gl]%",eVar4:"%XDM | Analytics: eVar4 - Page Type [gl]%",eVar5:"%XDM | Analytics: eVar5 - Page Type 2 [gl]%",eVar7:"%XDM | Analytics: eVar7 - SEO Title [gl]%",eVar8:"%XDM | Analytics: eVar8 - Page Hostname [gl]%",eVar9:"%XDM | Analytics: eVar9 - Query Parameter [gl][consent]%",eVar10:"%XDM | Analytics: eVar10 - Page URL Fragment [gl]%",eVar11:"%XDM | Analytics: eVar11 - Page Referring Domain [gl]%",eVar12:"%XDM | Analytics: eVar12 - Page Referral URL [gl]%",eVar13:"%XDM | Analytics: eVar13 - Previous Page Identifier [gl][consent:PuV-Na]%",eVar15:"D=c2",eVar16:"%XDM | Analytics: eVar16 - Page Pure Tracking Option [co]%",eVar18:"%XDM | Analytics: eVar18 - Plain Page URL [gl]%",eVar19:"%XDM | Analytics: eVar19 - Raw Document Referrer [gl]%",eVar20:"%XDM | Analytics: eVar20 - Component String [gl]%",eVar21:"%XDM | Analytics: eVar21 - Click ID [gl]%",eVar22:"%XDM | Analytics: eVar22 - Click Element [gl]%",eVar23:"%XDM | Analytics: eVar23 - Click Element Headline [co]%",eVar24:"%XDM | Analytics: eVar24 - Click Position: Steps [co]%",eVar25:"%XDM | Analytics: eVar25 - Click Type [gl]%",eVar29:"%XDM | Analytics: eVar29 - Click Element URL [gl]%",eVar33:"%XDM | Analytics: eVar33 - Spiegel Device Type [gl]%",eVar35:"%XDM | Analytics: eVar35 - Hour/Minute [gl]%",eVar36:"%XDM | Analytics: eVar36 - New/Repeat Visitor [gl][consent:PuV-Na]%",eVar38:"%XDM | Analytics: eVar38 - Daily Usage [co][consent:PuV-Na]%",eVar40:"%XDM | Analytics: eVar40 - Visibility State [gl]%",eVar43:"%XDM | Analytics: eVar43 - Active Time on Page [co]%",eVar44:"%XDM | Analytics: eVar44 - Total Time on Page [co]%",eVar45:"%XDM | Analytics: eVar45 - Article Attention Level (AAL) [co]%",eVar46:"%XDM | Analytics: eVar46 - Article Elements Variety (AEV) [co]%",eVar47:"%XDM | Analytics: eVar47 - Article Attention Level (AAL) Trigger [co]%",eVar50:"%XDM | Analytics: eVar50 - Article ID [co]%",eVar51:"%XDM | Analytics: eVar51 - Article Access Type [co]%",eVar52:"%XDM | Analytics: eVar52 - Editorial has Paywall [co]%",eVar53:"%XDM | Analytics: eVar53 - Referral Article ID [co]%",eVar57:"%XDM | Analytics: eVar57 - Editorial Genre [co]%",eVar58:"%XDM | Analytics: eVar58 - Editorial Style [co]%",eVar59:"%XDM | Analytics: eVar59 - Editorial Type [co]%",eVar60:"%XDM | Analytics: eVar60 - Editorial Channel [co]%",eVar61:"%XDM | Analytics: eVar61 - Editorial Channel/Subchannel [co]%",eVar62:"%XDM | Analytics: eVar62 - Editorial Published DateTime [co]%",eVar63:"%XDM | Analytics: eVar63 - Editorial Modified DateTime [co]%",eVar65:"%XDM | Analytics: eVar65 - Editorial Headline [co]%",eVar66:"%XDM | Analytics: eVar66 - Editorial Social Headline [co]%",eVar67:"%XDM | Analytics: eVar67 - Editorial has Authorline [co]%",eVar68:"%XDM | Analytics: eVar68 - Editorial has noAds [co]%",eVar69:"%XDM | Analytics: eVar69 - Editorial has noContentAds [co]%",eVar70:"%XDM | Analytics: eVar70 - Editorial is breaking [co]%",eVar72:"%XDM | Analytics: eVar72 - Editorial is exclusive [co]%",eVar74:"%XDM | Analytics: eVar74 - Editorial is list Excluded [co]%",eVar79:"%XDM | Analytics: eVar79 - Editorial has Video [co]%",eVar80:"%XDM | Analytics: eVar80 - Editorial has Gallery [co]%",eVar81:"%XDM | Analytics: eVar81 - Editorial has Comments [co]%",eVar82:"%XDM | Analytics: eVar82 - Editorial has Affiliate [co]%",eVar83:"%XDM | Analytics: eVar83 - Editorial Magazine [co]%",eVar85:"%XDM | Analytics: eVar85 - Editorial has Audio [co]%",eVar90:"%XDM | Analytics: eVar90 - Hierarchy1 [co]%",eVar91:"%XDM | Analytics: eVar91 - Hierarchy2 [gl]%",eVar94:"%XDM | Analytics: eVar94 - Referral Article Channel [co]%",eVar95:"%XDM | Analytics: eVar95 - Editorial Author Abbreviations [co]%",eVar96:"%XDM | Analytics: eVar96 - Editorial Author Teams [co]%",eVar97:"%XDM | Analytics: eVar97 - Editorial Author Names [co]%",eVar100:"%XDM | Analytics: eVar100 - Media ID [co]%",eVar101:"%XDM | Analytics: eVar101 - Media Status [co]%",eVar102:"%XDM | Analytics: eVar102 - Media Type [co]%",eVar103:"%XDM | Analytics: eVar103 - Media Style [co]%",eVar104:"%XDM | Analytics: eVar104 - Media Headline [co]%",eVar105:"%XDM | Analytics: eVar105 - Media Channel [co]%",eVar115:"%XDM | Analytics: eVar115 - Engagement Type in Article [co]%",eVar130:"%XDM | Analytics: eVar130 - Form Name [gl]%",eVar131:"%XDM | Analytics: eVar131 - Form Category [gl]%",eVar132:"%XDM | Analytics: eVar132 - Form Fields [gl]%",eVar133:"%XDM | Analytics: eVar133 - Form Status [gl]%",eVar135:"%XDM | Analytics: eVar135 - Paywall Article ID [co]%",eVar136:"%XDM | Analytics: eVar136 - Paywall Contacts [co]%",eVar137:"%XDM | Analytics: eVar137 - Paywall Type [co]%",eVar138:"%XDM | Analytics: eVar138 - Paywall Position [co]%",eVar139:"%XDM | Analytics: eVar139 - Paywall State [co]%",eVar145:"%XDM | Analytics: eVar145 - Internal Campaign ID (sara_icid) [gl][consent:PuV-KM]%",eVar146:"%XDM | Analytics: eVar146 - Funnel Campaign ID [co][consent:PuV-KM]%",eVar150:"%XDM | Analytics: eVar150 - Traffic Campaign (sara_ref) [co]%",eVar152:"%XDM | Analytics: eVar152 - Google GCLID [gl][consent:PuV-KM]%",eVar153:"%XDM | Analytics: eVar153 - Facebook FBCLID [gl][consent:PuV-KM]%",eVar154:"%XDM | Analytics: eVar154 - Newsletter ID (nlid) [cc]%",eVar159:"%XDM | Analytics: eVar159 - Target Activity ID (sara_at) [gl][consent:PuV-KM]%",eVar175:"%XDM | Analytics: eVar175 - Logged In String [gl[sso]]%",eVar177:"%XDM | Analytics: eVar177 - User Paid Status [sm]%",eVar178:"%XDM | Analytics: eVar178 - User Conditional Status [sm]%",eVar179:"%XDM | Analytics: eVar179 - User Pure Status [sm]%",eVar180:"%XDM | Analytics: eVar180 - User Consent Status [gl]%",eVar181:"%XDM | Analytics: eVar181 - Serverside Testing Cookie Values [co]%",eVar182:"%XDM | Analytics: eVar182 - User Gift Article Access [co]%",eVar183:"%XDM | Analytics: eVar183 - Metered Access Count [co]%",eVar185:"D=mid",eVar186:"%XDM | Analytics: eVar186 - SSO Tracking ID [gl[sso]]%",eVar199:"%XDM | Analytics: eVar199 - Is Darkmode [gl]%",eVar200:"D=User-Agent",eVar201:"%XDM | Analytics: eVar201 - TEMP User Adbrain Status [co]%"},lists:{list1:{list:"%XDM | Analytics: list1 [co]%"},list2:{list:"%XDM | Analytics: list2 [co]%"}},props:{prop1:"%XDM | Analytics: prop1 - R1D1 Page ID String [gl]%",prop2:"%XDM | Analytics: prop2 - R1D2 Referrer Category [gl]%",prop3:"%XDM | Analytics: prop3 - R1D3 HP position [gl]%",prop4:"%XDM | Analytics: prop4 - Subscription Article [cc]%",prop5:"%XDM | Analytics: prop5 - Subscription Conversion Type [cc]%",prop7:"D=c2",prop8:"%XDM | Analytics: prop8 - Channels [co]%",prop9:"%XDM | Analytics: prop9 - URL Path [gl]%",prop11:"%XDM | Analytics: prop11 - UUID [gl]%",prop12:"D=pid",prop31:"%XDM | Analytics: prop31 - App Version [gl]%",prop32:"%XDM | Analytics: prop32 - Hit Timestamp ISO UTC [gl]%",prop33:"%Config | DataStream: per Consent [gl-lo]%",prop40:"D=v19",prop43:"%XDM | Analytics: prop43 - Timing Stats Minutes [co]%",prop55:"%XDM | Analytics: prop55 - Consent Updated At [gl]%",prop56:"%XDM | Analytics: prop56 - User Has Consent [gl]%",prop57:"%XDM | Analytics: prop57 - User Has No Consent [gl]%",prop61:"%XDM | Analytics: prop61 - User has Visitor API [gl]%",prop62:"%XDM | Analytics: prop62 - has SSO Tracking ID [gl[sso]]%",prop67:"%XDM | Analytics: prop67 - QS Non Human Visitor [gl]%",prop68:"%XDM | Analytics: prop68 - QS Visibility State [gl]%",prop70:"%XDM | Analytics: prop70 - QS Data Layer Event Source [gl]%",prop71:"%XDM | Analytics: prop71 - QS Data Layer Event [gl]%",prop73:"%XDM | Analytics: prop73 - Launch Property + General Info [gl]%",prop74:"%XDM | Analytics: prop74 - Launch Build Info [gl]%",prop75:"%XDM | Analytics: prop75 - Data Model Version [gl]%"}}}},identityMap:"%XDM | Identity Map [gl[sso]]%",productListItems:"%XDM | Analytics: products [co]%"},sandbox:{name:"prod"}}},"Page | Route [gl]":{defaultValue:"",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"page.category.route",callback:function(){},doCustomCode:!1,convertToString:!1}},"Page | Previous Data: Free Adslots Count [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(){try{return JSON.parse(_satellite.getVar("Page | Previous Data JSON [co]")).advertising.free_adslots_count}catch(e){return}}}},"User | Paid Access String [sm]":{defaultValue:"",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"user.segment.has_paid_access",callback:function(e){return!0===e?"has_paidAccess":"no_paidAccess"},doCustomCode:!0,convertToString:!1}},"Event | Name [gl]":{defaultValue:"",forceLowerCase:!0,modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"event.info.name",callback:function(e){let t=e?e.match(/(\w+) (bookmark|recommendation)/):"";return t?t[2]+" - "+t[1]:e},doCustomCode:!0,convertToString:!0}},"XDM | Analytics: eVar53 - Referral Article ID [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n=_satellite.getVar("Page | Previous Data JSON [co]",a),r="page_data_ready"==_satellite.getVar("Event | Action [gl]",a);return n&&r?(returnVal=_satellite.getVar("Page | Previous Data: Article ID [co]",a),window._satellite.pageDataToPersist.eVar53=returnVal,returnVal):window._satellite.pageDataToPersist.eVar53?window._satellite.pageDataToPersist.eVar53:void 0}}},"Editorial | Headline: Social [co]":{defaultValue:"",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"editorial.info.headline_social",callback:function(){},doCustomCode:!1,convertToString:!1}},"Editorial | has Author (String) [co]":{defaultValue:"",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"editorial.attributes.has_author",callback:function(e){return!0===e?"has_author":"no_author"},doCustomCode:!0,convertToString:!1}},"XDM | Analytics: eVar159 - Target Activity ID (sara_at) [gl][consent:PuV-KM]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){let n=["page_data_ready","virtual_page","consent_completed","link_click_external"].indexOf(_satellite.getVar("Event | Action [gl]",a))>-1,r=_satellite.getVar("Storage | Campaign: Target Activity [gl]"),o=_satellite.getVar("Util | Function: Get Purpose Consent Mapping [gl-lo]")(r.purposes),i="link_click_external"===_satellite.getVar("Event | Action [gl]")?_satellite.getVar("Event | Target URL: Query Parameter: sara_at [gl]",a):_satellite.getVar("Page | URL: Query Parameter: sara_at [gl]",a);if(Object.keys(o).filter((e=>o[e].length>0)).length>0&&n){let e=i;return e?window._satellite.getValOnce(e,r.name):e}if(n&&i)return"(not yet approved)"}}},"Event | Muted (String) [co]":{defaultValue:"",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"event.attributes.mute",callback:function(e){return!0===e?"is_muted":"not_muted"},doCustomCode:!0,convertToString:!1}},"Event Value | event44: Performance: Total Page Load Time [co]":{
modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){if(_satellite.getVar("Page | Previous Data JSON [co]",a)&&"page_data_ready"==_satellite.getVar("Event | Action [gl]",a))return _satellite.getVar("Page | Previous Page Timing: Performance: Track Pageview [co]",a)}}},"XDM | Analytics: eVar199 - Is Darkmode [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){if(/^(?:page_data_ready|virtual_page|direct_call)$/.test(_satellite.getVar("Event | Action [gl]",a)))return _satellite.getVar("Page | Darkmode [co]",a)}}},"Target | Eigenwerbung-Elements [co]":{defaultValue:"",modulePath:"core/src/lib/dataElements/constant.js",settings:{value:'{"homepage": ["pos_1","pos_2","pos_3","pos_4","pos_5","pos_6","pos_7"], "article": ["pos_1"], "channel": []}'}},"XDM | Analytics: eVar135 - Paywall Article ID [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n="virtual_page"===_satellite.getVar("Event | Action [gl]",a),r="page_data_ready"===_satellite.getVar("Event | Action [gl]",a),o="article"===_satellite.getVar("Page | Route [gl]",a),i=!0===_satellite.getVar("Paywall | is Active [co]",a),s=_satellite.getVar("Paywall | Type [co]",a),l=!("string"!=typeof s||!/paid|conditional/.test(s));if((n||r)&&o&&i&&l)return _satellite.getVar("Editorial | Article ID [co]",a)}}},"Device | Mobile String [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e){let t;return t=e.user.device?e.user.device.is_mobile:e.page.attributes.is_mobile,!0!==t&&"desktop"}}},"Event Value | event360: Free Adslots on page [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){if(_satellite.getVar("Page | Previous Data JSON [co]",a)&&"page_data_ready"==_satellite.getVar("Event | Action [gl]",a)){var n=_satellite.getVar("Page | Previous Data: Free Adslots Count [co]",a);return n||void 0}}}},"Form | Status Message [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"form.status.message",callback:function(){},doCustomCode:!1,convertToString:!1}},"Event Value | event803: General Consent Preferences Clicks [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){let n=_satellite.getVar("Event | Action [gl]",a),r=_satellite.getVar("Consent | CMP: Type [co]",a),o=_satellite.getVar("Consent | CMP: Action [co]",a);if("button_click"===n&&"general"==r&&"preferences"==o)return 1}}},"Consent Setting | Purpose - pWx granted [sm]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(){let e=["pWxc-Rt"],t=_satellite.getVar("Util | Function: Get Purpose Consent Mapping [gl-lo]")(e),a=!1;return e.forEach((function(e){t[e]&&t[e].length>0&&(a=!0)})),a}}},"RADAR | Subscription String [gl]":{defaultValue:"regular",modulePath:"mapping-table/src/lib/dataElements/mappingTable.js",settings:{0:{input:"has_paywall:no_paidAccess",method:"exact match",output:"paywall:load:%Page | Platform [gl]%"},1:{input:"\\w+:has_paidAccess",method:"regex",output:"subscribed"},size:2,dataElement:"%Paywall | is Active (String) [co]%:%User | Paid Access String [sm]%",defaultValueEmpty:!0}},"Event | Item: Title [co]":{defaultValue:"",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"event.attributes.item.title",callback:function(){},doCustomCode:!1,convertToString:!1}},"Event Value | event240: Bookmarks Added [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){if("button_click"===_satellite.getVar("Event | Action [gl]",a)&&"bookmark - add"===_satellite.getVar("Event | Name [gl]",a)&&_satellite.getVar("User | is Logged In [gl[sso]-sm]",a))return 1}}},"Editorial | Comments Enabled (String) [co]":{defaultValue:"",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"editorial.attributes.is_comments_enabled",callback:function(e){return!0===e?"has_comments":"no_comments"},doCustomCode:!0,convertToString:!1}},"App | Version [co]":{defaultValue:"noapp",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"application.info.app_version",callback:function(){},doCustomCode:!1,convertToString:!1}},"Post Click | Click: Referrer [gl]":{defaultValue:"",storageDuration:"pageview",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(){try{return JSON.parse(_satellite.getVar("Post Click | Click Attributes JSON [gl]")).referrer}catch(e){return null}}}},"User | Cookie: Purchase [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(){let e=_satellite.getVar("Storage | Purchase [co]").name;return(_satellite.preCookie?_satellite.preCookie[e]:"")||_satellite.cookie.get(e)}}},"Post Click | Click Attributes JSON [gl]":{defaultValue:"",storageDuration:"pageview",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(){return _satellite.saraCookieRead(_satellite.getVar("Storage | Click: Attributes [gl]").name)}}},"Event Value | event506: Newsletter Subscriptions Completed [cc]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n=_satellite.getVar("Event | Action [gl]",a);return"page_data_ready"===n&&"newsletter"==_satellite.getVar("Page | Route [gl]",a)&&_satellite.getVar("Page | URL: Query Parameter [gl]",a).includes("sara_action=subscribe")?"1":"submit"===n?1:void 0}}},"Event Value | event130: Media Plays [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n=_satellite.getVar("Event | Action [gl]",a),r="audio"===n||"video"===n,o=0===_satellite.getVar("Event | Name [gl]",a).indexOf("ivw")||"audio"===n&&"podlove"==_satellite.getVar("Event | Source [gl]",a)&&a.detail.state.audio;if(r&&"play"===_satellite.getVar("Event | Name [gl]",a)&&!o)return 1}}},"User | Dynamic Adbrain Split [co]":{modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){const e=Math.floor(100*Math.random()),t="sara_target_adb";let a=_satellite.saraCookieRead(t);return/^adb=.*$/.test(a)||(a=e<10?"adb=true:adbrain1":e<20?"adb=true:adbrain2":"adb=false"),_satellite.logger.info("User | Dynamic Adbrain Split [co]:"," - current cookie value: ",_satellite.saraCookieRead(t)," - new value: ",a),a}}},"Page | Previous Page Timing: Engagement: Active [co]":{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){return JSON.parse(_satellite.getVar("Page | Previous Data JSON [co]")).engagement.time_active}}},"Campaign | ID: Traffic [co]":{forceLowerCase:!0,cleanText:!0,modulePath:"core/src/lib/dataElements/queryStringParameter.js",settings:{name:"sara_ref",caseInsensitive:!0}},"User | Logged In String [gl[sso]-sm]":{defaultValue:"",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"user.segment.is_loggedIn",callback:function(e){return!0===e?"logged_in":"logged_out"},doCustomCode:!0,convertToString:!1}},"Page | Timing: Engagement: Active [co]":{defaultValue:"",modulePath:"core/src/lib/dataElements/javascriptVariable.js",settings:{path:"window.stats.status.timeEngaged"}},"Hit | Timestamp ISO [gl]":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){return(new Date).toISOString()}}},"Analytics | Analytics: Transaction ID [gl][consent:PuV-Na]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){let n=["page_data_ready","virtual_page","consent_completed"].indexOf(_satellite.getVar("Event | Action [gl]",a))>-1,r=_satellite.getVar("Storage | Usage: Session ID [co]"),o=_satellite.getVar("Util | Function: Get Purpose Consent Mapping [gl-lo]")(r.purposes);if(Object.keys(o).filter((e=>o[e].length>0)).length>0&&n){let e=_satellite.getVar("User | Cookie: Prop Score Session ID [co]");return window._satellite.getValOnce(e,r.name,r.expiry)}}}},"XDM | Analytics: eVar83 - Editorial Magazine [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n="virtual_page"===_satellite.getVar("Event | Action [gl]",a),r="page_data_ready"===_satellite.getVar("Event | Action [gl]",a),o="article"===_satellite.getVar("Page | Route [gl]",a);return(n||r)&&o?(returnVal=_satellite.getVar("Editorial | Magazine [co]",a),window._satellite.pageDataToPersist.eVar83=returnVal,returnVal):window._satellite.pageDataToPersist.eVar83?window._satellite.pageDataToPersist.eVar83:void 0}}},"XDM | Analytics: eVar105 - Media Channel [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n=0===_satellite.getVar("Event | Name [gl]",a).indexOf("ivw")||"podlove"==_satellite.getVar("Event | Source [gl]",a)&&a.detail.state.audio;if("audio"==_satellite.getVar("Event | Action [gl]",a)&&!n)return _satellite.getVar("Event | Item: Series [co]",a)}}},"Cookie | Dynamic Paygate [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(){return _satellite.saraCookieRead("sara_target_dpg")&&decodeURIComponent(_satellite.saraCookieRead("sara_target_dpg"))}}},"Event Value | event972: Timer [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){if("timer"===_satellite.getVar("Event | Action [gl]",a))return 1}}},"User | Current Consent (String) [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(){let e=_satellite.getVar("User | Current Consents [gl]");return"has_consent:"+(e.has_consent.join("~")||"(none)")+";no_consent:"+(e.no_consent.join("~")||"(none)")}}},"Editorial | Author: Names [co]":{defaultValue:"",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"editorial.author.names",callback:function(){},doCustomCode:!1,convertToString:!1}},"Page | is PUR Tracking [co]":{defaultValue:"",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"page.attributes.is_consent_required",callback:function(e){return!1===e},doCustomCode:!0,convertToString:!1}},"Page | Previous Page Timing: Performance: Track Pageview [co]":{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){return JSON.parse(_satellite.getVar("Page | Previous Data JSON [co]")).performance.track_pageview}}},"Editorial | has noAds (String) [co]":{defaultValue:"",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"editorial.attributes.has_noAds",callback:function(e){return!0===e?"no_ads":"has_ads"},doCustomCode:!0,convertToString:!1}},"Consent | CONSTANT: allToolsWithoutPrI [co]":{modulePath:"core/src/lib/dataElements/constant.js",settings:{value:"allToolsWithoutPrI"}},"Page | PUR Tracking (String) [co]":{defaultValue:"not_PUR",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"page.attributes.is_consent_required",callback:function(e){return!1===e?"pure_tracking":"all_tracking"},doCustomCode:!0,convertToString:!1}},"Page | Timing: Performance: Server Response [co]":{defaultValue:"",modulePath:"accessible-page-speed-metrics/src/lib/dataElements/serverResponseTime.js",settings:{}},"XDM | Analytics: eVar91 - Hierarchy2 [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n="virtual_page"===_satellite.getVar("Event | Action [gl]",a),r="page_data_ready"===_satellite.getVar("Event | Action [gl]",a);if(n||r){var o=[_satellite.getVar("Page | Domain [gl]",a)+":"+_satellite.getVar("Page | URL: Hostname [gl]",a)],i=_satellite.getVar("Page | URL: Path [gl]",a).split("/");for(let e=1;e<4;e++)i[e]&&o.push(i[e]);return o.join("|")}}}},"XDM | Analytics: eVar180 - User Consent Status [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n=_satellite.getVar("Event | Action [gl]",a);if("virtual_page"===n||"page_data_ready"===n||"consent_completed"===n){var r=_satellite.getVar("XDM | Analytics: prop57 - User Has No Consent [gl]",a)||"(none)";return"has_consent:"+(_satellite.getVar("XDM | Analytics: prop56 - User Has Consent [gl]",a)||"(none)")+";no_consent:"+r}}}},"Event | State [gl]":{defaultValue:"",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"event.attributes.state",callback:function(e){return e||_satellite.getVar("Event | Source [gl]")},doCustomCode:!0,convertToString:!1}},"Cookie | Personalisierte Inhaltsempfehlungen [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(){return _satellite.saraCookieRead("sara_target_pri")&&decodeURIComponent(_satellite.saraCookieRead("sara_target_pri"))}}},"Page | Canonical URL [gl]":{defaultValue:"",storageDuration:"pageview",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"page.info.canonical_url",callback:function(){},doCustomCode:!1,convertToString:!1}},"Editorial | Channel [co]":{defaultValue:"",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"editorial.info.channel",callback:function(){},doCustomCode:!1,convertToString:!1}},"Target | AllParams [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n=_satellite.getVar("Page | Route [gl]",a),r=_satellite.getVar("Page | is PUR Tracking [co]]",a),o=_satellite.buildInfo.environment,i={},s={};return r||(s={"application.info.app_version":_satellite.getVar("App | Version [co]",a),"page.info.platform":_satellite.getVar("Page | Platform [gl]",a),"page.category.route":_satellite.getVar("Page | Route [gl]",a),"page.attributes.viewport":_satellite.getVar("Page | Viewport [co]",a),"page.attributes.channel_slug":_satellite.getVar("Page | Channel Slug [co]",a),"page.attributes.subchannel_slug":_satellite.getVar("Page | Subchannel Slug [co]",a),"user.device.type":_satellite.getVar("Device | Type [gl]",a),"user.segment.access":_satellite.getVar("User | Access Object String [gl[sso]]"),"user.segment.metered_access_count":_satellite.getVar("User | Metered Access Count (String) [co]"),"user.segment.dynamic":_satellite.getVar("User | Dynamic Targeting String [co]",a),"user.segment.is_loggedIn":_satellite.getVar("User | is Logged In [gl[sso]-sm]",a),"user.segment.target_test":_satellite.getVar("Util | Target Test Cookie [gl[at]]",a),"user.segment.has_paid_access":_satellite.getVar("User | has Paid Access [sm]",a),"user.segment.has_gift_article_access":_satellite.getVar("User | has Gift Article Access [co]",a),"user.segment.has_noads_access":_satellite.getVar("User | has No Ads Access [sm]",a),"profile.behaviour.uncompleted_article":_satellite.cookie.get("uncompleted_article"),"profile.segment.dynamic":_satellite.getVar("Cookie | Dynamic Paygate [co]",a)+";"+_satellite.getVar("Cookie | Dynamic Homepage Teaser [co]",a)+";"+_satellite.getVar("User | Dynamic Adbrain Split [co]",a)+";"+_satellite.getVar("Cookie | Personalisierte Inhaltsempfehlungen [co]",a)},Object.assign(i,s)),"article"===n&&("production"===o?(s={"entity.id":_satellite.getVar("Editorial | Article ID [co]",a),"entity.access_type":_satellite.getVar("Paywall | Type [co]",a),"entity.name":_satellite.getVar("Editorial | Headline [co]",a),"entity.brand":("spon"===_satellite.getVar("Page | Domain [gl]",a)?"spiegel":"mmo"===_satellite.getVar("Page | Domain [gl]",a)&&"manager")||"elf"===_satellite.getVar("Page | Domain [gl]",a)&&"11freunde","entity.intro":_satellite.getVar("Editorial | Intro [co]",a),"entity.channel":_satellite.getVar("Editorial | Channel [co]",a),"entity.pageUrl":_satellite.getVar("Page | Canonical URL [gl]",a),"entity.categoryId":_satellite.getVar("Editorial | Categories [co]",a),"entity.date_modified":_satellite.getVar("Editorial | Date: Modified [co]",a),"entity.headerImageId":_satellite.getVar("Editorial | Header Image ID [co]",a),"entity.style":_satellite.getVar("Editorial | Style [co]",a),"entity.type":_satellite.getVar("Editorial | Type (Array) [co]",a),"entity.has_audio":_satellite.getVar("Editorial | has Audio (String) [co]",a),"entity.has_video":_satellite.getVar("Editorial | has Video (String) [co]",a),"entity.has_author":_satellite.getVar("Editorial | has Author (String) [co]",a),"entity.is_listExcluded":_satellite.getVar("Editorial | List Excluded (String) [co]",a),"entity.is_comments_enabled":_satellite.getVar("Editorial | Comments Enabled (String) [co]",a),"entity.magazine_context":_satellite.getVar("Editorial | Magazine Context [co]",a),"entity.is_Recent":_satellite.getVar("Editorial | Date: isRecent [co]",a),"paywall.attributes.is_active":_satellite.getVar("Paywall | is Active (String) [co]",a),"paywall.type":_satellite.getVar("Paywall | Type [co]",a)},Object.assign(i,s)):(s={"entity.id":_satellite.getVar("Editorial | Article ID [co]",a),"entity.rev_access_type":_satellite.getVar("Paywall | Type [co]",a),"entity.rev_name":_satellite.getVar("Editorial | Headline [co]",a),"entity.rev_intro":_satellite.getVar("Editorial | Intro [co]",a),"entity.rev_channel":_satellite.getVar("Editorial | Channel [co]",a),"entity.rev_pageUrl":_satellite.getVar("Page | Canonical URL [gl]",a),"entity.rev_categoryId":_satellite.getVar("Editorial | Categories [co]",a),"entity.rev_headerImageId":_satellite.getVar("Editorial | Header Image ID [co]",a),"entity.rev_has_author":_satellite.getVar("Editorial | has Author (String) [co]",a),"entity.rev_date_modified":_satellite.getVar("Editorial | Date: Modified [co]",a),"entity.rev_is_listExcluded":_satellite.getVar("Editorial | List Excluded (String) [co]",a),"entity.rev_is_comments_enabled":_satellite.getVar("Editorial | Comments Enabled (String) [co]",a),"entity.rev_magazine_context":_satellite.getVar("Editorial | Magazine Context [co]",a),"entity.rev_is_Recent":_satellite.getVar("Editorial | Date: isRecent [co]",a),"paywall.rev_attributes.is_active":_satellite.getVar("Paywall | is Active (String) [co]",a),"paywall.rev_category.type":_satellite.getVar("Paywall | Type [co]",a)},Object.assign(i,s))),{__adobe:{target:i}}}}},"Page | URL: Query Parameter: sara_dcid [gl]":{defaultValue:"",modulePath:"core/src/lib/dataElements/queryStringParameter.js",settings:{name:"sara_dcid",caseInsensitive:!0}},"Editorial | Date: Published [co]":{defaultValue:"",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"editorial.info.date_published",callback:function(){},doCustomCode:!1,convertToString:!1}},"Page | Previous Page Timing: Engagement: Total [co]":{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){return JSON.parse(_satellite.getVar("Page | Previous Data JSON [co]")).engagement.time_total}}},"User | has Emetriq ID [gl]":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){return void 0===_satellite.cookie.get("adp_pid")?"no_emetriqID":"has_emetriqID"}}},"Event Value | event918: End of Page [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){if("scroll"===_satellite.getVar("Event | Action [gl]",a)&&"page - complete"===_satellite.getVar("Event | Name [gl]",a))return 1}}},"Page | Name String [gl]":{defaultValue:"",storageDuration:"pageview",modulePath:"data-element-assistant/src/lib/dataElements/concatenate.js",settings:{returnEmpty:!1,trailingDelimiter:"",dataElementsAndDelimiters:[{path:"",delimiter:"",inputType:"dataelement",dataElement:"%Page | Name: Prefix [gl-lo]%",omitWhenEmpty:!1},{path:"",delimiter:".",inputType:"dataelement",dataElement:"%Page | URL: Subdomain [gl]%",omitWhenEmpty:!1},{path:"",delimiter:" > ",inputType:"dataelement",dataElement:"%Page | Type [co]%",omitWhenEmpty:!1},{path:"",delimiter:" > ",inputType:"dataelement",dataElement:"%Page | ID [gl-co]%",omitWhenEmpty:!1}]}},"XDM | Analytics: list1 [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n="virtual_page"===_satellite.getVar("Event | Action [gl]",a),r="page_data_ready"===_satellite.getVar("Event | Action [gl]",a),o="article"===_satellite.getVar("Page | Route [gl]",a);if((n||r)&&o){for(var i=[],s=_satellite.getVar("Editorial | Topics (Array) [co]",a),l=0;l<s.length;l++)i.push({value:s[l]});return window._satellite.pageDataToPersist.list1=i,i}if(window._satellite.pageDataToPersist.eVar50)return window._satellite.pageDataToPersist.list1}}},"Event | Target URL: Query Parameter: sara_at [gl]":{defaultValue:"",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"event.attributes.target_url",callback:function(e){return new URL(e).searchParams.get("sara_at")},doCustomCode:!0,convertToString:!1}},"Component | Tracking String [gl]":{defaultValue:"",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"event.attributes",callback:function(e){if(e.component_name)return"id="+e.component_id+";cn="+e.component_name+";ct="+e.component_type+";ti="+e.title;let t=SARAs_data&&SARAs_data.getState&&SARAs_data.getState().event&&SARAs_data.getState().event.attributes&&SARAs_data.getState().event.attributes.component_id;if(t)try{const e=document.querySelectorAll("[data-sara-action=impression]"),a=Array.from(e).map((e=>{try{return JSON.parse(e.dataset.saraComponent)}catch(e){return _satellite.logger.info("Fehler beim Parsen von JSON:",e),null}})).find((e=>e&&e.id===t));if(a&&"recommendation"===a.name)return"id=;cn="+a.name+";ti="+a.title+";is="+a.item_source+";ver="+a.run_id+";cra="+a.created_at}catch(e){_satellite.logger.info("Ein Fehler ist aufgetreten:",e)}},doCustomCode:!0,convertToString:!1}},"Cookie | Dynamic Adbrain Test [co]":{modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){return _satellite.saraCookieRead("sara_target_adb")&&decodeURIComponent(_satellite.cookie.get("sara_target_adb"))}}},"XDM | Analytics: eVar153 - Facebook FBCLID [gl][consent:PuV-KM]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){let n=["page_data_ready","virtual_page","consent_completed"].indexOf(_satellite.getVar("Event | Action [gl]",a))>-1,r=_satellite.getVar("Storage | Click ID: Facebook [gl]"),o=_satellite.getVar("Util | Function: Get Purpose Consent Mapping [gl-lo]")(r.purposes),i=_satellite.getVar("Page | URL: Query Parameter: fbclid [gl]",a);if(Object.keys(o).filter((e=>o[e].length>0)).length>0&&n){let e=i;return e?window._satellite.getValOnce(e,r.name):e}if(n&&i){let e="(not yet approved)";return e?window._satellite.getValOnce(e,r.name):e}}}},"XDM | Analytics: eVar35 - Hour/Minute [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n=_satellite.getVar("Event | Action [gl]",a),r=_satellite.getVar("Event | Name [gl]",a),o=["button_click","component_click","component_view","link_click_external","page_data_ready","submit","virtual_page","timer"],i=0===r.indexOf("ivw")||"audio"===n&&"podlove"==_satellite.getVar("Event | Source [gl]",a)&&_satellite.getVar("Event | State [gl]",a).audio,s=("audio"===n||"video"===n)&&!i,l="consent_completed"===n,c="scroll"===n&&("editorial - complete"===r||"page - complete"===r);if(o.includes(n)||s||l||c)return _satellite.getVar("Hit | Timestamp HH:MM [gl]",a)}}},"Event Value | event973: Timer (ms) [co] ":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){if("timer"===_satellite.getVar("Event | Action [gl]",a))return _satellite.getVar("Page | Timing: Engagement: Total [co]",a)}}},"Event Value | event52: Engagement: Hidden Time [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){if(_satellite.getVar("Page | Previous Data JSON [co]",a)&&"page_data_ready"==_satellite.getVar("Event | Action [gl]",a))return _satellite.getVar("Page | Previous Page Timing: Engagement: Hidden [co]",a)}}},"Editorial | Header Image ID [co]":{defaultValue:"",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"editorial.info.header_image_id",callback:function(){},doCustomCode:!1,convertToString:!1}},"Page | Referrer: URL without Query [gl]":{defaultValue:"",cleanText:!0,modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){return _satellite.getVar("Page | Referrer [gl]").split("?")[0]}}},"Paywall | is Active [co]":{defaultValue:"",storageDuration:"pageview",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"paywall.attributes.is_active",callback:function(){},doCustomCode:!1,convertToString:!1}},"Page | URL: Query Parameter [gl]":{defaultValue:"",cleanText:!0,storageDuration:"pageview",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(){const e=new URL(document.location),t=new URLSearchParams(e.search);if(t.has("sara_ref")&&t.get("sara_ref").includes("-sh")&&t.set("sara_ref",t.get("sara_ref").replace(/(-sh).*/,"$1")),t.has("appInstallReferrer")){const e=t.get("appInstallReferrer");return t.delete("appInstallReferrer"),e.includes("utm_campaign")?t.size>0?"?"+t.toString()+"&"+e:"?"+e:t.size>0?"?"+t.toString()+"&utm_campaign=App Install Generic&"+e:"?utm_campaign=App Install Generic&"+e}if(t.size>0)return"?"+t.toString()}}},"Event Value | event1: Page Views [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n=_satellite.getVar("Event | Action [gl]",a);return"virtual_page"===n||"page_data_ready"===n?1:0}}},"Page | Language [gl]":{defaultValue:"",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"page.info.language",callback:function(){},doCustomCode:!1,convertToString:!1}},"QS | Launch: Property [gl]":{defaultValue:"",modulePath:"core/src/lib/dataElements/javascriptVariable.js",settings:{path:"_satellite.property.name"}},"User | Current Consent Status [gl-co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n=_satellite.getVar("Page | is PUR Tracking [co]",a),r=_satellite.getVar("User | has No Ads Access [sm]",a),o=_satellite.getVar("Consent Setting | Purpose - PuV granted [gl]",a),i=_satellite.getVar("Consent Setting | Purpose - prI granted [co]",a),s=_satellite.getVar("Consent Setting | Consented Purposes [gl]",a).length>0;return n?_satellite.getVar("Consent | CONSTANT: basic [gl]",a):r&&o?_satellite.getVar("Consent | CONSTANT: fullAA [co]",a):s&&!r?i?_satellite.getVar("Consent | CONSTANT: allTools [gl]",a):_satellite.getVar("Consent | CONSTANT: allToolsWithoutPrI [co]",a):_satellite.getVar("Consent | CONSTANT: basic [gl]",a)}}},"Editorial | Subchannel [co]":{defaultValue:"",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"editorial.info.subchannel",callback:function(){},doCustomCode:!1,convertToString:!1}},"Event Value | event60: End of Page Scrolls [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){if("scroll"===_satellite.getVar("Event | Action [gl]",a)&&window._satellite.persistVals&&window._satellite.persistVals.event60)return window._satellite.persistVals.event60}}},"Event Value | event806: Special Consent Layer Shown [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){let n=_satellite.getVar("Event | Action [gl]",a),r=_satellite.getVar("Consent | CMP: Type [co]",a),o=_satellite.getVar("Consent | CMP: Action [co]",a);if("layer_open"===n&&"special"==r&&"waiting"==o)return 1}}},"Page | Timing: Performance: Total Load [co]":{defaultValue:"",modulePath:"accessible-page-speed-metrics/src/lib/dataElements/totalPageLoadTime.js",settings:{}},"XDM | Analytics: eVar5 - Page Type 2 [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n=_satellite.getVar("Event | Action [gl]",a);return"page_data_ready"===n||"virtual_page"===n?(returnVal=_satellite.getVar("Page | Type [co]",a),window._satellite.pageDataToPersist.eVar5=returnVal,returnVal):window._satellite.pageDataToPersist.eVar5?window._satellite.pageDataToPersist.eVar5:void 0}}},"Product | Price in App [co]":{defaultValue:"",modulePath:"mapping-table/src/lib/dataElements/mappingTable.js",settings:{0:{input:"spon_iap_subscription",method:"contains",output:"19.99"},1:{input:"spiegel_no_ads_monthly",method:"exact match",output:"4.99"},2:{input:"de.spiegel.spon.SpiegelPlusMonthly",method:"exact match",output:"19.99"},3:{input:"de.spiegel.spon.SpiegelAdFreeMonthly",method:"exact match",output:"4.99"},size:4,dataElement:"%Product | ID in App [co]%",defaultValueEmpty:!0}},"Editorial | Channel+Subchannel [co]":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){return _satellite.getVar("Editorial | Channel [co]")+":"+_satellite.getVar("Editorial | Subchannel [co]")}}},"XDM | Analytics: eVar131 - Form Category [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){if("submit"===_satellite.getVar("Event | Action [gl]",a))return _satellite.getVar("Form | Class [gl]",a)+"::"+_satellite.getVar("Form | Type [gl]",a)}}},"XDM | Analytics: eVar13 - Previous Page Identifier [gl][consent:PuV-Na]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){let n,r=["page_data_ready","virtual_page","consent_completed","direct_call"].indexOf(_satellite.getVar("Event | Action [gl]",a))>-1||"object"==typeof a&&"pageshow"===a.$type&&!0===a.persisted,o=_satellite.getVar("Storage | Usage: Previous Page [gl]"),i=_satellite.getVar("Util | Function: Get Purpose Consent Mapping [gl-lo]")(o.purposes),s=e=>{e.persisted&&(window.removeEventListener("pageshow",s),_satellite.pageDataToPersist.eVar13=void 0,_satellite.getVar("XDM | Analytics: eVar13 - Previous Page Identifier [gl][consent:PuV-Na]",e))};if(r)if(/^https\:\/\/cdn\..*\/stories\/\d*\/index\.amp.\html$/.test(_satellite.getVar("XDM | Analytics: eVar12 - Page Referral URL [gl]")))n="sp.www > homepage > story";else if(Object.keys(i).filter((e=>i[e].length>0)).length>0){if(_satellite.pageDataToPersist=_satellite.pageDataToPersist||{},"string"!=typeof _satellite.pageDataToPersist.eVar13){const e=_satellite.getVar("Page | Name String [gl]",a),t=_satellite.getPreviousValue(e,o.name,o.expiry);_satellite.pageDataToPersist.eVar13=void 0===t?"[n/a]":t===e?"[self]":t,window.addEventListener("pageshow",s)}n=_satellite.pageDataToPersist.eVar13}else n="[no consent]";return n}}},"User | has No Ads Access [sm]":{defaultValue:"",storageDuration:"pageview",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"user.segment.has_spiegelNoAdsMonthly_access",callback:function(){},doCustomCode:!1,convertToString:!1}},"XDM | Analytics: eVar96 - Editorial Author Teams [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n="virtual_page"===_satellite.getVar("Event | Action [gl]",a),r="page_data_ready"===_satellite.getVar("Event | Action [gl]",a),o="article"===_satellite.getVar("Page | Route [gl]",a);if((n||r)&&o){
var i=_satellite.getVar("Editorial | Author: Departments [co]",a),s=Array.isArray(i)?i.join(","):i;return window._satellite.pageDataToPersist.eVar96=s,s}if(window._satellite.pageDataToPersist.eVar96)return window._satellite.pageDataToPersist.eVar96}}},"Consent | Validate page_data_ready [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e){return!(!e.page||!e.consent)}}},"Component | Name [co]":{defaultValue:"",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"event.attributes.component_name",callback:function(){},doCustomCode:!1,convertToString:!1}},"XDM | Analytics: pageName [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n="virtual_page"===_satellite.getVar("Event | Action [gl]",a),r="page_data_ready"===_satellite.getVar("Event | Action [gl]",a);if(n||r)return _satellite.getVar("Page | Name String [gl]",a)}}},"Editorial | Article ID (20 chars) [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"editorial.info.article_id",callback:function(e){return e?e.match(/(\w+)/g)[0]+e.match(/(\w+)/g)[4]:void 0},doCustomCode:!0,convertToString:!1}},"XDM | Analytics: eVar62 - Editorial Published DateTime [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n="virtual_page"===_satellite.getVar("Event | Action [gl]",a),r="page_data_ready"===_satellite.getVar("Event | Action [gl]",a),o="article"===_satellite.getVar("Page | Route [gl]",a);return(n||r)&&o?(returnVal=_satellite.getVar("Editorial | Date: Published [co]",a),window._satellite.pageDataToPersist.eVar62=returnVal,returnVal):window._satellite.pageDataToPersist.eVar62?window._satellite.pageDataToPersist.eVar62:void 0}}},"Page | URL: Query Parameter: sara_icid [gl]":{defaultValue:"",modulePath:"core/src/lib/dataElements/queryStringParameter.js",settings:{name:"sara_icid",caseInsensitive:!0}},"Editorial | Author: Abbreviations [co]":{defaultValue:"",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"editorial.author.abbreviation",callback:function(){},doCustomCode:!1,convertToString:!1}},"Event Value | event310: To Aboshop Clicks ":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){if("link_click_external"===_satellite.getVar("Event | Action [gl]",a)&&_satellite.getVar("Event | Name [gl]",a).includes("friendly")&&_satellite.getVar("Event | Target URL [gl]",a).includes("abo."))return 1}}},"Product | ID in App [co]":{defaultValue:"",modulePath:"core/src/lib/dataElements/queryStringParameter.js",settings:{name:"iapTrackingId",caseInsensitive:!0}},"XDM | Analytics: prop56 - User Has Consent [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){return["page_data_ready","virtual_page","consent_completed"].indexOf(_satellite.getVar("Event | Action [gl]",a))>-1?(returnVal=_satellite.getVar("User | Current Consent: has Consent (String) [gl]",a),window._satellite.pageDataToPersist.prop56=returnVal,returnVal):window._satellite.pageDataToPersist.prop56?window._satellite.pageDataToPersist.prop56:void 0}}},"Consent Setting | Consented Purposes [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"consent.settings.consents.consentedPurposes",callback:function(e){return e||[]},doCustomCode:!0,convertToString:!1}},"XDM | Analytics: eVar9 - Query Parameter [gl][consent]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n="virtual_page"===_satellite.getVar("Event | Action [gl]",a),r="page_data_ready"===_satellite.getVar("Event | Action [gl]",a),o=_satellite.getVar("User | Current Consent Status [gl-co]",a);if((o===_satellite.getVar("Consent | CONSTANT: allToolsWithoutPrI [co]",a)||o===_satellite.getVar("Consent | CONSTANT: allTools [gl]",a))&&(n||r))return _satellite.getVar("Page | URL: Query Parameter [gl]",a)}}},"XDM | Analytics: eVar66 - Editorial Social Headline [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n="virtual_page"===_satellite.getVar("Event | Action [gl]",a),r="page_data_ready"===_satellite.getVar("Event | Action [gl]",a),o="article"===_satellite.getVar("Page | Route [gl]",a);return(n||r)&&o?(returnVal=_satellite.getVar("Editorial | Headline: Social [co]",a),window._satellite.pageDataToPersist.eVar66=returnVal,returnVal):window._satellite.pageDataToPersist.eVar66?window._satellite.pageDataToPersist.eVar66:void 0}}},"XDM | Analytics: eVar186 - SSO Tracking ID [gl[sso]]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){if(["page_data_ready","virtual_page","checkout","authenticate"].indexOf(_satellite.getVar("Event | Action [gl]",a))>-1)return _satellite.getVar("User | SSO Tracking ID [gl[sso]-sm]",a)}}},"Page | Previous Page Timing: Engagement: Visibility [co]":{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){return JSON.parse(_satellite.getVar("Page | Previous Data JSON [co]")).engagement.time_visible}}},"Form | Fields Total Count [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"form.info..fields_total",callback:function(e){return e||2},doCustomCode:!0,convertToString:!1}},"XDM | Analytics: prop74 - Launch Build Info [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){return["page_data_ready","virtual_page","checkout"].indexOf(_satellite.getVar("Event | Action [gl]",a))>-1?(returnVal=_satellite.getVar("QS | Launch: Environment + Build Date [gl]",a),window._satellite.pageDataToPersist.prop74=returnVal,returnVal):window._satellite.pageDataToPersist.prop74?window._satellite.pageDataToPersist.prop74:void 0}}},"Page | Timing: Engagement: Hidden [co]":{defaultValue:"",modulePath:"core/src/lib/dataElements/javascriptVariable.js",settings:{path:"window.stats.status.timeTabbedOut"}},"Event ID | event131: Media Plays [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){if(_satellite.getVar("Event Value | event130: Media Plays [co]",a))return _satellite.getVar("Event | Item: Media ID [co]",a)}}},"Event | URL: Subdomains [gl]":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){return _satellite.getVar("Util | Function: Subdomain from Host [gl]")("Event | URL: Hostname [gl]")}}},"Editorial | has Gallery (String) [co]":{defaultValue:"",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"editorial.attributes.has_gallery",callback:function(e){return!0===e?"has_gallery":"no_gallery"},doCustomCode:!0,convertToString:!1}},"Editorial | Categories [co]":{defaultValue:"",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){function n(e){var t=i+":"+s+":"+e;r.push(t)}try{var r=[],o=_satellite.getVar("Editorial | Topics (Array) [co]",a),i=_satellite.getVar("Editorial | Channel [co]",a),s=_satellite.getVar("Editorial | Subchannel [co]",a);return o.forEach(n),i+","+i+":"+s+","+r.toString()}catch(e){return}}}},"Event | Action [gl]":{defaultValue:"",forceLowerCase:!0,modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"event.info.action",callback:function(){},doCustomCode:!1,convertToString:!1}},"Target | Event Propositions [gl]":{modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){return _satellite.logger.info("[SARAs TEST]: DE Event Propositions ",e),e.propositions}}},"Editorial | Author: Departments [co]":{defaultValue:"",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"editorial.author.departments",callback:function(){},doCustomCode:!1,convertToString:!1}},"User | Metered Access Count (String) [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"user.segment.metered_access_count",callback:function(e){const t="string"==typeof e?e:"",a=Date.parse(t.replace(/^.*\|(.*?)$/,"$1"));if(!isNaN(a))return t.replace(/^(.*\|).*?$/,"$1")+String(Math.round((a-Date.now())/1e3/60/60/24))},doCustomCode:!0,convertToString:!1}},"Event Value | event10: User Has Consent [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){let n=["page_data_ready","virtual_page","consent_completed"].indexOf(_satellite.getVar("Event | Action [gl]",a))>-1;var r=_satellite.getVar("Consent Setting | Purpose - pWxi-Any: has Personalized Advertising granted [co]");if(n&&r&&"general"==_satellite.getVar("Consent | CMP: Type [co]",a))return 1}}},"Event Value | event290: Primary Conversion Button Clicks [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n=_satellite.getVar("Event | Attributes [gl]",a).cta||"";if("button_click"===_satellite.getVar("Event | Action [gl]",a)&&n.startsWith("primary"))return 1}}},"User | has Paid Access [sm]":{defaultValue:"",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"user.segment.has_paid_access",callback:function(){},doCustomCode:!1,convertToString:!1}},"Editorial | Intro [co]":{defaultValue:"",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"editorial.info.intro",callback:function(){},doCustomCode:!1,convertToString:!1}},"Event Value | event138: Media Playtime [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n=_satellite.getVar("Event | Name [gl]",a),r=_satellite.getVar("Event | Action [gl]",a),o="audio"===r||"video"===r,i=0===n.indexOf("milestone ")||"complete"===n||"first-minute"===n||n.includes("livestream"),s="audio"===r&&"podlove"==_satellite.getVar("Event | Source [gl]",a)&&a.detail.state.audio;if(o&&i&&!s)return _satellite.getVar("Media | Playtime [co]",a)}}},"Form | Status [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"form.status.status",callback:function(){},doCustomCode:!1,convertToString:!1}},"Page | Name: Prefix [gl-lo]":{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/constant.js",settings:{value:"sp"}},"Event Value | event12: Homepage Page Views [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n=_satellite.getVar("Event | Action [gl]",a),r="homepage"===_satellite.getVar("Page | Route [gl]",a);if(("virtual_page"===n||"page_data_ready"===n)&&r)return 1}}},"XDM | Analytics: eVar138 - Paywall Position [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n="virtual_page"===_satellite.getVar("Event | Action [gl]",a),r="page_data_ready"===_satellite.getVar("Event | Action [gl]",a),o="article"===_satellite.getVar("Page | Route [gl]",a),i=!0===_satellite.getVar("Paywall | is Active [co]",a),s=_satellite.getVar("Paywall | Type [co]",a),l=!("string"!=typeof s||!/paid|conditional/.test(s));if((n||r)&&o&&i&&l)return _satellite.getVar("Paywall | Position [co]",a)}}},"XDM | Analytics: is Homepage [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){return"page_data_ready"===_satellite.getVar("Event | Action [gl]",a)&&"homepage"==_satellite.getVar("Page | Route [gl]",a)}}},"Consent | CMP: Event Status [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"consent.info.status",callback:function(){},doCustomCode:!1,convertToString:!1}},"XDM | Analytics: eVar85 - Editorial has Audio [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n="virtual_page"===_satellite.getVar("Event | Action [gl]",a),r="page_data_ready"===_satellite.getVar("Event | Action [gl]",a),o="article"===_satellite.getVar("Page | Route [gl]",a);return(n||r)&&o?(returnVal=_satellite.getVar("Editorial | has Audio (String) [co]",a),window._satellite.pageDataToPersist.eVar85=returnVal,returnVal):window._satellite.pageDataToPersist.eVar85?window._satellite.pageDataToPersist.eVar85:void 0}}},"Page | Timing: Engagement: First Visible [co]":{defaultValue:"",modulePath:"core/src/lib/dataElements/javascriptVariable.js",settings:{path:"window.stats.status.timeFirstVisible"}},"Config | DataStream: per Consent [gl-lo]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n=_satellite.getVar("QS | Launch: Environment Stage [gl]",a),r=_satellite.getVar("User | Current Consent Status [gl-co]",a);if(r===_satellite.getVar("Consent | CONSTANT: basic [gl]",a)||r===_satellite.getVar("Consent | CONSTANT: fullAA [co]",a))switch(n){case"production":return"e79bddca-b217-449f-9523-b2936763bbdb";case"development":case"staging":return"415683bf-65c3-44cf-a57e-d2ef2079d4cf"}if(r===_satellite.getVar("Consent | CONSTANT: allToolsWithoutPrI [co]",a)||r===_satellite.getVar("Consent | CONSTANT: allTools [gl]",a))switch(n){case"production":return"b48de5d5-0f6b-4d37-b838-f8c1523cc3c7";case"development":case"staging":return"a6775471-b28c-445c-8c53-69cad93d3811"}return"415683bf-65c3-44cf-a57e-d2ef2079d4cf"}}},"QS | Launch: Build Date [gl]":{defaultValue:"",modulePath:"core/src/lib/dataElements/javascriptVariable.js",settings:{path:"_satellite.buildInfo.buildDate"}},"Storage | Usage: Day [co]":{defaultValue:"",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(){return{name:"sara_day",expiry:(new Date).setHours(24,0,0,0)-(new Date).getTime(),purposes:["PuV-Na"]}}}},"QS | Launch: Environment + Build Date [gl]":{modulePath:"data-element-assistant/src/lib/dataElements/concatenate.js",settings:{returnEmpty:!1,trailingDelimiter:"",dataElementsAndDelimiters:[{path:"",delimiter:"",inputType:"dataelement",dataElement:"%QS | Launch: Environment [gl]%",omitWhenEmpty:!1},{path:"",delimiter:"|",inputType:"dataelement",dataElement:"%QS | Launch: Build Date [gl]%",omitWhenEmpty:!1}]}},"XDM | Analytics: prop75 - Data Model Version [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n=_satellite.getVar("Event | Action [gl]",a);return"page_data_ready"===n||"virtual_page"===n?(returnVal=_satellite.getVar("Config | Data Model Version [gl-lo]",a),window._satellite.pageDataToPersist.prop75=returnVal,returnVal):window._satellite.pageDataToPersist.prop75?window._satellite.pageDataToPersist.prop75:void 0}}},"Page | URL: Subdomain [gl]":{defaultValue:"www",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){if("partner"==_satellite.getVar("Page | Route [gl]"))return _satellite.getVar("Util | Function: Subdomain from Host [gl]")("Page | URL: Hostname [gl]")}}},"Event | Item: Series [co]":{defaultValue:"",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"event.attributes.item.series",callback:function(){},doCustomCode:!1,convertToString:!1}},"XDM | Analytics: prop1 - R1D1 Page ID String [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){return["page_data_ready","virtual_page"].indexOf(_satellite.getVar("Event | Action [gl]",a))>-1?_satellite.getVar("Page | Name String [gl]",a):"link_click_external"==_satellite.getVar("Event | Action [gl]",a)&&"homepage"===_satellite.getVar("Page | Route [gl]",a)?_satellite.getVar("Event | URL: Name String [gl]",a):void 0}}},"Event Value | event50: Engagement: Time to First Visible [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){if(_satellite.getVar("Page | Previous Data JSON [co]",a)&&"page_data_ready"==_satellite.getVar("Event | Action [gl]",a)){var n=_satellite.getVar("Page | Previous Page Timing: First Visible [co]",a);return n||void 0}}}},"Event Value | event112: Plus Article Metered Access [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){const n=/^(?:page_data_ready|virtual_page)$/.test(_satellite.getVar("Event | Action [gl]",a)),r="metered unlocked"===_satellite.getVar("XDM | Analytics: eVar139 - Paywall State [co]"),o=_satellite.getVar("User | SSO Tracking ID [gl[sso]-sm]"),i=_satellite.getVar("Editorial | Article ID [co]"),s=e=>/^(?:string|number)$/.test(typeof e)&&String(e).length>10;if(n&&r&&s(o)&&s(i))return 1}}},"XDM | Analytics: eVar45 - Article Attention Level (AAL) [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){let n;if("direct_call"===_satellite.getVar("Event | Action [gl]",a)&&"article attention level"===_satellite.getVar("Event | Name [gl]",a))return n=_satellite.getVar("Page | Article Attention Level (AAL)",a),"string"==typeof n?n:void 0}}},"User | is Logged In [gl[sso]-sm]":{defaultValue:"",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"user.segment.is_loggedIn",callback:function(){},doCustomCode:!1,convertToString:!1}},"XDM | Analytics: campaign [gl][consent:PuV-KM]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){let n=["page_data_ready","virtual_page","consent_completed"].indexOf(_satellite.getVar("Event | Action [gl]",a))>-1,r=_satellite.getVar("Storage | Campaign: External [gl]"),o=_satellite.getVar("Util | Function: Get Purpose Consent Mapping [gl-lo]")(r.purposes),i=_satellite.getVar("Campaign | ID: External (sara_dcid, sara_ecid) [gl]",a);if(Object.keys(o).filter((e=>o[e].length>0)).length>0&&n){let e=i;return e=e?window._satellite.getValOnce(e,r.name):e,e}if(n&&i)return"(not yet approved)"}}},"XDM | Analytics: eVar179 - User Pure Status [sm]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){if(/^(?:page_data_ready|virtual_page|direct_call)$/.test(_satellite.getVar("Event | Action [gl]",a)))return _satellite.getVar("User | No Ads Access String [sm]",a)}}},"Event Value | event4: Homepage Clicks [gl]":{modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){var t=_satellite.getVar("Event | Action [gl]",e),a=_satellite.getVar("Page | Route [gl]",e),n="virtual_page"===t,r="page_data_ready"===t,o="article"===a,i="from_int_homepage"===_satellite.getVar("Page | Referrer: Category [gl]",e);return(n||r)&&o&&i||"link_click_external"===t&&"homepage"===a?1:void 0}}},"XDM | Analytics: eVar59 - Editorial Type [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n="virtual_page"===_satellite.getVar("Event | Action [gl]",a),r="page_data_ready"===_satellite.getVar("Event | Action [gl]",a),o="article"===_satellite.getVar("Page | Route [gl]",a);return(n||r)&&o?(returnVal=_satellite.getVar("Editorial | Type (Array) [co]",a),window._satellite.pageDataToPersist.eVar59=returnVal,returnVal):window._satellite.pageDataToPersist.eVar59?window._satellite.pageDataToPersist.eVar59:void 0}}},"Element | CTA [gl]":{forceLowerCase:!0,modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"event.attributes.cta",callback:function(){},doCustomCode:!1,convertToString:!1}},"XDM | Analytics: Link Click Type [gl-lo]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n=_satellite.getVar("Event | Action [gl]",a);if(_satellite.getVar("Event Value | Link Click Event [gl-lo]",a))return"link_click_external"===n?"exit":"link_click_download"===n?"download":"other"}}},"XDM | Analytics: eVar68 - Editorial has noAds [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n="virtual_page"===_satellite.getVar("Event | Action [gl]",a),r="page_data_ready"===_satellite.getVar("Event | Action [gl]",a),o="article"===_satellite.getVar("Page | Route [gl]",a);return(n||r)&&o?(returnVal=_satellite.getVar("Editorial | has noAds (String) [co]",a),window._satellite.pageDataToPersist.eVar68=returnVal,returnVal):window._satellite.pageDataToPersist.eVar68?window._satellite.pageDataToPersist.eVar68:void 0}}},"QS | Launch: Version [gl]":{defaultValue:"",modulePath:"core/src/lib/dataElements/javascriptVariable.js",settings:{path:"_satellite.buildInfo.turbineVersion"}},"Event | Label [gl]":{defaultValue:"",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"event.attributes.label",callback:function(){},doCustomCode:!1,convertToString:!1}},"Marketing Pixel | Google ID: MCC [sm]":{modulePath:"core/src/lib/dataElements/constant.js",settings:{value:"466550243"}},"Event | Click Type [gl]":{defaultValue:"other_click",modulePath:"mapping-table/src/lib/dataElements/mappingTable.js",settings:{0:{input:"http",method:"contains",output:"link_click"},size:1,dataElement:"%Event | Target URL [gl]%",defaultValueEmpty:!0}},"Page | URL on Entry [gl]":{defaultValue:"",storageDuration:"pageview",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n="consent"===_satellite.getVar("Page | Route [gl]",a),r=""!==_satellite.getVar("Page | URL: Query Parameter: from [gl]",a),o=1===_satellite.getVar("Session | Page View Count [gl]",a)&&"app"!==_satellite.getVar("Page | Platform [gl]",a);return r||n?document.referrer:o?_satellite.getVar("Page | Canonical URL [gl]",a):void 0}}},"Editorial | Magazine Context [co]":{modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){return"issue"==_satellite.getVar("Page | Route [gl]")?"magazine_layout":"regular_layout"}}},"Page | Previous Data JSON [co]":{defaultValue:"",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(){return _satellite.saraCookieRead(_satellite.getVar("Storage | Page: Previous Page Data [gl]").name)}}},"Event Value | Link Click Event [gl-lo]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n=_satellite.getVar("Event | Action [gl]",a);if(["audio","button_click","consent_error","special_consent_completed","consent_completed","component_click","component_view","direct_call","tcdata_change","tcf_error","layer_open","link_click_external","link_click_download","scroll","submit","timer","video"].includes(n))return 1}}},"User | No Ads Access String [sm]":{defaultValue:"",storageDuration:"pageview",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"user.segment.has_spiegelNoAdsMonthly_access",callback:function(e){return!0===e?"has_noAdsAccess":"no_noAdsAccess"},doCustomCode:!0,convertToString:!1}},"Editorial | Article ID [co]":{defaultValue:"",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"editorial.info.article_id",callback:function(){},doCustomCode:!1,convertToString:!1}},"XDM | Analytics: eVar1 - Page Identifier [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n=_satellite.getVar("Event | Action [gl]",a);return"page_data_ready"===n||"virtual_page"===n?(returnVal=_satellite.getVar("Page | Name String [gl]",a),window._satellite.pageDataToPersist.eVar1=returnVal,returnVal):window._satellite.pageDataToPersist.eVar1?window._satellite.pageDataToPersist.eVar1:void 0}}},"QS | Launch: Version Date [gl]":{defaultValue:"",modulePath:"core/src/lib/dataElements/javascriptVariable.js",settings:{path:"_satellite.buildInfo.turbineBuildDate"}},"XDM | Analytics: eVar2 - Page Canonical URL [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n=_satellite.getVar("Event | Action [gl]",a);return"page_data_ready"===n||"virtual_page"===n?(returnVal=_satellite.getVar("Page | Canonical URL [gl]",a),window._satellite.pageDataToPersist.eVar2=returnVal,returnVal):window._satellite.pageDataToPersist.eVar2?window._satellite.pageDataToPersist.eVar2:void 0}}},"Editorial | Article Audio Type [co]":{defaultValue:"none",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"editorial.attributes.article_audio_type",callback:function(e){return!0===e?"has_article_audio":"no_article_audio"},doCustomCode:!1,convertToString:!1}},"XDM | Analytics: prop32 - Hit Timestamp ISO UTC [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){return _satellite.getVar("Hit | Timestamp ISO [gl]",a)}}},"Page | Previous Page Timing: Performance: Page Render":{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){return JSON.parse(_satellite.getVar("Page | Previous Data JSON [co]")).performance.page_render}}},"Util | Function: Subdomain from Host [gl]":{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){return function(e){var t=_satellite.getVar(e).split(".");return t.splice(0,t.length-2).reverse().join(".")}}}},"XDM | Analytics: prop4 - Subscription Article [cc]":{defaultValue:"",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n=_satellite.getVar("Event | Action [gl]",a),r=_satellite.getVar("Event | Attributes [gl]",a).cta||"",o="virtual_page"===n,i="page_data_ready"===n,s="article"===_satellite.getVar("Page | Route [gl]",a),l=(o||i)&&s,c="button_click"===n&&_satellite.getVar("Component | Name [gl]",a).indexOf("paywall")>-1&&r.indexOf("primary")>-1,d=1===_satellite.getVar("Event Value | Purchase (in App) [co]",a);if(l||c||d)return _satellite.getVar("Page | Name String [gl]",a)}}},"XDM | Analytics: eVar7 - SEO Title [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n=_satellite.getVar("Event | Action [gl]",a);return"page_data_ready"===n||"virtual_page"===n?(returnVal=_satellite.getVar("Page | Title [gl]",a),window._satellite.pageDataToPersist.eVar7=returnVal,returnVal):window._satellite.pageDataToPersist.eVar7?window._satellite.pageDataToPersist.eVar7:void 0}}},"Event Value | event195: End of Homepage Scrolls [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){if("scroll"===_satellite.getVar("Event | Action [gl]",a)&&window._satellite.persistVals&&window._satellite.persistVals.event195)return window._satellite.persistVals.event195}}},"Page | Visibility State [gl]":{defaultValue:"",modulePath:"core/src/lib/dataElements/javascriptVariable.js",settings:{path:"document.visibilityState"}},"Event Value | event140: Media Unmutes [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n=_satellite.getVar("Event | Action [gl]",a),r="audio"===n||"video"===n,o="audio"===n&&"podlove"==_satellite.getVar("Event | Source [gl]",a)&&_satellite.getVar("Event | State [gl]",a).audio;if(r&&"unmute"===_satellite.getVar("Event | Name [gl]",a)&&!o)return 1}}},"Event Value | event142: Media Five Minute Tracker [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n=_satellite.getVar("Event | Action [gl]",a),r="audio"===n||"video"===n,o="audio"===n&&"podlove"==_satellite.getVar("Event | Source [gl]",a)&&_satellite.getVar("Event | State [gl]",a).audio;if(r&&"livestream"===_satellite.getVar("Event | Name [gl]",a)&&!o)return 1}}},"XDM | Analytics: eVar19 - Raw Document Referrer [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n=_satellite.getVar("Event | Action [gl]",a);if("virtual_page"===n||"page_data_ready"===n)return document.referrer}}},"Page | URL: Host + Path  [gl]":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){return location.protocol+"//"+location.hostname+location.pathname}}},"Config | App: Measurement Manager Compatibility Version: Android [co-lo]":{modulePath:"core/src/lib/dataElements/constant.js",settings:{value:"179"}},"XDM | Analytics: eVar183 - Metered Access Count [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){const n=/^(?:virtual_page|page_data_ready)$/.test(_satellite.getVar("Event | Action [gl]",a)),r="article"===_satellite.getVar("Page | Route [gl]",a),o=_satellite.getVar("User | Access Feature Spmetered (Boolean) [sm]"),i=_satellite.getVar("User | Metered Access Count (String) [co]");if(n&&r&&o&&i)return i}}},"XDM | Analytics: eVar36 - New/Repeat Visitor [gl][consent:PuV-Na]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){let n=["page_data_ready","consent_completed"].indexOf(_satellite.getVar("Event | Action [gl]",a))>-1,r=_satellite.getVar("Storage | Usage: Usage [co]"),o=_satellite.getVar("Util | Function: Get Purpose Consent Mapping [gl-lo]")(r.purposes);return Object.keys(o).filter((e=>o[e].length>0)).length>0&&n?(returnVal=_satellite.getVar("User | New or Returning [gl]",a),window._satellite.pageDataToPersist.eVar36=returnVal,returnVal):window._satellite.pageDataToPersist.eVar36?window._satellite.pageDataToPersist.eVar36:void 0}}},"Event Value | event6: Routing Link Clicks [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){if("link_click_external"===_satellite.getVar("Event | Action [gl]",a)&&_satellite.getVar("Event | Name [gl]",a).includes("friendly"))return 1}}},"Event Value | event42: Performance: Page Render Time [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){if(_satellite.getVar("Page | Previous Data JSON [co]",a)&&"page_data_ready"==_satellite.getVar("Event | Action [gl]",a)){var n=_satellite.getVar("Page | Previous Page Timing: Performance: Page Render",a);return n||void 0}}}},"Page | Previous Page Timing: Performance: Load Libraries [co]":{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){return JSON.parse(_satellite.getVar("Page | Previous Data JSON [co]")).performance.load_libraries}}},"Page | Subchannel Slug [co]":{defaultValue:"",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"page.attributes.subchannel_slug",callback:function(e,t){return e||_satellite.getVar("Page | URL: Path [gl]",t).toString().split("/")[2]||_satellite.getVar("Page | Route [gl]",t)},doCustomCode:!0,convertToString:!1}},"Event Value | event110/event380: Paid Article View with Paywall [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n="virtual_page"===_satellite.getVar("Event | Action [gl]",a),r="page_data_ready"===_satellite.getVar("Event | Action [gl]",a),o="article"===_satellite.getVar("Page | Route [gl]",a),i=!0===_satellite.getVar("Paywall | is Active [co]",a),s=_satellite.getVar("Paywall | Type [co]",a),l=!("string"!=typeof s||!/paid|conditional/.test(s));if((n||r)&&o&&i&&l)return 1}}},
"Config | Target disable: per Consent [gl-lo]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n=_satellite.getVar("User | Current Consent Status [gl-co]",a);if(n!==_satellite.getVar("Consent | CONSTANT: allToolsWithoutPrI [co]",a)&&n!==_satellite.getVar("Consent | CONSTANT: allTools [gl]",a))return!1}}},"Storage | Click ID: Newsletter [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(){return{name:"nlid",expiry:"5 minutes",purposes:["PuV-KM"]}}}},"User | Cookie: Prop Score Session ID [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(){let e=_satellite.getVar("Storage | Usage: Session ID [co]").name;return _satellite.saraCookieRead(e)||"ps:"+(new Date).getTime()+"."+Math.random().toString(36).substring(5)}}},"XDM | Analytics: eVar67 - Editorial has Authorline [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n="virtual_page"===_satellite.getVar("Event | Action [gl]",a),r="page_data_ready"===_satellite.getVar("Event | Action [gl]",a),o="article"===_satellite.getVar("Page | Route [gl]",a);return(n||r)&&o?(returnVal=_satellite.getVar("Editorial | has Author (String) [co]",a),window._satellite.pageDataToPersist.eVar67=returnVal,returnVal):window._satellite.pageDataToPersist.eVar67?window._satellite.pageDataToPersist.eVar67:void 0}}},"Page | Referrer: Domain [gl]":{defaultValue:"",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){return _satellite.getVar("Page | Referrer [gl]",a).split("/")[2]}}},"Component | Position String [gl]":{defaultValue:"",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"event.attributes",callback:function(e){return e.pos&&e.steps?e.pos+"|"+e.steps:e.pos&&!e.steps?e.pos:!e.pos&&e.steps?"|"+e.steps:void 0},doCustomCode:!0,convertToString:!1}},"XDM | Analytics: eVar22 - Click Element [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n=_satellite.getVar("Event | Action [gl]",a),r=["button_click","component_click","link_click_external"];return"submit"===n?_satellite.getVar("Component | Name [gl]",a):r.includes(n)?_satellite.getVar("Element | Tracking String [gl]",a):void 0}}},"Event | Item: Newsletter ID [co]":{defaultValue:"",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"event.attributes.item.newsletter_id",callback:function(){},doCustomCode:!1,convertToString:!1}},"Campaign | ID: Funnel (sara_dcid, sara_ecid, sara_icid) [gl]":{defaultValue:"",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){return _satellite.getVar("Campaign | ID: External (sara_dcid, sara_ecid) [gl]",a)||_satellite.getVar("Page | URL: Query Parameter: sara_icid [gl]",a)}}},"Storage | Usage: Usage [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(){return{name:"sara_usage",expiry:"13 months",purposes:["PuV-Na"]}}}},"XDM | Analytics: prop71 - QS Data Layer Event [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){return _satellite.getVar("QS | Event: Action + Name + Label [gl]",a)}}},"Event Value | Purchase (in App) [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n="page_data_ready"===_satellite.getVar("Event | Action [gl]",a),r=_satellite.getVar("Purchase | is Initial in App [co]",a),o=_satellite.getVar("Product | ID in App [co]",a);let i=_satellite.getVar("Storage | Purchase [co]");return n&&"false"!==r&&o?window._satellite.getValOnce(1,i.name):void 0}}},"Util | Function: Event ID [gl]":{storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){if(!/^(?:string|number)$/.test(typeof e))return;let t,a,n=String(e).replace(/[^0-9a-zA-Z\-\_]/g,""),r="",o=(e,t)=>(e+t)%2==0?Math.max(e,t):Math.min(e,t);n=n.padEnd(40,n).padEnd(n.length+n.length%2,n),t=n.slice(0,n.length/2),a=n.slice(n.length/2,n.length);for(let e=0;e<t.length;e++)r+=String.fromCharCode(o(t.charCodeAt(e),a.charCodeAt(e)));return r.slice(0,20)}}},"Event Value | event504: Newsletter Registrations Starts [cc]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){if("button_click"===_satellite.getVar("Event | Action [gl]",a)&&"newsletter - subscribe"==a.detail.eventObject.info.name&&a.detail.eventObject.attributes.item)return 1}}},"XDM | Analytics: eVar46 - Article Elements Variety (AEV) [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){let n;if("direct_call"===_satellite.getVar("Event | Action [gl]",a)&&"article attention level"===_satellite.getVar("Event | Name [gl]",a))return n=_satellite.getVar("Page | Article Elements Variety (AEV)",a),"string"==typeof n?n:void 0}}},"Purchase | is Initial in App [co]":{modulePath:"core/src/lib/dataElements/queryStringParameter.js",settings:{name:"isInitialPurchase",caseInsensitive:!0}},"Page | Article Attention Level (AAL)":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"event.attributes.article_attention_level",callback:function(e){return"number"==typeof e?String(e):void 0},doCustomCode:!0,convertToString:!1}},"Consent Setting | Purpose - pWxi-Any: has Personalized Advertising granted [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(){let e=["pWxi-Any"],t=_satellite.getVar("Util | Function: Get Purpose Consent Mapping [gl-lo]")(e),a=!1;return e.forEach((function(e){t[e]&&t[e].length>0&&(a=!0)})),a}}},"Page | Domain [gl]":{defaultValue:"",storageDuration:"pageview",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"page.info.domain",callback:function(){},doCustomCode:!1,convertToString:!1}},"User | ECID [gl]":{defaultValue:"",modulePath:"core/src/lib/dataElements/javascriptVariable.js",settings:{path:"_satellite.identity.ecid"}},"Editorial | List Excluded (String) [co]":{defaultValue:"",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"editorial.attributes.is_listExcluded",callback:function(e){return!0===e?"is_listExcluded":"not_listExcluded"},doCustomCode:!0,convertToString:!1}},"XDM | Analytics: eVar182 - User Gift Article Access [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){if(/^(?:page_data_ready|virtual_page|direct_call)$/.test(_satellite.getVar("Event | Action [gl]",a)))return _satellite.getVar("User | has Gift Article Access [co]",a)}}},"XDM | Analytics: eVar65 - Editorial Headline [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n="virtual_page"===_satellite.getVar("Event | Action [gl]",a),r="page_data_ready"===_satellite.getVar("Event | Action [gl]",a),o="article"===_satellite.getVar("Page | Route [gl]",a);return(n||r)&&o?(returnVal=_satellite.getVar("Editorial | Headline [co]",a),window._satellite.pageDataToPersist.eVar65=returnVal,returnVal):window._satellite.pageDataToPersist.eVar65?window._satellite.pageDataToPersist.eVar65:void 0}}},"XDM | Analytics: eVar63 - Editorial Modified DateTime [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n="virtual_page"===_satellite.getVar("Event | Action [gl]",a),r="page_data_ready"===_satellite.getVar("Event | Action [gl]",a),o="article"===_satellite.getVar("Page | Route [gl]",a);return(n||r)&&o?(returnVal=_satellite.getVar("Editorial | Date: Modified [co]",a),window._satellite.pageDataToPersist.eVar63=returnVal,returnVal):window._satellite.pageDataToPersist.eVar63?window._satellite.pageDataToPersist.eVar63:void 0}}},"Page | Title [gl]":{defaultValue:"",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"page.info.title",callback:function(e){return e||document.title},doCustomCode:!0,convertToString:!1}},"XDM | Analytics: eVar81 - Editorial has Comments [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n="virtual_page"===_satellite.getVar("Event | Action [gl]",a),r="page_data_ready"===_satellite.getVar("Event | Action [gl]",a),o="article"===_satellite.getVar("Page | Route [gl]",a);return(n||r)&&o?(returnVal=_satellite.getVar("Editorial | Comments Enabled (String) [co]",a),window._satellite.pageDataToPersist.eVar81=returnVal,returnVal):window._satellite.pageDataToPersist.eVar81?window._satellite.pageDataToPersist.eVar81:void 0}}},"XDM | Analytics: eVar4 - Page Type [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n=_satellite.getVar("Event | Action [gl]",a);return"page_data_ready"===n||"virtual_page"===n?(returnVal=_satellite.getVar("Page | Route [gl]",a),window._satellite.pageDataToPersist.eVar4=returnVal,returnVal):window._satellite.pageDataToPersist.eVar4?window._satellite.pageDataToPersist.eVar4:void 0}}},"Page | Channel Slug [co]":{defaultValue:"",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"page.attributes.channel_slug",callback:function(e,t){return e||_satellite.getVar("Page | URL: Path [gl]",t).toString().split("/")[1]||_satellite.getVar("Page | Route [gl]",t)},doCustomCode:!0,convertToString:!1}},"User | has Consent [gl]":{modulePath:"core/src/lib/dataElements/javascriptVariable.js",settings:{path:"_satellite.tcfwatcher._currentConsent"}},"Page | Timing: Engagement: Active (sec) [co]":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){return Math.round(window.stats.status.timeEngaged/1e3)}}},"Event Value | event136: Media Milestones 95 [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n=_satellite.getVar("Event | Action [gl]",a),r="audio"===n||"video"===n,o=0===_satellite.getVar("Event | Name [gl]",a).indexOf("ivw")||"audio"===n&&"podlove"==_satellite.getVar("Event | Source [gl]",a)&&a.detail.state.audio;if(r&&"milestone 95%"===_satellite.getVar("Event | Name [gl]",a)&&!o)return 1}}},"Page | Timing: Engagement: Visibility [co]":{defaultValue:"",modulePath:"core/src/lib/dataElements/javascriptVariable.js",settings:{path:"window.stats.status.timeTabbedIn"}},"Event Value | event260: Article Attention Level (AAL) [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){if("direct_call"===_satellite.getVar("Event | Action [gl]",a)&&"article attention level"===_satellite.getVar("Event | Name [gl]",a))return 1}}},"XDM | Analytics: eVar136 - Paywall Contacts [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n="virtual_page"===_satellite.getVar("Event | Action [gl]",a),r="page_data_ready"===_satellite.getVar("Event | Action [gl]",a),o="article"===_satellite.getVar("Page | Route [gl]",a),i=!0===_satellite.getVar("Paywall | is Active [co]",a),s=_satellite.getVar("Paywall | Type [co]",a),l=!("string"!=typeof s||!/paid|conditional/.test(s));if((n||r)&&o&&i&&l)return"+1"}}},"XDM | Analytics: eVar8 - Page Hostname [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n=_satellite.getVar("Event | Action [gl]",a);return"page_data_ready"===n||"virtual_page"===n?(returnVal=_satellite.getVar("Page | URL: Hostname [gl]",a),window._satellite.pageDataToPersist.eVar8=returnVal,returnVal):window._satellite.pageDataToPersist.eVar8?window._satellite.pageDataToPersist.eVar8:void 0}}},"Paywall | is Active (String) [co]":{defaultValue:"",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"paywall.attributes.is_active",callback:function(e){return!0===e?"has_paywall":"no_paywall"},doCustomCode:!0,convertToString:!1}},"Event | URL: Hostname [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n=_satellite.getVar("Event | Target URL [gl]",a);return n?new URL(n).hostname:void 0}}},"Page | Query: Newsletter ID (nlid) [gl]":{defaultValue:"",modulePath:"core/src/lib/dataElements/queryStringParameter.js",settings:{name:"nlid",caseInsensitive:!0}},"Page | Timing: Performance: Dom Complete [co]":{defaultValue:"",modulePath:"accessible-page-speed-metrics/src/lib/dataElements/totalDomCompleteTime.js",settings:{}},"XDM | Analytics: eVar47 - Article Attention Level (AAL) Trigger [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){let n;if("direct_call"===_satellite.getVar("Event | Action [gl]",a)&&"article attention level"===_satellite.getVar("Event | Name [gl]",a))return n=_satellite.getVar("Page | Article Attention Level (AAL) Trigger",a),"string"==typeof n?n:void 0}}},"Page | Previous Data: Article ID [co]":{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{return JSON.parse(_satellite.getVar("Page | Previous Data JSON [co]")).page.article_id}catch(e){return}}}},"Event Value | event800: General Consent Accepts [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){let n=_satellite.getVar("Event | Action [gl]",a),r=_satellite.getVar("Consent | CMP: Type [co]",a),o=_satellite.getVar("Consent | CMP: Action [co]",a);if("consent_completed"===n&&"general"===r&&"granted"==o)return 1}}},"Paywall | Position [co]":{defaultValue:"",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"paywall.info.position",callback:function(){},doCustomCode:!1,convertToString:!1}},"XDM | Analytics: prop3 - R1D3 HP position [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n=_satellite.getVar("Event | Action [gl]",a);if("virtual_page"===n||"page_data_ready"===n)return _satellite.getVar("Post Click | Click: Position [gl]",a)}}},"Event Value | event807: Any Consent Accepts [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){let n=_satellite.getVar("Event | Action [gl]",a),r=_satellite.getVar("Consent | CMP: Type [co]",a),o=_satellite.getVar("Consent | CMP: Action [co]",a);if(n.includes("consent_completed")&&r&&"granted"==o)return 1}}},"XDM | Analytics: prop55 - Consent Updated At [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){return["consent_completed"].indexOf(_satellite.getVar("Event | Action [gl]",a))>-1?(returnVal=_satellite.getVar("Hit | Timestamp ISO [gl]",a),window._satellite.pageDataToPersist.prop55=returnVal,returnVal):window._satellite.pageDataToPersist.prop55?window._satellite.pageDataToPersist.prop55:void 0}}},"XDM | Analytics: eVar51 - Article Access Type [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n="virtual_page"===_satellite.getVar("Event | Action [gl]",a),r="page_data_ready"===_satellite.getVar("Event | Action [gl]",a),o="article"===_satellite.getVar("Page | Route [gl]",a);return(n||r)&&o?(returnVal=_satellite.getVar("Paywall | Type [co]",a),window._satellite.pageDataToPersist.eVar51=returnVal,returnVal):window._satellite.pageDataToPersist.eVar51?window._satellite.pageDataToPersist.eVar51:void 0}}},"Event Value | event107: End of Article Page Scrolls [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){if("scroll"===_satellite.getVar("Event | Action [gl]",a)&&window._satellite.persistVals&&window._satellite.persistVals.event107)return window._satellite.persistVals.event107}}},"Event Value | event111: Paid Article View without Paywall [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n="virtual_page"===_satellite.getVar("Event | Action [gl]",a),r="page_data_ready"===_satellite.getVar("Event | Action [gl]",a),o="article"===_satellite.getVar("Page | Route [gl]",a),i=!0===_satellite.getVar("Paywall | is Active [co]",a),s=_satellite.getVar("Paywall | Type [co]",a),l=!("string"!=typeof s||!/paid|conditional/.test(s));if((n||r)&&o&&!i&&l)return 1}}},"Storage | Click ID: Meta Own (_fbc) [sm]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(){return{name:"_fbc",expiry:"30 days",purposes:["pWx-Me"]}}}},"XDM | Analytics: eVar145 - Internal Campaign ID (sara_icid) [gl][consent:PuV-KM]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){const n=/^page_data_ready|virtual_page|consent_completed|component_click$/.test(_satellite.getVar("Event | Action [gl]",a)),r=_satellite.getVar("Storage | Campaign: Internal [gl]"),o=_satellite.getVar("Util | Function: Get Purpose Consent Mapping [gl-lo]")(r.purposes),i=_satellite.getVar("Page | URL: Query Parameter: sara_icid [gl]",a),s=_satellite.getVar("Event | sara_icid [gl]",a),l="string"==typeof i&&""!==i?i:"string"==typeof s&&""!==s?s:"";if(Object.keys(o).filter((e=>o[e].length>0)).length>0&&n){let e=l;return e=e?window._satellite.getValOnce(e,r.name):e,e}if(n&&l)return"(not yet approved)"}}},"Page | Previous Page Timing: Performance: Response Complete [co]":{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){return JSON.parse(_satellite.getVar("Page | Previous Data JSON [co]")).performance.response_complete}}},"XDM | Analytics: eVar201 - TEMP User Adbrain Status [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n=_satellite.getVar("Event | Action [gl]",a);if("virtual_page"===n||"page_data_ready"===n)return _satellite.getVar("User | TEMP Adbrain Enabled String [co]",a)}}},"XDM | Analytics: prop61 - User has Visitor API [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n=_satellite.getVar("Event | Action [gl]",a);return"page_data_ready"===n||"virtual_page"===n?(returnVal="webDSK_visitorAPI",window._satellite.pageDataToPersist.prop61=returnVal,returnVal):window._satellite.pageDataToPersist.prop61?window._satellite.pageDataToPersist.prop61:void 0}}},"XDM | Analytics: eVar23 - Click Element Headline [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n=_satellite.getVar("Event | Action [gl]",a),r="virtual_page"===n,o="page_data_ready"===n,i=_satellite.getVar("Post Click | Click Attributes JSON [gl]",a),s=_satellite.getVar("Post Click | Click: Referrer [gl]",a)===_satellite.getVar("Page | Canonical URL [gl]",a);return(r||o)&&i&&!s?_satellite.getVar("Post Click | Click: Headline [gl]",a):["button_click","component_click","link_click_external"].includes(n)?_satellite.getVar("Event | Headline [co]",a):void 0}}},"XDM | Analytics: eVar44 - Total Time on Page [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){if("timer"===_satellite.getVar("Event | Action [gl]",a))return 900}}},"XDM | Analytics: prop11 - UUID [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n="[n/a]";if(/^(?:page_data_ready|virtual_page)$/.test(_satellite.getVar("Event | Action [gl]",a))){let e=function(e){return"string"==typeof e&&""!==e?e:n};const t=_satellite.getVar("Page | Route [gl]",a),r=_satellite.getVar("Page | ID [co]",a),o=_satellite.getVar("Editorial | Date: Modified [co]",a);return e(r)!==n?e(t)+"/"+r+"/"+e(o):"[n/a]"}}}},"Storage | Usage: Session [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(){return{name:"sara_user_session",expiry:"session",purposes:["PuV-Na"]}}}},"Config | Target Property [lo]":{defaultValue:"",modulePath:"mapping-table/src/lib/dataElements/mappingTable.js",settings:{0:{input:"production:has_noAdsAccess",method:"starts with",output:"e09c5ccc-851f-d70a-d899-dea6d26f8585"},1:{input:"staging:has_noAdsAccess",method:"starts with",output:"5a809753-e154-6961-d04d-cb846c03fdc3"},2:{input:"development:has_noAdsAccess",method:"starts with",output:"5a809753-e154-6961-d04d-cb846c03fdc3"},3:{input:"production:no_noAdsAccess:article:free",method:"starts with",output:"0a35d2b1-94aa-7d3b-119d-63e32554317b"},4:{input:"staging:no_noAdsAccess:article:free",method:"starts with",output:"ca9b4386-3c6c-5122-82eb-620cb52d7098"},5:{input:"development:no_noAdsAccess:article:free",method:"starts with",output:"ca9b4386-3c6c-5122-82eb-620cb52d7098"},6:{input:"production:no_noAdsAccess:homepage",method:"starts with",output:"38ba2140-e3c3-a0ae-0e8a-9a858c8495c8"},7:{input:"staging:no_noAdsAccess:homepage",method:"starts with",output:"2e3b7e82-ced5-3027-8650-b3ea6cdd0b50"},8:{input:"development:no_noAdsAccess:homepage",method:"starts with",output:"2e3b7e82-ced5-3027-8650-b3ea6cdd0b50"},9:{input:"\\bproduction:no_noAdsAccess:article:paid\\b|\\bproduction:no_noAdsAccess:article:conditional\\b",method:"regex matching",output:"eaa7fc85-37fa-bc5d-2e66-06d09076a43c"},10:{input:"\\bstaging:no_noAdsAccess:article:paid\\b|\\bstaging:no_noAdsAccess:article:conditional\\b",method:"regex matching",output:"036d6366-e7a3-e835-32e9-cc72af90b94a"},11:{input:"\\bdevelopment:no_noAdsAccess:article:paid\\b|\\bdevelopment:article:no_noAdsAccess:conditional\\b",method:"regex matching",output:"036d6366-e7a3-e835-32e9-cc72af90b94a"},12:{input:"production:no_noAdsAccess:",method:"starts with",output:"0a35d2b1-94aa-7d3b-119d-63e32554317b"},13:{input:"staging:no_noAdsAccess:",method:"starts with",output:"ca9b4386-3c6c-5122-82eb-620cb52d7098"},14:{input:"development:no_noAdsAccess:",method:"starts with",output:"ca9b4386-3c6c-5122-82eb-620cb52d7098"},size:15,dataElement:"%QS | Launch: Environment [gl]%:%User | No Ads Access String [sm]%:%Page | Route [gl]%:%Paywall | Type [co]%",defaultValueEmpty:!1}},"Page | Previous Page Timing: Performance: Server Response [co]":{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){return JSON.parse(_satellite.getVar("Page | Previous Data JSON [co]")).performance.server_response}}},"Device | Tablet String [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e){let t;return t=e.user.device?e.user.device.is_tablet:e.page.attributes.is_tablet,!0===t&&"tablet"}}},"Event | sara_icid [gl]":{defaultValue:"",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"event.attributes.sara_icid",callback:function(){},doCustomCode:!1,convertToString:!1}},"XDM | Analytics: eVar11 - Page Referring Domain [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){if(/^(?:page_data_ready|virtual_page|direct_call)$/.test(_satellite.getVar("Event | Action [gl]",a)))return _satellite.getVar("Page | Referrer: Domain [gl]",a)}}},"XDM | Analytics: eVar69 - Editorial has noContentAds [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n="virtual_page"===_satellite.getVar("Event | Action [gl]",a),r="page_data_ready"===_satellite.getVar("Event | Action [gl]",a),o="article"===_satellite.getVar("Page | Route [gl]",a);return(n||r)&&o?(returnVal=_satellite.getVar("Editorial | has noContentAds (String)  [co]",a),window._satellite.pageDataToPersist.eVar69=returnVal,returnVal):window._satellite.pageDataToPersist.eVar69?window._satellite.pageDataToPersist.eVar69:void 0}}},"XDM | Analytics: eVar40 - Visibility State [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n=_satellite.getVar("Event | Action [gl]",a);return"page_data_ready"===n||"virtual_page"===n?(returnVal=_satellite.getVar("Page | Visibility State [gl]",a),window._satellite.pageDataToPersist.eVar40=returnVal,returnVal):window._satellite.pageDataToPersist.eVar40?window._satellite.pageDataToPersist.eVar40:void 0}}},"Device | is Phone [gl]":{storageDuration:"pageview",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"user.device.is_phone",callback:function(){},doCustomCode:!1,convertToString:!1}},"User | Cookie: Usage [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(){let e=_satellite.getVar("Storage | Usage: Usage [co]").name;return(_satellite.preCookie?_satellite.preCookie[e]:"")||_satellite.cookie.get(e)}}},"Editorial | has Video (String) [co]":{defaultValue:"",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"editorial.attributes.has_video",callback:function(e){return!0===e?"has_video":"no_video"},doCustomCode:!0,convertToString:!1}},"XDM | Analytics: list2 [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n=_satellite.getVar("Event | Action [gl]",a),r=["page_data_ready","virtual_page"];if(["button_click","component_click","component_view","consent_completed","layer_open"].indexOf(n)>-1){var o=[],i=_satellite.getVar("Component | Component (Array) [gl]",a);if(i&&i.length>0){for(var s=0;s<i.length;s++)o.push({value:i[s]});return o}}if(r.indexOf(n)>-1){let e=_satellite.getVar("Post Click | Click Attributes JSON [gl]",a)&&JSON.parse(_satellite.getVar("Post Click | Click Attributes JSON [gl]",a));return e&&e.item_source?[{value:"artId="+_satellite.getVar("Editorial | Article ID [co]",a)+";artPos="+e.pos.split(":")[1]+";artTi="+e.headline}]:""}}}},"Identity | ECID after consent [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n=_satellite.getVar("User | Current Consent Status [gl-co]",a);return n===_satellite.getVar("Consent | CONSTANT: allToolsWithoutPrI [co]",a)||n===_satellite.getVar("Consent | CONSTANT: allTools [gl]",a)?_satellite.getVar("User | ECID [gl]",a):""}}},"XDM | Analytics: eVar18 - Plain Page URL [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n=_satellite.getVar("Event | Action [gl]",a);return"page_data_ready"===n||"virtual_page"===n?(returnVal=_satellite.getVar("Page | URL: Host + Path  [gl]",a),window._satellite.pageDataToPersist.eVar18=returnVal,returnVal):window._satellite.pageDataToPersist.eVar18?window._satellite.pageDataToPersist.eVar18:void 0}}},"Event | Click ID [gl]":{defaultValue:"",storageDuration:"pageview",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"event.attributes.click_id",callback:function(){},doCustomCode:!1,convertToString:!1}},"User | SSO Tracking ID [gl[sso]-sm]":{defaultValue:"",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"user.info.sso_tracking_id",callback:function(){},doCustomCode:!1,convertToString:!1}},"Event Value | event916: End of Article [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){if("scroll"===_satellite.getVar("Event | Action [gl]",a)&&"editorial - complete"===_satellite.getVar("Event | Name [gl]",a)&&"article"===_satellite.getVar("Page | Route [gl]",a))return 1}}},"User | Cookie: Day [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(){let e=_satellite.getVar("Storage | Usage: Day [co]").name;return _satellite.cookie.get(e)||(_satellite.preCookie?_satellite.preCookie[e]:"")}}},"Event Value | event809: Any Consent Layer Shown [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){let n=_satellite.getVar("Event | Action [gl]",a),r=_satellite.getVar("Consent | CMP: Type [co]",a),o=_satellite.getVar("Consent | CMP: Action [co]",a);if("layer_open"===n&&r&&"waiting"==o)return 1}}},"User | Current Consent: has Consent (String) [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(){return _satellite.getVar("User | Current Consents [gl]").has_consent.join("~")}}},"XDM | Analytics: eVar133 - Form Status [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){if("submit"===_satellite.getVar("Event | Action [gl]",a))return _satellite.getVar("Form | Status [gl]",a)+"::"+_satellite.getVar("Form | Status Code [gl]",a)+"::"+_satellite.getVar("Form | Status Message [gl]",a)}}},"Page | Article Elements Variety (AEV)":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"event.attributes.article_elements_variety",callback:function(e){return"number"==typeof e?String(e):void 0},doCustomCode:!0,convertToString:!1}},"Editorial | Style [co]":{defaultValue:"",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"editorial.category.style",callback:function(e){return"default"===e?"article":e},doCustomCode:!0,convertToString:!1}},"XDM | Analytics: prop70 - QS Data Layer Event Source [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){return _satellite.getVar("Event | Source [gl]",a)}}},"User | Access Feature Sppur (Boolean) [sm]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"user.segment.access.Sppur",callback:function(e){return"boolean"==typeof e&&e},doCustomCode:!0,convertToString:!1}},"XDM | Analytics: prop62 - has SSO Tracking ID [gl[sso]]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){return["page_data_ready","virtual_page","checkout"].indexOf(_satellite.getVar("Event | Action [gl]",a))>-1?(returnVal=_satellite.getVar("User | has SSO Tracking ID [gl[sso]-sm]",a),window._satellite.pageDataToPersist.prop62=returnVal,returnVal):window._satellite.pageDataToPersist.prop62?window._satellite.pageDataToPersist.prop62:void 0}}},"XDM | Analytics: eVar154 - Newsletter ID (nlid) [cc]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){let n=_satellite.getVar("Storage | Click ID: Newsletter [gl]"),r=_satellite.getVar("Util | Function: Get Purpose Consent Mapping [gl-lo]")(n.purposes);switch(_satellite.getVar("Event | Action [gl]",a)){case"page_data_ready":case"virtual_page":case"consent_completed":if(Object.keys(r).filter((e=>r[e].length>0)).length>0){let e=_satellite.getVar("Page | Query: Newsletter ID (nlid) [gl]",a);return"string"==typeof e&&e.length>0?e:void 0}break;case"submit":case"button_click":if(/^newsletter - subscribe$/.test(_satellite.getVar("Event | Name [gl]",a)))return _satellite.getVar("Event | Item: Newsletter ID [co]",a)}}}},"User | Conditional Access String [sm]":{defaultValue:"",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"user.segment.has_conditional_access",callback:function(e){
return!0===e?"has_conditionalAccess":"no_conditionalAccess"},doCustomCode:!0,convertToString:!1}},"Storage | Page: Previous Page Data [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(){return{name:"sara_prev_data",expiry:"1 day",purposes:["PuV-Na"]}}}},"Form | Type [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"form.category.type",callback:function(){},doCustomCode:!1,convertToString:!1}},"Event | Stream Type [co]":{defaultValue:"",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"event.attributes.streamType",callback:function(e){return!0===e?"has_autostart":"no_autostart"},doCustomCode:!1,convertToString:!1}},"Consent | CONSTANT: allTools [gl]":{modulePath:"core/src/lib/dataElements/constant.js",settings:{value:"allTools"}},"Hit | Timestamp HH:MM [gl]":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){var e=(new Date).getHours(),t=(new Date).getMinutes();return(e=e<10?"0"+e:e)+":"+(t=t<10?"0"+t:t)}}},"User | New or Returning [gl]":{defaultValue:"",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){return _satellite.getVar("User | is New [gl]",a)?"new_visitor":"return_visitor"}}},"Event Value | event381: Paywall Impressions [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n="component_view"===_satellite.getVar("Event | Action [gl]",a),r="article-paywall"===_satellite.getVar("Component | Name [gl]",a);if(n&&r)return 1}}},"XDM | Analytics: eVar146 - Funnel Campaign ID [co][consent:PuV-KM]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){let n=["page_data_ready","virtual_page","consent_completed"].indexOf(_satellite.getVar("Event | Action [gl]",a))>-1,r=_satellite.getVar("Storage | Campaign: Any [gl]"),o=_satellite.getVar("Util | Function: Get Purpose Consent Mapping [gl-lo]")(r.purposes),i=_satellite.getVar("Campaign | ID: Funnel (sara_dcid, sara_ecid, sara_icid) [gl]",a);if(Object.keys(o).filter((e=>o[e].length>0)).length>0&&n){let e=i;return e=e?window._satellite.getValOnce(e,r.name):e,e}if(n&&i)return"(not yet approved)"}}},"XDM | Analytics: prop68 - QS Visibility State [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(){return"string"==typeof document.visibilityState?document.visibilityState:"[n/a]"}}},"XDM | Analytics: channel [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n="homepage"===_satellite.getVar("Page | Route [gl]",a);if(/^(?:page_data_ready|virtual_page|direct_call)$/.test(_satellite.getVar("Event | Action [gl]",a)))return n?"Homepage":1===_satellite.getVar("Event Value | Purchase (in App) [co]",a)?_satellite.getVar("Editorial | Channel [co]",a):_satellite.getVar("Page | Channel Slug [co]",a)}}},"Page | Referrer: Category [gl]":{defaultValue:"from_nocat_nodef",modulePath:"mapping-table/src/lib/dataElements/mappingTable.js",settings:{0:{input:"https:\\/\\/(\\w*\\.){0,2}www\\.spiegel\\.de\\/?$",method:"regex",output:"from_int_homepage"},1:{input:".+\\.spiegel\\.de\\/consent.+",method:"regex",output:"from_int_consent"},2:{input:".*news\\.google.*|.*news\\.url\\.google.*",method:"regex",output:"from_ext_googlenews"},3:{input:"\\.google\\.",method:"regex",output:"from_ext_google"},4:{input:"\\.facebook\\.",method:"regex",output:"from_ext_facebook"},5:{input:".+(harvardbusinessmanager\\.de|manager-magazin\\.de|bento\\.de).*",method:"regex",output:"from_ext_spiegelgruppe"},6:{input:"spiegel.de/",method:"contains",output:"from_int_other"},7:{input:"\\0",method:"exact match",output:"from_ext_unknown"},8:{input:".",method:"contains",output:"from_ext_other"},size:9,dataElement:"%Page | Referrer: URL without Query [gl]%",defaultValueEmpty:!0}},"Device | Type [gl]":{defaultValue:"not_detected",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){return _satellite.getVar("Device | Mobile String [gl]")||_satellite.getVar("Device | Phone String [gl]")||_satellite.getVar("Device | Tablet String [gl]")}}},"XDM | Analytics: eVar82 - Editorial has Affiliate [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n="virtual_page"===_satellite.getVar("Event | Action [gl]",a),r="page_data_ready"===_satellite.getVar("Event | Action [gl]",a),o="article"===_satellite.getVar("Page | Route [gl]",a);return(n||r)&&o?(returnVal=_satellite.getVar("Editorial | has Affiliate (String) [co]",a),window._satellite.pageDataToPersist.eVar82=returnVal,returnVal):window._satellite.pageDataToPersist.eVar82?window._satellite.pageDataToPersist.eVar82:void 0}}},"User | is New [gl]":{defaultValue:"",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){return 1==_satellite.getVar("User | Cookie: Usage [co]",a).split(";")[0]}}},"Event | Merge ID [gl]":{storageDuration:"pageview",modulePath:"adobe-alloy/dist/lib/dataElements/eventMergeId/index.js",settings:{cacheId:"0e269e5d-6501-4ad6-8cd4-d1e8fe26de26"}},"Element | Tracking String [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"event.attributes",callback:function(e){if(e)return"cta="+e.cta+";en="+e.element_name+";et="+e.element_text},doCustomCode:!0,convertToString:!1}},"Campaign | ID: Internal (sara_icid) [gl]":{defaultValue:"",modulePath:"core/src/lib/dataElements/queryStringParameter.js",settings:{name:"sara_icid",caseInsensitive:!0}},"Form | Field Opt-In (String) [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"form.fields.opt_in",callback:function(e){return!0===e?"has_optIn":"no_optIn"},doCustomCode:!0,convertToString:!1}},"Storage | Click: Attributes [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(){return{name:"sara_clk_att",expiry:"session",purposes:["PuV-Na"]}}}},"Event Value | event20: Overlay Views [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){if("layer_open"===_satellite.getVar("Event | Action [gl]",a)&&"overlay"===_satellite.getVar("Component | Type [gl]",a))return 1}}},"Page | Timing: Performance: Response Complete [co]":{defaultValue:"",modulePath:"accessible-page-speed-metrics/src/lib/dataElements/responseCompleteTime.js",settings:{}},"Target | Decision Scopes [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){let n=[],r=_satellite.getVar("Page | Route [gl]",a),o=_satellite.getVar("User | is Logged In [gl[sso]-sm]",a);return"homepage"==r&&n.push("homepage:channelbox"),"article"==r&&o&&n.push("fuermich-banner:keep-reading"),"fuermich"==r&&o&&(n.push("fuermich:reco-personal"),n.push("fuermich:history")),"fuermich"!=r||o||n.push("fuermich:logged_out"),n}}},"Post Click | Click: Position [gl]":{defaultValue:"",storageDuration:"pageview",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(){try{return JSON.parse(_satellite.getVar("Post Click | Click Attributes JSON [gl]")).pos}catch(e){return}}}},"XDM | Analytics: prop43 - Timing Stats Minutes [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){if("tcdata_change"===_satellite.getVar("Event | Action [gl]",a)&&"granted"===_satellite.getVar("Consent | CMP: Action [co]",a)&&"useractioncomplete"===_satellite.getVar("Consent | CMP: Event Status [co]",a))return _satellite.getVar("Page | Timing: Engagement: Active (sec) [co]",a)}}},"XDM | Analytics: eVar25 - Click Type [gl]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){if("link_click_external"===_satellite.getVar("Event | Action [gl]",a))return _satellite.getVar("Event | Click Type [gl]",a)}}},"Page | Referrer [gl]":{defaultValue:"",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"page.info.referrer",callback:function(e){return e||document.referrer||_satellite.getVar("Post Click | Click: Referrer [gl]")},doCustomCode:!0,convertToString:!1}},"Page | URL: Path [gl]":{defaultValue:"",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/pageInfo.js",settings:{attribute:"pathname"}},"Event Value | event804: Special Consent Accepts [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){let n=_satellite.getVar("Event | Action [gl]",a),r=_satellite.getVar("Consent | CMP: Type [co]",a),o=_satellite.getVar("Consent | CMP: Action [co]",a);if("special_consent_completed"===n&&"special"===r&&"granted"==o)return 1}}},"XDM | Analytics: eVar94 - Referral Article Channel [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n=_satellite.getVar("Page | Previous Data JSON [co]",a),r="page_data_ready"==_satellite.getVar("Event | Action [gl]",a);return n&&r?(returnVal=_satellite.getVar("Page | Previous Data: Article Channel [co]",a),window._satellite.pageDataToPersist.eVar94=returnVal,returnVal):window._satellite.pageDataToPersist.eVar94?window._satellite.pageDataToPersist.eVar94:void 0}}},"Event Value | event190: End of HP Scrolls [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){if("scroll"===_satellite.getVar("Event | Action [gl]",a)&&window._satellite.persistVals&&window._satellite.persistVals.event190)return window._satellite.persistVals.event190}}},"Editorial | has Article Audio (String) [co]":{defaultValue:"",modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js",settings:{value:"editorial.attributes.has_article_audio",callback:function(e){return!0===e?"has_article_audio":"no_article_audio"},doCustomCode:!0,convertToString:!1}},"Consent Setting | Purpose - pVa granted [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(){let e=["pVa-Au","pVa-Me","pVa-Pr"],t=_satellite.getVar("Util | Function: Get Purpose Consent Mapping [gl-lo]")(e),a=!0;return e.forEach((function(e){t[e]&&t[e].length<1&&(a=!1)})),a}}},"QS | Launch: Property + Version + Version Date [gl]":{defaultValue:"",modulePath:"data-element-assistant/src/lib/dataElements/concatenate.js",settings:{returnEmpty:!1,trailingDelimiter:"",dataElementsAndDelimiters:[{path:"",delimiter:"",inputType:"dataelement",dataElement:"%QS | Launch: Property [gl]%",omitWhenEmpty:!1},{path:"",delimiter:"|",inputType:"dataelement",dataElement:"%QS | Launch: Version [gl]%",omitWhenEmpty:!1},{path:"",delimiter:"|",inputType:"dataelement",dataElement:"%QS | Launch: Version Date [gl]%",omitWhenEmpty:!1}]}},"Event Value | event384: Paywall Login Clicks [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n="button_click"===_satellite.getVar("Event | Action [gl]",a),r="paywall"===_satellite.getVar("Component | Name [gl]",a);if(n&&r&&"secondary"===_satellite.getVar("Event | Attributes [gl]",a).cta)return 1}}},"Page | ID [gl-co]":{defaultValue:"index",storageDuration:"pageview",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{return _satellite.getVar("Editorial | Article ID [co]")||_satellite.getVar("Page | URL: Path [gl]").match(/(\/.+)/g).toString()}catch(e){return}}}},"XDM | Analytics: eVar70 - Editorial is breaking [co]":{modulePath:"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js",settings:{callback:function(e,t,a){var n="virtual_page"===_satellite.getVar("Event | Action [gl]",a),r="page_data_ready"===_satellite.getVar("Event | Action [gl]",a),o="article"===_satellite.getVar("Page | Route [gl]",a);return(n||r)&&o?(returnVal=_satellite.getVar("Editorial | is Breaking News (String) [co]",a),window._satellite.pageDataToPersist.eVar70=returnVal,returnVal):window._satellite.pageDataToPersist.eVar70?window._satellite.pageDataToPersist.eVar70:void 0}}}},extensions:{"bing-ads-extension":{displayName:"Bing Ads UET Tag",hostedLibFilesBaseUrl:"https://assets.adobedtm.com/extensions/EP05eac6e292f1486a812623da300a51b4/",settings:{qname:"uetq",tagid:"5279339",navTimingApi:!0,storeConvTrackCookies:!0},modules:{"bing-ads-extension/src/lib/actions/baseTag.js":{name:"basetag",displayName:"Base Tag",script:function(e,t,a,n){"use strict";e.exports=function(){a("../helpers/getBatJsBase")().then((function(){n.logger.log("Base code loaded and a page load event is sent.")}))}}},"bing-ads-extension/src/lib/helpers/getBatJsBase.js":{script:function(e,t,a,n){"use strict";e.exports=function(){var e=a("@adobe/reactor-window"),t=a("@adobe/reactor-load-script"),r=n.getExtensionSettings(),o=r.qname||"uetq";return e[o]=e[o]||[],t("//bat.bing.com/bat.js").then((function(){var t={ti:r.tagid,navTimingApi:r.navTimingApi,storeConvTrackCookies:r.storeConvTrackCookies,tm:"al001"};t.q=e[o],e[o]=new UET(t),e[o].push("pageLoad"),n.logger.log("BingAds Base Code successfully loaded.")})).catch((function(){n.logger.error("BingAds Base Code could not be loaded.")}))}}}}},"fm-spon-data-layer-constructor":{displayName:"Data Layer Constructor",hostedLibFilesBaseUrl:"https://assets.adobedtm.com/extensions/EPc4cc122ff2a14e9f9d53dcca20c9b312/",settings:{doPreMerge:!1,defaultMode:"merge",codePreMerge:function(){},dataLayerRoot:"SARAs_data",eventRootPath:"event",delayOnlyFirst:"",doPreEventMerge:!1,eventActionPath:"event.info.action",clearEventObject:!0,constructorDebug:"1",doPostEventMerge:!1,maxDataLayerSize:"",codePreEventMerge:function(){},codePostEventMerge:function(){},delayBetweenEvents:"",doOnActivateEvents:!1,codeOnActivateEvents:function(){}},modules:{"fm-spon-data-layer-constructor/src/lib/dataElements/contextCustomCode.js":{name:"context-custom-code",displayName:"Custom Code",script:function(e,t,a,n){"use strict";e.exports=function(e,t){a("../constructor/init")(n,"dataelement>contextCustomCode");try{var r=!(!t||"fm-spon-data-layer-constructor.data-layer-push"!==t.$type),o=r?t.detail.state:window[n.getExtensionSettings().dataLayerRoot].getState(),i=n.getExtensionSettings(),s=(isNaN(parseInt(i.constructorDebug))?0:parseInt(i.constructorDebug))>=2,l=e.callback(o,r,t);return s&&n.logger.debug("Resolving",{value:l,resolver:e.callback,isContext:r,state:o}),l}catch(t){return n.logger.error("Error Resolving Data Definition",e,"\n",t),null}}}},"fm-spon-data-layer-constructor/src/lib/dataElements/glyphDataElement.js":{name:"glyph-data-element",displayName:"Dropdown",script:function(e,t,a,n){"use strict";function r(e){return null!=e&&"function"==typeof e.toString?e.toString():e}function o(e,t){for(var a=0,n=t.length;a<n;a++){if(!e.hasOwnProperty(t[a]))return null;e=e[t[a]]}return e}e.exports=function(e,t){a("../constructor/init")(n,"dataelement>glyphDataElement");try{var i=!(!t||"fm-spon-data-layer-constructor.data-layer-push"!==t.$type),s=i?t.detail.state:window[n.getExtensionSettings().dataLayerRoot].getState(),l=e.value.split("."),c=n.getExtensionSettings(),d=(isNaN(parseInt(c.constructorDebug))?0:parseInt(c.constructorDebug))>=2,u=s&&o(s,l);return u=e.convertToString?r(u):u,u=e.doCustomCode&&"function"==typeof e.callback?e.callback(u,t):u,d&&n.logger.debug("Resolving",{value:u,path:e.value,isContext:i,convertToString:e.convertToString,modify:e.doCustomCode&&e.callback,state:s}),u}catch(t){return n.logger.error("Error Resolving Data Definition",e,"\n",t),null}}}},"fm-spon-data-layer-constructor/src/lib/actions/synchronousCode.js":{name:"synchronous-code",displayName:"Synchronous Code",script:function(e,t,a,n){"use strict";e.exports=function(e,t){try{e.callback(t)}catch(a){n.logger.error("Error running synchronous code event",e,t,"\n",a)}}}},"fm-spon-data-layer-constructor/src/lib/actions/activate.js":{name:"activate",displayName:"Activate",script:function(e,t,a,n){"use strict";e.exports=function(e){a("../constructor/init")(n,"actions>activate");var t=e.firePreviousEvents;t="true"===t||!0===t;var r=window[n.getExtensionSettings().dataLayerRoot];setTimeout((function(){r.activateEvents(t)}),0)}}},"fm-spon-data-layer-constructor/src/lib/events/dataLayerPush.js":{name:"data-layer-push",displayName:"Data Layer Push",script:function(e,t,a,n){"use strict";function r(e,t){"string"==typeof e&&""!==e&&(i[e]=i[e]||[],i[e].push(t))}function o(e){i.hasOwnProperty(e.detail.eventName)&&i[e.detail.eventName].forEach((function(t){t({detail:e.detail})}))}var i={};window.removeEventListener("DataLayerConstructorEvent",o),window.addEventListener("DataLayerConstructorEvent",o),e.exports=function(e,t){a("../constructor/init")(n,"event>push"),r(e.eventName,t)}}},"fm-spon-data-layer-constructor/src/lib/main.js":{script:function(e,t,a,n){a("./constructor/init")(n,"main")}},"fm-spon-data-layer-constructor/src/lib/constructor/init.js":{script:function(e,t,a){"use strict";function n(e){!0!==r&&(r=!0,a("./polyfills")(),a("./constructor")(a("./defaultConfig")(e)))}var r=!1;e.exports=n}},"fm-spon-data-layer-constructor/src/lib/constructor/polyfills.js":{script:function(e){"use strict";e.exports=function(){return function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:null};var a=document.createEvent("CustomEvent");return a.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),a}if("function"==typeof window.CustomEvent)return!1;window.CustomEvent=e}(),!0}}},"fm-spon-data-layer-constructor/src/lib/constructor/constructor.js":{script:function(e,t){!function(a,n){"object"==typeof t&&void 0!==e?e.exports=n():"function"==typeof define&&define.amd?define(n):(a="undefined"!=typeof globalThis?globalThis:a||self).DataLayerConstructor=n()}(this,(function(){"use strict";var e=function(e){function t(e){var t={};return E(t,e),t}function a(e){for(var t in e)delete e[t]}function n(e,t){var a=_.getType(e);if("string"===a)e=e.split(".");else if("array"!==a)return void v("unsupported path type",e,a);for(var n=t,r=0,o=e.length;r<o;r++){if(void 0===n[e[r]])return;n=n[e[r]]}return n}function r(e,t){for(var a=e.split("."),n={},r=n,o=0,i=a.length-1;o<i;o++)r=r[a[o]]={};return r[a[a.length-1]]=t,n}function o(e,t){if("array"===_.getType(e))for(;e.length>0;)try{var n=e.shift(),r=_.getType(n);"array"===r?V.metaCommand(n,t):"function"===r?V.methodCommand(n,t):"object"===r?V.mergeCommand(n,t):"reset"===n?a(t):v("invalid command type pushed:",n)}catch(e){v("processQueue error",e)}else v("queue must be an array",e)}var i="1.9.1",s={debug:!1,defaultMode:"merge",clearEventBeforeMerge:!0,eventActionPath:"event.action",eventRootPath:"event",dataLayerKey:"digitalData",eventsActivated:!1,delayBetweenEvents:-1,delayOnlyFirst:!1,loggingFunction:void 0,eventTriggerCallBack:void 0,eventPreMergeCallBack:void 0,eventPostMergeCallBack:void 0,pushCallBack:void 0,modifyInactiveEventsCallBack:void 0,maxDataLayerSize:50};for(var l in e)s[l]=e[l];var c=!0,d=[],u=null,g={},m=[],p=!0,f=["merge","replace","append","arrayReplace"],v=function(){};s.debug&&(v=s.loggingFunction?s.loggingFunction:Function.prototype.bind.apply(console.debug,[console,"[Constructor]"])),"number"!=typeof s.delayBetweenEvents&&(s.delayBetweenEvents=-1),d.push=function(){var e=Array.prototype.push.apply(d,arguments);return d.length>s.maxDataLayerSize&&d.splice(0,this.length-s.maxDataLayerSize),e},-1===f.indexOf(s.defaultMode)&&(v("unknown default mode:",[s.defaultMode],"setting fallback mode:",["merge"]),s.defaultMode="merge");var y,h,b=s.defaultMode,_=(y=/\[object (Object|Boolean|Number|String|Function|Array|Date|RegExp)\]/,h=/\[object (Object|Boolean|Number|String|Function|Array|Date)\]/,{getType:function(e,t){if(null===e)return"null";if(void 0===e)return"undefined";if(e.nodeType>=1&&void 0!==e.nodeName)return"node";var a=Object.prototype.toString.call(Object(e)),n=(t?h:y).exec(a);return n?n[1].toLocaleLowerCase():"unsupported"},isNonEmptyString:function(e){return"string"==typeof e&&""!==e}}),E=function(){function e(n,o){if(++t>a)return v("recursion limit reached!"),!0;var i=!1;for(var s in o){var l=o[s],c=s;if(_.isNonEmptyString(s)&&-1!==s.indexOf(".")){var d=r(s,l);l=d[c=Object.keys(d)[0]]}var u=_.getType(l,!0);if("object"===u)"replace"!==b&&_.getType(n[c],!0)===u||(n[c]={}),i=e(n[c],l)||i;else if("array"===u)if("arrayReplace"!==b&&"replace"!==b&&_.getType(n[c],!0)===u||(n[c]=[]),"append"===b){var g=[];i=e(g,l)||i,n[c]=n[c].concat(g)}else i=e(n[c],l)||i;else"unsupported"===u?v("unsupported type detected > ignoring ",l):n[c]=l}return--t,i}var t=0,a=20;return function(a,n){return t=0,!e(a,n)}}(),C=function(e){return{set:function(t,a){var n=b;b="merge",o([r(t,a)],e),b=n},get:function(t){return n(t,e)}}},P=C(g),V={mergeCommand:function(e,r){if(e=t(e),"function"==typeof s.pushCallBack)try{s.pushCallBack(r,e)}catch(e){v("callback error:",e)}var o=n(s.eventActionPath,e),i=_.isNonEmptyString(o);if(i&&s.clearEventBeforeMerge&&a(n(s.eventRootPath,r)),i&&"function"==typeof s.eventPreMergeCallBack){try{i=s.eventPreMergeCallBack(r,n(s.eventRootPath,e),o)}catch(e){i=!1,v("callback error:",e)}i||v("event cancelled by eventPreMergeCallBack",o,e)}if(E(r,e),i){var l=t(r),u=n(s.eventRootPath,l);o=n(s.eventActionPath,l);var f=d.length>=1;if(r===g&&(s.debug&&m.push(l),(f&&s.eventsActivated||!s.eventsActivated&&c)&&d.push(l)),p&&s.eventsActivated&&!f)try{v("firing event:",o,u),"function"==typeof s.eventTriggerCallBack&&s.eventTriggerCallBack(l,u,o)}catch(e){v("callback error:",e)}else s.debug&&v("event disregarded"+(c?" and stored:":":"),u);if("function"==typeof s.eventPostMergeCallBack){var y=t(l);try{s.eventPostMergeCallBack(y,n(s.eventRootPath,y),o)}catch(e){v("callback error:",e)}}}},metaCommand:function(e,t){if(_.isNonEmptyString(e[0])){var a=e[0],r=e.slice(1);if(0===a.indexOf("mode:")){var i=a.split(":")[1];-1===f.indexOf(i)&&(v("unknown mode:",[i],"applying fallback mode:",[s.defaultMode]),i=s.defaultMode);var l=b;b=i,o(r,t),b=l}else{var c=a.split("."),d=c.pop(),u=n(c,t);try{u[d].apply(u,r)}catch(e){v("meta command",e)}}}else v("invalid command >",e[0],"<, must be non-empty string")},methodCommand:function(e,t){e.call(t===g?P:C(t))}};window[s.dataLayerKey]=window[s.dataLayerKey]||[];var w={getVersion:function(){return i},getState:function(){return g},getEventHistory:function(){return s.debug||console.warn("[Constructor] .getEventHistory() only stores events in debug mode"),m},clearEventHistory:function(){m=[]},compress:function(){window[s.dataLayerKey].splice(0,window[s.dataLayerKey].length),window[s.dataLayerKey][0]=g},activateEvents:function(e){if(!s.eventsActivated)if(s.eventsActivated=!0,c=!1,v("activating events. firing",d.length,"previously stored events?",e),e){var t=d.length;if("function"==typeof s.modifyInactiveEventsCallBack)try{s.modifyInactiveEventsCallBack(d)}catch(r){v("callback error:",r)}function a(){try{if(d.length<1)return;var e=d.shift(),t=n(s.eventRootPath,e),r=n(s.eventActionPath,e);v("firing event:",r,t);try{"function"==typeof s.eventTriggerCallBack&&s.eventTriggerCallBack(e,t,r)}catch(e){v("callback error",e)}}catch(e){v("trigger event error",e)}u=null,s.delayBetweenEvents>=0?(u=setTimeout(a,s.delayBetweenEvents),!0===s.delayOnlyFirst&&(s.delayBetweenEvents=-1)):a()}d.length!==t&&v("event history modified. Firing",d.length,"events"),a()}else d.length=0},deactivateEvents:function(e){v("Deactivating Events. Events will be stored?",e),s.eventsActivated=!1,c=e;var t=d.length;!e&&t>0&&(v("clearing",t,"stored events"),d.length=0),clearTimeout(u),u=null},processExternal:function(e,t,a,n){var r=p;p=a;var i=b,l=s.delayBetweenEvents;return s.delayBetweenEvents=-1,"string"==typeof n&&(-1!==f.indexOf(n)?b=n:(b=s.defaultMode,v("Invalid mode",[n],"using default",[s.defaultMode]))),t=t||{},o(e.slice(),t),s.delayBetweenEvents=l,p=r,b=i,t},push:function(){o(Array.prototype.slice.call(arguments),g);var e=Array.prototype.push.apply(this,arguments);return this.length>s.maxDataLayerSize&&this.splice(0,this.length-s.maxDataLayerSize),e}};for(var k in w)"function"==typeof w[k]&&(window[s.dataLayerKey][k]=w[k]);v("init",s),o(window[s.dataLayerKey].slice(),g)};return e}))}},"fm-spon-data-layer-constructor/src/lib/constructor/defaultConfig.js":{script:function(e){"use strict";e.exports=function(e){var t=e.getExtensionSettings(),a=isNaN(parseInt(t.constructorDebug))?0:parseInt(t.constructorDebug);return{debug:e.debugEnabled&&("true"===t.constructorDebug||!0===t.constructorDebug||a>=1),defaultMode:t.defaultMode||"merge",clearEventBeforeMerge:t.clearEventObject,eventActionPath:t.eventActionPath,eventRootPath:t.eventRootPath,dataLayerKey:t.dataLayerRoot,eventPreMergeCallBack:t.doPreEventMerge&&"function"==typeof t.codePreEventMerge?t.codePreEventMerge:void 0,eventPostMergeCallBack:t.doPostEventMerge&&"function"==typeof t.codePostEventMerge?t.codePostEventMerge:void 0,pushCallBack:t.doPreMerge&&"function"==typeof t.codePreMerge?t.codePreMerge:void 0,modifyInactiveEventsCallBack:t.doOnActivateEvents&&"function"==typeof t.codeOnActivateEvents?t.codeOnActivateEvents:void 0,eventTriggerCallBack:function(e,t,a){var n=new CustomEvent("DataLayerConstructorEvent",{detail:{state:e,eventObject:t,eventName:a}});window.dispatchEvent(n)},maxDataLayerSize:isNaN(parseInt(t.maxDataLayerSize),10)?50:parseInt(t.maxDataLayerSize,10),loggingFunction:e.logger.debug,eventsActivated:!1,delayBetweenEvents:isNaN(parseInt(t.delayBetweenEvents),10)?-1:parseInt(t.delayBetweenEvents,10),delayOnlyFirst:!0===t.delayOnlyFirst||"true"===t.delayOnlyFirst}}}}}},"data-element-assistant":{displayName:"Data Element Assistant",hostedLibFilesBaseUrl:"https://assets.adobedtm.com/extensions/EP634d430f78964f1597e7328a6af419f8/",modules:{"data-element-assistant/src/lib/dataElements/concatenate.js":{name:"concatenate",displayName:"Concatenate",script:function(e,t,a){"use strict";var n=a("./utils/logger"),r=a("./utils/findTargetValue"),o=a("./utils/is");e.exports=function(e){try{var t=e.dataElementsAndDelimiters,a=e.returnEmpty,i=!0,s=t.reduce((function(e,t){var a="";if("path"===t.inputType?(a=r(window,t.path),a=o.nil(a)?"":a):a=t.dataElement,o.nil(a)||""===a){if(!0===t.omitWhenEmpty)return e}else i=!1;return e+t.delimiter+a}),"");return""!=e.trailingDelimiter&&(s+=e.trailingDelimiter),a&&i?void 0:s}catch(e){return n.log("error","Concatenate",e.message)}}}},"data-element-assistant/src/lib/dataElements/utils/logger.js":{script:function(e,t,a,n){var r,o=!1;e.exports=function(){if(o)return r;var e={error:"[Error]"};return o=!0,r={log:function(t,a,r){var o="DEA "+a+(e[t]||"")+": "+r;void 0!==n&&n.logger[t](o)}}}()}},"data-element-assistant/src/lib/dataElements/utils/findTargetValue.js":{script:function(e){e.exports=function(e,t){return t.split(".").reduce((function(e,t){return(e||{})[t]}),e)}}},"data-element-assistant/src/lib/dataElements/utils/is.js":{script:function(e){e.exports=function(){function e(e){return function(a){return t.call(a)===e}}var t=Object.prototype.toString,a="[object Boolean]",n="[object String]",r="[object Number]",o="[object Object]",i="[object Function]",s="[object Null]",l="[object Undefined]";return{array:e("[object Array]"),object:e(o),function:e(i),null:e(s),undefined:e(l),string:e(n),number:e(r),boolean:e(a),nil:function(e){return this.null(e)||this.undefined(e)}}}()}}}},"adobe-alloy":{displayName:"Adobe Experience Platform Web SDK",hostedLibFilesBaseUrl:"https://assets.adobedtm.com/extensions/EP9b2d0d56e6f54e59b8eeea740ab515a3/",settings:{instances:[{name:"saralloy",edgeDomain:"sams.spiegel.de",edgeConfigId:"b48de5d5-0f6b-4d37-b838-f8c1523cc3c7",onBeforeEventSend:function(e){try{e.xdm&&e.xdm._experience&&e.xdm._experience.analytics&&(e.xdm._experience.analytics.customDimensions.props.prop50=function(){for(var t=e.xdm._experience.analytics,a=Object.keys(t),n=[],r=0;r<a.length;r++)if(a[r].includes("event"))for(var o=Object.keys(t[a[r]]),i=0;i<o.length;i++)t[a[r]][o[i]].value&&n.push(o[i]);return e.xdm.commerce&&e.xdm.commerce.purchases&&e.xdm.commerce.purchases.value&&n.push("purchase"),n.length?n.join(","):"noevents"}());var t=_satellite.getVar("User | Current Consent Status [gl-co]",event),a=e.xdm&&e.xdm._experience&&e.xdm._experience.analytics&&e.xdm._experience.analytics.customDimensions&&e.xdm._experience.analytics.customDimensions.eVars?e.xdm._experience.analytics.customDimensions.eVars:"";if(t===_satellite.getVar("Consent | CONSTANT: basic [gl]",event)&&(a&&["eVar13","eVar36","eVar38","eVar145","eVar146","eVar151","eVar152","eVar153"].forEach((function(e){"(not yet approved)"!=a[e]&&(a[e]="")})),e.xdm&&e.xdm.marketing&&"(not yet approved)"!=e.xdm.marketing.trackingCode&&(e.xdm.marketing.trackingCode=""),e.xdm&&e.xdm._spiegel&&e.xdm._spiegel.marketing&&(e.xdm._spiegel.marketing=""),e.query&&e.query.personalization&&(e.query.personalization="")),t===_satellite.getVar("Consent | CONSTANT: allToolsWithoutPrI [co]",event)){var n=(e.query&&e.query.personalization&&e.query.personalization.decisionScopes&&Array.isArray(e.query.personalization.decisionScopes)?e.query.personalization.decisionScopes:[]).filter((function(e){return-1===e.indexOf("fuermich:")}));e.query.personalization.decisionScopes=n}function r(e){try{var t=e;return Object.keys(e).forEach((function(e){"customDimensions"===e&&Object.keys(t[e].eVars).forEach((function(a){""===t[e].eVars[a]&&delete t[e].eVars[a]})),0===e.indexOf("event")&&Object.keys(t[e]).forEach((function(a){0===Object.keys(t[e][a]).length&&delete t[e][a]}))})),t}catch(t){return e}}e.xdm._experience&&e.xdm._experience.analytics&&(e.xdm._experience.analytics=r(e.xdm._experience.analytics)),_satellite.cookieToPersist&&"decisioning.propositionFetch"!==e.xdm.eventType&&(_satellite.logger.info("[SARA setting cookies]:",_satellite.cookieToPersist),Object.keys(_satellite.cookieToPersist).forEach((function(e){let t=e,a=_satellite.cookieToPersist[e].val,n=_satellite.cookieToPersist[e].timeframe,r=_satellite.cookieToPersist[e].domain;_satellite.saraCookieWrite(t,a,n,r)})),_satellite.cookieToPersist={})}catch(o){_satellite.logger.error("AEP on before event send callback: "+o)}},idMigrationEnabled:!1,stagingEdgeConfigId:"a6775471-b28c-445c-8c53-69cad93d3811",clickCollectionEnabled:!1,developmentEdgeConfigId:"a6775471-b28c-445c-8c53-69cad93d3811",thirdPartyCookiesEnabled:!1}]},modules:{"adobe-alloy/dist/lib/dataElements/identityMap/index.js":{name:"identity-map",displayName:"Identity map",script:function(e,t,a,n){"use strict";const r=a("./createIdentityMap")({logger:n.logger});e.exports=e=>r(e)}},"adobe-alloy/dist/lib/dataElements/xdmObject/index.js":{name:"xdm-object",displayName:"XDM object",script:function(e){"use strict";e.exports=e=>e.data}},"adobe-alloy/dist/lib/dataElements/eventMergeId/index.js":{name:"event-merge-id",displayName:"Event merge ID",script:function(e,t,a){"use strict";const n=a("./createEventMergeId"),r=a("../../instanceManager/index"),{eventMergeIdCache:o}=a("../../index");e.exports=n({instanceManager:r,eventMergeIdCache:o})}},"adobe-alloy/dist/lib/actions/sendEvent/index.js":{name:"send-event",displayName:"Send event",script:function(e,t,a,n){"use strict";var r;const o=a("./createSendEvent"),i=a("../../instanceManager/index"),{sendEventCallbackStorage:s}=a("../../index"),l=a("../../utils/createGetConfigOverrides");e.exports=o({instanceManager:i,sendEventCallbackStorage:s,getConfigOverrides:l(null===(r=n.environment)||void 0===r?void 0:r.stage)})}},"adobe-alloy/dist/lib/events/sendEventComplete/index.js":{name:"send-event-complete",displayName:"Send event complete",script:function(e,t,a){"use strict";const{sendEventCallbackStorage:n}=a("../../index"),r=a("./createSendEventComplete");e.exports=r({sendEventCallbackStorage:n})}},"adobe-alloy/dist/lib/actions/applyPropositions/index.js":{name:"apply-propositions",displayName:"Apply propositions",script:function(e,t,a){"use strict";const n=a("./createApplyPropositions"),r=a("../../instanceManager/index");e.exports=n({instanceManager:r})}},"adobe-alloy/dist/lib/instanceManager/index.js":{script:function(e,t,a,n){"use strict";var r;const{createCustomInstance:o,createEventMergeId:i,components:s}=a("../alloy"),l=a("./createInstanceManager"),c=a("./injectWrapOnBeforeEventSend"),d=a("../utils/createGetConfigOverrides"),u=c({version:"2.29.0"});e.exports=l({
turbine:n,window:window,createCustomInstance:o,components:s,createEventMergeId:i,orgId:_satellite.company.orgId,wrapOnBeforeEventSend:u,getConfigOverrides:d(null===(r=n.environment)||void 0===r?void 0:r.stage)})}},"adobe-alloy/dist/lib/dataElements/identityMap/createIdentityMap.js":{script:function(e){"use strict";e.exports=({logger:e})=>t=>Object.keys(t).reduce(((a,n)=>{const r=t[n].filter((({id:t},a)=>{const r="string"==typeof t&&t.length;return r||e.log(`The identifier at ${n}[${a}] was removed from the identity map because its ID is not a populated string. Its ID value is:`,t),r}));return r.length?a[n]=r:e.log(`The ${n} namespace was removed from the identity map because it contains no identifiers.`),a}),{})}},"adobe-alloy/dist/lib/dataElements/eventMergeId/createEventMergeId.js":{script:function(e){"use strict";e.exports=({instanceManager:e,eventMergeIdCache:t})=>a=>{const{cacheId:n}=a;let r=t.getByCacheId(n);return r||(({eventMergeId:r}=e.createEventMergeId()),t.set(n,r)),r}}},"adobe-alloy/dist/lib/index.js":{script:function(e,t,a){"use strict";const n=a("./createEventMergeIdCache"),r=a("./createSendEventCallbackStorage"),o=a("./createMediaCollectionSessionStorage"),i=a("./createVariableStore");t.eventMergeIdCache=n(),t.sendEventCallbackStorage=r(),t.mediaCollectionSessionStorage=o(),t.variableStore=i()}},"adobe-alloy/dist/lib/alloy.js":{script:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)e[n]=a[n]}return e}function o(e,t){function a(a,n,o){if("undefined"!=typeof document){"number"==typeof(o=r({},t,o)).expires&&(o.expires=new Date(Date.now()+864e5*o.expires)),o.expires&&(o.expires=o.expires.toUTCString()),a=encodeURIComponent(a).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var i="";for(var s in o)o[s]&&(i+="; "+s,!0!==o[s]&&(i+="="+o[s].split(";")[0]));return document.cookie=a+"="+e.write(n,a)+i}}function n(t){if("undefined"!=typeof document&&(!arguments.length||t)){for(var a=document.cookie?document.cookie.split("; "):[],n={},r=0;r<a.length;r++){var o=a[r].split("="),i=o.slice(1).join("=");try{var s=decodeURIComponent(o[0]);if(n[s]=e.read(i,s),t===s)break}catch(e){}}return t?n[t]:n}}return Object.create({set:a,get:n,remove:function(e,t){a(e,"",r({},t,{expires:-1}))},withAttributes:function(e){return o(this.converter,r({},this.attributes,e))},withConverter:function(e){return o(r({},this.converter,e),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(e)}})}function i(e,t=0){return(la[e[t+0]]+la[e[t+1]]+la[e[t+2]]+la[e[t+3]]+"-"+la[e[t+4]]+la[e[t+5]]+"-"+la[e[t+6]]+la[e[t+7]]+"-"+la[e[t+8]]+la[e[t+9]]+"-"+la[e[t+10]]+la[e[t+11]]+la[e[t+12]]+la[e[t+13]]+la[e[t+14]]+la[e[t+15]]).toLowerCase()}function s(){if(!ca){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");ca=crypto.getRandomValues.bind(crypto)}return ca(da)}function l(e,t,a){if(ua.randomUUID&&!t&&!e)return ua.randomUUID();const n=(e=e||{}).random??e.rng?.()??s();if(n.length<16)throw new Error("Random bytes length must be >= 16");if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){if((a=a||0)<0||a+16>t.length)throw new RangeError(`UUID byte range ${a}:${a+15} is out of buffer bounds`);for(let e=0;e<16;++e)t[a+e]=n[e];return t}return i(n)}function c(e){return"object"==typeof e||void 0===e}function d(){return{matches:(e,t,a=[])=>{if(c(e[t]))return!1;const n=String(e[t]).toLowerCase();for(let e=0;e<a.length;e+=1)if(!c(a[e])&&n===String(a[e]).toLowerCase())return!0;return!1}}}function u(){return{matches:(e,t,a=[])=>{if(c(e[t]))return!1;const n=String(e[t]).toLowerCase();for(let e=0;e<a.length;e+=1)if(!c(a[e])&&n===String(a[e]).toLowerCase())return!1;return!0}}}function g(){return{matches:(e,t)=>void 0!==e[t]&&null!==e[t]}}function m(){return{matches:(e,t)=>void 0===e[t]||null===e[t]}}function p(e){return"number"==typeof e}function f(){return{matches:(e,t,a=[])=>{const n=e[t];if(!p(n))return!1;for(let e=0;e<a.length;e+=1)if(p(a[e])&&n>a[e])return!0;return!1}}}function v(){return{matches:(e,t,a=[])=>{const n=e[t];if(!p(n))return!1;for(let e=0;e<a.length;e+=1)if(p(a[e])&&n>=a[e])return!0;return!1}}}function y(){return{matches:(e,t,a=[])=>{const n=e[t];if(!p(n))return!1;for(let e=0;e<a.length;e+=1)if(p(a[e])&&n<a[e])return!0;return!1}}}function h(){return{matches:(e,t,a=[])=>{const n=e[t];if(!p(n))return!1;for(let e=0;e<a.length;e+=1)if(p(a[e])&&n<=a[e])return!0;return!1}}}function b(){return{matches:(e,t,a=[])=>{if(c(e[t]))return!1;const n=String(e[t]).toLowerCase();for(let e=0;e<a.length;e+=1)if(!c(a[e])&&-1!==n.indexOf(String(a[e]).toLowerCase()))return!0;return!1}}}function _(){return{matches:(e,t,a=[])=>{if(c(e[t]))return!1;const n=String(e[t]).toLowerCase();for(let e=0;e<a.length;e+=1)if(!c(a[e])&&-1!==n.indexOf(String(a[e]).toLowerCase()))return!1;return!0}}}function E(){return{matches:(e,t,a=[])=>{if(c(e[t]))return!1;const n=String(e[t]).toLowerCase();for(let e=0;e<a.length;e+=1)if(!c(a[e])&&n.startsWith(String(a[e]).toLowerCase()))return!0;return!1}}}function C(){return{matches:(e,t,a=[])=>{if(c(e[t]))return!1;const n=String(e[t]).toLowerCase();for(let e=0;e<a.length;e+=1)if(!c(a[e])&&n.endsWith(a[e].toLowerCase()))return!0;return!1}}}function P(e){return Sg[e]}function V(e){return void 0===e}function w(e){return Object.keys(e)}function k(e,t,a){switch(t){case wg.GREATER_THAN:return e>a;case wg.GREATER_THAN_OR_EQUAL_TO:return e>=a;case wg.LESS_THAN:return e<a;case wg.LESS_THAN_OR_EQUAL_TO:return e<=a;case wg.EQUALS:return e===a;case wg.NOT_EQUALS:return e!==a;default:return!1}}function A(e,t){for(let a=0;a<t.length;a+=1)if(!V(e[t[a]]))return e[t[a]]}function S(e,t){const a=w(e);for(let n=0;n<a.length;n+=1){const r=a[n],{event:o={}}=t;if(o[a[n]]!==e[r])return!1}return!0}function T(e,t,a,n){return e.reduce(((e,r)=>{const o=A(r,Tg);if(!o)return e;const i=t.events[o];if(!i)return e;const s=A(r,Dg);if(!s)return e;const l=i[s];if(!l)return e;if(!S(r,l))return e;const{count:c=1}=l;return V(a)||V(n)||l.timestamp>=a&&l.timestamp<=n?e+c:e}),0)}function D(e,t,a,n){let r=a;return e.every((e=>{const a=A(e,Tg);if(!a)return!1;const o=t.events[a];if(!o)return!1;const i=A(e,Dg);if(!i)return!1;const s=o[i];if(!S(e,s))return!1;if(null===s||V(s)||0===s.count)return!1;const l=(V(r)||s.timestamp>=r)&&(V(n)||s.timestamp<=n);return r=s.timestamp,l}))?1:0}function x(e,t){let a=!0;for(let n=0;n<t.length;n+=1)a=a&&t[n].evaluate(e);return a}function j(e,t){let a=!1;for(let n=0;n<t.length;n+=1)if(a=a||t[n].evaluate(e),a)return!0;return!1}function I(e,t,a){return{version:e,rules:t,metadata:a}}function M(e,t,a){return{key:a,execute:a=>e.evaluate(a)?t:[],toString:()=>`Rule{condition=${e}, consequences=${t}}`}}function O(e,t){return{evaluate:e=>t.evaluate(e),toString:()=>`Condition{type=${e}, definition=${t}}`}}function R(e,t,a){return{id:e,type:t,detail:a}}function N(e,t){return{evaluate:a=>kg.AND===e?x(a,t):kg.OR===e&&j(a,t)}}function L(e,t,a){return{evaluate:n=>{const r=P(t);return!!r&&r.matches(n,e,a)}}}function U(e,t,a,n,r,o){return{evaluate:i=>{let s;return s=Ag.ORDERED===o?D(e,i,n,r):T(e,i,n,r),k(s,t,a)}}}function F(e,t){return Object.assign(e,t)}function q(e){const{key:t,matcher:a,values:n}=e;return L(t,a,n)}function X(e){const{logic:t,conditions:a}=e;return N(t,a.map($))}function B(e){const{events:t,from:a,to:n,matcher:r,value:o,searchType:i}=e;return U(t,r,o,a,n,i)}function $(e){const{type:t,definition:a}=e;if(Vg.MATCHER===t)return O(t,q(a));if(Vg.GROUP===t)return O(t,X(a));if(Vg.HISTORICAL===t)return O(t,B(a));throw new Error("Can not parse condition")}function H(e){const{id:t,type:a,detail:n}=e;return R(t,a,n)}function W(e){const{condition:t,consequences:a,key:n}=e;return M($(t),a.map(H),n)}function z(e){if(e)return{provider:e.provider,providerData:F({},e.providerData)}}function J(e){const{version:t,rules:a,metadata:n}=e;return I(t,a.map(W),z(n))}function G(e){return{provider:jg,execute:t=>e.map((e=>e.execute(t))).filter((e=>e.length>0))}}function Q(e){const{providerData:t}=e;if(!t)throw new Error("Provider data is missing in metadata");const{identityTemplate:a,buckets:n}=t;if(!a)throw new Error("Identity template is missing in provider data");if(!n)throw new Error("Buckets is missing in provider data")}function K(e){const{xdm:t}=e;if(!t)throw new Error("XDM object is missing in the context");const{identityMap:a}=t;if(!a)throw new Error("Identity map is missing in the XDM object");const n=a[Ig];if(!n)throw new Error("ECID identity namespace is missing in the identity map");if(!Array.isArray(n)||0===n.length)throw new Error("ECID identities array is empty or not an array");const r=n[0].id;if(!r)throw new Error("ECID identity is missing in the identities array");return r}function Y(e,t,a){const{providerData:n}=a,{identityTemplate:r}=n;return r.replace(Mg,t).replace(Og,e)}function Z(e){return!V(e)}function ee(e,t=(e=>e[0])){const a={};return function(...n){const r=t(n);return Z(a[r])||(a[r]=e(...n)),a[r]}}function te(e,t){const a=65535&t;return((t-a)*e|0)+(a*e|0)|0}function ae(e,t=0){let a;const n=e.length,r=3432918353,o=461845907;let i=t;const s=-2&n;for(let t=0;t<s;t+=2)a=e.charCodeAt(t)|e.charCodeAt(t+1)<<16,a=te(a,r),a=(131071&a)<<15|a>>>17,a=te(a,o),i^=a,i=(524287&i)<<13|i>>>19,i=5*i+3864292196|0;return n%2==1&&(a=e.charCodeAt(s),a=te(a,r),a=(131071&a)<<15|a>>>17,a=te(a,o),i^=a),i^=n<<1,i^=i>>>16,i=te(i,2246822507),i^=i>>>13,i=te(i,3266489909),i^=i>>>16,i}function ne(e,t){const a=Rg(e),n=Math.abs(a)%t/t*Ng;return Math.round(n*Ng)/Ng}function re(e,t,a){return{allocation:Lg(e,t),...a}}function oe(e){const t={};for(let a=0;a<e.length;a+=1){const n=e[a];n.key&&(t[n.key]||(t[n.key]=[]),t[n.key].push(n))}return t}function ie(e,t){return t.map((t=>t.execute(e))).filter((e=>e.length>0))}function se(e,t){Q(t);const a=e.filter((e=>!e.key)),n=oe(e),{buckets:r}=t.providerData;return{provider:xg,execute:e=>{const o=K(e),i=ie(e,a),s=w(n),l=[];for(let a=0;a<s.length;a+=1){const i=s[a],c=n[i],d=ie(re(Y(o,i,t),r,e),c);l.push(...d)}return[...i,...l]}}}function le(e,t){if(!t)return G(e);const{provider:a}=t;return a===xg?se(e,t):G(e)}function ce(e){const{rules:t,metadata:a}=J(e);return le(t,a)}Object.defineProperty(t,"__esModule",{value:!0}),t.deepAssign=t.createEventMergeId=t.createCustomInstance=t.components=void 0;var de=n(a("@adobe/reactor-query-string")),ue=e=>null==e,ge=e=>!ue(e)&&!Array.isArray(e)&&"object"==typeof e,me=(...e)=>e.length<2?Object.assign(...e):e.reduce(((e,t)=>(ge(t)&&Object.keys(t).forEach((a=>{Array.isArray(t[a])?Array.isArray(e[a])?e[a].push(...t[a]):e[a]=[...t[a]]:e[a]=t[a]})),e))),pe=o({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"}),fe={get:pe.get.bind(pe),set:pe.set.bind(pe),remove:pe.remove.bind(pe),withConverter:pe.withConverter.bind(pe)};const ve=(e,t)=>{Object.keys(t).forEach((a=>{ge(e[a])&&ge(t[a])?ve(e[a],t[a]):e[a]=t[a]}))};var ye=(e,...t)=>{if(ue(e))throw new TypeError('deepAssign "target" cannot be null or undefined');const a=Object(e);return t.forEach((e=>ve(a,Object(e)))),a};t.deepAssign=ye;var he=(e,t)=>a=>{const n=t.split(".").reduce(((e,t)=>(e[t]=e[t]||{},e[t])),e);ye(n,a)},be=()=>{const e=[];return{add(t){e.push(t)},call:(...t)=>Promise.all(e.map((e=>e(...t))))}},_e=({logger:e,cookieJar:t})=>({...t,set(a,n,r){e.info("Setting cookie",{name:a,value:n,...r}),t.set(a,n,r)}}),Ee=()=>{let e=0,t=Promise.resolve();return{addTask(a){e+=1;const n=()=>a().finally((()=>{e-=1}));return t=t.then(n,n),t},get length(){return e}}};const Ce=(()=>{const e=[];for(let t=0;t<256;t++){let a=t;for(let e=0;e<8;e++)a=1&a?3988292384^a>>>1:a>>>1;e.push(a)}return function(t,a){t=unescape(encodeURIComponent(t)),a||(a=0),a=~a;for(let n=0;n<t.length;n++){const r=255&(a^t.charCodeAt(n));a=a>>>8^e[r]}return(a=~a)>>>0}})();var Pe=()=>{const e={};return e.promise=new Promise(((t,a)=>{e.resolve=t,e.reject=a})),e};const Ve=(e,t)=>e===t,we=(e,t,a)=>{for(let n=0;n<e.length;n+=1)if(a(e[n],t))return n;return-1};var ke=(e,t=Ve)=>e.filter(((a,n)=>we(e,a,t)===n)),Ae=(e,t)=>e.appendChild(t);const Se=(e,t)=>{Object.keys(t).forEach((a=>{if("style"===a&&ge(t[a])){const n=t[a];Object.keys(n).forEach((t=>{e.style[t]=n[t]}))}else e[a]=t[a]}))};var Te=(e,t={},a={},n=[],r=document)=>{const o=r.createElement(e);return Object.keys(t).forEach((e=>{o.setAttribute(e,t[e])})),Se(o,a),n.forEach((e=>Ae(o,e))),o};const De="BODY",xe="IFRAME",je="IMG",Ie="DIV",Me="STYLE",Oe="SCRIPT",Re="HEAD";var Ne=({src:e,currentDocument:t=document})=>new Promise(((a,n)=>{Te(je,{src:e},{onload:a,onerror:n,onabort:n},[],t)})),Le=e=>"function"==typeof e,Ue=e=>Array.isArray(e)&&e.length>0,Fe=e=>Array.isArray(e)?e:null==e?[]:[].slice.call(e);const qe=/^\s*>/;var Xe=(e,t)=>qe.test(t)?Fe(e.querySelectorAll(`:scope ${t}`)):Fe(e.querySelectorAll(t)),Be=":shadow";const $e=e=>e.split(Be),He=(e,t)=>{const a=t;return a.startsWith(">")?`${e instanceof Element||e instanceof Document?":scope":":host"} ${a}`:a};var We=(e,t)=>{const a=$e(t);if(a.length<2)return Xe(e,t);let n=e;for(let e=0;e<a.length;e+=1){const t=a[e].trim();if(""===t&&n.shadowRoot){n=n.shadowRoot;continue}const r=He(n,t),o=Xe(n,r);if(0===o.length||!o[0]||!o[0].shadowRoot)return o;n=o[0].shadowRoot}},ze=e=>-1!==e.indexOf(Be),Je=(e,t=document)=>ze(e)?We(t,e):Xe(t,e);const Ge="MutationObserver",Qe="requestAnimationFrame",Ke={childList:!0,subtree:!0},Ye="visibilityState",Ze="visible",et=100,tt=5e3,at=e=>new Error(`Could not find: ${e}`),nt=e=>new Promise(e),rt=e=>Le(e[Ge]),ot=(e,t,a,n,r)=>nt(((o,i)=>{let s;const l=new e[Ge]((()=>{const e=r(a);Ue(e)&&(l.disconnect(),s&&clearTimeout(s),o(e))}));s=setTimeout((()=>{l.disconnect(),i(at(a))}),n),l.observe(t,Ke)})),it=e=>e[Ye]===Ze,st=(e,t,a,n)=>nt(((r,o)=>{const i=()=>{const a=n(t);Ue(a)?r(a):e[Qe](i)};i(),setTimeout((()=>{o(at(t))}),a)})),lt=(e,t,a)=>nt(((n,r)=>{const o=()=>{const t=a(e);Ue(t)?n(t):setTimeout(o,et)};o(),setTimeout((()=>{r(at(e))}),t)}));var ct=(e,t=Je,a=tt,n=window,r=document)=>{const o=t(e);return Ue(o)?Promise.resolve(o):rt(n)?ot(n,r,e,a,t):it(r)?st(n,e,a,t):lt(e,a,t)},dt=(e,t)=>t.matches?t.matches(e):t.msMatchesSelector(e),ut=e=>{const t=e.parentNode;return t?t.removeChild(e):null};const gt={name:"Adobe Alloy"},mt={style:{display:"none",width:0,height:0}};var pt=({appendNode:e=Ae,awaitSelector:t=ct,createNode:a=Te,fireImage:n=Ne}={})=>{const r=n;let o;const i=()=>t(De).then((([t])=>o||(o=a(xe,gt,mt),e(t,o)))),s=({src:e})=>i().then((t=>{const a=t.contentWindow.document;return n({src:e,currentDocument:a})}));return e=>{const{hideReferrer:t,url:a}=e;return t?s({src:a}):r({src:a})}},ft=e=>ge(e)&&0===Object.keys(e).length;const vt=(e,t)=>ue(e)||!ge(e)?e:Object.keys(e).reduce(((a,n)=>{const r=e[n];if(ge(r)){const e=vt(r,t);return ft(e)?a:{...a,[n]:e}}return t(r)?{...a,[n]:r}:a}),{});var yt="com.adobe.alloy.",ht=(e,t)=>e.slice(-t);const bt=`${yt}getTld`;var _t=(e,t)=>{let a="";const n=e.location.hostname.toLowerCase().split(".");let r=1;for(;r<n.length&&!t.get(bt);)r+=1,a=ht(n,r).join("."),t.set(bt,bt,{domain:a});return t.remove(bt,{domain:a}),a},Et="kndctr",Ct=e=>e.replace("@","_"),Pt=(e,t)=>`${Et}_${Ct(e)}_${t}`,Vt=(e,t)=>{const a={};return e.forEach((e=>{const n=t(e);a[n]||(a[n]=[]),a[n].push(e)})),a};const wt="Chrome",kt="Edge",At="EdgeChromium",St="Firefox",Tt="IE",Dt="Safari",xt="Unknown";var jt=e=>{let t,a=!1;return()=>(a||(a=!0,t=e()),t)};const It=[wt,kt,At,Tt,xt];var Mt=({getBrowser:e})=>jt((()=>It.includes(e())));const Ot="identity",Rt="consent",Nt="cluster";var Lt=({orgId:e})=>{const t=Pt(e,Ot);return()=>Boolean(fe.get(t))};const Ut=(e,t)=>{const a=Object.keys(e);for(let n=0;n<a.length;n+=1){const r=a[n];if(e[r].test(t))return r}return xt};var Ft=({userAgent:e})=>jt((()=>Ut({[kt]:/Edge\/([0-9\._]+)/,[At]:/Edg\/([0-9\.]+)/,[wt]:/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/,[St]:/Firefox\/([0-9\.]+)(?:\s|$)/,[Tt]:/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/,[Dt]:/Version\/([0-9\._]+).*Safari/},e)));const qt=(e,t,a)=>({getItem(n){try{return e[t].getItem(a+n)}catch{return null}},setItem(n,r){try{return e[t].setItem(a+n,r),!0}catch{return!1}},clear(){try{return Object.keys(e[t]).forEach((n=>{n.startsWith(a)&&e[t].removeItem(n)})),!0}catch{return!1}}});var Xt=e=>t=>{const a=yt+t;return{session:qt(e,"sessionStorage",a),persistent:qt(e,"localStorage",a)}},Bt=(e,t)=>e.filter((e=>t.includes(e))),$t=e=>"boolean"==typeof e,Ht=e=>"number"==typeof e&&!Number.isNaN(e),Wt=e=>{const t=parseInt(e,10);return Ht(t)&&e===t},zt=(e,t)=>0===t.indexOf(`${Et}_${Ct(e)}_`),Jt=e=>"string"==typeof e,Gt=e=>Jt(e)&&e.length>0,Qt=()=>{};const Kt=e=>{const t={},a=e.split(".");switch(a.length){case 1:t.subdomain="",t.domain=e,t.topLevelDomain="";break;case 2:t.subdomain="",t.domain=e,t.topLevelDomain=a[1];break;case 3:t.subdomain="www"===a[0]?"":a[0],t.domain=e,t.topLevelDomain=a[2];break;case 4:t.subdomain="www"===a[0]?"":a[0],t.domain=e,t.topLevelDomain=`${a[2]}.${a[3]}`}return t},Yt=e=>{try{const t=new URL(e);let a=t.pathname;return e.endsWith("/")||"/"!==a||(a=""),{host:t.hostname,path:a,query:t.search.replace(/^\?/,""),anchor:t.hash.replace(/^#/,"")}}catch{return{}}},Zt=(e,t=Kt)=>{Jt(e)||(e="");const a=Yt(e)||{},{host:n="",path:r="",query:o="",anchor:i=""}=a;return{path:r,query:o,fragment:i,...t(n)}};var ea=e=>{if(ue(e)||"object"!=typeof e)return null;const t=vt(e,(e=>!(ue(e)||!$t(e)&&!Ht(e)&&!Gt(e)&&!Ue(e))));return ft(t)?null:t},ta=e=>e instanceof Error?e:new Error(e),aa=({error:e,message:t})=>{try{e.message=t}catch{}},na=({error:e,message:t})=>{const a=ta(e),n=`${t}\nCaused by: ${a.message}`;return aa({error:a,message:n}),a},ra=e=>Jt(e)&&"true"===e.toLowerCase(),oa=(e,t)=>{if(Ht(e)||Jt(e)){const t=Math.round(Number(e));if(!Number.isNaN(t))return t}return t};const ia=(e,t,a)=>`${e}`.padStart(t,a);var sa=e=>{const t=e.getFullYear(),a=ia(e.getMonth()+1,2,"0"),n=ia(e.getDate(),2,"0"),r=ia(e.getHours(),2,"0"),o=ia(e.getMinutes(),2,"0"),i=ia(e.getSeconds(),2,"0"),s=ia(e.getMilliseconds(),3,"0"),l=oa(e.getTimezoneOffset(),0);return`${t}-${a}-${n}T${r}:${o}:${i}.${s}${l>0?"-":"+"}${ia(Math.floor(Math.abs(l)/60),2,"0")}:${ia(Math.abs(l)%60,2,"0")}`};const la=[];for(let e=0;e<256;++e)la.push((e+256).toString(16).slice(1));let ca;const da=new Uint8Array(16);var ua={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};const ga=e=>function(t,a){return null==t?t:e.call(this,t,a)},ma=(e,t)=>function(a,n){return t.call(this,e.call(this,a,n),n)},pa=(e,t)=>function(a,n){const r=[],o=[e,t].reduce(((e,t)=>{try{return t.call(this,e,n)}catch(t){return r.push(t),e}}),a);if(r.length)throw new Error(r.join("\n"));return o},fa=(e,t,a)=>Object.assign(ma(e,t),e,a),va=(e,t,a)=>Object.assign(ma(e,ga(t)),e,a),ya=(e,t,a)=>Object.assign(pa(ga(t),e),e,a),ha=(e,t,a,n)=>{if(!e)throw new Error(`'${a}': Expected ${n}, but got ${JSON.stringify(t)}.`)};var ba=(e,t)=>(ha($t(e),e,t,"true or false"),e),_a=(e,t)=>(ha(Le(e),e,t,"a function"),e),Ea=(e,t)=>function(a,n){let r;const o=e.find((e=>{try{return r=e.call(this,a,n),!0}catch{return!1}}));return ha(o,a,n,t),r},Ca=e=>function(t,a){ha(Array.isArray(t),t,a,"an array");const n=[],r=t.map(((r,o)=>{try{return e.call(this,r,`${a}[${o}]`,t)}catch(e){return void n.push(e.message)}}));if(n.length)throw new Error(n.join("\n"));return r},Pa=e=>t=>null==t?e:t,Va=(e="This field has been deprecated")=>function(t,a){let n=e;return void 0!==t&&(a&&(n=`'${a}': ${n}`),this&&this.logger&&this.logger.warn(n)),t},wa=e=>(t,a)=>(ha(t===e,t,a,`${e}`),t),ka=e=>function(t,a){ha(ge(t),t,a,"an object");const n=[],r={};if(Object.keys(t).forEach((o=>{const i=t[o],s=a?`${a}.${o}`:o;try{const t=e.call(this,i,s);void 0!==t&&(r[o]=t)}catch(e){n.push(e.message)}})),n.length)throw new Error(n.join("\n"));return r},Aa=(e,t)=>(a,n)=>(ha(a>=t,a,n,`${e} greater than or equal to ${t}`),a),Sa=(e,t)=>(a,n)=>(ha(a<=t,a,n,`${e} less than or equal to ${t}`),a),Ta=e=>(t,a)=>{const n=[];if(Object.keys(t).forEach((t=>{if(!e[t]){const e=a?`${a}.${t}`:t;n.push(`'${e}': Unknown field.`)}})),n.length)throw new Error(n.join("\n"));return t},Da=e=>(t,a)=>(ge(t)?ha(!ft(t),t,a,e):ha(t.length>0,t,a,e),t),xa=e=>function(t,a){ha(ge(t),t,a,"an object");const n=[],r={};if(Object.keys(e).forEach((o=>{const i=t[o],s=e[o],l=a?`${a}.${o}`:o;try{const e=s.call(this,i,l);void 0!==e&&(r[o]=e)}catch(e){n.push(e.message)}})),Object.keys(t).forEach((e=>{Object.prototype.hasOwnProperty.call(r,e)||(r[e]=t[e])})),n.length)throw new Error(n.join("\n"));return r},ja=(e,t,a)=>function(n,r){ha(ge(n),n,r,"an object");const{[e]:o,[a]:i,...s}=n,l=t(o,r);if(void 0!==l){let t=`The field '${e}' is deprecated. Use '${a}' instead.`;if(r&&(t=`'${r}': ${t}`),void 0!==i&&i!==l)throw new Error(t);this&&this.logger&&this.logger.warn(t)}return{[a]:i||l,...s}},Ia=()=>{const e=[];return(t,a)=>(ha(-1===e.indexOf(t),t,a,"a unique value across instances"),e.push(t),t)},Ma=e=>{const t=Object.create(null);for(let a=0;a<e.length;a+=1){const n=e[a];if(n in t)return!1;t[n]=!0}return!0},Oa=()=>(e,t)=>(ha(Ma(e),e,t,"array values to be unique"),e);const Ra=/^[a-z0-9.-]{1,}$/i;var Na=(e,t)=>(ha(Ra.test(e),e,t,"a valid domain"),e),La=(e,t)=>(ha(Wt(e),e,t,"an integer"),e),Ua=(e,t)=>(ha(Ht(e),e,t,"a number"),e),Fa=e=>{try{return null!==RegExp(e)}catch{return!1}},qa=(e,t)=>(ha(Fa(e),e,t,"a regular expression"),e),Xa=(e,t)=>{if(null==e)throw new Error(`'${t}' is a required option`);return e},Ba=(e,t)=>(ha(Jt(e),e,t,"a string"),e),$a=e=>(t,a)=>(ha(e.test(t),t,a,`does not match the ${e.toString()}`),t);const Ha=e=>e;Ha.default=function(e){return fa(this,Pa(e))},Ha.required=function(){return fa(this,Xa)},Ha.deprecated=function(e){return fa(this,Va(e))};const Wa=function(){return va(this,Na)},za=function(e){return va(this,Aa("an integer",e))},Ja=function(e){return va(this,Aa("a number",e))},Ga=function(e){return va(this,Sa("a number",e))},Qa=function(){return va(this,La,{minimum:za})},Ka=function(){return va(this,Da("a non-empty string"))},Ya=function(){return va(this,Da("a non-empty array"))},Za=function(){return va(this,Da("a non-empty object"))},en=function(){return va(this,qa)},tn=function(e){return va(this,$a(e))},an=function(){return va(this,Ia())},nn=function(){return va(this,Oa())},rn=function(e,t){return fa(this,Ea(e,t))},on=function(){return this},sn=function(e){return va(this,Ca(e),{nonEmpty:Ya,uniqueItems:nn})},ln=function(){return va(this,ba)},cn=function(){return va(this,_a)},dn=function(e){return va(this,wa(e))},un=function(){return va(this,Ua,{minimum:Ja,maximum:Ga,integer:Qa,unique:an})},gn=function(e){return va(this,ka(e),{nonEmpty:Za})},mn=e=>({noUnknownFields:function(){return va(this,Ta(e))},nonEmpty:Za,concat:function(t){const a={...e,...t.schema};return va(this,t,mn(a))},renamed:function(e,t,a){return ya(this,ja(e,t,a))},schema:e}),pn=function(e){return va(this,xa(e),mn(e))},fn=function(){return va(this,Ba,{regexp:en,domain:Wa,nonEmpty:Ka,unique:an,matches:tn})},vn=rn.bind(Ha),yn=on.bind(Ha),hn=sn.bind(Ha),bn=ln.bind(Ha),_n=cn.bind(Ha),En=dn.bind(Ha),Cn=un.bind(Ha),Pn=gn.bind(Ha),Vn=pn.bind(Ha),wn=fn.bind(Ha),kn=function(...e){return vn(e.map(En),`one of these values: ${JSON.stringify(e)}`)};var An=Pn(hn(Vn({authenticatedState:kn("ambiguous","authenticated","loggedOut"),id:wn(),namespace:Vn({code:wn()}).noUnknownFields(),primary:bn(),xid:wn()}).noUnknownFields()).required()),Sn=Vn({}),Tn="alloy_debug",Dn=({console:e,locationSearch:t,createLogger:a,instanceName:n,createNamespacedStorage:r,getMonitors:o})=>{const i=de.default.parse(t),s=r(`instance.${n}.`),l=s.session.getItem("debug");let c="true"===l,d=null===l;const u=()=>c,g=(e,{fromConfig:t})=>{t&&!d||(c=e),t||(s.session.setItem("debug",e.toString()),d=!1)};return void 0!==i[Tn]&&g(ra(i[Tn]),{fromConfig:!1}),{setDebugEnabled:g,logger:a({getDebugEnabled:u,context:{instanceName:n},getMonitors:o,console:e}),createComponentLogger:t=>a({getDebugEnabled:u,context:{instanceName:n,componentName:t},getMonitors:o,console:e})}};const xn=["onComponentsRegistered","onBeforeEvent","onBeforeRequest","onResponse","onRequestFailure","onClick","onDecision"],jn=(e,t)=>(...a)=>Promise.all(e.getLifecycleCallbacks(t).map((e=>new Promise((t=>{t(e(...a))}))))),In=e=>(...t)=>Promise.resolve().then((()=>e(...t)));var Mn=e=>xn.reduce(((t,a)=>(t[a]=In(jn(e,a)),t)),{});const On=(e,t)=>(...a)=>{let n;try{n=e(...a)}catch(e){throw na({error:e,message:t})}return n instanceof Promise&&(n=n.catch((e=>{throw na({error:e,message:t})}))),n};var Rn=()=>{const e={},t={},a={},n=(e,a={})=>{const n=Bt(Object.keys(t),Object.keys(a));if(n.length)throw new Error(`[ComponentRegistry] Could not register ${e} because it has existing command(s): ${n.join(",")}`);Object.keys(a).forEach((n=>{const r=a[n];r.commandName=n,r.run=On(r.run,`[${e}] An error occurred while executing the ${n} command.`),t[n]=r}))},r=(e,t={})=>{Object.keys(t).forEach((n=>{a[n]=a[n]||[],a[n].push(On(t[n],`[${e}] An error occurred while executing the ${n} lifecycle hook.`))}))};return{register(t,a){const{commands:o,lifecycle:i}=a;n(t,o),r(t,i),e[t]=a},getCommand:e=>t[e],getCommandNames:()=>Object.keys(t),getLifecycleCallbacks:e=>a[e]||[],getComponentNames:()=>Object.keys(e)}},Nn=({logger:e,sendFetchRequest:t,sendBeaconRequest:a,isRequestRetryable:n,getRequestRetryDelay:r})=>({requestId:o,url:i,payload:s,useSendBeacon:l})=>{const c=JSON.stringify(s),d=JSON.parse(c);e.logOnBeforeNetworkRequest({url:i,requestId:o,payload:d});const u=(s=0)=>(l?a:t)(i,c).then((t=>{if(n({response:t,retriesAttempted:s})){const e=r({response:t,retriesAttempted:s});return new Promise((t=>{setTimeout((()=>{t(u(s+1))}),e)}))}let a;try{a=JSON.parse(t.body)}catch{}return e.logOnNetworkResponse({requestId:o,url:i,payload:d,...t,parsedBody:a,retriesAttempted:s}),{statusCode:t.statusCode,body:t.body,parsedBody:a,getHeader:t.getHeader}}));return u().catch((t=>{throw e.logOnNetworkError({requestId:o,url:i,payload:d,error:t}),na({error:t,message:"Network request failed."})}))},Ln=({logger:e})=>t=>{if(t){const a=t.split(";");if(a.length>=2&&a[1].length>0)try{const e=parseInt(a[1],10);if(!Number.isNaN(e))return{regionId:e}}catch{}e.warn(`Invalid adobe edge: "${t}"`)}return{}};const Un="in",Fn="out",qn="pending",Xn="general",Bn="declinedConsent",$n="default",Hn="initial",Wn="new",zn=e=>{const t=new Error(e);return t.code=Bn,t.message=e,t};var Jn=({logger:e})=>{const t=[],a=()=>{for(;t.length;)t.shift().resolve()},n=()=>{for(;t.length;)t.shift().reject(zn("The user declined consent."))},r=()=>Promise.resolve(),o=()=>Promise.resolve(),i=()=>Promise.resolve(),s=()=>Promise.reject(zn("No consent preferences have been set.")),l=()=>Promise.reject(zn("The user declined consent.")),c=e=>{if(e)return Promise.reject(new Error("Consent is pending."));const a=Pe();return t.push(a),a.promise};return{in(t){t===$n?this.awaitConsent=o:(t===Hn?e.info("Loaded user consent preferences. The user previously consented."):t===Wn&&this.awaitConsent!==i&&e.info("User consented."),a(),this.awaitConsent=i)},out(t){t===$n?(e.warn("User consent preferences not found. Default consent of out will be used."),this.awaitConsent=s):(t===Hn?e.warn("Loaded user consent preferences. The user previously declined consent."):t===Wn&&this.awaitConsent!==l&&e.warn("User declined consent."),n(),this.awaitConsent=l)},pending(t){t===$n&&e.info("User consent preferences not found. Default consent of pending will be used. Some commands may be delayed."),this.awaitConsent=c},awaitConsent:r,withConsent(){return this.awaitConsent(!0)},current(){switch(this.awaitConsent){case o:return{state:"in",wasSet:!1};case i:return{state:"in",wasSet:!0};case s:return{state:"out",wasSet:!1};case l:return{state:"out",wasSet:!0};case c:return{state:"pending",wasSet:!1};default:return{state:"in",wasSet:!1}}}}},Gn=({generalConsentState:e,logger:t})=>{const a=(a,n)=>{switch(a[Xn]){case Un:e.in(n);break;case Fn:e.out(n);break;case qn:e.pending(n);break;default:t.warn(`Unknown consent value: ${a[Xn]}`)}};return{initializeConsent(e,t){t[Xn]?a(t,Hn):a(e,$n)},setConsent(e){a(e,Wn)},suspend(){e.pending()},awaitConsent:()=>e.awaitConsent(),withConsent:()=>e.withConsent(),current:()=>e.current()}};const Qn=e=>e&&e._experience&&e._experience.decisioning&&Ue(e._experience.decisioning.propositions)?e._experience.decisioning.propositions:[];var Kn=()=>{const e={};let t,a,n=!1,r=!1,o=!0;const i=e=>{if(r)throw new Error(`${e} cannot be called after event is finalized.`)},s={hasQuery(){return Object.prototype.hasOwnProperty.call(this.getContent(),"query")},getContent(){const n=JSON.parse(JSON.stringify(e));return t&&ye(n,{xdm:t}),a&&ye(n,{data:a}),n},setUserXdm(e){i("setUserXdm"),t=e},setUserData(e){i("setUserData"),a=e},mergeXdm(t){i("mergeXdm"),t&&ye(e,{xdm:t})},mergeData(t){i("mergeData"),t&&ye(e,{data:t})},mergeMeta(t){i("mergeMeta"),t&&ye(e,{meta:t})},mergeQuery(t){i("mergeQuery"),t&&ye(e,{query:t})},documentMayUnload(){n=!0},finalize(n){if(r)return;const i=ke([...Qn(t),...Qn(e.xdm)],((e,t)=>e===t||e.id&&t.id&&e.id===t.id&&e.scope&&t.scope&&e.scope===t.scope));if(t&&this.mergeXdm(t),i.length>0&&(e.xdm._experience.decisioning.propositions=i),a&&s.mergeData(a),r=!0,n){o=!1;const t={xdm:e.xdm||{},data:e.data||{}},a=n(t);o=!1!==a,e.xdm=t.xdm||{},e.data=t.data||{},ft(e.xdm)&&delete e.xdm,ft(e.data)&&delete e.data}},getDocumentMayUnload:()=>n,isEmpty:()=>ft(e)&&(!t||ft(t))&&(!a||ft(a)),shouldSend:()=>o,getViewName(){if(t&&t.web&&t.web.webPageDetails)return t.web.webPageDetails.viewName},toJSON(){if(!r)throw new Error("toJSON called before finalize");return e}};return s};const Yn="Retry-After",Zn="x-adobe-edge";var er=({extractEdgeInfo:e})=>({content:t={},getHeader:a})=>{const{handle:n=[],errors:r=[],warnings:o=[]}=t;return{getPayloadsByType:e=>n.filter((t=>t.type===e)).flatMap((e=>e.payload)),getErrors:()=>r,getWarnings:()=>o,getEdge:()=>e(a(Zn)),toJSON:()=>t}};const tr="configure",ar="setDebug";var nr=({logger:e,configureCommand:t,setDebugCommand:a,handleError:n,validateCommandOptions:r})=>{let o;const i=(n,i)=>{let s;if(n===tr){if(o)throw new Error("The library has already been configured and may only be configured once.");s=()=>(o=t(i),o.then((()=>{})))}else{if(!o)throw new Error("The library must be configured first. Please do so by executing the configure command.");s=n===ar?()=>{const e=Vn({enabled:bn().required()}).noUnknownFields(),t=r({command:{commandName:ar,optionsValidator:e},options:i});a(t)}:()=>o.then((e=>{const t=e.getCommand(n);if(!t||!Le(t.run)){const t=[tr,ar].concat(e.getCommandNames()).join(", ");throw new Error(`The ${n} command does not exist. List of available commands: ${t}.`)}const a=r({command:t,options:i});return t.run(a)}),(()=>(e.warn(`An error during configuration is preventing the ${n} command from executing.`),new Promise((()=>{})))))}return s};return(t,a={})=>new Promise((n=>{const r=i(t,a);e.logOnBeforeCommand({commandName:t,options:a}),n(r())})).catch((e=>n(e,`${t} command`))).catch((n=>{throw e.logOnCommandRejected({commandName:t,options:a,error:n}),n})).then((n=>{const r=ge(n)?n:{};return e.logOnCommandResolved({commandName:t,options:a,result:r}),r}))};const rr="https://adobe.ly/3sHgQHb";var or=({command:e,options:t})=>{const{commandName:a,documentationUri:n=rr,optionsValidator:r}=e;let o=t;if(r)try{o=r(t)}catch(e){throw new Error(`Invalid ${a} command options:\n\t - ${e} For command documentation see: ${n}`)}return o};const ir="https://adobe.ly/3sHh553",sr=({combinedConfigValidator:e,options:t,logger:a})=>{try{return e.noUnknownFields().required().call({logger:a},t)}catch(e){throw new Error(`Resolve these configuration problems:\n\t - ${e.message.split("\n").join("\n\t - ")}\nFor configuration documentation see: ${ir}`)}},lr=(e,t,a)=>a.reduce(((a,{buildOnInstanceConfiguredExtraParams:n})=>(n&&(a={...a,...n({config:e,logger:t})}),a)),{}),cr=e=>{const t=[],a={get enabled(){return e.enabled},flush(){t.forEach((({method:t,args:a})=>e[t](...a)))}};return Object.keys(e).filter((t=>"function"==typeof e[t])).forEach((e=>{a[e]=(...a)=>{t.push({method:e,args:a})}})),a};var dr=({options:e,componentCreators:t,coreConfigValidators:a,createConfig:n,logger:r,setDebugEnabled:o})=>{const i=cr(r),s=t.map((({configValidators:e})=>e)).filter((e=>e)).reduce(((e,t)=>e.concat(t)),a),l=n(sr({combinedConfigValidator:s,options:e,logger:i}));o(l.debugEnabled,{fromConfig:!0}),i.flush();const c=lr(l,r,t);return r.logOnInstanceConfigured({...c,config:l}),l},ur=({componentCreators:e,lifecycle:t,componentRegistry:a,getImmediatelyAvailableTools:n})=>(e.forEach((e=>{const{namespace:t}=e,r=n(t);let o;try{o=e(r)}catch(e){throw na({error:e,
message:`[${t}] An error occurred during component creation.`})}a.register(t,o)})),t.onComponentsRegistered({lifecycle:t}).then((()=>a)));const gr=e=>({...e}),mr="edge.adobedc.net",pr="adobedc.demdex.net";var fr="ee",vr=()=>Vn({debugEnabled:bn().default(!1),datastreamId:wn().unique().required(),edgeDomain:wn().domain().default(mr),edgeBasePath:wn().nonEmpty().default(fr),orgId:wn().unique().required(),onBeforeEventSend:_n().default(Qt),edgeConfigOverrides:Sn}).renamed("edgeConfigId",wn().unique(),"datastreamId"),yr=({errorPrefix:e,logger:t})=>(a,n)=>{const r=ta(a);if(r.code===Bn)return t.warn(`The ${n} could not fully complete. ${r.message}`),{};throw aa({error:r,message:`${e} ${r.message}`}),r},hr=({fetch:e})=>(t,a)=>e(t,{method:"POST",cache:"no-cache",credentials:"include",headers:{"Content-Type":"text/plain; charset=UTF-8"},referrerPolicy:"no-referrer-when-downgrade",body:a}).then((e=>e.text().then((t=>({statusCode:e.status,getHeader:t=>e.headers.get(t),body:t}))))),br=({sendBeacon:e,sendFetchRequest:t,logger:a})=>(n,r)=>{const o=new Blob([r],{type:"text/plain; charset=UTF-8"});return e(n,o)?Promise.resolve({statusCode:204,getHeader:()=>null,body:""}):(a.info("Unable to use `sendBeacon`; falling back to `fetch`."),t(n,r))},_r=({getDebugEnabled:e,console:t,getMonitors:a,context:n})=>{let r=`[${n.instanceName}]`;n.componentName&&(r+=` [${n.componentName}]`);const o=(e,t)=>{const r=a();if(r.length>0){const a={...n,...t};r.forEach((t=>{t[e]&&t[e](a)}))}},i=(a,...n)=>{o("onBeforeLog",{level:a,arguments:n}),e()&&t[a](r,...n)};return{get enabled(){return a().length>0||e()},logOnInstanceCreated(e){o("onInstanceCreated",e),i("info","Instance initialized.")},logOnInstanceConfigured(e){o("onInstanceConfigured",e),i("info","Instance configured. Computed configuration:",e.config)},logOnBeforeCommand(e){o("onBeforeCommand",e),i("info",`Executing ${e.commandName} command. Options:`,e.options)},logOnCommandResolved(e){o("onCommandResolved",e),i("info",`${e.commandName} command resolved. Result:`,e.result)},logOnCommandRejected(e){o("onCommandRejected",e),i("error",`${e.commandName} command was rejected. Error:`,e.error)},logOnBeforeNetworkRequest(e){o("onBeforeNetworkRequest",e),i("info",`Request ${e.requestId}: Sending request.`,e.payload)},logOnNetworkResponse(e){o("onNetworkResponse",e);const t=e.parsedBody||e.body?"response body:":"no response body.";i("info",`Request ${e.requestId}: Received response with status code ${e.statusCode} and ${t}`,e.parsedBody||e.body)},logOnNetworkError(e){o("onNetworkError",e),i("error",`Request ${e.requestId}: Network request failed.`,e.error)},logOnContentHiding(e){o("onContentHiding",{status:e.status}),i(e.logLevel,e.message)},logOnContentRendering(e){o("onContentRendering",{status:e.status,payload:e.detail}),i(e.logLevel,e.message)},info:i.bind(null,"info"),warn:i.bind(null,"warn"),error:i.bind(null,"error")}},Er="__view__",Cr=e=>(t,a)=>{e.xdm=e.xdm||{},e.xdm.identityMap=e.xdm.identityMap||{},e.xdm.identityMap[t]=e.xdm.identityMap[t]||[],e.xdm.identityMap[t].push(a)},Pr=e=>{const{payload:t,getAction:a,getUseSendBeacon:n,datastreamIdOverride:r,edgeSubPath:o}=e,i=l();let s=!1,c=!1;return{getId:()=>i,getPayload:()=>t,getAction:()=>a({isIdentityEstablished:c}),getDatastreamIdOverride:()=>r,getUseSendBeacon:()=>n({isIdentityEstablished:c}),getEdgeSubPath:()=>o||"",getUseIdThirdPartyDomain:()=>s,setUseIdThirdPartyDomain(){s=!0},setIsIdentityEstablished(){c=!0}}},Vr=({payload:e,datastreamIdOverride:t})=>{const a=({isIdentityEstablished:t})=>e.getDocumentMayUnload()&&t;return Pr({payload:e,getAction:({isIdentityEstablished:e})=>a({isIdentityEstablished:e})?"collect":"interact",getUseSendBeacon:a,datastreamIdOverride:t})},wr=e=>{const{content:t,addIdentity:a,hasIdentity:n}=e,r=he(t,"meta.configOverrides");return{mergeMeta:he(t,"meta"),mergeState:he(t,"meta.state"),mergeQuery:he(t,"query"),mergeConfigOverride:e=>r(ea(e)),addIdentity:a,hasIdentity:n,toJSON:()=>t}},kr=e=>t=>void 0!==(e.xdm&&e.xdm.identityMap&&e.xdm.identityMap[t]),Ar=()=>{const e={},t=wr({content:e,addIdentity:Cr(e),hasIdentity:kr(e)});return t.addEvent=t=>{e.events=e.events||[],e.events.push(t)},t.getDocumentMayUnload=()=>(e.events||[]).some((e=>e.getDocumentMayUnload())),t},Sr=({localConfigOverrides:e,globalConfigOverrides:t,payload:a})=>{const n={payload:a},{datastreamId:r,...o}=e||{};return r&&(n.datastreamIdOverride=r),t&&!ft(t)&&a.mergeConfigOverride(t),o&&!ft(o)&&a.mergeConfigOverride(o),n};const Tr="adb_validation_sessionid",Dr="validation.",xr="clientId",jr=e=>{let t=e.persistent.getItem(xr);return t||(t=l(),e.persistent.setItem(xr,t)),t};var Ir=({window:e,createNamespacedStorage:t})=>{const a=t(Dr);return()=>{const t=de.default.parse(e.location.search)[Tr];if(!t)return"";const n=`${t}|${jr(a)}`;return`&${de.default.stringify({adobeAepValidationToken:n})}`}};const Mr="Event was canceled because the onBeforeEventSend callback returned false.";var Or=({config:e,logger:t,lifecycle:a,consent:n,createEvent:r,createDataCollectionRequestPayload:o,createDataCollectionRequest:i,sendEdgeNetworkRequest:s,applyResponse:l})=>{const{onBeforeEventSend:c,edgeConfigOverrides:d}=e;return{createEvent:r,sendEvent(e,r={}){const{edgeConfigOverrides:l,...u}=r,g=Sr({payload:o(),localConfigOverrides:l,globalConfigOverrides:d}),m=i(g),p=be(),f=be();return a.onBeforeEvent({...u,event:e,onResponse:p.add,onRequestFailure:f.add}).then((()=>(g.payload.addEvent(e),n.awaitConsent()))).then((()=>{try{e.finalize(c)}catch(e){const t=()=>{throw e};return f.add(a.onRequestFailure),f.call({error:e}).then(t,t)}if(!e.shouldSend()){f.add(a.onRequestFailure),t.info(Mr);const e=new Error(Mr);return f.call({error:e}).then((()=>{}))}return s({request:m,runOnResponseCallbacks:p.call,runOnRequestFailureCallbacks:f.call})}))},applyResponse(e,t={}){const{renderDecisions:n=!1,decisionContext:r={},responseHeaders:s={},responseBody:c={handle:[]},personalization:d}=t,u=o(),g=i({payload:u}),m=be();return a.onBeforeEvent({event:e,renderDecisions:n,decisionContext:r,decisionScopes:[Er],personalization:d,onResponse:m.add,onRequestFailure:Qt}).then((()=>(u.addEvent(e),l({request:g,responseHeaders:s,responseBody:c,runOnResponseCallbacks:m.call}))))}}};const Rr="state:store";var Nr=({cookieJar:e,shouldTransferCookie:t,apexDomain:a,dateProvider:n})=>({cookiesToPayload(n,r){const o=""!==a&&r.endsWith(a),i={domain:a,cookiesEnabled:!0};if(!o){const a=e.get(),n=Object.keys(a).filter(t).map((e=>({key:e,value:a[e]})));n.length&&(i.entries=n)}n.mergeState(i)},responseToCookies(t){t.getPayloadsByType(Rr).forEach((t=>{const r={domain:a},o=t.attrs&&t.attrs.SameSite&&t.attrs.SameSite.toLowerCase();void 0!==t.maxAge&&(r.expires=new Date(n().getTime()+1e3*t.maxAge)),void 0!==o&&(r.sameSite=o),"none"===o&&(r.secure=!0),e.set(t.key,t.value,r)}))}});const Lr="mboxEdgeCluster",Ur="at_qa_mode",Fr="mbox";var qr=({orgId:e,targetMigrationEnabled:t})=>a=>zt(e,a)||a===Ur||t&&a===Fr,Xr="v1";const Br="TypeError",$r="NetworkError",Hr=e=>e.name===Br||e.name===$r||0===e.status;var Wr=e=>{const t=e.shift()||[],a=e.shift()||[];return me({},...t,...a,...e)},zr=e=>t=>{const a=()=>{throw t};return e.call({error:t}).then(a,a)};const Jr=(e,t)=>t.getUseIdThirdPartyDomain()&&Hr(e);var Gr=({config:e,lifecycle:t,cookieTransfer:a,sendNetworkRequest:n,createResponse:r,processWarningsAndErrors:o,getLocationHint:i,getAssuranceValidationTokenParams:s})=>{const{edgeDomain:l,edgeBasePath:c,datastreamId:d}=e;let u=!1;const g=(e,t)=>{const a=i(),n=a?`${c}/${a}${t.getEdgeSubPath()}`:`${c}${t.getEdgeSubPath()}`,r=t.getDatastreamIdOverride()||d;return r!==d&&t.getPayload().mergeMeta({sdkConfig:{datastream:{original:d}}}),`https://${e}/${n}/${Xr}/${t.getAction()}?configId=${r}&requestId=${t.getId()}${s()}`};return({request:e,runOnResponseCallbacks:i=Qt,runOnRequestFailureCallbacks:s=Qt})=>{const c=be();c.add(t.onResponse),c.add(i);const d=be();return d.add(t.onRequestFailure),d.add(s),t.onBeforeRequest({request:e,onResponse:c.add,onRequestFailure:d.add}).then((()=>{const t=u||!e.getUseIdThirdPartyDomain()?l:pr,r=g(t,e),o=e.getPayload();return a.cookiesToPayload(o,t),n({requestId:e.getId(),url:r,payload:o,useSendBeacon:e.getUseSendBeacon()})})).then((e=>(o(e),e))).catch((t=>{if(Jr(t,e)){u=!0,e.setUseIdThirdPartyDomain(!1);const t=g(l,e),r=e.getPayload();return a.cookiesToPayload(r,l),n({requestId:e.getId(),url:t,payload:r,useSendBeacon:e.getUseSendBeacon()})}return zr(d)(t)})).then((({parsedBody:e,getHeader:t})=>{const n=r({content:e,getHeader:t});return a.responseToCookies(n),c.call({response:n}).then(Wr)}))}};const Qr=204,Kr="The server responded with a";var Yr=({logger:e})=>t=>{const{statusCode:a,body:n,parsedBody:r}=t;if(a<200||a>=300||!r&&a!==Qr||r&&!Array.isArray(r.handle)){const e=r?JSON.stringify(r,null,2):n;throw new Error(`${Kr} status code ${a} and ${e?`response body:\n${e}`:"no response body."}`)}if(r){const{warnings:t=[],errors:a=[]}=r;t.forEach((t=>{e.warn(`${Kr} warning:`,t)})),a.forEach((t=>{e.error(`${Kr} non-fatal error:`,t)}))}},Zr=({orgId:e,cookieJar:t})=>{const a=Pt(e,Nt),n=()=>t.get(a),r=()=>{const e=t.get(Lr);if(e)return`t${e}`};return()=>n()||r()};const eo=3,to=[429,503,502,504];var ao=({response:e,retriesAttempted:t})=>t<eo&&to.includes(e.statusCode);const no=1e3,ro=1e3,oo=.3,io=e=>{const t=no+e*ro,a=t*oo,n=t-a,r=t+a;return Math.round(n+Math.random()*(r-n))},so=e=>{const t=e.getHeader(Yn);let a;if(t){const e=parseInt(t,10);a=Wt(e)?1e3*e:Math.max(0,new Date(t).getTime()-(new Date).getTime())}return a};var lo=({response:e,retriesAttempted:t})=>{let a=so(e);return void 0===a&&(a=io(t)),a};const co=200;var uo=({cookieTransfer:e,lifecycle:t,createResponse:a,processWarningsAndErrors:n})=>({request:r,responseHeaders:o,responseBody:i,runOnResponseCallbacks:s=Qt,runOnRequestFailureCallbacks:l=Qt})=>{const c=be();c.add(t.onResponse),c.add(s);const d=be();d.add(t.onRequestFailure),d.add(l);const u=e=>o[e];return t.onBeforeRequest({request:r,onResponse:c.add,onRequestFailure:d.add}).then((()=>n({statusCode:co,getHeader:u,body:JSON.stringify(i),parsedBody:i}))).catch(zr(d)).then((()=>{const t=a({content:i,getHeader:u});return e.responseToCookies(t),c.call({response:t}).then(Wr)}))},go=e=>t=>{const a={webPageDetails:{URL:e.location.href||e.location},webReferrer:{URL:e.document.referrer}};ye(t,{web:a})};const mo=e=>{const{screen:{orientation:t}}=e;if(null==t||null==t.type)return null;const a=t.type.split("-");return 0===a.length||"portrait"!==a[0]&&"landscape"!==a[0]?null:a[0]},po=e=>{if(Le(e.matchMedia)){if(e.matchMedia("(orientation: portrait)").matches)return"portrait";if(e.matchMedia("(orientation: landscape)").matches)return"landscape"}return null};var fo=e=>t=>{const{screen:{width:a,height:n}}=e,r={},o=oa(n);o>=0&&(r.screenHeight=o);const i=oa(a);i>=0&&(r.screenWidth=i);const s=mo(e)||po(e);s&&(r.screenOrientation=s),Object.keys(r).length>0&&ye(t,{device:r})},vo=e=>t=>{const{document:{documentElement:{clientWidth:a,clientHeight:n}={}}}=e,r={type:"browser"},o=oa(a);o>=0&&(r.browserDetails={viewportWidth:o});const i=oa(n);i>=0&&(r.browserDetails=r.browserDetails||{},r.browserDetails.viewportHeight=i),ye(t,{environment:r})},yo=e=>t=>{const a=e(),n={},r=oa(a.getTimezoneOffset());void 0!==r&&(n.localTimezoneOffset=r),(void 0===r||Math.abs(r)<6e3)&&(n.localTime=sa(a)),ye(t,{placeContext:n})},ho=e=>t=>{const a=e().toISOString();ye(t,{timestamp:a})},bo="https://ns.adobe.com/experience/alloy",_o="2.26.0",Eo=e=>{ye(e,{implementationDetails:{name:bo,version:_o,environment:"browser"}})},Co=(e,t,a,n)=>{const r=e.context.flatMap(((e,n)=>a[e]?[a[e]]:(t.warn(`Invalid context[${n}]: '${e}' is not available.`),[]))).concat(n);return{namespace:"Context",lifecycle:{onBeforeEvent({event:e}){const a={};return Promise.all(r.map((e=>Promise.resolve(e(a,t))))).then((()=>e.mergeXdm(a)))}}}},Po=[["architecture","string"],["bitness","string"],["model","string"],["platformVersion","string"],["wow64","boolean"]];const Vo=e=>void 0!==e.userAgentData;var wo=e=>Vo(e)?(t,a)=>{try{return e.userAgentData.getHighEntropyValues(Po.map((e=>e[0]))).then((e=>{const a={};Po.forEach((([t,n])=>{Object.prototype.hasOwnProperty.call(e,t)&&typeof e[t]===n&&(a[t]=e[t])})),ye(t,{environment:{browserDetails:{userAgentClientHints:a}}})}))}catch(e){return a.warn(`Unable to collect user-agent client hints. ${e.message}`),Qt}}:Qt;const ko=go(window),Ao=fo(window),So=vo(window),To=yo((()=>new Date)),Do=ho((()=>new Date)),xo={web:ko,device:Ao,environment:So,placeContext:To},jo={highEntropyUserAgentHints:wo(navigator)},Io={...xo,...jo},Mo=[Do,Eo],Oo=({config:e,logger:t})=>Co(e,t,Io,Mo);Oo.namespace="Context",Oo.configValidators=Vn({context:hn(wn()).default(Object.keys(xo))});var Ro=({options:e})=>Vn({type:wn(),xdm:Vn({eventType:wn(),identityMap:An}),data:Vn({}),documentUnloading:bn(),renderDecisions:bn(),decisionScopes:hn(wn()).uniqueItems(),personalization:Vn({decisionScopes:hn(wn()).uniqueItems(),surfaces:hn(wn()).uniqueItems(),sendDisplayEvent:bn().default(!0),includeRenderedPropositions:bn().default(!1),defaultPersonalizationEnabled:bn(),decisionContext:Vn({})}).default({sendDisplayEvent:!0}),datasetId:wn(),mergeId:wn(),edgeConfigOverrides:Sn,initializePersonalization:bn()}).required().noUnknownFields()(e),No=({options:e})=>Vn({renderDecisions:bn(),responseHeaders:Pn(wn().required()),responseBody:Vn({handle:hn(Vn({type:wn().required(),payload:yn().required()})).required()}).required(),personalization:Vn({sendDisplayEvent:bn().default(!0),decisionContext:Vn({})}).default({sendDisplayEvent:!0})}).noUnknownFields()(e);const Lo=({eventManager:e,logger:t})=>({commands:{sendEvent:{documentationUri:"https://adobe.ly/3GQ3Q7t",optionsValidator:e=>Ro({options:e}),run:a=>{const{xdm:n,data:r,documentUnloading:o,type:i,mergeId:s,datasetId:l,edgeConfigOverrides:c,...d}=a,u=e.createEvent();return o&&u.documentMayUnload(),u.setUserXdm(n),u.setUserData(r),i&&u.mergeXdm({eventType:i}),s&&u.mergeXdm({eventMergeId:s}),c&&(d.edgeConfigOverrides=c),l&&(t.warn("The 'datasetId' option has been deprecated. Please use 'edgeConfigOverrides.com_adobe_experience_platform.datasets.event.datasetId' instead."),d.edgeConfigOverrides=c||{},ye(d.edgeConfigOverrides,{com_adobe_experience_platform:{datasets:{event:{datasetId:l}}}})),e.sendEvent(u,d)}},applyResponse:{documentationUri:"",optionsValidator:e=>No({options:e}),run:t=>{const{renderDecisions:a=!1,decisionContext:n={},responseHeaders:r={},responseBody:o={handle:[]},personalization:i}=t,s=e.createEvent();return e.applyResponse(s,{renderDecisions:a,decisionContext:n,responseHeaders:r,responseBody:o,personalization:i})}}}});Lo.namespace="DataCollector";const Uo=(e,t)=>`ID sync ${t?"succeeded":"failed"}: ${e.spec.url}`;var Fo=({fireReferrerHideableImage:e,logger:t})=>a=>{const n=a.filter((e=>"url"===e.type));return n.length?Promise.all(n.map((a=>e(a.spec).then((()=>{t.info(Uo(a,!0))})).catch((()=>{t.error(Uo(a,!1))}))))).then(Qt):Promise.resolve()};const qo=Vn({thirdPartyCookiesEnabled:bn().default(!0),idMigrationEnabled:bn().default(!0)});var Xo=Vn({url:wn().required().nonEmpty(),edgeConfigOverrides:Sn}).required().noUnknownFields(),Bo="ECID",$o=({addEcidQueryToPayload:e,addQueryStringIdentityToPayload:t,ensureSingleIdentity:a,setLegacyEcid:n,handleResponseForIdSyncs:r,getNamespacesFromResponse:o,getIdentity:i,consent:s,appendIdentityToUrl:l,logger:c,getIdentityOptionsValidator:d,decodeKndctrCookie:u})=>{let g,m={};return{lifecycle:{onBeforeRequest:({request:n,onResponse:r,onRequestFailure:o})=>(e(n.getPayload()),t(n.getPayload()),a({request:n,onResponse:r,onRequestFailure:o})),onResponse({response:e}){const t=o(e);return g&&g[Bo]||!t||!t[Bo]||n(t[Bo]),t&&Object.keys(t).length>0&&(g={...g,...t}),m={...m,...e.getEdge()},r(e)}},commands:{getIdentity:{optionsValidator:d,run:e=>{const{namespaces:t}=e;return s.awaitConsent().then((()=>{if(g)return;const a=u();return a&&t.includes(Bo)&&(g||(g={}),g[Bo]=a,1===t.length)?void 0:i(e)})).then((()=>({identity:t.reduce(((e,t)=>(e[t]=g[t]||null,e)),{}),edge:m})))}},appendIdentityToUrl:{optionsValidator:Xo,run:e=>s.withConsent().then((()=>{if(g)return;const t=u();return t?(g||(g={}),void(g[Bo]=t)):i(e)})).then((()=>({url:l(g[Bo],e.url)}))).catch((t=>(c.warn(`Unable to append identity to url. ${t.message}`),e)))}}}},Ho=({config:e,getEcidFromVisitor:t,apexDomain:a,isPageSsl:n,cookieJar:r})=>{const{idMigrationEnabled:o,orgId:i}=e,s=`AMCV_${i}`,l=()=>{let e=null;const t="s_ecid",a=r.get(t)||r.get(s);if(a){const t=/(^|\|)MCMID\|(\d+)($|\|)/,n=a.match(t);n&&(e=n[2])}return e};return{getEcid(){if(o){const e=l();return e?Promise.resolve(e):t()}return Promise.resolve()},setEcid(e){if(o&&l()!==e){const t=n?{sameSite:"none",secure:!0}:{};r.set(s,`MCMID|${e}`,{domain:a,expires:390,...t})}}}},Wo=({logger:e})=>new Promise(((t,a)=>{if(ge(window.adobe)&&ge(window.adobe.optIn)){const n=window.adobe.optIn;e.info("Delaying request while waiting for legacy opt-in to let Visitor retrieve ECID from server."),n.fetchPermissions((()=>{n.isApproved([n.Categories.ECID])?(e.info("Received legacy opt-in approval to let Visitor retrieve ECID from server."),t()):a(new Error("Legacy opt-in was declined."))}),!0)}else t()})),zo=e=>{const t=e.Visitor;return Le(t)&&Le(t.getInstance)&&t},Jo=({logger:e,orgId:t,awaitVisitorOptIn:a})=>()=>{const n=zo(window);return n?a({logger:e}).then((()=>(e.info("Delaying request while using Visitor to retrieve ECID from server."),new Promise((a=>{n.getInstance(t,{}).getMarketingCloudVisitorID((t=>{e.info("Resuming previously delayed request that was waiting for ECID from Visitor."),a(t)}),!0)}))))).catch((t=>{t?e.info(`${t.message}, retrieving ECID from experience edge`):e.info("An error occurred while obtaining the ECID from Visitor.")})):Promise.resolve()},Go=({processIdSyncs:e})=>t=>e(t.getPayloadsByType("identity:exchange")),Qo=({doesIdentityCookieExist:e,setDomainForInitialIdentityPayload:t,addLegacyEcidToPayload:a,awaitIdentityCookie:n,logger:r})=>{let o;const i=e=>(t(e),a(e.getPayload()));return({request:t,onResponse:a,onRequestFailure:s})=>{if(e())return t.setIsIdentityEstablished(),Promise.resolve();if(o){r.info("Delaying request while retrieving ECID from server.");const e=o;return o=e.catch((()=>n({onResponse:a,onRequestFailure:s}))),e.then((()=>{r.info("Resuming previously delayed request."),t.setIsIdentityEstablished()})).catch((()=>i(t)))}return o=n({onResponse:a,onRequestFailure:s}),o.catch((()=>{})),i(t)}},Ko="CORE",Yo=({thirdPartyCookiesEnabled:e,areThirdPartyCookiesSupportedByDefault:t})=>{const a={identity:{fetch:[Bo]}};return e&&t()&&a.identity.fetch.push(Ko),e=>{e.mergeQuery(a)}},Zo=({thirdPartyCookiesEnabled:e,areThirdPartyCookiesSupportedByDefault:t})=>a=>{e&&t()&&a.setUseIdThirdPartyDomain()},ei=({getLegacyEcid:e,addEcidToPayload:t})=>a=>a.hasIdentity(Bo)?Promise.resolve():e().then((e=>{e&&t(a,e)})),ti="adobe_mc",ai=e=>{try{return decodeURIComponent(e)}catch{return""}};const ni=300;var ri=({locationSearch:e,dateProvider:t,orgId:a,logger:n})=>r=>{if(r.hasIdentity(Bo))return;let o=de.default.parse(e)[ti];if(void 0===o)return;Array.isArray(o)&&(n.warn("Found multiple adobe_mc query string paramters, only using the last one."),o=o[o.length-1]);const i=o.split("|").reduce(((e,t)=>{const[a,n]=t.split("=");return e[a]=ai(n),e[a]=e[a].replace(/[^a-zA-Z0-9@.]/g,""),e}),{}),s=parseInt(i.TS,10),l=i.MCMID,c=ai(i.MCORGID);t().getTime()/1e3<=s+ni&&c===a&&l?(n.info(`Found valid ECID identity ${l} from the adobe_mc query string parameter.`),r.addIdentity(Bo,{id:l})):n.info("Detected invalid or expired adobe_mc query string parameter.")},oi=(e,t)=>{e.addIdentity(Bo,{id:t})},ii=({doesIdentityCookieExist:e,orgId:t,logger:a})=>({onResponse:n,onRequestFailure:r})=>new Promise(((o,i)=>{n((()=>{e()?o():(a.warn(`Identity cookie not found. This could be caused by any of the following issues:\n\t* The org ID ${t} configured in Alloy doesn't match the org ID specified in the edge configuration.\n\t* Experience edge was not able to set the identity cookie due to domain or cookie restrictions.\n\t* The request was canceled by the browser and not fully processed.`),i(new Error("Identity cookie not found.")))})),r((()=>{e()?o():i(new Error("Identity cookie not found."))}))})),si=e=>e.getPayloadsByType("identity:result").reduce(((e,t)=>(t.namespace&&t.namespace.code&&(e[t.namespace.code]=t.id),e)),{}),li=({sendEdgeNetworkRequest:e,createIdentityRequestPayload:t,createIdentityRequest:a,globalConfigOverrides:n})=>({namespaces:r,edgeConfigOverrides:o}={})=>{const i=Sr({payload:t(r),globalConfigOverrides:n,localConfigOverrides:o}),s=a(i);return e({request:s})},ci=({payload:e,datastreamIdOverride:t})=>Pr({payload:e,datastreamIdOverride:t,getAction:()=>"identity/acquire",getUseSendBeacon:()=>!1}),di=e=>{const t={query:{identity:{fetch:e}}};return wr({content:t,addIdentity:Cr(t),hasIdentity:kr(t)})};const ui=/^([^?#]*)(\??[^#]*)(#?.*)$/,gi=e=>""===e?"?":"?"===e?"":"&";var mi=({dateProvider:e,orgId:t})=>(a,n)=>{const r=Math.round(e().getTime()/1e3),o=encodeURIComponent(`TS=${r}|MCMID=${a}|MCORGID=${encodeURIComponent(t)}`),[,i,s,l]=n.match(ui);return`${i}${s}${gi(s)}adobe_mc=${o}${l}`};const pi=Vn({namespaces:hn(kn(Bo,Ko)).nonEmpty().uniqueItems().default([Bo]),edgeConfigOverrides:Sn}).noUnknownFields().default({namespaces:[Bo]});var fi=({thirdPartyCookiesEnabled:e})=>t=>{const a=pi(t);if(!e&&a.namespaces.includes(Ko))throw new Error(`namespaces: The ${Ko} namespace cannot be requested when third-party cookies are disabled.`);return a};const vi=1,yi=(e,t)=>{let a,n=0,r=0;do{if(t<0||t+r>=e.length)throw new Error("Invalid varint: buffer ended unexpectedly");if(a=e[t+r],n|=(127&a)<<7*r,r+=1,r>10)throw new Error("Invalid varint: too long")}while(128&a);return{value:n,length:r}},hi=Object.freeze({VARINT:0,I64:1,LEN:2,SGROUP:3,EGROUP:4,I32:5}),bi=e=>{let t=0,a=null;for(;t<e.length&&!a;){const{value:n,length:r}=yi(e,t);t+=r;const o=7&n;if(n>>3===vi){if(o===hi.LEN){const n=yi(e,t);return t+=n.length,a=(new TextDecoder).decode(e.slice(t,t+n.value)),t+=n.value,a}}else switch(o){case hi.VARINT:t+=yi(e,t).length;break;case hi.I64:t+=8;break;case hi.LEN:{const a=yi(e,t);t+=a.length+a.value;break}case hi.SGROUP:case hi.EGROUP:break;case hi.I32:t+=4;break;default:throw new Error(`Malformed kndctr cookie. Unknown wire type: ${o}`)}}throw new Error("No ECID found in cookie.")},_i=e=>{const t=atob(e);return Uint8Array.from(t,(e=>e.codePointAt(0)))};var Ei=({orgId:e,cookieJar:t,logger:a})=>{const n=Pt(e,"identity");return()=>{const e=t.get(n);if(!e)return null;try{const t=decodeURIComponent(e).replace(/_/g,"/").replace(/-/g,"+"),a=_i(t);return bi(a)}catch(e){return a.warn(`Unable to decode ECID from ${n} cookie`,e),null}}};const Ci=({config:e,logger:t,consent:a,fireReferrerHideableImage:n,sendEdgeNetworkRequest:r,apexDomain:o,getBrowser:i})=>{const{orgId:s,thirdPartyCookiesEnabled:l,edgeConfigOverrides:c}=e,d=Jo({logger:t,orgId:s,awaitVisitorOptIn:Wo}),u=_e({logger:t,cookieJar:fe}),g=Ho({config:e,getEcidFromVisitor:d,apexDomain:o,cookieJar:u,isPageSsl:"https:"===window.location.protocol}),m=Lt({orgId:s}),p=li({sendEdgeNetworkRequest:r,createIdentityRequestPayload:di,createIdentityRequest:ci,globalConfigOverrides:c}),f=Mt({getBrowser:i}),v=Zo({thirdPartyCookiesEnabled:l,areThirdPartyCookiesSupportedByDefault:f}),y=ei({getLegacyEcid:g.getEcid,addEcidToPayload:oi}),h=ri({locationSearch:window.document.location.search,dateProvider:()=>new Date,orgId:s,logger:t}),b=ii({doesIdentityCookieExist:m,orgId:s,logger:t}),_=Qo({doesIdentityCookieExist:m,setDomainForInitialIdentityPayload:v,addLegacyEcidToPayload:y,awaitIdentityCookie:b,logger:t}),E=Fo({fireReferrerHideableImage:n,logger:t}),C=Go({processIdSyncs:E}),P=mi({dateProvider:()=>new Date,orgId:s}),V=fi({thirdPartyCookiesEnabled:l}),w=Yo({thirdPartyCookiesEnabled:l,areThirdPartyCookiesSupportedByDefault:f}),k=Ei({orgId:s,cookieJar:u,logger:t});return $o({addEcidQueryToPayload:w,addQueryStringIdentityToPayload:h,ensureSingleIdentity:_,setLegacyEcid:g.setEcid,handleResponseForIdSyncs:C,getNamespacesFromResponse:si,getIdentity:p,consent:a,appendIdentityToUrl:P,logger:t,getIdentityOptionsValidator:V,decodeKndctrCookie:k})};Ci.namespace="Identity",Ci.configValidators=qo;const Pi=({config:e,componentRegistry:t})=>{const a=[...t.getCommandNames(),tr,ar].sort(),n={...e};Object.keys(e).forEach((t=>{const a=e[t];"function"==typeof a&&(n[t]=a.toString())}));const r=t.getComponentNames();return{version:_o,configs:n,commands:a,components:r}},Vi=({config:e,componentRegistry:t})=>({commands:{getLibraryInfo:{run:()=>({libraryInfo:Pi({config:e,componentRegistry:t})})}}});Vi.namespace="LibraryInfo";var wi=Object.freeze({__proto__:null,context:Oo,dataCollector:Lo,identity:Ci,libraryInfo:Vi});const ki=Xt(window),{fetch:Ai,navigator:Si}=window,Ti=vr(),Di=_t(window,fe),xi=hr({fetch:Ai}),ji=pt(),Ii=Ir({window:window,createNamespacedStorage:ki}),Mi=Ft({userAgent:window.navigator.userAgent}),Oi=({instanceName:e,logController:{setDebugEnabled:t,logger:a,createComponentLogger:n},components:r})=>{const o=Rn(),i=Mn(o),s=r.concat(Object.values(wi)),l=e=>{t(e.enabled,{fromConfig:!1})},c=_e({logger:a,cookieJar:fe}),d=r=>{const l=dr({options:r,componentCreators:s,coreConfigValidators:Ti,createConfig:gr,logger:a,setDebugEnabled:t}),{orgId:d,targetMigrationEnabled:u}=l,g=qr({orgId:d,targetMigrationEnabled:u}),m=Nr({cookieJar:c,shouldTransferCookie:g,apexDomain:Di,dateProvider:()=>new Date}),p=Le(Si.sendBeacon)?br({sendBeacon:Si.sendBeacon.bind(Si),sendFetchRequest:xi,logger:a}):xi,f=Nn({logger:a,sendFetchRequest:xi,sendBeaconRequest:p,isRequestRetryable:ao,getRequestRetryDelay:lo}),v=Yr({logger:a}),y=Ln({logger:a}),h=er({extractEdgeInfo:y}),b=Zr({orgId:d,cookieJar:fe}),_=Gr({config:l,lifecycle:i,cookieTransfer:m,sendNetworkRequest:f,createResponse:h,processWarningsAndErrors:v,getLocationHint:b,getAssuranceValidationTokenParams:Ii}),E=uo({lifecycle:i,cookieTransfer:m,createResponse:h,processWarningsAndErrors:v}),C=Jn({logger:a}),P=Gn({generalConsentState:C,logger:a}),V=Or({config:l,logger:a,lifecycle:i,consent:P,createEvent:Kn,createDataCollectionRequestPayload:Ar,createDataCollectionRequest:Vr,sendEdgeNetworkRequest:_,applyResponse:E});return ur({componentCreators:s,lifecycle:i,componentRegistry:o,getImmediatelyAvailableTools(t){const a=n(t);return{config:l,componentRegistry:o,consent:P,eventManager:V,fireReferrerHideableImage:ji,logger:a,lifecycle:i,sendEdgeNetworkRequest:_,handleError:yr({errorPrefix:`[${e}] [${t}]`,logger:a}),createNamespacedStorage:ki,apexDomain:Di,getBrowser:Mi}}})},u=yr({errorPrefix:`[${e}]`,logger:a});return nr({logger:a,configureCommand:d,setDebugCommand:l,handleError:u,validateCommandOptions:or})},Ri=({eventManager:e,lifecycle:t,handleError:a})=>n=>{if(n.s_fe)return Promise.resolve();const r=n.target,o=e.createEvent();return o.documentMayUnload(),t.onClick({event:o,clickedElement:r}).then((()=>o.isEmpty()?Promise.resolve():e.sendEvent(o))).then(Qt).catch((e=>{a(e,"click collection")}))};var Ni=({eventManager:e,lifecycle:t,handleError:a})=>{const n=Ri({eventManager:e,lifecycle:t,handleError:a});document.addEventListener("click",n,!0)};const Li="\\.(exe|zip|wav|mp3|mov|mpg|avi|wmv|pdf|doc|docx|xls|xlsx|ppt|pptx)$",Ui=wn().regexp().default(Li),Fi=Vn({clickCollectionEnabled:bn().default(!0),clickCollection:Vn({internalLinkEnabled:bn().default(!0),externalLinkEnabled:bn().default(!0),downloadLinkEnabled:bn().default(!0),sessionStorageEnabled:bn().default(!1),eventGroupingEnabled:bn().default(!1),filterClickProperties:_n()}).default({internalLinkEnabled:!0,externalLinkEnabled:!0,downloadLinkEnabled:!0,sessionStorageEnabled:!1,eventGroupingEnabled:!1}),downloadLinkQualifier:Ui,onBeforeLinkClickSend:_n().deprecated('The field "onBeforeLinkClickSend" has been deprecated. Use "clickCollection.filterClickDetails" instead.')}),qi="cppXYctnr";var Xi=(e=document)=>null!==e.getElementById(qi),Bi=e=>{let t=e;return/^https?:\/\//i.test(t)||(t=`${window.location.protocol}//${e}`),new URL(t).hostname},$i=(e,t)=>Bi(e)!==Bi(t);const Hi=(e,t)=>t&&("download"===t&&!e.downloadLinkEnabled||"exit"===t&&!e.externalLinkEnabled||"other"===t&&!e.internalLinkEnabled);var Wi=({config:e,logger:t,getClickedElementProperties:a,clickActivityStorage:n})=>{const{clickCollectionEnabled:r,clickCollection:o}=e;return r?({event:r,clickedElement:i})=>{const s=a({clickActivityStorage:n,clickedElement:i,config:e,logger:t}),l=s.linkType;Xi()||(s.isValidLink()&&Hi(o,l)?t.info(`Cancelling link click event due to clickCollection.${l}LinkEnabled = false.`):!s.isInternalLink()||!o.eventGroupingEnabled||e.onBeforeLinkClickSend&&!o.filterClickDetails||$i(window.location.hostname,s.linkUrl)?s.isValidLink()?(r.mergeXdm(s.xdm),r.mergeData(s.data),n.save({pageName:s.pageName,pageIDType:s.pageIDType})):s.isValidActivityMapData()&&n.save(s.properties):n.save(s.properties))}:()=>{}};const zi=e=>({eventType:"web.webinteraction.linkClicks",web:{webInteraction:{name:e.linkName,region:e.linkRegion,type:e.linkType,URL:e.linkUrl,linkClicks:{value:1}}}}),Ji=e=>({__adobe:{analytics:{contextData:{a:{activitymap:{page:e.pageName,link:e.linkName,region:e.linkRegion,pageIDType:e.pageIDType}}}}}}),Gi=(e,t)=>{const{xdm:a,data:n,clickedElement:r}=e;if(t.clickedElement=r,a&&a.web&&a.web.webInteraction){const{name:e,region:n,type:r,URL:o}=a.web.webInteraction;t.linkName=e,t.linkRegion=n,t.linkType=r,t.linkUrl=o}if(n&&n.__adobe&&n.__adobe.analytics){const{contextData:e}=n.__adobe.analytics;if(e&&e.a&&e.a.activitymap){const{page:a,link:n,region:r,pageIDType:o}=e.a.activitymap;t.pageName=a||t.pageName,t.linkName=n||t.linkName,t.linkRegion=r||t.linkRegion,void 0!==o&&(t.pageIDType=o)}}};var Qi=({properties:e,logger:t}={})=>{let a=e||{};return{get pageName(){return a.pageName},set pageName(e){a.pageName=e},get linkName(){return a.linkName},set linkName(e){a.linkName=e},get linkRegion(){return a.linkRegion},set linkRegion(e){a.linkRegion=e},get linkType(){return a.linkType},set linkType(e){a.linkType=e},get linkUrl(){return a.linkUrl},set linkUrl(e){a.linkUrl=e},get pageIDType(){return a.pageIDType},set pageIDType(e){a.pageIDType=e},get clickedElement(){return a.clickedElement},set clickedElement(e){a.clickedElement=e},get properties(){return{pageName:a.pageName,linkName:a.linkName,linkRegion:a.linkRegion,linkType:a.linkType,linkUrl:a.linkUrl,pageIDType:a.pageIDType}},isValidLink:()=>!!(a.linkUrl&&a.linkType&&a.linkName&&a.linkRegion),isInternalLink(){return this.isValidLink()&&"other"===a.linkType},isValidActivityMapData:()=>!!a.pageName&&!!a.linkName&&!!a.linkRegion&&void 0!==a.pageIDType,get xdm(){return a.filteredXdm?a.filteredXdm:zi(this)},get data(){return a.filteredData?a.filteredData:Ji(this)},applyPropertyFilter(e){e&&!1===e(a)&&(t&&t.info(`Clicked element properties were rejected by filter function: ${JSON.stringify(this.properties,null,2)}`),a={})},applyOptionsFilter(e){const n=this.options;if(n&&n.clickedElement&&(n.xdm||n.data)){if(e&&!1===e(n))return t&&t.info(`Clicked element properties were rejected by filter function: ${JSON.stringify(this.properties,null,2)}`),void(this.options=void 0);this.options=n,a.filteredXdm=n.xdm,a.filteredData=n.data}},get options(){const e={};if(this.isValidLink()&&(e.xdm=this.xdm),this.isValidActivityMapData()&&(e.data=this.data),this.clickedElement&&(e.clickedElement=this.clickedElement),e.xdm||e.data)return e},set options(e){a={},e&&Gi(e,a)}}},Ki=({clickActivityStorage:e})=>t=>{if(Xi())return;const a=e.load(),n=Qi({properties:a});if(n.isValidLink()||n.isValidActivityMapData()){if(n.isValidLink()){const e=n.xdm;delete e.eventType,t.mergeXdm(e)}n.isValidActivityMapData()&&t.mergeData(n.data),e.save({pageName:n.pageName,pageIDType:n.pageIDType})}},Yi=({window:e,getLinkName:t,getLinkRegion:a,getAbsoluteUrlFromAnchorElement:n,findClickableElement:r,determineLinkType:o})=>({clickedElement:i,config:s,logger:l,clickActivityStorage:c})=>{const{onBeforeLinkClickSend:d,clickCollection:u}=s,{filterClickDetails:g}=u,m=Qi({logger:l});if(i){const l=r(i);if(l){m.clickedElement=i,m.linkUrl=n(e,l),m.linkType=o(e,s,m.linkUrl,l),m.linkRegion=a(l),m.linkName=t(l),m.pageIDType=0,m.pageName=e.location.href;const r=c.load();r&&r.pageName&&(m.pageName=r.pageName,m.pageIDType=1),g?m.applyPropertyFilter(g):d&&m.applyOptionsFilter(d)}}return m};const Zi="clickData";var es=({storage:e})=>({save:t=>{const a=JSON.stringify(t);e.setItem(Zi,a)},load:()=>{let t=null;const a=e.getItem(Zi);return a&&(t=JSON.parse(a)),t},remove:()=>{e.removeItem(Zi)}}),ts=({clickActivityStorage:e})=>t=>{e.save({pageName:t.getContent().xdm.web.webPageDetails.name,pageIDType:1})},as=(e,t)=>{const{clickCollectionEnabled:a,onBeforeLinkClickSend:n,downloadLinkQualifier:r}=e;!1===a&&(n&&t.warn("The 'onBeforeLinkClickSend' configuration was provided but will be ignored because clickCollectionEnabled is false."),
r&&r!==Li&&t.warn("The 'downloadLinkQualifier' configuration was provided but will be ignored because clickCollectionEnabled is false."))},ns=e=>e&&e.replace(/\s+/g," ").trim();const rs=/^(SCRIPT|STYLE|LINK|CANVAS|NOSCRIPT|#COMMENT)$/i;var os=e=>!(e&&e.nodeName&&e.nodeName.match(rs));const is=e=>{let t=[],a=!1;return os(e)?(t.push(e),e.childNodes&&Array.prototype.slice.call(e.childNodes).forEach((e=>{const n=is(e);t=t.concat(n.supportedNodes),a=a||n.includesUnsupportedNodes}))):a=!0,{supportedNodes:t,includesUnsupportedNodes:a}},ss=(e,t,a)=>{let n;return a&&a!==e.nodeName.toUpperCase()||(n=e.getAttribute(t)),n},ls=e=>{const t={texts:[]};return e.supportedNodes.forEach((e=>{e.getAttribute&&(t.alt||(t.alt=ns(e.getAttribute("alt"))),t.title||(t.title=ns(e.getAttribute("title"))),t.inputValue||(t.inputValue=ns(ss(e,"value","INPUT"))),t.imgSrc||(t.imgSrc=ns(ss(e,"src","IMG")))),e.nodeValue&&t.texts.push(e.nodeValue)})),t},cs=/^(HEADER|MAIN|FOOTER|NAV)$/i,ds=e=>{let t;return"region"===e.role&&Gt(e["aria-label"])&&(t=e["aria-label"]),t},us=e=>{let t;return e&&e.nodeName&&e.nodeName.match(cs)&&(t=e.nodeName),t};var gs=e=>!!e&&/^[a-z0-9]+:\/\//i.test(e),ms=e=>!(!e.href||"A"!==e.tagName&&"AREA"!==e.tagName||e.onclick&&e.protocol&&!(e.protocol.toLowerCase().indexOf("javascript")<0)),ps=e=>!!e&&!!e.onclick,fs=e=>{if("INPUT"===e.tagName){const t=e.getAttribute("type");if("submit"===t)return!0;if("image"===t&&e.src)return!0}return!1},vs=e=>"BUTTON"===e.tagName&&"submit"===e.type,ys=e=>{const t=e.indexOf("?"),a=e.indexOf("#");return t>=0&&(t<a||a<0)?e.substring(0,t):a>=0?e.substring(0,a):e},hs=(e,t,a)=>{let n=!1;if(t)if(a&&a.download)n=!0;else if(e){const a=new RegExp(e),r=ys(t).toLowerCase();n=a.test(r)}return n},bs=(e,t)=>{let a=!1;if(t&&e.location.hostname){const n=e.location.hostname.toLowerCase();a=ys(t).toLowerCase().indexOf(n)<0}return a},_s=e=>{const t=e.getContent();return void 0!==t.xdm&&void 0!==t.xdm.web&&void 0!==t.xdm.web.webPageDetails&&void 0!==t.xdm.web.webPageDetails.name},Es=()=>{const e={};return{getItem:t=>e[t],setItem:(t,a)=>{e[t]=a},removeItem:t=>{delete e[t]}}};const Cs=Yi({window:window,getLinkName:e=>{let t=ns(e.innerText||e.textContent);const a=is(e);if(!t||a.includesUnsupportedNodes){const e=ls(a);t=ns(e.texts.join("")),t||(t=e.alt||e.title||e.inputValue||e.imgSrc)}return t||""},getLinkRegion:e=>{let t,a=e.parentNode;for(;a;){if(t=ns(a.id||ds(a)||us(a)),t)return t;a=a.parentNode}return"BODY"},getAbsoluteUrlFromAnchorElement:(e,t)=>{const a=e.location;let n=t.href||"";"string"!=typeof n&&(n="");let{protocol:r,host:o}=t;if(n&&!gs(n)){r||(r=a.protocol?a.protocol:""),r=r?`${r}//`:"",o||(o=a.host?a.host:"");let e="";if("/"!==n.substring(0,1)){let t=a.pathname.lastIndexOf("/");t=t<0?0:t,e=a.pathname.substring(0,t)}n=`${r}${o}${e}/${n}`}return n},findClickableElement:e=>{let t=e;for(;t;){if(ms(t)||ps(t)||fs(t)||vs(t))return t;t=t.parentNode}return null},determineLinkType:(e,t,a,n)=>{let r="other";return Gt(a)&&(hs(t.downloadLinkQualifier,a,n)?r="download":bs(e,a)&&(r="exit")),r}});let Ps;const Vs=e=>{if(!Ps){const t=Xt(window)(e.orgId||""),a=Es(),n=e.clickCollection.sessionStorageEnabled?t.session:a;Ps=es({storage:n})}},ws=({config:e,eventManager:t,handleError:a,logger:n})=>{as(e,n);const r=e.clickCollection;Ps||Vs(e);const o=Wi({config:e,logger:n,clickActivityStorage:Ps,getClickedElementProperties:Cs}),i=Ki({clickActivityStorage:Ps}),s=ts({clickActivityStorage:Ps});return{lifecycle:{onComponentsRegistered(e){const{lifecycle:n}=e;Ni({eventManager:t,lifecycle:n,handleError:a})},onClick({event:e,clickedElement:t}){o({event:e,clickedElement:t})},onBeforeEvent({event:e}){_s(e)&&(r.eventGroupingEnabled&&i(e),s(e,n,Ps))}}}};ws.namespace="ActivityCollector",ws.configValidators=Fi,ws.buildOnInstanceConfiguredExtraParams=({config:e,logger:t})=>(Ps||Vs(e),{getLinkDetails:a=>Cs({clickActivityStorage:Ps,clickedElement:a,config:e,logger:t}).properties});const ks=e=>`URL destination succeeded: ${e.spec.url}`;var As=({fireReferrerHideableImage:e,logger:t,cookieJar:a,isPageSsl:n})=>{const r=n?{sameSite:"none",secure:!0}:{},o=e=>{e.filter((e=>"cookie"===e.type)).forEach((e=>{const{name:t,value:n,domain:o,ttlDays:i}=e.spec;a.set(t,n||"",{domain:o||"",expires:i||10,...r})}))},i=a=>{const n=a.filter((e=>"url"===e.type));return Promise.all(n.map((a=>e(a.spec).then((()=>{t.info(ks(a))})).catch((()=>{}))))).then(Qt)};return e=>(o(e),i(e))},Ss=({processDestinations:e})=>{const t=({response:t})=>{const a=t.getPayloadsByType("activation:push");return e(a)},a=({response:e})=>({destinations:e.getPayloadsByType("activation:pull")});return({response:e})=>t({response:e}).then((()=>a({response:e})))};const Ts=({logger:e,fireReferrerHideableImage:t})=>{const a=fe.withConverter({write:e=>encodeURIComponent(e)}),n=_e({logger:e,cookieJar:a}),r=As({fireReferrerHideableImage:t,logger:e,cookieJar:n,isPageSsl:"https:"===window.location.protocol});return{lifecycle:{onResponse:Ss({processDestinations:r})},commands:{}}};Ts.namespace="Audiences";var Ds=({storedConsent:e,taskQueue:t,defaultConsent:a,consent:n,sendSetConsentRequest:r,validateSetConsentOptions:o,consentHashStore:i,doesIdentityCookieExist:s})=>{const l={[Xn]:a};let c=e.read();const d=s(),u=void 0!==c[Xn];d&&u||i.clear(),d||(e.clear(),c={}),n.initializeConsent(l,c);const g=()=>{if(0===t.length){const t=e.read();void 0!==t[Xn]&&n.setConsent(t)}};return{commands:{setConsent:{optionsValidator:o,run:({consent:e,identityMap:a,edgeConfigOverrides:o})=>{n.suspend();const s=i.lookup(e);return t.addTask((()=>s.isNew()?r({consentOptions:e,identityMap:a,edgeConfigOverrides:o}):Promise.resolve())).then((()=>s.save())).finally(g)}}},lifecycle:{onResponse:g,onRequestFailure:g}}};const xs=e=>Array.isArray(e)?e.map((e=>xs(e))):"object"==typeof e&&null!==e?Object.keys(e).sort().reduce(((t,a)=>(t[a]=xs(e[a]),t)),{}):e;var js=e=>Ce(JSON.stringify(xs(e)));const Is=({standard:e,version:t})=>`${e}.${t}`;var Ms=({storage:e})=>({clear(){e.clear()},lookup(t){const a={},n=e=>{const t=Is(e),{standard:n,version:r,...o}=e;return a[t]||(a[t]=js(o).toString()),a[t]};return{isNew:()=>t.some((t=>{const a=Is(t),r=e.getItem(a);return null===r||r!==n(t)})),save(){t.forEach((t=>{const a=Is(t);e.setItem(a,n(t))}))}}}}),Os=()=>{const e={},t=wr({content:e,addIdentity:(t,a)=>{e.identityMap=e.identityMap||{},e.identityMap[t]=e.identityMap[t]||[],e.identityMap[t].push(a)},hasIdentity:t=>void 0!==(e.identityMap&&e.identityMap[t])});return t.setConsent=t=>{e.consent=t},t},Rs=({payload:e,datastreamIdOverride:t})=>Pr({payload:e,datastreamIdOverride:t,getAction:()=>"privacy/set-consent",getUseSendBeacon:()=>!1}),Ns=({parseConsentCookie:e,orgId:t,cookieJar:a})=>{const n=Pt(t,Rt);return{read(){const t=a.get(n);return t?e(t):{}},clear(){a.remove(n)}}},Ls=({createConsentRequestPayload:e,createConsentRequest:t,sendEdgeNetworkRequest:a,edgeConfigOverrides:n})=>({consentOptions:r,identityMap:o,edgeConfigOverrides:i})=>{const s=Sr({payload:e(),globalConfigOverrides:n,localConfigOverrides:i});s.payload.setConsent(r),ge(o)&&Object.keys(o).forEach((e=>{o[e].forEach((t=>{s.payload.addIdentity(e,t)}))}));const l=t(s);return a({request:l}).then((()=>{}))},Us=e=>e.split(";").reduce(((e,t)=>{const[a,n]=t.split("=");return e[a]=n,e}),{}),Fs=Vn({consent:hn(yn()).required().nonEmpty(),identityMap:An,edgeConfigOverrides:Sn}).noUnknownFields().required(),qs=Vn({defaultConsent:kn(Un,Fn,qn).default(Un)});const Xs=({config:e,consent:t,sendEdgeNetworkRequest:a,createNamespacedStorage:n})=>{const{orgId:r,defaultConsent:o}=e,i=Ns({parseConsentCookie:Us,orgId:r,cookieJar:fe}),s=Ee(),l=Ls({createConsentRequestPayload:Os,createConsentRequest:Rs,sendEdgeNetworkRequest:a,edgeConfigOverrides:e.edgeConfigOverrides}),c=n(`${Ct(r)}.consentHashes.`),d=Ms({storage:c.persistent}),u=Lt({orgId:r});return Ds({storedConsent:i,taskQueue:s,defaultConsent:o,consent:t,sendSetConsentRequest:l,validateSetConsentOptions:Fs,consentHashStore:d,doesIdentityCookieExist:u})};Xs.namespace="Consent",Xs.configValidators=qs;var Bs=()=>({eventMergeId:l()});t.createEventMergeId=Bs;var $s=({createEventMergeId:e})=>({commands:{createEventMergeId:{run:e}}});const Hs=()=>$s({createEventMergeId:Bs});Hs.namespace="EventMerge";var Ws={PAUSE:"media.pauseStart",PLAY:"media.play",BUFFER_START:"media.bufferStart",AD_START:"media.adStart",Ad_BREAK_START:"media.adBreakStart",SESSION_END:"media.sessionEnd",SESSION_START:"media.sessionStart",SESSION_COMPLETE:"media.sessionComplete",PING:"media.ping",AD_BREAK_COMPLETE:"media.adBreakComplete",AD_COMPLETE:"media.adComplete",AD_SKIP:"media.adSkip",BITRATE_CHANGE:"media.bitrateChange",CHAPTER_COMPLETE:"media.chapterComplete",CHAPTER_SKIP:"media.chapterSkip",CHAPTER_START:"media.chapterStart",ERROR:"media.error",STATES_UPDATE:"media.statesUpdate"},zs=({mediaRequestPayload:e,action:t})=>Pr({payload:e,edgeSubPath:"/va",getAction:()=>t,getUseSendBeacon:()=>!1}),Js=({config:e,eventManager:t,consent:a,sendEdgeNetworkRequest:n,setTimestamp:r})=>({createMediaEvent({options:a}){const n=t.createEvent(),{xdm:o}=a;if(r(o),n.setUserXdm(o),o.eventType===Ws.AD_START){const{advertisingDetails:t}=a.xdm.mediaCollection;n.mergeXdm({mediaCollection:{advertisingDetails:{playerName:t.playerName||e.streamingMedia.playerName}}})}return n},createMediaSession(a){const{playerName:n,channel:r,appVersion:o}=e.streamingMedia,i=t.createEvent(),{sessionDetails:s}=a.xdm.mediaCollection;return i.setUserXdm(a.xdm),i.mergeXdm({eventType:Ws.SESSION_START,mediaCollection:{sessionDetails:{playerName:s.playerName||n,channel:s.channel||r,appVersion:s.appVersion||o}}}),i},augmentMediaEvent({event:e,playerId:t,getPlayerDetails:a,sessionID:n}){if(!t||!a)return e;const{playhead:r,qoeDataDetails:o}=a({playerId:t});return e.mergeXdm({mediaCollection:{playhead:oa(r),qoeDataDetails:o,sessionID:n}}),e},trackMediaSession({event:e,mediaOptions:a,edgeConfigOverrides:n}){const r={mediaOptions:a,edgeConfigOverrides:n};return t.sendEvent(e,r)},trackMediaEvent({event:e,action:t}){const r=Ar(),o=zs({mediaRequestPayload:r,action:t});return r.addEvent(e),e.finalize(),a.awaitConsent().then((()=>n({request:o}).then((()=>({})))))}}),Gs={MAIN:"main",COMPLETED:"completed"},Qs=()=>{let e;return{getSession:t=>e[t]||{},storeSession:({playerId:t,sessionDetails:a})=>{void 0===e&&(e={}),e[t]=a},stopPing:({playerId:t})=>{const a=e[t];a&&(clearTimeout(a.pingId),a.pingId=null,a.playbackState=Gs.COMPLETED)},savePing:({playerId:t,pingId:a,playbackState:n})=>{e[t]&&(e[t].pingId&&clearTimeout(e[t].pingId),e[t].pingId=a,e[t].playbackState=n)}}};const Ks=(e,t)=>e===Ws.AD_START||e===Ws.Ad_BREAK_START||e===Ws.AD_SKIP||e===Ws.AD_COMPLETE?"ad":e===Ws.AD_BREAK_COMPLETE||e===Ws.CHAPTER_COMPLETE||e===Ws.CHAPTER_START||e===Ws.CHAPTER_SKIP||e===Ws.SESSION_START?"main":e===Ws.SESSION_END||e===Ws.SESSION_COMPLETE?"completed":t;var Ys=({mediaEventManager:e,mediaSessionCacheManager:t,config:a})=>{const n=r=>{const o=e.createMediaEvent({options:r}),{playerId:i,xdm:s}=r,{eventType:l}=s,c=l.split(".")[1],{getPlayerDetails:d,sessionPromise:u,playbackState:g}=t.getSession(i);return u.then((r=>r.sessionId?(e.augmentMediaEvent({event:o,eventType:l,playerId:i,getPlayerDetails:d,sessionID:r.sessionId}),e.trackMediaEvent({event:o,action:c}).then((()=>{if(i)if(l===Ws.SESSION_COMPLETE||l===Ws.SESSION_END)t.stopPing({playerId:i});else{const e=Ks(l,g);if("completed"===e)return;const r="ad"===e?a.streamingMedia.adPingInterval:a.streamingMedia.mainPingInterval,o=setTimeout((()=>{const e={playerId:i,xdm:{eventType:Ws.PING}};n(e)}),1e3*r);t.savePing({playerId:i,pingId:o,playbackState:e})}}))):Promise.reject(new Error(`Failed to trigger media event: ${l}. Session ID is not available for playerId: ${i}.`))))};return e=>n(e)},Zs=({config:e,mediaEventManager:t,mediaSessionCacheManager:a,legacy:n=!1})=>r=>{if(!e.streamingMedia)return Promise.reject(new Error("Streaming media is not configured."));const{playerId:o,getPlayerDetails:i,edgeConfigOverrides:s}=r,l=t.createMediaSession(r);t.augmentMediaEvent({event:l,playerId:o,getPlayerDetails:i});const c=t.trackMediaSession({event:l,mediaOptions:{playerId:o,getPlayerDetails:i,legacy:n},edgeConfigOverrides:s});return a.storeSession({playerId:o,sessionDetails:{sessionPromise:c,getPlayerDetails:i,playbackState:Gs.MAIN}}),c},el=e=>!Jt(e)||!e.trim(),tl=({mediaSessionCacheManager:e,config:t,trackMediaEvent:a})=>({response:n,playerId:r,getPlayerDetails:o})=>{const i=n.getPayloadsByType("media-analytics:new-session");if(Ue(i)){const{sessionId:n}=i[0];if(el(n))return{};if(!r||!o)return{sessionId:n};const s=setTimeout((()=>{a({playerId:r,xdm:{eventType:Ws.PING}})}),1e3*t.streamingMedia.mainPingInterval);return e.savePing({playerId:r,pingId:s,playbackState:Gs.MAIN}),{sessionId:n}}return{}};const al={Video:"video",Audio:"audio"},nl={VOD:"vod",Live:"live",Linear:"linear",Podcast:"podcast",Audiobook:"audiobook",AOD:"aod"},rl={FullScreen:"fullScreen",ClosedCaption:"closedCaptioning",Mute:"mute",PictureInPicture:"pictureInPicture",InFocus:"inFocus"},ol={AdBreakStart:"adBreakStart",AdBreakComplete:"adBreakComplete",AdStart:"adStart",AdComplete:"adComplete",AdSkip:"adSkip",ChapterStart:"chapterStart",ChapterComplete:"chapterComplete",ChapterSkip:"chapterSkip",SeekStart:"seekStart",SeekComplete:"seekComplete",BufferStart:"bufferStart",BufferComplete:"bufferComplete",BitrateChange:"bitrateChange",StateStart:"stateStart",StateEnd:"stateEnd"},il={SessionStart:"sessionStart",SessionEnd:"sessionEnd",SessionComplete:"sessionComplete",Play:"play",Pause:"pauseStart",Error:"error",StateUpdate:"statesUpdate"},sl={MediaResumed:"media.resumed",GranularAdTracking:"media.granularadtracking"},ll={Show:"a.media.show",Season:"a.media.season",Episode:"a.media.episode",AssetId:"a.media.asset",Genre:"a.media.genre",FirstAirDate:"a.media.airDate",FirstDigitalDate:"a.media.digitalDate",Rating:"a.media.rating",Originator:"a.media.originator",Network:"a.media.network",ShowType:"a.media.type",AdLoad:"a.media.adLoad",MVPD:"a.media.pass.mvpd",Authorized:"a.media.pass.auth",DayPart:"a.media.dayPart",Feed:"a.media.feed",StreamFormat:"a.media.format"},cl={Artist:"a.media.artist",Album:"a.media.album",Label:"a.media.label",Author:"a.media.author",Station:"a.media.station",Publisher:"a.media.publisher"},dl={Advertiser:"a.media.ad.advertiser",CampaignId:"a.media.ad.campaign",CreativeId:"a.media.ad.creative",PlacementId:"a.media.ad.placement",SiteId:"a.media.ad.site",CreativeUrl:"a.media.ad.creativeURL"};var ul=({trackMediaEvent:e,trackMediaSession:t,mediaResponseHandler:a,logger:n,createMediaHelper:r,createGetInstance:o,config:i})=>({lifecycle:{onBeforeEvent({mediaOptions:e,onResponse:t=Qt}){if(!e)return;const{legacy:n,playerId:r,getPlayerDetails:o}=e;n&&t((({response:e})=>a({playerId:r,getPlayerDetails:o,response:e})))}},commands:{getMediaAnalyticsTracker:{run:()=>{if(!i.streamingMedia)return Promise.reject(new Error("Streaming media is not configured."));n.info("Streaming media is configured in legacy mode.");const a=r({logger:n});return Promise.resolve({getInstance:()=>o({logger:n,trackMediaEvent:e,trackMediaSession:t,uuid:l}),Event:ol,MediaType:al,PlayerState:rl,StreamType:nl,MediaObjectKey:sl,VideoMetadataKeys:ll,AudioMetadataKeys:cl,AdMetadataKeys:dl,...a})}}}}),gl=({logger:e})=>{const t=(t,a,n)=>{const r={friendlyName:t,offset:a,index:n},o=Vn({friendlyName:wn().nonEmpty(),offset:Cn(),index:Cn()});try{const e=o(r);return{advertisingPodDetails:{friendlyName:e.friendlyName,offset:e.offset,index:e.index}}}catch(t){return e.warn("An error occurred while creating the Ad Break Object.",t),{}}},a=(t,a,n,r)=>{const o={friendlyName:t,name:a,podPosition:n,length:r},i=Vn({friendlyName:wn().nonEmpty(),name:wn().nonEmpty(),podPosition:Cn(),length:Cn()});try{const e=i(o);return{advertisingDetails:{friendlyName:e.friendlyName,name:e.name,podPosition:e.podPosition,length:e.length}}}catch(t){return e.warn("An error occurred while creating the Advertising Object.",t),{}}},n=(t,a,n,r)=>{const o={friendlyName:t,offset:a,length:n,index:r},i=Vn({friendlyName:wn().nonEmpty(),offset:Cn(),length:Cn(),index:Cn()});try{const e=i(o);return{chapterDetails:{friendlyName:e.friendlyName,offset:e.offset,index:e.index,length:e.length}}}catch(t){return e.warn("An error occurred while creating the Chapter Object.",t),{}}},r=t=>{const a=/^[a-zA-Z0-9_]{1,64}$/,n=wn().matches(a,"This is not a valid state name.");try{return{name:n(t)}}catch(t){return e.warn("An error occurred while creating the State Object.",t),{}}},o=(t,a,n,r)=>{const o={bitrate:t,droppedFrames:a,fps:n,startupTime:r},i=Vn({bitrate:Cn(),droppedFrames:Cn(),fps:Cn(),startupTime:Cn()});try{const e=i(o);return{bitrate:e.bitrate,droppedFrames:e.droppedFrames,framesPerSecond:e.fps,timeToStart:e.startupTime}}catch(t){return e.warn("An error occurred while creating the QOE Object.",t),{}}};return{createMediaObject:(t,a,n,r,o)=>{const i={friendlyName:t,name:a,length:n,streamType:o,contentType:r},s=Vn({friendlyName:wn().nonEmpty(),name:wn().nonEmpty(),length:Cn().required(),streamType:wn().nonEmpty(),contentType:wn().nonEmpty()});try{const e=s(i);return{sessionDetails:{name:e.name,friendlyName:e.friendlyName,length:e.length,streamType:e.streamType,contentType:e.contentType}}}catch(t){return e.warn("An error occurred while creating the Media Object.",t),{}}},createAdBreakObject:t,createAdObject:a,createChapterObject:n,createStateObject:r,createQoEObject:o}};const ml={"a.media.show":"show","a.media.season":"season","a.media.episode":"episode","a.media.asset":"assetID","a.media.genre":"genre","a.media.airDate":"firstAirDate","a.media.digitalDate":"firstDigitalDate","a.media.rating":"rating","a.media.originator":"originator","a.media.network":"network","a.media.type":"showType","a.media.adLoad":"adLoad","a.media.pass.mvpd":"mvpd","a.media.pass.auth":"authorized","a.media.dayPart":"dayPart","a.media.feed":"feed","a.media.format":"streamFormat","a.media.artist":"artist","a.media.album":"album","a.media.label":"label","a.media.author":"author","a.media.station":"station","a.media.publisher":"publisher","media.resumed":"hasResume"},pl={"a.media.ad.advertiser":"advertiser","a.media.ad.campaign":"campaignID","a.media.ad.creative":"creativeID","a.media.ad.placement":"placementID","a.media.ad.site":"siteID","a.media.ad.creativeURL":"creativeURL"};var fl=({logger:e,trackMediaSession:t,trackMediaEvent:a,uuid:n})=>{let r=null;const o=()=>{r={qoe:null,lastPlayhead:0,playerId:n()}},i=({eventType:e})=>e===ol.BufferComplete||e===ol.SeekComplete?il.Play:e===ol.StateStart||e===ol.StateEnd?il.StateUpdate:e===ol.SeekStart?il.Pause:e,s=({eventType:e,mediaDetails:t={},contextData:a=[]})=>{const n=i({eventType:e});if(e===ol.StateStart)return{eventType:`media.${n}`,mediaCollection:{statesStart:[t]}};if(e===ol.StateEnd)return{eventType:`media.${n}`,mediaCollection:{statesEnd:[t]}};const r={eventType:`media.${n}`,mediaCollection:{...t}},o=[];return Object.keys(a).forEach((e=>{ml[e]?r.mediaCollection.sessionDetails[ml[e]]=a[e]:pl[e]?r.mediaCollection.advertisingDetails[pl[e]]=a[e]:o.push({name:e,value:a[e]})})),Ue(o)&&(r.mediaCollection.customMetadata=o),r};return{trackSessionStart:(a,n={})=>{if(ue(a)||ft(a))return e.warn("Invalid media object"),{};null===r&&(e.warn("The Media Session was completed. Restarting a new session."),o());const i=s({eventType:il.SessionStart,mediaDetails:a,contextData:n});return t({playerId:r.playerId,getPlayerDetails:()=>({playhead:r.lastPlayhead,qoeDataDetails:r.qoe}),xdm:i})},trackPlay:()=>{if(null===r)return e.warn("The Media Session was completed."),{};const t=s({eventType:il.Play});return a({playerId:r.playerId,xdm:t})},trackPause:()=>{if(null===r)return e.warn("The Media Session was completed."),{};const t=s({eventType:il.Pause});return a({playerId:r.playerId,xdm:t})},trackSessionEnd:()=>{if(null===r)return e.warn("The Media Session was completed."),{};const t=s({eventType:il.SessionEnd});return a({playerId:r.playerId,xdm:t})},trackComplete:()=>{if(null===r)return e.warn("The Media Session was completed."),{};const t=s({eventType:il.SessionComplete});return a({playerId:r.playerId,xdm:t})},trackError:t=>{if(e.warn(`trackError(${t})`),null===r)return e.warn("The Media Session was completed."),{};const n={name:t,source:"player"},o=s({eventType:il.Error,mediaDetails:{errorDetails:n}});return a({playerId:r.playerId,xdm:o})},trackEvent:(t,n,o)=>{if(ft(n))return e.warn("Invalid media object."),{};if(null===r)return e.warn("The Media Session was completed."),{};if(!Object.values(ol).includes(t))return e.warn("Invalid event type"),{};const i=s({eventType:t,mediaDetails:n,contextData:o});return a({playerId:r.playerId,xdm:i})},updatePlayhead:t=>{null!==r?Ht(t)&&(r.lastPlayhead=parseInt(t,10)):e.warn("The Media Session was completed.")},updateQoEObject:t=>{null!==r?t&&(r.qoe=t):e.warn("The Media Session was completed.")},destroy:()=>{e.warn("Destroy called, destroying the tracker."),r=null}}};const vl=({eventManager:e,sendEdgeNetworkRequest:t,config:a,logger:n,consent:r})=>{const o=Qs(),i=Js({sendEdgeNetworkRequest:t,config:a,consent:r,eventManager:e,setTimestamp:ho((()=>new Date))}),s=Ys({mediaSessionCacheManager:o,mediaEventManager:i,config:a}),l=Zs({config:a,mediaEventManager:i,mediaSessionCacheManager:o,legacy:!0}),c=tl({mediaSessionCacheManager:o,config:a,trackMediaEvent:s});return ul({mediaResponseHandler:c,trackMediaSession:l,trackMediaEvent:s,createMediaHelper:gl,createGetInstance:fl,logger:n,config:a})};vl.namespace="Legacy Media Analytics";const yl="web",hl="webapp",bl="://",_l="#",El=/^(\w+):\/\/([^/#]+)(\/[^#]*)?(#.*)?$/,Cl=/^(?:.*@)?(?:[a-z\d\u00a1-\uffff.-]+|\[[a-f\d:]+])(?::\d+)?$/,Pl=/^\/(?:[/\w\u00a1-\uffff-.~]|%[a-fA-F\d]{2})*$/,Vl=/^#(?:[/\w\u00a1-\uffff-.~]|%[a-fA-F\d]{2})+$/,wl=(e="/")=>{let t=e.length;for(;t>0&&-1!=="/".indexOf(e.charAt(t-1));)t-=1;return e.substring(0,t)||"/"},kl=e=>Gt(e)?e.toLowerCase():"",Al=e=>Gt(e)?e.toLowerCase():"",Sl=e=>Gt(e)?wl(e):"/",Tl=e=>{const t=e.match(El);return t?{surfaceType:kl(t[1]),authority:Al(t[2]),path:Sl(t[3]),fragment:t[4]}:null},Dl=e=>`${e.surfaceType}${bl}${e.authority}${e.path||""}${e.fragment||""}`,xl=e=>{const t=e(),a=t.host.toLowerCase(),n=t.pathname;return yl+bl+a+wl(n)},jl=(e,t)=>e.startsWith(_l)?xl(t)+e:e,Il=(e,t,a)=>{const n=e=>(a.warn(e),null);if(!Gt(e))return n(`Invalid surface: ${e}`);const r=jl(e,t),o=Tl(r);return null===o?n(`Invalid surface: ${e}`):[yl,hl].includes(o.surfaceType)?o.authority&&Cl.test(o.authority)?o.path&&!Pl.test(o.path)?n(`Invalid path ${o.path} in surface: ${e}`):o.fragment&&!Vl.test(o.fragment)?n(`Invalid fragment ${o.fragment} in surface: ${e}`):o:n(`Invalid authority ${o.authority} in surface: ${e}`):n(`Unsupported surface type ${o.surfaceType} in surface: ${e}`)},Ml=e=>!!e&&0===e.indexOf(yl+bl)&&-1===e.indexOf(_l),Ol=(e=[],t,a)=>e.map((e=>Il(e,t,a))).filter((e=>!ue(e))).map(Dl),Rl="https://ns.adobe.com/personalization/default-content-item",Nl="https://ns.adobe.com/personalization/dom-action",Ll="https://ns.adobe.com/personalization/html-content-item",Ul="https://ns.adobe.com/personalization/json-content-item",Fl="https://ns.adobe.com/personalization/ruleset-item",ql="https://ns.adobe.com/personalization/redirect-item",Xl="https://ns.adobe.com/personalization/message/in-app",Bl="https://ns.adobe.com/personalization/message/content-card",$l=e=>{e.includes(Er)||e.push(Er)},Hl=(e,t)=>{const a=xl(t);e.includes(a)||e.push(a)},Wl=e=>e.filter(((t,a)=>e.indexOf(t)===a));var zl=({getPageLocation:e,renderDecisions:t,decisionScopes:a,personalization:n,event:r,isCacheInitialized:o,logger:i})=>{const s=r.getViewName();return{isRenderDecisions:()=>t,isSendDisplayEvent:()=>!!n.sendDisplayEvent,shouldIncludeRenderedPropositions:()=>!!n.includeRenderedPropositions,getViewName:()=>s,hasScopes:()=>a.length>0||Ue(n.decisionScopes),hasSurfaces:()=>Ue(n.surfaces),hasViewName:()=>Gt(s),createQueryDetails(){const t=[...a];Ue(n.decisionScopes)&&t.push(...n.decisionScopes);const r=Ol(n.surfaces,e,i);this.shouldRequestDefaultPersonalization()&&($l(t),Hl(r,e));const o=[Rl,Ll,Ul,ql,Fl,Xl,Bl];return t.includes(Er)&&o.push(Nl),{schemas:o,decisionScopes:Wl(t),surfaces:Wl(r)}},isCacheInitialized:()=>o,shouldFetchData(){return this.hasScopes()||this.hasSurfaces()||this.shouldRequestDefaultPersonalization()},shouldUseCachedData(){return this.hasViewName()&&!this.shouldFetchData()},shouldRequestDefaultPersonalization(){return n.defaultPersonalizationEnabled||!this.isCacheInitialized()&&!1!==n.defaultPersonalizationEnabled}}};const Jl="Rendering is disabled for authoring mode.",Gl="decisioning.propositionDisplay",Ql="decisioning.propositionInteract",Kl="decisioning.propositionTrigger",Yl="decisioning.propositionDismiss",Zl="decisioning.propositionSuppressDisplay",ec=1,tc={DISPLAY:"display",INTERACT:"interact",TRIGGER:"trigger",DISMISS:"dismiss",SUPPRESS:"suppressDisplay"},ac={[Gl]:tc.DISPLAY,[Ql]:tc.INTERACT,[Kl]:tc.TRIGGER,[Yl]:tc.DISMISS,[Zl]:tc.SUPPRESS},nc={[tc.DISPLAY]:Gl,[tc.INTERACT]:Ql,[tc.TRIGGER]:Kl,[tc.DISMISS]:Yl,[tc.SUPPRESS]:Zl},rc=e=>ac[e],oc=e=>nc[e],ic={propositions:[]};var sc=({logger:e,options:t})=>{const a=Vn({propositions:hn(Vn({id:wn().required(),scope:wn().required(),scopeDetails:Vn({decisionProvider:wn().required()}).required(),items:hn(Vn({id:wn().required(),schema:wn().required(),data:Vn(yn())})).nonEmpty().required()}).required()).nonEmpty().required(),metadata:Vn(yn()),viewName:wn()}).required();try{return a(t)}catch(t){return e.warn("Invalid options for applyPropositions. No propositions will be applied.",t),ic}},lc=({getPageLocation:e,logger:t,fetchDataHandler:a,viewChangeHandler:n,onClickHandler:r,isAuthoringModeEnabled:o,mergeQuery:i,viewCache:s,showContainers:l,applyPropositions:c,setTargetMigration:d,mergeDecisionsMeta:u,renderedPropositions:g,onDecisionHandler:m,handleConsentFlicker:p})=>({lifecycle:{onComponentsRegistered(){p()},onDecision:m,onBeforeRequest:({request:e})=>(d(e),Promise.resolve()),onBeforeEvent({event:r,renderDecisions:c,decisionScopes:d=[],personalization:m={},onResponse:p=Qt,onRequestFailure:f=Qt}){if(p((()=>({propositions:[]}))),f((()=>l())),o())return t.warn(Jl),i(r,{enabled:!1}),Promise.resolve();const v=zl({getPageLocation:e,renderDecisions:c,decisionScopes:d,personalization:m,event:r,isCacheInitialized:s.isInitialized(),logger:t}),y=[];if(v.shouldIncludeRenderedPropositions()&&y.push(g.clear()),v.shouldFetchData()){const e=s.createCacheUpdate(v.getViewName());f((()=>e.cancel())),a({cacheUpdate:e,personalizationDetails:v,event:r,onResponse:p})}else v.shouldUseCachedData()&&y.push(n({personalizationDetails:v,event:r,onResponse:p,onRequestFailure:f}));return Promise.all(y).then((e=>{const t=e.flatMap((e=>e));Ue(t)&&u(r,t,[tc.DISPLAY])}))},onClick({event:e,clickedElement:t}){r({event:e,clickedElement:t})}},commands:{applyPropositions:{optionsValidator:e=>sc({logger:t,options:e}),run:c}}}),cc=(e="undefined")=>Te(Ie,{},{innerHTML:e});const dc=":eq(",uc=/:eq\((\d+)\)/g,gc=e=>-1===e.indexOf(dc),mc=e=>e.split(uc).filter(Gt),pc=/(#|\.)(-?\w+)/g,fc=(e,t,a)=>`${t}${CSS.escape(a)}`,vc=e=>e.replace(pc,fc),yc=e=>{const t=[],a=vc(e.trim()),n=mc(a),{length:r}=n;let o=0;for(;o<r;){const e=n[o],a=n[o+1];a?t.push({sel:e,eq:Number(a)}):t.push({sel:e}),o+=2}return t},hc=e=>{const t=document;if(gc(e))return Je(e,t);const a=yc(e),{length:n}=a;let r=[],o=t,i=0;for(;i<n;){const{sel:e,eq:t}=a[i],s=Je(e,o),{length:l}=s;if(0===l)break;if(null!=t&&t>l-1)break;i<n-1&&(null==t?[o]=s:o=s[t]),i===n-1&&(r=null==t?s:[s[t]]),i+=1}return r};var bc=(e,t=document)=>t.getElementById(e),_c=(e,t,a)=>{e.setAttribute(t,a)},Ec=(e,t)=>e.getAttribute(t),Cc=(e,t)=>{e.removeAttribute(t)},Pc=(e,t,a,n)=>{let r;r=n?`${t}:${a} !${n};`:`${t}:${a};`,e.style.cssText+=`;${r}`},Vc=e=>e.parentNode,wc=e=>e.nextElementSibling,kc=(e,t)=>{if(!e)return;const a=Vc(e);a&&a.insertBefore(t,wc(e))},Ac=(e,t)=>{if(!e)return;const a=Vc(e);a&&a.insertBefore(t,e)},Sc=e=>{const{children:t}=e;return t?Fe(t):[]},Tc=e=>{const{childNodes:t}=e;return t?Fe(t):[]},Dc=e=>e.firstElementChild;let xc;var jc=(e=document)=>{if(void 0===xc){const t=e.querySelector("[nonce]");xc=t&&(t.nonce||t.getAttribute("nonce"))}return xc};const Ic="src",Mc=e=>e.tagName===je,Oc=e=>Te(je,{src:e}),Rc=e=>{Je(je,e).forEach((e=>{const t=Ec(e,Ic);t&&Oc(t)}))},Nc=(e,t)=>e.tagName===t,Lc=e=>Nc(e,Me)&&!Ec(e,Ic);var Uc=e=>{const t=Je(Me,e),{length:a}=t,n=jc();if(n)for(let e=0;e<a;e+=1){const a=t[e];Lc(a)&&(a.nonce=n)}};const Fc=(e,t)=>new Promise(((a,n)=>{t.onload=()=>{a(t)},t.onerror=()=>{n(new Error(`Failed to load script: ${e}`))}})),qc=e=>{const t=document.createElement("script");t.src=e,t.async=!0;const a=Fc(e,t);return document.head.appendChild(t),a},Xc=(e,t)=>!!e&&e.tagName===t,Bc=e=>Xc(e,Oe)&&!Ec(e,Ic),$c=e=>Xc(e,Oe)&&Ec(e,Ic),Hc=e=>{const t=Je(Oe,e),a=[],{length:n}=t,r=jc(),o={...r&&{nonce:r}};for(let e=0;e<n;e+=1){const n=t[e];if(!Bc(n))continue;const{textContent:r}=n;r&&a.push(Te(Oe,o,{textContent:r}))}return a},Wc=e=>{const t=Je(Oe,e),a=[],{length:n}=t;for(let e=0;e<n;e+=1){const n=t[e];if(!$c(n))continue;const r=Ec(n,Ic);r&&a.push(r)}return a},zc=(e,t)=>{t.forEach((t=>{e.appendChild(t),e.removeChild(t)}))},Jc=e=>Promise.all(e.map(qc));var Gc=(e,t,a)=>{const n=cc(t);Uc(n);const r=Tc(n),o=Hc(n),i=Wc(n);return Rc(n),r.forEach((t=>{Ae(e,t)})),a(e),zc(e,o),Jc(i)};const Qc=e=>{Tc(e).forEach(ut)};var Kc=(e,t,a)=>(Qc(e),Gc(e,t,a)),Yc=(e,t,a)=>{const n=cc(t);Uc(n);const r=Tc(n),o=Hc(n),i=Wc(n),{length:s}=r;let l=s-1;for(Rc(n);l>=0;){const t=r[l];a(t);const n=Dc(e);n?Ac(n,t):Ae(e,t),l-=1}return zc(e,o),Jc(i)};const Zc="alloy-prehiding",ed="{ visibility: hidden }",td={},ad=e=>{if(td[e])return;const t=jc(),a={...t&&{nonce:t}},n=Te(Me,a,{textContent:`${e} ${ed}`});Ae(document.head,n),td[e]=n},nd=e=>{const t=td[e];t&&(ut(t),delete td[e])},rd=e=>t=>{if(!t)return;if(bc(Zc))return;const a=jc(),n={id:Zc,...a&&{nonce:a}},r=Te(Me,n,{textContent:t});e.logOnContentHiding({status:"hide-containers",message:"Prehiding style applied to hide containers.",logLevel:"info"}),Ae(document.head,r)},od=e=>()=>{const t=bc(Zc);t&&(e.logOnContentHiding({status:"show-containers",message:"Prehiding style removed to show containers.",logLevel:"info"}),ut(t))};var id=(e,t,a)=>{a(e),e.textContent=t},sd=(e,t,a)=>{const n=cc(t);Uc(n);const r=Tc(n),o=Hc(n),i=Wc(n);return Rc(n),r.forEach((t=>{a(t),Ac(e,t)})),zc(e,o),Jc(i)},ld=(e,t,a)=>sd(e,t,a).then((()=>{ut(e)})),cd=(e,t,a)=>{const n=cc(t);Uc(n);const r=Tc(n),o=Hc(n),i=Wc(n);Rc(n);let s=e;return r.forEach((e=>{a(e),kc(s,e),s=e})),zc(e,o),Jc(i)},dd=(e,t,a)=>{const{priority:n,...r}=t;Object.keys(r).forEach((t=>{Pc(e,t,r[t],n)})),a(e)},ud=(e,t,a)=>{Object.keys(t).forEach((a=>{_c(e,a,t[a])})),a(e)},gd=(e,t,a)=>{Mc(e)&&(Oc(t),a(e),Cc(e,Ic),_c(e,Ic,t))},md=(e,{from:t,to:a},n)=>{const r=Sc(e),o=r[t],i=r[a];o&&i&&(t<a?kc(i,o):Ac(i,o),n(i),n(o))};const pd=(e,t,a,n)=>{const r=e.map((e=>n(e,t,a)));return Promise.all(r)},fd=e=>(t,a)=>{const{selector:n,prehidingSelector:r,content:o}=t;return ad(r),ct(n,hc).then((t=>pd(t,o,a,e))).then((()=>{nd(r)}),(e=>{throw nd(r),e}))},vd=e=>`${e}`.endsWith("px")?e:`${e}px`;var yd=(e,t,a)=>{const{priority:n,...r}=t;Object.keys(r).forEach((t=>{let a=r[t];"left"!==t&&"top"!==t||(a=vd(a)),Pc(e,t,a,n)})),a(e)},hd=(e,t,a)=>{a(e)},bd=(e,t,a)=>{const{priority:n,...r}=t;Object.keys(r).forEach((t=>{let a=r[t];"width"!==t&&"height"!==t||(a=vd(a)),Pc(e,t,a,n)})),a(e)};const _d="setHtml",Ed="customCode",Cd="setText",Pd="setAttribute",Vd="setImageSource",wd="setStyle",kd="move",Ad="resize",Sd="rearrange",Td="remove",Dd="insertAfter",xd="insertBefore",jd="replaceHtml",Id="prependHtml",Md="appendHtml",Od="click",Rd="collectInteractions";var Nd=()=>({[_d]:fd(Kc),[Ed]:fd(Yc),[Cd]:fd(id),[Pd]:fd(ud),[Vd]:fd(gd),[wd]:fd(dd),[kd]:fd(yd),[Ad]:fd(bd),[Sd]:fd(md),[Td]:fd(ut),[Dd]:fd(cd),[xd]:fd(sd),[jd]:fd(ld),[Id]:fd(Yc),[Md]:fd(Gc),[Rd]:fd(hd)}),Ld=({eventManager:e,mergeDecisionsMeta:t})=>({decisionsMeta:a=[],propositionAction:n,documentMayUnload:r=!1,eventType:o=Gl,propositionEventTypes:i=[rc(o)],viewName:s})=>{const l=e.createEvent(),c={eventType:o};return s&&(c.web={webPageDetails:{viewName:s}}),Ue(a)&&t(l,a,i,n),l.mergeXdm(c),r&&l.documentMayUnload(),e.sendEvent(l)};const Ud="personalization:decisions";var Fd=({logger:e,prehidingStyle:t,showContainers:a,hideContainers:n,mergeQuery:r,processPropositions:o,createProposition:i,notificationHandler:s,consent:l})=>({cacheUpdate:c,personalizationDetails:d,event:u,onResponse:g})=>{const{state:m,wasSet:p}=l.current();"out"===m&&p||(d.isRenderDecisions()?n(t):a()),r(u,d.createQueryDetails());const f=s(d.isRenderDecisions(),d.isSendDisplayEvent(),d.getViewName());g((({response:t})=>{const n=t.getPayloadsByType(Ud);Ue(n)||e.logOnContentRendering({status:"no-offers",message:"No offers were returned.",logLevel:"info",detail:{query:d.createQueryDetails()}})
;const r=n.map((e=>i(e))),{page:s=[],view:l=[],proposition:u=[]}=Vt(r,(e=>e.getScopeType())),g=c.update(l);let m,p,v;return d.isRenderDecisions()?(({render:m,returnedPropositions:p,returnedDecisions:v}=o([...s,...g],u)),Ue(s)&&e.logOnContentRendering({status:"rendering-started",message:"Started rendering propositions for page-wide scope.",logLevel:"info",detail:{scope:Er,propositions:s.map((e=>e.toJSON()))}}),Ue(g)&&e.logOnContentRendering({status:"rendering-started",message:`Rendering propositions started for view scope - ${d.getViewName()}.`,logLevel:"info",detail:{scope:d.getViewName(),propositions:g.map((e=>e.toJSON()))}}),m().then(f),a()):({returnedPropositions:p,returnedDecisions:v}=o([],[...s,...g,...u])),{propositions:p,decisions:v}}))},qd=(e,t)=>{if(gc(e))return dt(e,t);const a=hc(e);let n=!1;for(let e=0;e<a.length;e+=1)if(a[e]===t){n=!0;break}return n};const Xd="view",Bd="page",$d="proposition",Hd=e=>e.map((e=>{const{trackingLabel:t,scopeType:a,...n}=e;return n})),Wd=e=>e.filter(((t,a)=>{const n=JSON.stringify(t);return a===e.findIndex((e=>JSON.stringify(e)===n))})),zd=(e,t,a)=>{const{documentElement:n}=document;let r=e,o=0;for(;r&&r!==n;){if(qd(t,r)){const e=a(t),n={metas:e},r=e.find((e=>e.trackingLabel));r&&(n.label=r.trackingLabel,n.weight=o);const i=e.find((e=>e.scopeType===Xd));return i&&(n.viewName=i.scope,n.weight=o),n}r=r.parentNode,o+=1}return{metas:null}};var Jd=(e,t,a)=>{const n=[];let r,o="",i=Number.MAX_SAFE_INTEGER,s=Number.MAX_SAFE_INTEGER;for(let l=0;l<t.length;l+=1){const{metas:c,label:d,weight:u,viewName:g}=zd(e,t[l],a);c&&(d&&u<=i&&(o=d,i=u),g&&u<=s&&(r=g,s=u),n.push(...Hd(c)))}return{decisionsMeta:Wd(n),propositionActionLabel:o,propositionActionToken:void 0,viewName:r}},Gd=(e=document)=>-1!==e.location.href.indexOf("adobe_authoring_enabled");const Qd=(e,t,a,n)=>{if(0===t.length)return;const r={};a.forEach((e=>{r[e]=ec}));const o={_experience:{decisioning:{propositions:t,propositionEventType:r}}};n&&(o._experience.decisioning.propositionAction=n),e.mergeXdm(o)},Kd=(e,t)=>{e.mergeQuery({personalization:{...t}})},Yd=(e,t)=>{if(!t&&!e)return;const a={};return e&&(a.label=e),t&&(a.tokens=[t]),a};var Zd=({mergeDecisionsMeta:e,collectInteractions:t,collectClicks:a,getInteractionMetas:n,getClickMetas:r,getClickSelectors:o,autoCollectPropositionInteractions:i})=>({event:s,clickedElement:l})=>{const c=[];let d,u,g;if([t(l,n,i),a(l,o(),r)].forEach((({decisionsMeta:e,propositionActionLabel:t,propositionActionToken:a,viewName:n})=>{Array.prototype.push.apply(c,e),!d&&t&&(d=t),!u&&a&&(u=a),!g&&n&&(g=n)})),Ue(c)){const t={eventType:Ql};g&&(t.web={webPageDetails:{viewName:g}}),s.mergeXdm(t),e(s,c,[tc.INTERACT],Yd(d,u))}},eu=({createProposition:e})=>{let t=!1,a=Promise.resolve({});const n=(t,a)=>{const n=t[a.toLowerCase()];return n&&n.length>0?n:[e({scope:a,scopeDetails:{characteristics:{scopeType:Xd}},items:[{schema:Rl}]},!1)]};return{createCacheUpdate:e=>{const r=Pe();return t=!0,a=a.then((e=>r.promise.then((t=>({...e,...t}))).catch((()=>e)))),{update(t){const a=t.filter((e=>e.getScope())),o=Vt(a,(e=>e.getScope().toLowerCase()));return r.resolve(o),e?n(o,e):[]},cancel(){r.reject()}}},getView:e=>a.then((t=>n(t,e))),isInitialized:()=>t}},tu=({processPropositions:e,viewCache:t,logger:a})=>({personalizationDetails:n,onResponse:r})=>{let o,i;const s=n.getViewName();return r((()=>({propositions:o,decisions:i}))),t.getView(s).then((t=>{let r;return n.isRenderDecisions()?(({render:r,returnedPropositions:o,returnedDecisions:i}=e(t)),a.logOnContentRendering({status:"rendering-started",message:`Started rendering propositions for view scope - ${s}.`,logLevel:"info",detail:{scope:s,propositions:t.map((e=>e.toJSON()))}}),r()):(({returnedPropositions:o,returnedDecisions:i}=e([],t)),[])}))};const au=e=>Object.keys(e).map((t=>({id:t,...e[t]})));var nu=()=>{const e={};return{storeClickMeta:({selector:t,meta:{id:a,scope:n,scopeDetails:r,trackingLabel:o,scopeType:i}})=>{e[t]||(e[t]={}),e[t][a]={scope:n,scopeDetails:r,trackingLabel:o,scopeType:i}},getClickSelectors:()=>Object.keys(e),getClickMetas:t=>e[t]?au(e[t]):{}}},ru=()=>{const e={},t={};return{storeInteractionMeta:(a,n,r,o,i)=>{i=parseInt(i,10),e[i]||(e[i]={},t[i]={}),t[i][a]||(t[i][a]=new Set),t[i][a].add(n),e[i][a]={...o,scopeType:r}},getInteractionMetas:a=>Array.isArray(a)&&0!==a.length?Object.values(a.map((e=>parseInt(e,10))).reduce(((a,n)=>(Object.keys(e[n]||{}).forEach((r=>{a[r]||(a[r]={proposition:e[n][r],items:new Set}),a[r].items=new Set([...a[r].items,...t[n][r]])})),a)),{})).map((({proposition:e,items:t})=>({...e,items:Array.from(t).map((e=>({id:e})))}))):[]}};const ou=(e,t)=>e===Ul&&t===Rd,iu={[Nl]:()=>!0,[Ll]:()=>!0,[Ul]:ou,[Xl]:()=>!0,[Rl]:()=>!0},su=(e,t)=>"function"==typeof iu[e]&&iu[e](e,t);var lu=({processPropositions:e,createProposition:t,renderedPropositions:a,viewCache:n})=>{const r=({items:e,metadataForScope:t={}})=>{const{actionType:a,selector:n}=t;return e.filter((e=>su(e.schema,a))).map((e=>{const{schema:r}=e;return r===Ll||ou(r,a)?ft(t)?void 0:{...e,schema:ou(r,a)?Nl:r,data:{...e.data,selector:n,type:a}}:{...e}})).filter((e=>e))},o=e=>!(e.scope===Er&&e.renderAttempted),i=({propositions:e,metadata:t})=>e.filter(o).map((e=>{if(Ue(e.items)){const{id:a,scope:n,scopeDetails:o}=e;return{id:a,scope:n,scopeDetails:o,items:r({items:e.items,metadataForScope:t[e.scope]})}}return e})).filter((e=>Ue(e.items)));return({propositions:r=[],metadata:o={},viewName:s})=>{const l=Pe();a.concat(l.promise);const c=i({propositions:r,metadata:o}).map((e=>t(e)));return Promise.resolve().then((()=>s?n.getView(s):[])).then((t=>{const{render:a,returnedPropositions:n}=e([...c,...t]);return a().then(l.resolve),{propositions:n}}))}},cu=({window:e})=>()=>e.location,du=({targetMigrationEnabled:e})=>e?e=>{e.getPayload().mergeMeta({target:{migration:!0}})}:Qt;const uu="BODY > *:eq(0)";var gu=e=>{const{selector:t,type:a}=e;return a!==Ed||t!==uu?e:{...e,selector:"BODY"}};const mu="SCRIPT,LINK,STYLE",pu=e=>{const t=cc(e);return Je(mu,t).map((e=>e.outerHTML)).join("")};var fu=e=>{const t={...e},{content:a,selector:n}=t;if(el(a))return t;if(null==n)return t;const r=hc(n);return Xc(r[0],Re)?(t.type=Md,t.content=pu(a),t):t},vu=e=>t=>t?e.reduce(((e,t)=>({...e,...t(e)})),t):t,yu=({preprocess:e,isPageWideSurface:t})=>{const a=(t,a)=>{const{id:n,schema:r,data:o,characteristics:{trackingLabel:i}={}}=t,s=o?o.type:void 0,l=e(o);return{getId:()=>n,getSchema:()=>r,getSchemaType:()=>s,getData:()=>l,getProposition:()=>a,getTrackingLabel:()=>i,getOriginalItem:()=>t,toString:()=>JSON.stringify(t),toJSON:()=>t}};return(e,n=!0,r=!1)=>{const{id:o,scope:i,scopeDetails:s,items:l=[]}=e,{characteristics:{scopeType:c}={}}=s||{};return{getScope:()=>i,getScopeType:()=>i===Er||t(i)?Bd:c===Xd?Xd:$d,getItems(){return l.map((e=>a(e,this)))},getNotification:()=>({id:o,scope:i,scopeDetails:s}),getId:()=>o,toJSON:()=>e,shouldSuppressDisplay:()=>r,addToReturnValues(t,a,r,o){n&&(t.push({...e,items:r.map((e=>e.getOriginalItem())),renderAttempted:o}),o||a.push({...e,items:r.map((e=>e.getOriginalItem()))}))}}}},hu=()=>{let e=Promise.resolve([]);return{concat(t){e=e.then((e=>t.then((t=>e.concat(t))).catch((()=>e))))},clear(){const t=e;return e=Promise.resolve([]),t}}},bu=()=>({render:Qt,setRenderAttempted:!0,includeInNotification:!0});const _u="always",Eu="never",Cu="decoratedElementsOnly",Pu=[_u,Eu,Cu],Vu="data-aep-interact-id",wu="data-aep-click-label",ku="data-aep-click-token";let Au=0;const Su=(e,t)=>t?parseInt(t,10):++Au,Tu=(e,t)=>!!e&&!!e[t]&&[_u,Cu].includes(e[t]),Du=(e,t,a,n,r,o,i,s)=>{const{scopeDetails:l={}}=i,{decisionProvider:c}=l;return Tu(e,c)||t===Od?e=>{if(!e.tagName)return;const t=Su(a,Ec(e,Vu));s(a,n,o,i,t),_c(e,Vu,t),r&&!Ec(e,wu)&&_c(e,wu,r)}:Qt};var xu=({modules:e,logger:t,storeInteractionMeta:a,storeClickMeta:n,autoCollectPropositionInteractions:r})=>o=>{const{type:i,selector:s}=o.getData()||{};if(!i)return t.warn("Invalid DOM action data: missing type.",o.getData()),{setRenderAttempted:!1,includeInNotification:!1};if(i===Od)return s?(n({selector:s,meta:{...o.getProposition().getNotification(),trackingLabel:o.getTrackingLabel(),scopeType:o.getProposition().getScopeType()}}),{setRenderAttempted:!0,includeInNotification:!1}):(t.warn("Invalid DOM action data: missing selector.",o.getData()),{setRenderAttempted:!1,includeInNotification:!1});if(!e[i])return t.warn("Invalid DOM action data: unknown type.",o.getData()),{setRenderAttempted:!1,includeInNotification:!1};const l=Du(r,i,o.getProposition().getId(),o.getId(),o.getTrackingLabel(),o.getProposition().getScopeType(),o.getProposition().getNotification(),a);return{render:()=>e[i](o.getData(),l),setRenderAttempted:!0,includeInNotification:!0}},ju=({modules:e,logger:t,storeInteractionMeta:a,autoCollectPropositionInteractions:n})=>r=>{const{type:o,selector:i}=r.getData()||{};if(!i||!o)return{setRenderAttempted:!1,includeInNotification:!1};if(!e[o])return t.warn("Invalid HTML content data",r.getData()),{setRenderAttempted:!1,includeInNotification:!1};const s=Du(n,o,r.getProposition().getId(),r.getId(),r.getTrackingLabel(),r.getProposition().getScopeType(),r.getProposition().getNotification(),a);return{render:()=>e[o](r.getData(),s),setRenderAttempted:!0,includeInNotification:!0}};const Iu="BODY";var Mu=({logger:e,executeRedirect:t,collect:a})=>n=>{const{content:r}=n.getData()||{};return r?{render:()=>(ad(Iu),a({decisionsMeta:[n.getProposition().getNotification()],documentMayUnload:!0}).then((()=>(e.logOnContentRendering({status:"rendering-redirect",detail:{propositionDetails:n.getProposition().getNotification(),redirect:r},message:`Redirect action ${n.toString()} executed.`,logLevel:"info"}),t(r)))).catch((e=>{throw nd(Iu),e}))),setRenderAttempted:!0,onlyRenderThis:!0}:(e.warn("Invalid Redirect data",n.getData()),{})},Ou=({schemaProcessors:e,logger:t})=>{const a=(e,a)=>()=>Promise.resolve().then(e).then((()=>(t.enabled&&t.info(`Action ${a.toString()} executed.`),a.toJSON()))).catch((e=>{const{message:n,stack:r}=e,o=`Failed to execute action ${a.toString()}. ${n} ${r}`;t.logOnContentRendering({status:"rendering-failed",detail:{propositionDetails:a.getProposition().getNotification(),item:a.toJSON()},error:e,message:o,logLevel:"warn"})})),n=async(e,t)=>{const a=(await Promise.allSettled(e.map((e=>e())))).filter((e=>"fulfilled"===e.status)).map((e=>e.value));if(t&&Ue(a))return{...t,items:a}},r=t=>{const a=e[t.getSchema()];return a?a(t):{}},o=({renderers:e,returnedPropositions:t,returnedDecisions:o,items:i,proposition:s})=>{let l,c,d,u,g=[...e],m=[...t],p=[...o],f=[],v=[],y=[],h=!1,b=!1,_=0;for(;i.length>_;){if(u=i[_],({render:l,setRenderAttempted:c,includeInNotification:d,onlyRenderThis:b}=r(u)),b){m=[],p=[],c?(f=[u],v=[]):(f=[],v=[u]),g=[],y=[l],h=d;break}l&&y.push(a(l,u)),d&&(h=!0),c?f.push(u):v.push(u),_+=1}if(y.length>0){const e=h?s.getNotification():void 0;g.push((()=>n(y,e)))}else h&&g.push((()=>Promise.resolve(s.getNotification())));return f.length>0&&s.addToReturnValues(m,p,f,!0),v.length>0&&s.addToReturnValues(m,p,v,!1),{renderers:g,returnedPropositions:m,returnedDecisions:p,onlyRenderThis:b}};return(e,a=[])=>{let n,r,i,s=[],l=[],c=[],d=0;for(;e.length>d&&(r=e[d],i=r.getItems(),({renderers:s,returnedPropositions:l,returnedDecisions:c,onlyRenderThis:n}=o({renderers:s,returnedPropositions:l,returnedDecisions:c,items:i,proposition:r})),!n);)d+=1;return n&&e.forEach(((e,t)=>{t!==d&&e.addToReturnValues(l,c,e.getItems(),!1)})),a.forEach((e=>{e.addToReturnValues(l,c,e.getItems(),!1)})),{returnedPropositions:l,returnedDecisions:c,render:()=>Promise.all(s.map((e=>e()))).then((e=>{const a=e.filter((e=>e)),n=a.map((e=>{const{id:t,scope:a,scopeDetails:n}=e;return{id:t,scope:a,scopeDetails:n}}));if(Ue(a)){const e=Vt(a,(e=>e.scope));t.logOnContentRendering({status:"rendering-succeeded",detail:{...e},message:`Scopes: ${JSON.stringify(e)} successfully executed.`,logLevel:"info"})}return n}))}}};const Ru=()=>{let e=0;return t=>{const{items:a=[]}=t;return!!a.some((e=>e.schema===Xl))&&(e+=1,e>1)}};var Nu=({processPropositions:e,createProposition:t,notificationHandler:a})=>({renderDecisions:n,propositions:r,event:o,personalization:i={}})=>{if(!n)return Promise.resolve();const{sendDisplayEvent:s=!0}=i,l=o?o.getViewName():void 0,c=Ru(),d=r.map((e=>t(e,!0,c(e)))),{render:u,returnedPropositions:g}=e(d),m=a(n,s,l),p=d.reduce(((e,t)=>(e[t.getId()]=t,e)),{});return u().then((e=>{const t=e.filter((e=>!p[e.id].shouldSuppressDisplay())),a=e.filter((e=>p[e.id].shouldSuppressDisplay()));m(t,a)})),Promise.resolve({propositions:g})};const Lu="text/html",Uu="application/json",Fu="defaultContent",qu=["content","contentType"],Xu=["mobileParameters","webParameters","html"],Bu=(e,t)=>{for(let a=0;a<qu.length;a+=1){const n=qu[a];if(!Object.prototype.hasOwnProperty.call(e,n))return t.warn(`Invalid in-app message data: missing property '${n}'.`,e),!1}const{content:a,contentType:n}=e;if(n===Uu)for(let n=0;n<Xu.length;n+=1){const r=Xu[n];if(!Object.prototype.hasOwnProperty.call(a,r))return t.warn(`Invalid in-app message data.content: missing property '${r}'.`,e),!1}return!0};var $u=({modules:e,logger:t})=>a=>{const n=a.getData(),r=a.getProposition(),o={...r.getNotification()},i=r.shouldSuppressDisplay();if(!n)return t.warn("Invalid in-app message data: undefined.",n),{};const{type:s=Fu}=n;return e[s]?Bu(n,t)?o?{render:()=>i?null:e[s]({...n,meta:o}),setRenderAttempted:!0,includeInNotification:!0}:(t.warn("Invalid in-app message meta: undefined.",o),{}):{}:(t.warn("Invalid in-app message data: unknown type.",n),{})};const Hu=e=>{const t=Je(`#${e}`,document);t&&t.length>0&&ut(t[0])},Wu=e=>{const t={};if(!e||"a"!==e.tagName.toLowerCase())return t;const{href:a}=e;if(!a||!a.startsWith("adbinapp://"))return t;const n=a.split("?"),r=n[0].split("://")[1],o=e.innerText,i=e.getAttribute("data-uuid")||"";let s,l;if(Ue(n)){const e=de.default.parse(n[1]);s=e.interaction||"",l=ai(e.link||"")}return{action:r,interaction:s,link:l,label:o,uuid:i}};var zu=e=>(t,a=!1)=>(a?e.location.href=t:e.location.replace(t),new Promise((()=>{})));const Ju="alloy-messaging-container",Gu="alloy-overlay-container",Qu="alloy-content-iframe",Ku=()=>[Ju,Gu].forEach(Hu),Yu=(e,t=zu(window))=>a=>{a.preventDefault(),a.stopImmediatePropagation();const{target:n}=a,r="a"===n.tagName.toLowerCase()?n:n.closest("a");if(!r)return;const{action:o,interaction:i,link:s,label:l,uuid:c}=Wu(r);e(o,{label:l,id:i,uuid:c,link:s}),"dismiss"===o&&Ku(),Gt(s)&&s.length>0&&t(s,!0)},Zu=(e,t)=>{const a=(new DOMParser).parseFromString(e,Lu),n=a.querySelector("script");n&&n.setAttribute("nonce",jc());const r=Te("iframe",{src:URL.createObjectURL(new Blob([a.documentElement.outerHTML],{type:"text/html"})),id:Qu});return r.addEventListener("load",(()=>{const{addEventListener:e}=r.contentDocument||r.contentWindow.document;e("click",t)})),r},eg=(e,t,a,n)=>{[{id:Gu,element:n},{id:Ju,element:a},{id:Qu,element:e}].forEach((({id:e,element:a})=>{const{style:n={},params:r={}}=t[e];a.style={...a.style,...n};const{parentElement:o="body",insertionMethod:i="appendChild",enabled:s=!0}=r,l=document.querySelector(o);s&&l&&"function"==typeof l[i]&&l[i](a)}))},tg=e=>{const{verticalAlign:t,width:a,horizontalAlign:n,backdropColor:r,height:o,cornerRadius:i,horizontalInset:s,verticalInset:l,uiTakeover:c=!1}=e,d={width:a?`${a}%`:"100%",backgroundColor:r||"rgba(0, 0, 0, 0.5)",borderRadius:i?`${i}px`:"0px",border:"none",position:c?"fixed":"relative",overflow:"hidden"};return"left"===n?d.left=s?`${s}%`:"0":"right"===n?d.right=s?`${s}%`:"0":"center"===n&&(d.left="50%",d.transform="translateX(-50%)"),"top"===t?d.top=l?`${l}%`:"0":"bottom"===t?(d.position="fixed",d.bottom=l?`${l}%`:"0"):"center"===t&&(d.top="50%",d.transform=("center"===n?`${d.transform} `:"")+"translateY(-50%)",d.display="flex",d.alignItems="center",d.justifyContent="center"),d.height=o?`${o}vh`:"100%",d},ag=e=>{const{backdropOpacity:t,backdropColor:a}=e;return{position:"fixed",top:"0",left:"0",width:"100%",height:"100%",background:"transparent",opacity:t||.5,backgroundColor:a||"#FFFFFF"}},ng=["enabled","parentElement","insertionMethod"],rg=e=>{if(!e)return!1;const t=Object.keys(e);if(!t.includes(Ju))return!1;if(!t.includes(Gu))return!1;const a=Object.values(e);for(let e=0;e<a.length;e+=1){if(!Vn(a[e],"style"))return!1;if(!Vn(a[e],"params"))return!1;for(let t=0;t<ng.length;t+=1)if(!Vn(a[e].params,ng[t]))return!1}return!0},og=e=>{if(!e)return;const{uiTakeover:t=!1}=e;return{[Qu]:{style:{border:"none",width:"100%",height:"100%"},params:{enabled:!0,parentElement:"#alloy-messaging-container",insertionMethod:"appendChild"}},[Ju]:{style:tg(e),params:{enabled:!0,parentElement:"body",insertionMethod:"appendChild"}},[Gu]:{style:ag(e),params:{enabled:!0===t,parentElement:"body",insertionMethod:"appendChild"}}}},ig=(e={},t)=>{Ku();const{content:a,contentType:n,mobileParameters:r}=e;let{webParameters:o}=e;if(n!==Lu)return;const i=Te("div",{id:Ju}),s=Zu(a,Yu(t)),l=Te("div",{id:Gu});rg(o)||(o=og(r)),o&&eg(s,o,i,l)};var sg=(e,t)=>new Promise((a=>{const{meta:n}=e;ig(e,((e,a)=>{const r={};r[tc.INTERACT]=ec,-1!==Object.values(tc).indexOf(e)&&(r[e]=ec),t({decisionsMeta:[n],propositionAction:a,eventType:Ql,propositionEventTypes:Object.keys(r)})})),a({meta:n})})),lg=e=>({defaultContent:t=>sg(t,e)}),cg=(e,t)=>(a,n,r)=>{if(!a)return()=>{};if(!n){const e=Pe();return t.concat(e.promise),e.resolve}return(t=[],a=[])=>{Ue(t)&&e({decisionsMeta:t,viewName:r}),Ue(a)&&e({decisionsMeta:a,eventType:Zl,propositionAction:{reason:"Conflict"},viewName:r})}},dg=({showContainers:e,consent:t})=>()=>{const{state:a,wasSet:n}=t.current();a===Fn&&n?e():t.awaitConsent().catch(e)};const ug=e=>{const{documentElement:t}=document;let a=e;const n=new Set;let r,o;for(;a&&a!==t;){const e=Ec(a,Vu);e&&n.add(e),r=r||Ec(a,wu),o=o||Ec(a,ku),a=a.parentNode}return{interactIds:[...n],clickLabel:r,clickToken:o}},gg=e=>{const t=e.find((e=>e.scopeType===Xd));return t?t.scope:void 0},mg=(e,t,a)=>n=>{const{scopeDetails:r={}}=n,{decisionProvider:o}=r;return e[o]===_u||e[o]===Cu&&(t||a)};var pg=(e,t,a)=>{const{interactIds:n,clickLabel:r="",clickToken:o}=ug(e),i=mg(a,r,o);if(0===n.length)return{};const s=t(n).filter(i);return{decisionsMeta:Hd(s),propositionActionLabel:r,propositionActionToken:o,viewName:gg(s)}};const fg="AJO",vg="TGT",yg=({config:e,logger:t,eventManager:a,consent:n})=>{const{targetMigrationEnabled:r,prehidingStyle:o,autoCollectPropositionInteractions:i}=e,s=Ld({eventManager:a,mergeDecisionsMeta:Qd}),l=od(t),c=rd(t),{storeInteractionMeta:d,getInteractionMetas:u}=ru(),{storeClickMeta:g,getClickSelectors:m,getClickMetas:p}=nu(),f=cu({window:window}),v=Nd(),y=vu([fu,gu]),h=yu({preprocess:y,isPageWideSurface:Ml}),b=eu({createProposition:h}),_=zu(window),E={[Rl]:bu,[Nl]:xu({modules:v,logger:t,storeInteractionMeta:d,storeClickMeta:g,autoCollectPropositionInteractions:i}),[Ll]:ju({modules:v,logger:t,storeInteractionMeta:d,autoCollectPropositionInteractions:i}),[ql]:Mu({logger:t,executeRedirect:_,collect:s}),[Xl]:$u({modules:lg(s),logger:t})},C=Ou({schemaProcessors:E,logger:t}),P=hu(),V=cg(s,P),w=Fd({prehidingStyle:o,showContainers:l,hideContainers:c,mergeQuery:Kd,processPropositions:C,createProposition:h,notificationHandler:V,consent:n,logger:t}),k=Zd({mergeDecisionsMeta:Qd,collectInteractions:pg,collectClicks:Jd,getInteractionMetas:u,getClickMetas:p,getClickSelectors:m,autoCollectPropositionInteractions:i}),A=tu({processPropositions:C,viewCache:b,logger:t}),S=lu({processPropositions:C,createProposition:h,renderedPropositions:P,viewCache:b}),T=du({targetMigrationEnabled:r}),D=Nu({processPropositions:C,createProposition:h,notificationHandler:V}),x=dg({showContainers:l,consent:n});return lc({getPageLocation:f,logger:t,fetchDataHandler:w,viewChangeHandler:A,onClickHandler:k,isAuthoringModeEnabled:Gd,mergeQuery:Kd,viewCache:b,showContainers:l,applyPropositions:S,setTargetMigration:T,mergeDecisionsMeta:Qd,renderedPropositions:P,onDecisionHandler:D,handleConsentFlicker:x})};yg.namespace="Personalization";const hg=Pu.map((e=>En(e)));yg.configValidators=Vn({prehidingStyle:wn().nonEmpty(),targetMigrationEnabled:bn().default(!1),autoCollectPropositionInteractions:Vn({[fg]:vn(hg).default(_u),[vg]:vn(hg).default(Eu)}).default({[fg]:_u,[vg]:Eu}).noUnknownFields()});const bg="personalization:decisions",_g=e=>null!==e&&"object"==typeof e&&Object.getPrototypeOf(e)===Object.prototype,Eg=(e,t={},a=[])=>(Object.keys(e).forEach((n=>{_g(e[n])||Array.isArray(e[n])?Eg(e[n],t,[...a,n]):t[[...a,n].join(".")]=e[n]})),t);var Cg=e=>_g(e)?Eg(e):e,Pg=({renderDecisions:e,decisionProvider:t,applyResponse:a,event:n,personalization:r,decisionContext:o})=>{const i={...Cg(n.getContent()),...o};return({response:o})=>{if(t.addPayloads(o.getPayloadsByType(bg)),!n.hasQuery())return{propositions:[]};const s=t.evaluate(i);return a({renderDecisions:e,propositions:s,event:n,personalization:r})}};const Vg={MATCHER:"matcher",GROUP:"group",HISTORICAL:"historical"},wg={EQUALS:"eq",NOT_EQUALS:"ne",EXISTS:"ex",NOT_EXISTS:"nx",GREATER_THAN:"gt",GREATER_THAN_OR_EQUAL_TO:"ge",LESS_THAN:"lt",LESS_THAN_OR_EQUAL_TO:"le",CONTAINS:"co",NOT_CONTAINS:"nc",STARTS_WITH:"sw",ENDS_WITH:"ew"},kg={AND:"and",OR:"or"},Ag={ORDERED:"ordered"},Sg={[wg.EQUALS]:d(),[wg.NOT_EQUALS]:u(),[wg.EXISTS]:g(),[wg.NOT_EXISTS]:m(),[wg.GREATER_THAN]:f(),[wg.GREATER_THAN_OR_EQUAL_TO]:v(),[wg.LESS_THAN]:y(),[wg.LESS_THAN_OR_EQUAL_TO]:h(),[wg.CONTAINS]:b(),[wg.NOT_CONTAINS]:_(),[wg.STARTS_WITH]:E(),[wg.ENDS_WITH]:C()},Tg=["iam.eventType","eventType","type"],Dg=["iam.id","id"],xg="TGT",jg="DEFAULT",Ig="ECID",Mg="<key>",Og="<identity>",Rg=ee(ae,(e=>e.join("-"))),Ng=100,Lg=ee(ne),Ug=(e,t)=>a=>{const n=e.getItem(t);if(!n)return a;try{return JSON.parse(n)}catch{return a}},Fg=(e,t,a=(e=>e))=>n=>{e.setItem(t,JSON.stringify(a(n)))},qg=e=>{const t=new Date;return t.setDate(t.getDate()-e),t},Xg=e=>{const{scopeDetails:t={}}=e,{activity:a={}}=t,{id:n}=a;return n},Bg=()=>{const e={};return{getItem:t=>t in e?e[t]:null,setItem:(t,a)=>{e[t]=a}}},$g=e=>{e.clear()},Hg=(e={})=>{const{_experience:t}=e;return!(!t||"object"!=typeof t)},Wg=e=>{const{scopeDetails:t={}}=e,{decisionProvider:a}=t;return a},zg=(e=[])=>{const t=[];return Array.isArray(e)?(e.forEach((e=>{Array.isArray(e)?t.push(...zg(e)):t.push(e)})),t):e};var Jg=(e,t,a)=>{const{html:n,mobileParameters:r}=a;return{schema:Xl,data:{mobileParameters:r,webParameters:{},content:n,contentType:Lu},id:e}},Gg=(e,t,a)=>{const{schema:n,data:r,id:o}=a;return{schema:n,data:r,id:o||e}};const Qg="cjmiam",Kg="schema",Yg={[Qg]:Jg,[Kg]:Gg};var Zg=()=>e=>{const{id:t,type:a,detail:n}=e;return"function"==typeof Yg[a]?Yg[a](t,a,n):n};const em=e=>{const{schema:t,data:a}=e;if(t===Fl)return!0;if(t!==Ul)return!1;try{const e="string"==typeof a.content?JSON.parse(a.content):a.content;return e&&Object.prototype.hasOwnProperty.call(e,"version")&&Object.prototype.hasOwnProperty.call(e,"rules")}catch{return!1}};var tm=(e,t,a)=>{const n=Zg(),r=Xg(e),o=[],i=e=>{const{data:t={},schema:a}=e,n=a===Fl?t:t.content;n&&o.push(ce("string"==typeof n?JSON.parse(n):n))},s=i=>{const s=t.getEvent(Gl,r),l=s?s.firstTimestamp:void 0,c=zg(o.map((e=>e.execute(i)))).map(n).map((e=>{const{firstTimestamp:t}=a.recordQualified(r)||{};return{...e,data:{...e.data,qualifiedDate:t,displayedDate:l}}}));return{...e,items:c}};return Array.isArray(e.items)&&e.items.filter(em).forEach(i),{rank:e?.scopeDetails?.rank||1/0,evaluate:s,isEvaluable:o.length>0}},am=({eventRegistry:e})=>({recordQualified:t=>{if(t)return e.addEvent({},tc.TRIGGER,t)}}),nm=({eventRegistry:e})=>{const t={},a=am({eventRegistry:e}),n=n=>{const r=Xg(n);if(!r)return;const o=tm(n,e,a);o.isEvaluable&&(t[r]=o)};return{addPayload:n,addPayloads:e=>{e.forEach(n)},evaluate:(e={})=>Object.values(t).sort((({rank:e},{rank:t})=>e-t)).map((t=>t.evaluate(e))).filter((e=>e.items.length>0))}},rm=e=>({renderDecisions:t=!1,propositions:a=[],event:n,personalization:r})=>(e&&e.onDecision({renderDecisions:t,propositions:a,event:n,personalization:r}),{propositions:a});const om="events",im=1e3,sm=30,lm=e=>`iam.${e}`,cm=(e=im,t=sm)=>a=>{const n={};return Object.keys(a).forEach((r=>{n[r]={},Object.values(a[r]).filter((e=>new Date(e.firstTimestamp)>=qg(t))).sort(((e,t)=>e.firstTimestamp-t.firstTimestamp)).slice(-1*e).forEach((e=>{n[r][e.event[lm("id")]]=e}))})),n};var dm=({storage:e})=>{let t,a,n,r=e;const o=e=>{r=e,t=Ug(r,om),a=Fg(r,om,cm(im,sm)),n=t({})};o(e);const i=(e,t,r,o)=>{if(!t||!r)return;n[t]||(n[t]={});const i=n[t][r],s=i?i.count:0,l=(new Date).getTime(),c=i?i.firstTimestamp||i.timestamp:l;return n[t][r]={event:{...e,[lm("id")]:r,[lm("eventType")]:t,[lm("action")]:o},firstTimestamp:c,timestamp:l,count:s+1},a(n),n[t][r]};return{addExperienceEdgeEvent:e=>{const{xdm:t={}}=e.getContent(),{_experience:a}=t;if(!Hg(t))return;const{decisioning:n={}}=a,{propositionEventType:r={},propositionAction:o={},propositions:s=[]}=n,l=Object.keys(r);if(0===l.length)return;const c=e=>r[e]===ec,{id:d}=o;l.filter(c).forEach((e=>{s.forEach((t=>{Wg(t)===fg&&i({},e,Xg(t),d)}))}))},addEvent:i,getEvent:(e,t)=>{if(n[e])return n[e][t]},toJSON:()=>n,setStorage:o}},um=({eventRegistry:e,window:t,getBrowser:a})=>{const n=(new Date).getTime(),r=()=>({title:t.title,url:t.url,...Zt(t.url)}),o=()=>({url:t.referrer,...Zt(t.referrer)}),i=()=>{const e=new Date,t=e.getTime();return{pageLoadTimestamp:n,currentTimestamp:t,currentDate:e.getDate(),"~state.com.adobe.module.lifecycle/lifecyclecontextdata.dayofweek":e.getDay()+1,"~state.com.adobe.module.lifecycle/lifecyclecontextdata.hourofday":e.getHours(),currentMinute:e.getMinutes(),currentMonth:e.getMonth(),currentYear:e.getFullYear(),pageVisitDuration:t-n,"~timestampu":t/1e3,"~timestampz":e.toISOString()}},s=()=>({height:t.height,width:t.width,scrollY:t.scrollY,scrollX:t.scrollX}),l={browser:{name:a()},page:r(),referringPage:o()},c=()=>({...l,...i(),window:s(),"~sdkver":_o});return{getContext:(t={})=>{const a={...c(),...t};return{...Cg(a),events:e.toJSON()}}}};const gm=(e,...t)=>t,mm=()=>!0,pm=()=>{let e=gm,t=mm,a=0;const n={},r=e=>()=>{delete n[e]},o=(e,t)=>"function"!=typeof e?()=>{}:(a+=1,n[a]={callback:e,params:t},{id:a,unsubscribe:r(a)}),i=(...a)=>{Object.values(n).forEach((({callback:n,params:r})=>{const o=e(r,...a);t(r,...o)&&n(...o)}))},s=(a,...r)=>{if(!a||!n[a])return;const{callback:o,params:i}=n[a],s=e(i,...r);t(i,...s)&&o(...s)};return{add:o,emit:i,emitOne:s,hasSubscriptions:()=>Object.keys(n).length>0,setEmissionPreprocessor:t=>{"function"==typeof t&&(e=t)},setEmissionCondition:e=>{"function"==typeof e&&(t=e)}}},fm=({options:e})=>Vn({surfaces:hn(wn()).uniqueItems(),schemas:hn(wn()).uniqueItems(),callback:_n().required()}).noUnknownFields()(e),vm=e=>{const{id:t,scope:a,scopeDetails:n}=e;return{id:t,scope:a,scopeDetails:n}};var ym=({collect:e})=>{let t=()=>{};const a=new Set,n=e=>[tc.INTERACT,tc.DISMISS].includes(e),r=(e,t,r)=>{const o=[e,t].join("-"),i=!r.has(o)&&(n(e)||!a.has(o));return r.add(o),a.add(o),i},o=(t,a=[])=>{if(!(a instanceof Array))return Promise.resolve();if(!Object.values(tc).includes(t))return Promise.resolve();const n=[],o=new Set;return a.forEach((e=>{const a=vm(e);r(t,a.id,o)&&n.push(a)})),n.length>0?e({decisionsMeta:n,eventType:oc(t),documentMayUnload:!0}):Promise.resolve()},i=pm(),s=(e,t)=>{const{surfacesFilter:a,schemasFilter:n}=e;return[{propositions:t.filter((e=>!a||a.includes(e.scope))).map((e=>{const{items:t=[]}=e;return{...e,items:t.filter((e=>!n||n.includes(e.schema)))}})).filter((e=>e.items.length>0))},o]};i.setEmissionPreprocessor(s);const l=({surfaces:e,schemas:a,callback:n})=>{const{id:r,unsubscribe:o}=i.add(n,{surfacesFilter:e instanceof Array?e:void 0,schemasFilter:a instanceof Array?a:void 0});return t(r),Promise.resolve({unsubscribe:o})};return{refresh:e=>{t=t=>{t?i.emitOne(t,e):i.emit(e)},t()},command:{optionsValidator:e=>fm({options:e}),run:l}}};const hm={TYPE:"~type",SOURCE:"~source"},bm={EDGE:"com.adobe.eventType.edge",RULES_ENGINE:"com.adobe.eventType.rulesEngine"},_m={REQUEST:"com.adobe.eventSource.requestContent"},Em=({options:e})=>Vn({renderDecisions:bn(),personalization:Vn({decisionContext:Vn({})})}).noUnknownFields()(e);var Cm=({contextProvider:e,decisionProvider:t})=>({optionsValidator:e=>Em({options:e}),run:({renderDecisions:a,decisionContext:n,applyResponse:r})=>r({renderDecisions:a,propositions:t.evaluate(e.getContext(n))})});const Pm=({config:e,eventManager:t,createNamespacedStorage:a,consent:n,getBrowser:r})=>{const{orgId:o,personalizationStorageEnabled:i}=e,s=Ld({eventManager:t,mergeDecisionsMeta:Qd}),l=a(`${Ct(o)}.decisioning.`);i||$g(l.persistent);const c=dm({storage:Bg()}),d=nm({eventRegistry:c}),u=um({eventRegistry:c,window:window,getBrowser:r}),g=Cm({contextProvider:u,decisionProvider:d}),m=ym({collect:s});let p;return{lifecycle:{onDecision({propositions:e}){m.refresh(e)},onComponentsRegistered(e){p=rm(e.lifecycle),i&&n.awaitConsent().then((()=>{c.setStorage(l.persistent)})).catch((()=>{l&&$g(l.persistent)}))},onBeforeEvent({event:e,renderDecisions:t,personalization:a={},onResponse:n=Qt}){const{decisionContext:r={}}=a;n(Pg({renderDecisions:t,decisionProvider:d,applyResponse:p,event:e,personalization:a,decisionContext:u.getContext({[hm.TYPE]:bm.EDGE,[hm.SOURCE]:_m.REQUEST,...r})}))},onBeforeRequest({request:e}){const t=e.getPayload().toJSON(),{events:a=[]}=t;0!==a.length&&a.forEach((e=>c.addExperienceEdgeEvent(e)))}},commands:{evaluateRulesets:{run:({renderDecisions:e,personalization:t={}})=>{const{decisionContext:a={}}=t;return g.run({renderDecisions:e,decisionContext:{[hm.TYPE]:bm.RULES_ENGINE,[hm.SOURCE]:_m.REQUEST,...a},applyResponse:p})},optionsValidator:g.optionsValidator},subscribeRulesetItems:m.command}}};Pm.namespace="RulesEngine",Pm.configValidators=Vn({personalizationStorageEnabled:bn().default(!1)});var Vm=Vn({streamingMedia:Vn({channel:wn().nonEmpty().required(),playerName:wn().nonEmpty().required(),appVersion:wn(),mainPingInterval:Cn().minimum(10).maximum(50).default(10),adPingInterval:Cn().minimum(1).maximum(10).default(10)}).noUnknownFields()}),wm=({options:e})=>vn([Vn({playerId:wn().required(),getPlayerDetails:_n().required(),xdm:Vn({mediaCollection:Vn({sessionDetails:Vn(yn()).required()})}),edgeConfigOverrides:Vn({})}).required(),Vn({xdm:Vn({mediaCollection:Vn({playhead:Cn().required(),sessionDetails:Vn(yn()).required()})}),edgeConfigOverrides:Vn({})}).required()],"Error validating the createMediaSession command options.")(e),km=({options:e})=>vn([Vn({playerId:wn().required(),xdm:Vn({eventType:kn(...Object.values(Ws)).required(),mediaCollection:Vn(yn())}).required()}).required(),Vn({xdm:Vn({eventType:kn(...Object.values(Ws)).required(),mediaCollection:Vn({playhead:Cn().integer().required(),sessionID:wn().required()}).required()}).required()}).required()],"Error validating the sendMediaEvent command options.")(e),Am=({config:e,trackMediaEvent:t,trackMediaSession:a,mediaResponseHandler:n})=>({lifecycle:{onBeforeEvent({mediaOptions:e,onResponse:t=Qt}){if(!e)return;const{legacy:a,playerId:r,getPlayerDetails:o}=e;a||t((({response:e})=>n({playerId:r,getPlayerDetails:o,response:e})))}},commands:{createMediaSession:{optionsValidator:e=>wm({options:e}),run:a},sendMediaEvent:{optionsValidator:e=>km({options:e}),run:a=>e.streamingMedia?t(a):Promise.reject(new Error("Streaming media is not configured."))}}});const Sm=({config:e,logger:t,eventManager:a,sendEdgeNetworkRequest:n,consent:r})=>{const o=Qs(),i=Js({config:e,eventManager:a,consent:r,sendEdgeNetworkRequest:n,setTimestamp:ho((()=>new Date))}),s=Ys({mediaSessionCacheManager:o,mediaEventManager:i,config:e}),l=Zs({config:e,mediaEventManager:i,mediaSessionCacheManager:o}),c=tl({mediaSessionCacheManager:o,config:e,trackMediaEvent:s});return Am({config:e,trackMediaEvent:s,mediaResponseHandler:c,trackMediaSession:l})};Sm.namespace="Streaming media",Sm.configValidators=Vm;const{console:Tm}=window,Dm=Xt(window),xm=(e={})=>{const t=Vn({name:wn().default("alloy"),monitors:hn(Vn({})).default([]),components:hn(_n())}).noUnknownFields(),{name:a,monitors:n,components:r}=t(e),o=()=>(window.__alloyMonitors||[]).concat(n),i=Dn({console:Tm,locationSearch:window.location.search,createLogger:_r,instanceName:a,createNamespacedStorage:Dm,getMonitors:o}),s=Oi({instanceName:a,logController:i,components:r});return i.logger.logOnInstanceCreated({instance:s}),s};t.createCustomInstance=xm,t.components=[ws,Ts,Xs,Hs,vl,yg,Pm,Sm]}},"adobe-alloy/dist/lib/instanceManager/createInstanceManager.js":{script:function(e){"use strict";e.exports=({turbine:e,window:t,createCustomInstance:a,components:n,createEventMergeId:r,orgId:o,wrapOnBeforeEventSend:i,getConfigOverrides:s})=>{const{instances:l}=e.getExtensionSettings(),c={},d={};return t.__alloyMonitors=t.__alloyMonitors||[],t.__alloyMonitors.push({onInstanceCreated:(...e)=>{d.onInstanceCreated||=[],d.onInstanceCreated.push(e)},onInstanceConfigured:(...e)=>{d.onInstanceConfigured||=[],
d.onInstanceConfigured.push(e)},onBeforeCommand(...e){const{commandName:t}=e[0];"configure"===t&&(d.onBeforeCommand||=[],d.onBeforeCommand.push(e))}}),l.forEach((({name:r,edgeConfigId:l,stagingEdgeConfigId:d,developmentEdgeConfigId:u,onBeforeEventSend:g,...m})=>{const p=a({name:r,components:n});t[r]=p,t.__alloyNS||(t.__alloyNS=[]),t.__alloyNS.push(r),c[r]=p;const f=e.environment&&e.environment.stage,v="development"===f&&u||"staging"===f&&d||l;m.edgeConfigOverrides=s(m),p("configure",{...m,datastreamId:v,debugEnabled:e.debugEnabled,orgId:m.orgId||o,onBeforeEventSend:i(g)}),e.onDebugChanged((e=>{p("setDebug",{enabled:e})}))})),{getInstance:e=>c[e],createEventMergeId:()=>r(),addMonitor(e){t.__alloyMonitors.push(e),Object.keys(d).forEach((t=>{e[t]&&d[t].forEach((a=>{e[t](...a)}))}))}}}}},"adobe-alloy/dist/lib/instanceManager/injectWrapOnBeforeEventSend.js":{script:function(e){"use strict";e.exports=({version:e})=>t=>a=>{if(a.xdm.implementationDetails.name=`${a.xdm.implementationDetails.name}/reactor`,a.xdm.implementationDetails.version=`${a.xdm.implementationDetails.version}+${e}`,t)return t(a)}}},"adobe-alloy/dist/lib/utils/createGetConfigOverrides.js":{script:function(e){"use strict";const t=e=>t=>{var a,n,r,o;const{edgeConfigOverrides:i}=t;let s;if(i){if(i[e])s={...i[e]};else{if(i.development||i.staging||i.production)return;s=i}if(0!==Object.keys(s).length&&!1!==s.enabled){if(delete s.enabled,(null===(a=s.com_adobe_analytics)||void 0===a||null===(a=a.reportSuites)||void 0===a?void 0:a.length)>0&&(s.com_adobe_analytics.reportSuites=s.com_adobe_analytics.reportSuites.flatMap((e=>e.includes(",")?e.split(/,\s*/gi):e)).map((e=>e.trim())).filter(Boolean)),void 0!==(null===(n=s.com_adobe_identity)||void 0===n?void 0:n.idSyncContainerId)&&null!==(null===(r=s.com_adobe_identity)||void 0===r?void 0:r.idSyncContainerId)&&"string"==typeof(null===(o=s.com_adobe_identity)||void 0===o?void 0:o.idSyncContainerId)){const e=parseInt(s.com_adobe_identity.idSyncContainerId.trim(),10);if(Number.isNaN(e))throw new Error(`The ID sync container ID "${s.com_adobe_identity.idSyncContainerId}" is not a valid integer.`);s.com_adobe_identity.idSyncContainerId=e}return s}}};e.exports=t}},"adobe-alloy/dist/lib/createEventMergeIdCache.js":{script:function(e){"use strict";e.exports=()=>{const e={};return{set(t,a){e[t]=a},getByCacheId:t=>e[t],clearByEventMergeId(t){Object.keys(e).forEach((a=>{e[a]===t&&delete e[a]}))}}}}},"adobe-alloy/dist/lib/createSendEventCallbackStorage.js":{script:function(e){"use strict";e.exports=()=>{const e=[];return{add(t){e.push(t)},triggerEvent(t){e.forEach((e=>{e(t)}))}}}}},"adobe-alloy/dist/lib/createMediaCollectionSessionStorage.js":{script:function(e){"use strict";e.exports=()=>{const e={};return{add({playerId:t,sessionDetails:a}){if(e[t])throw new Error(`Player Id ${t} already exists`);e[t]=a},remove({playerId:t}){e[t]=void 0},get:({playerId:t})=>e[t]}}}},"adobe-alloy/dist/lib/createVariableStore.js":{script:function(e){"use strict";e.exports=()=>({})}},"adobe-alloy/dist/lib/actions/sendEvent/createSendEvent.js":{script:function(e,t,a){"use strict";const n=a("../../utils/clone");e.exports=({instanceManager:e,sendEventCallbackStorage:t,getConfigOverrides:a})=>r=>{const{instanceName:o,...i}=r;i.edgeConfigOverrides=a(i);const s=e.getInstance(o);if(!s)throw new Error(`Failed to send event for instance "${o}". No matching instance was configured with this name.`);return i.xdm&&(i.xdm=n(i.xdm)),i.data&&(i.data=n(i.data)),s("sendEvent",i).then((e=>{t.triggerEvent(e)}))}}},"adobe-alloy/dist/lib/utils/clone.js":{script:function(e){"use strict";e.exports=e=>JSON.parse(JSON.stringify(e))}},"adobe-alloy/dist/lib/events/sendEventComplete/createSendEventComplete.js":{script:function(e){"use strict";e.exports=({sendEventCallbackStorage:e})=>(t,a)=>{e.add(a)}}},"adobe-alloy/dist/lib/actions/applyPropositions/createApplyPropositions.js":{script:function(e){"use strict";e.exports=({instanceManager:e})=>t=>{const{instanceName:a,...n}=t,r=e.getInstance(a);if(!r)throw new Error(`Failed to apply propositions for instance "${a}". No instance was found with this name.`);return r("applyPropositions",n)}}}}},"mapping-table":{displayName:"Mapping Table",hostedLibFilesBaseUrl:"https://assets.adobedtm.com/extensions/EP29c1cfa85ec74c28b3ef1369f262762b/",modules:{"mapping-table/src/lib/dataElements/mappingTable.js":{name:"mapping-table",displayName:"Mapping Table",script:function(e,t,a,n){"use strict";e.exports=function(e){if(null!=e){var t=e.dataElement;r();try{for(var a=0;a<e.size;a++){var o=e[a].method,i=e[a].output,s=e[a].input;if("exact match"===o){if(t===s)return i}else if("exact match i"===o){if("boolean"==typeof t)continue;if(t.toLowerCase()===s.toLowerCase())return i}else if("starts with"===o){if("boolean"==typeof t)continue;if(t.startsWith(s))return i}else if("contains"===o){if("boolean"==typeof t)continue;if(t.indexOf(s)>-1)return i}else if("regex"===o){if("boolean"==typeof t)continue;if(new RegExp(s).test(t))return i}else if("regex matching"===o){if("boolean"==typeof t)continue;var l=t.match(new RegExp(s));if(null!==l){for(var c=l.length-1;c>=1;c--)i=i.split("$"+c).join(l[c]);return i}}else if("is true"===o){if(!0===t)return i}else if("is false"===o&&!1===t)return i}}catch(e){n.logger.error("Error during evaluation: "+e.message)}if(!0===e.defaultValueEmpty)return;return t}};var r=function(){String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.substr(t,e.length)===e})}}}}},core:{displayName:"Core",hostedLibFilesBaseUrl:"https://assets.adobedtm.com/extensions/EPdea2007e025e4854a6b4ed545e844745/",modules:{"core/src/lib/dataElements/javascriptVariable.js":{name:"javascript-variable",displayName:"JavaScript Variable",script:function(e,t,a){"use strict";var n=a("../helpers/getObjectProperty.js");e.exports=function(e){return n(window,e.path)}}},"core/src/lib/dataElements/constant.js":{name:"constant",displayName:"Constant",script:function(e){"use strict";e.exports=function(e){return e.value}}},"core/src/lib/dataElements/customCode.js":{name:"custom-code",displayName:"Custom Code",script:function(e){"use strict";e.exports=function(e,t){return e.source(t)}}},"core/src/lib/dataElements/queryStringParameter.js":{name:"query-string-parameter",displayName:"Query String Parameter",script:function(e,t,a){"use strict";var n=a("@adobe/reactor-window"),r=a("@adobe/reactor-query-string");e.exports=function(e){var t=r.parse(n.location.search);if(!e.caseInsensitive)return t[e.name];for(var a=e.name.toLowerCase(),o=Object.keys(t),i=0;i<o.length;i++){var s=o[i];if(s.toLowerCase()===a)return t[s]}}}},"core/src/lib/dataElements/cookie.js":{name:"cookie",displayName:"Cookie",script:function(e,t,a){"use strict";var n=a("@adobe/reactor-cookie");e.exports=function(e){return n.get(e.name)}}},"core/src/lib/dataElements/pageInfo.js":{name:"page-info",displayName:"Page Info",script:function(e,t,a){"use strict";var n=a("@adobe/reactor-document");e.exports=function(e){switch(e.attribute){case"url":return n.location.href;case"hostname":return n.location.hostname;case"pathname":return n.location.pathname;case"protocol":return n.location.protocol;case"referrer":return n.referrer;case"title":return n.title}}}},"core/src/lib/dataElements/runtimeEnvironment.js":{name:"runtime-environment",displayName:"Runtime Environment",script:function(e,t,a,n){"use strict";var r=a("@adobe/reactor-window");e.exports=function(e,t){switch(e.attribute){case"buildDate":return n.buildInfo.buildDate;case"environmentStage":return r._satellite.environment.stage;case"propertyName":return r._satellite.property.name;case"propertyId":return r._satellite.property.id;case"ruleName":return t.$rule.name;case"ruleId":return t.$rule.id;case"eventType":return t.$type;case"eventDetail":return t.detail;case"DCRIdentifier":return t.identifier}}}},"core/src/lib/events/historyChange.js":{name:"history-change",displayName:"History Change",script:function(e,t,a){"use strict";var n=a("./helpers/debounce"),r=a("./helpers/once"),o=window.history,i=window.location.href,s=[],l=function(e,t,a){var n=e[t];e[t]=function(){var t=n.apply(e,arguments);return a.apply(null,arguments),t}},c=n((function(){var e=window.location.href;i!==e&&(s.forEach((function(e){e()})),i=e)}),0),d=r((function(){o&&(o.pushState&&l(o,"pushState",c),o.replaceState&&l(o,"replaceState",c)),window.addEventListener("popstate",c),window.addEventListener("hashchange",c)}));e.exports=function(e,t){d(),s.push(t)}}},"core/src/lib/conditions/valueComparison.js":{name:"value-comparison",displayName:"Value Comparison",script:function(e,t,a){"use strict";var n=a("../helpers/stringAndNumberUtils").isString,r=a("../helpers/stringAndNumberUtils").isNumber,o=a("../helpers/stringAndNumberUtils").castToStringIfNumber,i=a("../helpers/stringAndNumberUtils").castToNumberIfString,s=function(e,t){return t&&n(e)?e.toLowerCase():e},l=function(e){return function(t,a,r){return t=o(t),a=o(a),n(t)&&n(a)&&e(t,a,r)}},c=function(e){return function(t,a){return t=i(t),a=i(a),r(t)&&r(a)&&e(t,a)}},d=function(e){return function(t,a,n){return e(s(t,n),s(a,n))}},u={equals:d((function(e,t){return e==t})),doesNotEqual:function(){return!u.equals.apply(null,arguments)},contains:l(d((function(e,t){return-1!==e.indexOf(t)}))),doesNotContain:function(){return!u.contains.apply(null,arguments)},startsWith:l(d((function(e,t){return 0===e.indexOf(t)}))),doesNotStartWith:function(){return!u.startsWith.apply(null,arguments)},endsWith:l(d((function(e,t){return e.substring(e.length-t.length,e.length)===t}))),doesNotEndWith:function(){return!u.endsWith.apply(null,arguments)},matchesRegex:l((function(e,t,a){return new RegExp(t,a?"i":"").test(e)})),doesNotMatchRegex:function(){return!u.matchesRegex.apply(null,arguments)},lessThan:c((function(e,t){return e<t})),lessThanOrEqual:c((function(e,t){return e<=t})),greaterThan:c((function(e,t){return e>t})),greaterThanOrEqual:c((function(e,t){return e>=t})),isTrue:function(e){return!0===e},isTruthy:function(e){return Boolean(e)},isFalse:function(e){return!1===e},isFalsy:function(e){return!e}};e.exports=function(e){return u[e.comparison.operator](e.leftOperand,e.rightOperand,Boolean(e.comparison.caseInsensitive))}}},"core/src/lib/events/libraryLoaded.js":{name:"library-loaded",displayName:"Library Loaded (Page Top)",script:function(e,t,a){"use strict";var n=a("./helpers/pageLifecycleEvents");e.exports=function(e,t){n.registerLibraryLoadedTrigger(t)}}},"core/src/lib/actions/customCode.js":{name:"custom-code",displayName:"Custom Code",script:function(e,t,a,n){"use strict";var r,o,i,s,l=a("@adobe/reactor-document"),c=a("@adobe/reactor-promise"),d=a("./helpers/decorateCode"),u=a("./helpers/loadCodeSequentially"),g=a("../../../node_modules/postscribe/dist/postscribe"),m=a("./helpers/unescapeHtmlCode"),p=a("../helpers/findPageScript").getTurbine,f=(o=function(e){g(l.body,e,{beforeWriteToken:function(e){var t=e.tagName&&e.tagName.toLowerCase();return r&&"script"===t&&(e.attrs.nonce=r),"script"!==t&&"style"!==t||(Object.keys(e.attrs||{}).forEach((function(t){e.attrs[t]=m(e.attrs[t])})),e.src&&(e.src=m(e.src))),e},error:function(e){n.logger.error(e.msg)}})},i=[],s=function(){if(l.body)for(;i.length;)o(i.shift());else setTimeout(s,20)},function(e){i.push(e),s()}),v=function(){if(l.currentScript)return l.currentScript.async;var e=p();return!e||e.async}();e.exports=function(e,t){var a;r=n.getExtensionSettings().cspNonce;var o={settings:e,event:t},i=o.settings.source;if(i)return o.settings.isExternal?u(i).then((function(e){return e?(a=d(o,e),f(a.code),a.promise):c.resolve()})):(a=d(o,i),v||"loading"!==l.readyState?f(a.code):l.write&&!1===n.propertySettings.ruleComponentSequencingEnabled?l.write(a.code):f(a.code),a.promise)}}},"core/src/lib/events/entersViewport.js":{name:"enters-viewport",displayName:"Enters Viewport",script:function(e,t,a){"use strict";var n,r=a("@adobe/reactor-document"),o=a("@adobe/reactor-window"),i=a("./helpers/weakMap"),s=a("./helpers/enableWeakMapDefaultValue"),l=a("./helpers/matchesSelector"),c=a("./helpers/matchesProperties"),d=a("../helpers/stringAndNumberUtils").castToNumberIfString,u=a("../helpers/intersectionObserverIntervals"),g={FIRST_ENTRY:"firstEntry",EVERY_ENTRY:"everyEntry"},m=s(new i,(function(){return{timeoutIds:[],completedListeners:[],inViewport:!1}})),p={},f=function(e){var t=m.get(e);t.inViewport||(t.inViewport=!0,Object.keys(p).forEach((function(a){l(e,a)&&p[a].forEach((function(a){if(c(e,a.settings.elementProperties)&&-1===t.completedListeners.indexOf(a)){var n=function(){(a.settings.frequency||g.FIRST_ENTRY)===g.FIRST_ENTRY&&t.completedListeners.push(a),a.trigger({element:e,target:e,delay:a.settings.delay})};if(a.settings.delay){var r=o.setTimeout((function(){Boolean(m.get(e).inViewport)&&n()}),a.settings.delay);t.timeoutIds.push(r)}else n()}}))})))},v=function(e){var t=m.get(e);t.inViewport=!1,t.timeoutIds.length&&(t.timeoutIds.forEach(clearTimeout),t.timeoutIds=[])},y=[],h=new IntersectionObserver((function(e){e.forEach((function(e){e.isIntersecting?f(e.target):v(e.target)}))}),{root:null,rootMargin:"0px"}),b=function(e){e&&r.querySelectorAll(e).forEach((function(e){h.observe(e)}))};n=function(){b(y.join(",")),y=[];var e=o.setInterval((function(){b(Object.keys(p).join(","))}),u.standard.pageElementsRefresh);o.addEventListener("beforeunload",(function(){h.disconnect(),o.clearInterval(e)}),!1)},"loading"!==r.readyState?n():r.addEventListener("DOMContentLoaded",n),e.exports=function(e,t){if(e.elementSelector){var a=p[e.elementSelector],n=Boolean(!a);n&&(a=p[e.elementSelector]=[]),e.delay=d(e.delay),a.push({settings:e,trigger:t}),"loading"===r.readyState?y.push(e.elementSelector):n&&b(e.elementSelector)}}}},"core/src/lib/conditions/customCode.js":{name:"custom-code",displayName:"Custom Code",script:function(e){"use strict";e.exports=function(e,t){return e.source.call(t.element,t,t.target)}}},"core/src/lib/events/directCall.js":{name:"direct-call",displayName:"Direct Call",script:function(e,t,a,n){"use strict";var r={};window._satellite=window._satellite||{},window._satellite.track=function(e,t){e=e.trim();var a=r[e];if(a){var o={identifier:e,detail:t};a.forEach((function(e){e(o)}));var i=['Rules using the direct call event type with identifier "'+e+'" have been triggered'+(t?" with additional detail:":".")];t&&i.push(t),n.logger.log.apply(n.logger,i)}else n.logger.log('"'+e+'" does not match any direct call identifiers.')},e.exports=function(e,t){var a=r[e.identifier];a||(a=r[e.identifier]=[]),a.push(t)}}},"core/src/lib/events/click.js":{name:"click",displayName:"Click",script:function(e,t,a){"use strict";var n=a("@adobe/reactor-window"),r=a("./helpers/createBubbly")(),o=new(a("./helpers/weakMap")),i=2,s=a("../helpers/stringAndNumberUtils").castToNumberIfString,l=function(e){if(!e.ctrlKey&&!e.metaKey&&e.button!==i)for(var t=e.target;t;){var a=t.tagName;if(a&&"a"===a.toLowerCase()){var r=t.getAttribute("href"),o=t.getAttribute("target");return r&&(!o||"_self"===o||"_top"===o&&n.top===n||o===n.name)?t:void 0}t=t.parentNode}};document.addEventListener("click",r.evaluateEvent,!0),e.exports=function(e,t){r.addListener(e,(function(a){var r=a.nativeEvent;if(!r.s_fe){var i=s(e.anchorDelay);if(i&&!o.has(r)){var c=l(r);c&&(r.preventDefault(),setTimeout((function(){n.location=c.href}),i)),o.set(r,!0)}t(a)}}))},e.exports.__reset=r.__reset}},"core/src/lib/events/customCode.js":{name:"custom-code",displayName:"Custom Code",script:function(e){"use strict";e.exports=function(e,t){e.source(t)}}},"core/src/lib/helpers/getObjectProperty.js":{script:function(e){"use strict";e.exports=function(e,t){for(var a=t.split("."),n=e,r=0,o=a.length;r<o;r++){if(null==n)return;n=n[a[r]]}return n}}},"core/src/lib/events/helpers/debounce.js":{script:function(e){"use strict";e.exports=function(e,t,a){var n=null;return function(){var r=a||this,o=arguments;clearTimeout(n),n=setTimeout((function(){e.apply(r,o)}),t)}}}},"core/src/lib/events/helpers/once.js":{script:function(e){"use strict";e.exports=function(e,t){var a;return function(){return e&&(a=e.apply(t||this,arguments),e=null),a}}}},"core/src/lib/helpers/stringAndNumberUtils.js":{script:function(e){"use strict";var t=function(e){return"number"==typeof e&&isFinite(e)},a=function(e){return"string"==typeof e||e instanceof String},n=function(e){return t(e)?String(e):e},r=function(e){return a(e)?Number(e):e};e.exports={isNumber:t,isString:a,castToStringIfNumber:n,castToNumberIfString:r}}},"core/src/lib/events/helpers/pageLifecycleEvents.js":{script:function(e,t,a){"use strict";var n=a("@adobe/reactor-window"),r=a("@adobe/reactor-document"),o=-1!==n.navigator.appVersion.indexOf("MSIE 10"),i="WINDOW_LOADED",s="DOM_READY",l="PAGE_BOTTOM",c=[l,s,i],d=function(e,t){return{element:e,target:e,nativeEvent:t}},u={};c.forEach((function(e){u[e]=[]}));var g=function(e,t){c.slice(0,p(e)+1).forEach((function(e){f(t,e)}))},m=function(){return"complete"===r.readyState?i:"interactive"===r.readyState?o?null:s:void 0},p=function(e){return c.indexOf(e)},f=function(e,t){u[t].forEach((function(t){v(e,t)})),u[t]=[]},v=function(e,t){var a=t.trigger,n=t.syntheticEventFn;a(n?n(e):null)};n._satellite=n._satellite||{},n._satellite.pageBottom=g.bind(null,l),r.addEventListener("DOMContentLoaded",g.bind(null,s),!0),n.addEventListener("load",g.bind(null,i),!0),n.setTimeout((function(){var e=m();e&&g(e)}),0),e.exports={registerLibraryLoadedTrigger:function(e){e()},registerPageBottomTrigger:function(e){u[l].push({trigger:e})},registerDomReadyTrigger:function(e){u[s].push({trigger:e,syntheticEventFn:d.bind(null,r)})},registerWindowLoadedTrigger:function(e){u[i].push({trigger:e,syntheticEventFn:d.bind(null,n)})}}}},"core/src/lib/actions/helpers/decorateCode.js":{script:function(e,t,a){"use strict";var n=a("./decorators/decorateGlobalJavaScriptCode"),r=a("./decorators/decorateNonGlobalJavaScriptCode"),o={javascript:function(e,t){return e.settings.global?n(e,t):r(e,t)},html:a("./decorators/decorateHtmlCode")};e.exports=function(e,t){return o[e.settings.language](e,t)}}},"core/src/lib/actions/helpers/loadCodeSequentially.js":{script:function(e,t,a){"use strict";var n=a("@adobe/reactor-promise"),r=a("./getSourceByUrl"),o=n.resolve();e.exports=function(e){var t=new n((function(t){var a=r(e);n.all([a,o]).then((function(e){var a=e[0];t(a)}))}));return o=t,t}}},"core/node_modules/postscribe/dist/postscribe.js":{script:function(e,t){var a,n;a=this,n=function(){return function(e){function t(n){if(a[n])return a[n].exports;var r=a[n]={exports:{},id:n,loaded:!1};return e[n].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var a={};return t.m=e,t.c=a,t.p="",t(0)}([function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var r=n(a(1));e.exports=r.default},function(e,t,a){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}function o(){}function i(){var e=p.shift();if(e){var t=u.last(e);t.afterDequeue(),e.stream=s.apply(void 0,e),t.afterStreamStart()}}function s(e,t,a){function n(e){e=a.beforeWrite(e),f.write(e),a.afterWrite(e)}(f=new d.default(e,a)).id=m++,f.name=a.name||f.id,l.streams[f.name]=f;var r=e.ownerDocument,s={close:r.close,open:r.open,write:r.write,writeln:r.writeln};c(r,{close:o,open:o,write:function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return n(t.join(""))},writeln:function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return n(t.join("")+"\n")}});var u=f.win.onerror||o;return f.win.onerror=function(e,t,n){a.error({msg:e+" - "+t+": "+n}),u.apply(f.win,[e,t,n])},f.write(t,(function(){c(r,s),f.win.onerror=u,a.done(),f=null,i()})),f}function l(e,t,a){if(u.isFunction(a))a={done:a};else if("clear"===a)return p=[],f=null,void(m=0);a=u.defaults(a,g);var n=[e=/^#/.test(e)?window.document.getElementById(e.substr(1)):e.jquery?e[0]:e,t,a];return e.postscribe={cancel:function(){n.stream?n.stream.abort():n[1]=o}},a.beforeEnqueue(n),p.push(n),f||i(),e.postscribe}t.__esModule=!0;var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.default=l;var d=r(a(2)),u=n(a(4)),g={afterAsync:o,afterDequeue:o,afterStreamStart:o,afterWrite:o,autoFix:!0,beforeEnqueue:o,beforeWriteToken:function(e){return e},beforeWrite:function(e){return e},done:o,error:function(e){throw new Error(e.msg)},releaseAsync:!1},m=0,p=[],f=null;c(l,{streams:{},queue:p,WriteStream:d.default})},function(e,t,a){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){var a=g+t,n=e.getAttribute(a);return d.existy(n)?String(n):n}function s(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=g+t;d.existy(a)&&""!==a?e.setAttribute(n,a):e.removeAttribute(n)}t.__esModule=!0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},c=r(a(3)),d=n(a(4)),u=!1,g="data-ps-",m="ps-style",p="ps-script",f=function(){function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,e),this.root=t,this.options=a,this.doc=t.ownerDocument,this.win=this.doc.defaultView||this.doc.parentWindow,this.parser=new c.default("",{autoFix:a.autoFix}),this.actuals=[t],this.proxyHistory="",this.proxyRoot=this.doc.createElement(t.nodeName),this.scriptStack=[],this.writeQueue=[],s(this.proxyRoot,"proxyof",0)}return e.prototype.write=function(){var e;for((e=this.writeQueue).push.apply(e,arguments);!this.deferredRemote&&this.writeQueue.length;){var t=this.writeQueue.shift();d.isFunction(t)?this._callFunction(t):this._writeImpl(t)}},e.prototype._callFunction=function(e){var t={type:"function",value:e.name||e.toString()};this._onScriptStart(t),e.call(this.win,this.doc),this._onScriptDone(t)},e.prototype._writeImpl=function(e){this.parser.append(e);for(var t=void 0,a=void 0,n=void 0,r=[];(t=this.parser.readToken())&&!(a=d.isScript(t))&&!(n=d.isStyle(t));)(t=this.options.beforeWriteToken(t))&&r.push(t);r.length>0&&this._writeStaticTokens(r),a&&this._handleScriptToken(t),n&&this._handleStyleToken(t)},e.prototype._writeStaticTokens=function(e){var t=this._buildChunk(e);return t.actual?(t.html=this.proxyHistory+t.actual,this.proxyHistory+=t.proxy,this.proxyRoot.innerHTML=t.html,u&&(t.proxyInnerHTML=this.proxyRoot.innerHTML),this._walkChunk(),u&&(t.actualInnerHTML=this.root.innerHTML),t):null},e.prototype._buildChunk=function(e){for(var t=this.actuals.length,a=[],n=[],r=[],o=e.length,i=0;i<o;i++){var s=e[i],l=s.toString();if(a.push(l),s.attrs){if(!/^noscript$/i.test(s.tagName)){var c=t++;n.push(l.replace(/(\/?>)/," "+g+"id="+c+" $1")),s.attrs.id!==p&&s.attrs.id!==m&&r.push("atomicTag"===s.type?"":"<"+s.tagName+" "+g+"proxyof="+c+(s.unary?" />":">"))}}else n.push(l),r.push("endTag"===s.type?l:"")}return{tokens:e,raw:a.join(""),actual:n.join(""),proxy:r.join("")}},e.prototype._walkChunk=function(){for(var e=void 0,t=[this.proxyRoot];d.existy(e=t.shift());){var a=1===e.nodeType;if(!a||!i(e,"proxyof")){a&&(this.actuals[i(e,"id")]=e,s(e,"id"));var n=e.parentNode&&i(e.parentNode,"proxyof");n&&this.actuals[n].appendChild(e)}t.unshift.apply(t,d.toArray(e.childNodes))}},e.prototype._handleScriptToken=function(e){var t=this,a=this.parser.clear();a&&this.writeQueue.unshift(a),e.src=e.attrs.src||e.attrs.SRC,(e=this.options.beforeWriteToken(e))&&(e.src&&this.scriptStack.length?this.deferredRemote=e:this._onScriptStart(e),this._writeScriptToken(e,(function(){t._onScriptDone(e)})))},e.prototype._handleStyleToken=function(e){var t=this.parser.clear();t&&this.writeQueue.unshift(t),e.type=e.attrs.type||e.attrs.TYPE||"text/css",(e=this.options.beforeWriteToken(e))&&this._writeStyleToken(e),t&&this.write()},e.prototype._writeStyleToken=function(e){var t=this._buildStyle(e);this._insertCursor(t,m),e.content&&(t.styleSheet&&!t.sheet?t.styleSheet.cssText=e.content:t.appendChild(this.doc.createTextNode(e.content)))},e.prototype._buildStyle=function(e){var t=this.doc.createElement(e.tagName);return t.setAttribute("type",e.type),d.eachKey(e.attrs,(function(e,a){t.setAttribute(e,a)})),t},e.prototype._insertCursor=function(e,t){this._writeImpl('<span id="'+t+'"/>');var a=this.doc.getElementById(t);a&&a.parentNode.replaceChild(e,a)},e.prototype._onScriptStart=function(e){e.outerWrites=this.writeQueue,this.writeQueue=[],this.scriptStack.unshift(e)},e.prototype._onScriptDone=function(e){e===this.scriptStack[0]?(this.scriptStack.shift(),this.write.apply(this,e.outerWrites),!this.scriptStack.length&&this.deferredRemote&&(this._onScriptStart(this.deferredRemote),this.deferredRemote=null)):this.options.error({msg:"Bad script nesting or script finished twice"})},e.prototype._writeScriptToken=function(e,t){var a=this._buildScript(e),n=this._shouldRelease(a),r=this.options.afterAsync;e.src&&(a.src=e.src,this._scriptLoadHandler(a,n?r:function(){t(),r()}));try{this._insertCursor(a,p),a.src&&!n||t()}catch(e){this.options.error(e),t()}},e.prototype._buildScript=function(e){var t=this.doc.createElement(e.tagName);return d.eachKey(e.attrs,(function(e,a){t.setAttribute(e,a)})),e.content&&(t.text=e.content),t},e.prototype._scriptLoadHandler=function(e,t){function a(){e=e.onload=e.onreadystatechange=e.onerror=null}function n(){a(),null!=t&&t(),t=null}function r(e){a(),i(e),null!=t&&t(),t=null}function o(e,t){var a=e["on"+t];null!=a&&(e["_on"+t]=a)}var i=this.options.error;o(e,"load"),o(e,"error"),l(e,{onload:function(){if(e._onload)try{e._onload.apply(this,Array.prototype.slice.call(arguments,0))}catch(t){r({msg:"onload handler failed "+t+" @ "+e.src})}n()},onerror:function(){if(e._onerror)try{e._onerror.apply(this,Array.prototype.slice.call(arguments,0))}catch(t){return void r({msg:"onerror handler failed "+t+" @ "+e.src})}r({msg:"remote script failed "+e.src})},onreadystatechange:function(){/^(loaded|complete)$/.test(e.readyState)&&n()}})},e.prototype._shouldRelease=function(e){return!/^script$/i.test(e.nodeName)||!!(this.options.releaseAsync&&e.src&&e.hasAttribute("async"))},e}();t.default=f},function(e){var t;t=function(){return function(e){function t(n){if(a[n])return a[n].exports;var r=a[n]={exports:{},id:n,loaded:!1};return e[n].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var a={};return t.m=e,t.c=a,t.p="",t(0)}([function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var r=n(a(1));e.exports=r.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var i=r(a(2)),s=r(a(3)),l=n(a(6)),c=a(5),d={comment:/^<!--/,endTag:/^<\//,atomicTag:/^<\s*(script|style|noscript|iframe|textarea)[\s\/>]/i,startTag:/^</,chars:/^[^<]/},u=function(){function e(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,e),this.stream=a;var r=!1,s={};for(var c in i)i.hasOwnProperty(c)&&(n.autoFix&&(s[c+"Fix"]=!0),r=r||s[c+"Fix"]);r?(this._readToken=(0,l.default)(this,s,(function(){return t._readTokenImpl()})),this._peekToken=(0,l.default)(this,s,(function(){return t._peekTokenImpl()}))):(this._readToken=this._readTokenImpl,this._peekToken=this._peekTokenImpl)}return e.prototype.append=function(e){this.stream+=e},e.prototype.prepend=function(e){this.stream=e+this.stream},e.prototype._readTokenImpl=function(){var e=this._peekTokenImpl();if(e)return this.stream=this.stream.slice(e.length),e},e.prototype._peekTokenImpl=function(){for(var e in d)if(d.hasOwnProperty(e)&&d[e].test(this.stream)){var t=s[e](this.stream);if(t)return"startTag"===t.type&&/script|style/i.test(t.tagName)?null:(t.text=this.stream.substr(0,t.length),t)}},e.prototype.peekToken=function(){return this._peekToken()},e.prototype.readToken=function(){return this._readToken()},e.prototype.readTokens=function(e){for(var t=void 0;t=this.readToken();)if(e[t.type]&&!1===e[t.type](t))return},e.prototype.clear=function(){var e=this.stream;return this.stream="",e},e.prototype.rest=function(){return this.stream},e}();for(var g in t.default=u,u.tokenToString=function(e){return e.toString()},u.escapeAttributes=function(e){var t={};for(var a in e)e.hasOwnProperty(a)&&(t[a]=(0,c.escapeQuotes)(e[a],null));return t},u.supports=i,i)i.hasOwnProperty(g)&&(u.browserHasFlaw=u.browserHasFlaw||!i[g]&&g)},function(e,t){"use strict";t.__esModule=!0;var a=!1,n=!1,r=window.document.createElement("div");try{var o="<P><I></P></I>";r.innerHTML=o,t.tagSoup=a=r.innerHTML!==o}catch(e){t.tagSoup=a=!1}try{r.innerHTML="<P><i><P></P></i></P>",t.selfClose=n=2===r.childNodes.length}catch(e){t.selfClose=n=!1}r=null,t.tagSoup=a,t.selfClose=n},function(e,t,a){"use strict";function n(e){var t=e.indexOf("-->");if(t>=0)return new c.CommentToken(e.substr(4,t-1),t+3)}function r(e){var t=e.indexOf("<");return new c.CharsToken(t>=0?t:e.length)}function o(e){var t,a,n;if(-1!==e.indexOf(">")){var r=e.match(d.startTag);if(r){var o=(t={},a={},n=r[2],r[2].replace(d.attr,(function(e,r){arguments[2]||arguments[3]||arguments[4]||arguments[5]?arguments[5]?(t[arguments[5]]="",a[arguments[5]]=!0):t[r]=arguments[2]||arguments[3]||arguments[4]||d.fillAttr.test(r)&&r||"":t[r]="",n=n.replace(e,"")})),{v:new c.StartTagToken(r[1],r[0].length,t,a,!!r[3],n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))});if("object"===(void 0===o?"undefined":l(o)))return o.v}}}function i(e){var t=o(e);if(t){var a=e.slice(t.length);if(a.match(new RegExp("</\\s*"+t.tagName+"\\s*>","i"))){var n=a.match(new RegExp("([\\s\\S]*?)</\\s*"+t.tagName+"\\s*>","i"));if(n)return new c.AtomicTagToken(t.tagName,n[0].length+t.length,t.attrs,t.booleanAttrs,n[1])}}}function s(e){var t=e.match(d.endTag);if(t)return new c.EndTagToken(t[1],t[0].length)}t.__esModule=!0;var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.comment=n,t.chars=r,t.startTag=o,t.atomicTag=i,t.endTag=s;var c=a(4),d={startTag:/^<([\-A-Za-z0-9_]+)((?:\s+[\w\-]+(?:\s*=?\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,endTag:/^<\/([\-A-Za-z0-9_]+)[^>]*>/,attr:/(?:([\-A-Za-z0-9_]+)\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))|(?:([\-A-Za-z0-9_]+)(\s|$)+)/g,fillAttr:/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noresize|noshade|nowrap|readonly|selected)$/i}},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0,t.EndTagToken=t.AtomicTagToken=t.StartTagToken=t.TagToken=t.CharsToken=t.CommentToken=t.Token=void 0;var r=a(5),o=(t.Token=function e(t,a){n(this,e),this.type=t,this.length=a,this.text=""},t.CommentToken=function(){function e(t,a){n(this,e),this.type="comment",this.length=a||(t?t.length:0),this.text="",this.content=t}return e.prototype.toString=function(){return"<!--"+this.content},e}(),t.CharsToken=function(){function e(t){n(this,e),this.type="chars",this.length=t,this.text=""}return e.prototype.toString=function(){return this.text},e}(),t.TagToken=function(){function e(t,a,r,o,i){n(this,e),this.type=t,this.length=r,this.text="",this.tagName=a,this.attrs=o,this.booleanAttrs=i,this.unary=!1,this.html5Unary=!1}return e.formatTag=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a="<"+e.tagName;for(var n in e.attrs)if(e.attrs.hasOwnProperty(n)){a+=" "+n;var o=e.attrs[n];void 0!==e.booleanAttrs&&void 0!==e.booleanAttrs[n]||(a+='="'+(0,r.escapeQuotes)(o)+'"')}return e.rest&&(a+=" "+e.rest),e.unary&&!e.html5Unary?a+="/>":a+=">",null!=t&&(a+=t+"</"+e.tagName+">"),a},e}());t.StartTagToken=function(){function e(t,a,r,o,i,s){n(this,e),this.type="startTag",this.length=a,this.text="",this.tagName=t,this.attrs=r,this.booleanAttrs=o,this.html5Unary=!1,this.unary=i,this.rest=s}return e.prototype.toString=function(){return o.formatTag(this)},e}(),t.AtomicTagToken=function(){function e(t,a,r,o,i){n(this,e),this.type="atomicTag",this.length=a,this.text="",this.tagName=t,this.attrs=r,this.booleanAttrs=o,this.unary=!1,this.html5Unary=!1,this.content=i}return e.prototype.toString=function(){
return o.formatTag(this,this.content)},e}(),t.EndTagToken=function(){function e(t,a){n(this,e),this.type="endTag",this.length=a,this.text="",this.tagName=t}return e.prototype.toString=function(){return"</"+this.tagName+">"},e}()},function(e,t){"use strict";function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e?e.replace(/([^"]*)"/g,(function(e,t){return/\\/.test(t)?t+'"':t+'\\"'})):t}t.__esModule=!0,t.escapeQuotes=a},function(e,t){"use strict";function a(e){return e&&"startTag"===e.type&&(e.unary=s.test(e.tagName)||e.unary,e.html5Unary=!/\/>$/.test(e.text)),e}function n(e,t){var n=e.stream,r=a(t());return e.stream=n,r}function r(e,t){var a=t.pop();e.prepend("</"+a.tagName+">")}function o(){var e=[];return e.last=function(){return this[this.length-1]},e.lastTagNameEq=function(e){var t=this.last();return t&&t.tagName&&t.tagName.toUpperCase()===e.toUpperCase()},e.containsTagName=function(e){for(var t,a=0;t=this[a];a++)if(t.tagName===e)return!0;return!1},e}function i(e,t,i){function s(){var t=n(e,i);t&&d[t.type]&&d[t.type](t)}var c=o(),d={startTag:function(a){var n=a.tagName;"TR"===n.toUpperCase()&&c.lastTagNameEq("TABLE")?(e.prepend("<TBODY>"),s()):t.selfCloseFix&&l.test(n)&&c.containsTagName(n)?c.lastTagNameEq(n)?r(e,c):(e.prepend("</"+a.tagName+">"),s()):a.unary||c.push(a)},endTag:function(a){c.last()?t.tagSoupFix&&!c.lastTagNameEq(a.tagName)?r(e,c):c.pop():t.tagSoupFix&&(i(),s())}};return function(){return s(),a(i())}}t.__esModule=!0,t.default=i;var s=/^(AREA|BASE|BASEFONT|BR|COL|FRAME|HR|IMG|INPUT|ISINDEX|LINK|META|PARAM|EMBED)$/i,l=/^(COLGROUP|DD|DT|LI|OPTIONS|P|TD|TFOOT|TH|THEAD|TR)$/i}])},e.exports=t()},function(e,t){"use strict";function a(e){return null!=e}function n(e){return"function"==typeof e}function r(e,t,a){var n=void 0,r=e&&e.length||0;for(n=0;n<r;n++)t.call(a,e[n],n)}function o(e,t,a){for(var n in e)e.hasOwnProperty(n)&&t.call(a,n,e[n])}function i(e,t){return e=e||{},o(t,(function(t,n){a(e[t])||(e[t]=n)})),e}function s(e){try{return Array.prototype.slice.call(e)}catch(n){var t=(a=[],r(e,(function(e){a.push(e)})),{v:a});if("object"===(void 0===t?"undefined":g(t)))return t.v}var a}function l(e){return e[e.length-1]}function c(e,t){return!(!e||"startTag"!==e.type&&"atomicTag"!==e.type||!("tagName"in e)||!~e.tagName.toLowerCase().indexOf(t))}function d(e){return c(e,"script")}function u(e){return c(e,"style")}t.__esModule=!0;var g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.existy=a,t.isFunction=n,t.each=r,t.eachKey=o,t.defaults=i,t.toArray=s,t.last=l,t.isTag=c,t.isScript=d,t.isStyle=u}])},"object"==typeof t&&"object"==typeof e?e.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof t?t.postscribe=n():a.postscribe=n()}},"core/src/lib/actions/helpers/unescapeHtmlCode.js":{script:function(e,t,a){"use strict";var n=a("@adobe/reactor-document").createElement("div");e.exports=function(e){return n.innerHTML=e,n.textContent||n.innerText||e}}},"core/src/lib/helpers/findPageScript.js":{script:function(e,t,a){"use strict";var n=a("@adobe/reactor-document"),r=function(e){for(var t=n.querySelectorAll("script"),a=0;a<t.length;a++){var r=t[a];if(e.test(r.src))return r}},o=function(){return r(new RegExp(/(launch|satelliteLib)-[^\/]+.js(\?.*)?$/))};e.exports={getTurbine:o,byRegexPattern:r}}},"core/src/lib/actions/helpers/decorators/decorateGlobalJavaScriptCode.js":{script:function(e,t,a){"use strict";var n=a("@adobe/reactor-promise");e.exports=function(e,t){return{code:"<script>\n"+t+"\n</script>",promise:n.resolve()}}}},"core/src/lib/actions/helpers/decorators/decorateNonGlobalJavaScriptCode.js":{script:function(e,t,a){"use strict";var n=a("@adobe/reactor-promise"),r=0;e.exports=function(e,t){var a="_runScript"+ ++r,o=new n((function(t,r){_satellite[a]=function(o){delete _satellite[a],new n((function(t){t(o.call(e.event.element,e.event,e.event.target,n))})).then(t,r)}}));return{code:'<script>_satellite["'+a+'"](function(event, target, Promise) {\n'+t+"\n});</script>",promise:o}}}},"core/src/lib/actions/helpers/decorators/decorateHtmlCode.js":{script:function(e,t,a,n){"use strict";var r=a("@adobe/reactor-promise"),o=0,i={};window._satellite=window._satellite||{},window._satellite._onCustomCodeSuccess=function(e){var t=i[e];t&&(delete i[e],t.resolve())},window._satellite._onCustomCodeFailure=function(e){var t=i[e];t&&(delete i[e],t.reject())};var s=function(e){return-1!==e.indexOf("${reactorCallbackId}")},l=function(e,t){return e.replace(/\${reactorCallbackId}/g,t)},c=function(e){return e.settings.isExternal};e.exports=function(e,t){var a;return c(e)&&(t=n.replaceTokens(t,e.event)),s(t)?(a=new r((function(e,t){i[String(o)]={resolve:e,reject:t}})),t=l(t,o),o+=1):a=r.resolve(),{code:t,promise:a}}}},"core/src/lib/actions/helpers/getSourceByUrl.js":{script:function(e,t,a){"use strict";var n=a("@adobe/reactor-load-script"),r=a("@adobe/reactor-promise"),o=a("../../helpers/findPageScript").byRegexPattern,i={},s={},l=function(e){return s[e]||(s[e]=n(e)),s[e]};_satellite.__registerScript=function(e,t){var a;if(document.currentScript)a=document.currentScript.getAttribute("src");else{var n=new RegExp(".*"+e+".*");a=o(n).getAttribute("src")}i[a]=t},e.exports=function(e){return i[e]?r.resolve(i[e]):new r((function(t){l(e).then((function(){t(i[e])}),(function(){t()}))}))}}},"core/src/lib/events/helpers/weakMap.js":{script:function(e,t,a){"use strict";var n=a("@adobe/reactor-window").WeakMap;if(void 0===n){var r=Object.defineProperty,o=Date.now()%1e9;(n=function(){this.name="__st"+(1e9*Math.random()>>>0)+o+++"__"}).prototype={set:function(e,t){var a=e[this.name];return a&&a[0]===e?a[1]=t:r(e,this.name,{value:[e,t],writable:!0}),this},get:function(e){var t;return(t=e[this.name])&&t[0]===e?t[1]:void 0},delete:function(e){var t=e[this.name];return!(!t||t[0]!==e||(t[0]=t[1]=void 0,0))},has:function(e){var t=e[this.name];return!!t&&t[0]===e}}}e.exports=n}},"core/src/lib/events/helpers/enableWeakMapDefaultValue.js":{script:function(e){"use strict";e.exports=function(e,t){var a=e.get;return e.get=function(n){return e.has(n)||e.set(n,t()),a.apply(this,arguments)},e}}},"core/src/lib/events/helpers/matchesSelector.js":{script:function(e,t,a,n){"use strict";e.exports=function(e,t){var a=e.matches||e.msMatchesSelector;if(a)try{return a.call(e,t)}catch(e){return n.logger.warn("Matching element failed. "+t+" is not a valid selector."),!1}return!1}}},"core/src/lib/events/helpers/matchesProperties.js":{script:function(e,t,a){"use strict";var n=a("./../../helpers/textMatch"),r=function(e,t){return"@text"===t||"innerText"===t?e.textContent||e.innerText:t in e?e[t]:e.getAttribute?e.getAttribute(t):void 0};e.exports=function(e,t){return!t||t.every((function(t){var a=r(e,t.name),o=t.valueIsRegex?new RegExp(t.value,"i"):t.value;return n(a,o)}))}}},"core/src/lib/helpers/intersectionObserverIntervals.js":{script:function(e){"use strict";e.exports={standard:{pageElementsRefresh:3e3}}}},"core/src/lib/helpers/textMatch.js":{script:function(e){"use strict";e.exports=function(e,t){if(null==t)throw new Error("Illegal Argument: Pattern is not present");return null!=e&&("string"==typeof t?e===t:t instanceof RegExp&&t.test(e))}}},"core/src/lib/events/helpers/createBubbly.js":{script:function(e,t,a){"use strict";var n=a("./weakMap"),r=a("./matchesProperties"),o=a("./matchesSelector");e.exports=function(){var e=[],t=new n,a={addListener:function(t,a){e.push({settings:t,callback:a})},evaluateEvent:function(a,n){if(e.length&&!t.has(a)){for(var i=a.target,s=!1;i;){for(var l=!1,c=!1,d=0;d<e.length;d++){var u=e[d],g=u.settings.elementSelector,m=u.settings.elementProperties;if((!1!==u.settings.bubbleFireIfChildFired||!s)&&(i===a.target||!1!==u.settings.bubbleFireIfParent)&&(i===a.target||g||m&&Object.keys(m).length)&&(!g||o(i,g))&&(!m||r(i,m))){var p={};n?Object.keys(a).forEach((function(e){p[e]=a[e]})):p.nativeEvent=a,p.element=i,p.target=a.target,!1!==u.callback(p)&&(c=!0,u.settings.bubbleStop&&(l=!0))}}if(l)break;c&&(s=!0),i=i.parentNode}t.set(a,!0)}},__reset:function(){e=[]}};return a}}}}},"accessible-page-speed-metrics":{displayName:"Accessible Site Speed Metrics",hostedLibFilesBaseUrl:"https://assets.adobedtm.com/extensions/EPa1a59448b3504baa857fea92b07672de/",modules:{"accessible-page-speed-metrics/src/lib/dataElements/pageRenderTime.js":{name:"page-render-time",displayName:"Page Render Time",script:function(e){"use strict";e.exports=function(e,t){if(t&&t.timingsFromTrigger){_satellite.logger.log("Setting pageRenderTime from trigger context");var a=t.timingsFromTrigger.domComplete-t.timingsFromTrigger.domLoading}else window.performance&&window.performance.timing&&window.performance.timing.domLoading&&window.performance.timing.domComplete?(_satellite.logger.log("Setting pageRenderTime from window.performance"),a=window.performance.timing.domComplete-window.performance.timing.domLoading):a=0;return a>-1?a:null}}},"accessible-page-speed-metrics/src/lib/dataElements/serverResponseTime.js":{name:"server-response-time",displayName:"Server Response Time",script:function(e){"use strict";e.exports=function(e,t){if(t&&t.timingsFromTrigger){_satellite.logger.log("Setting serverResponseTime from trigger context");var a=t.timingsFromTrigger.responseStart-t.timingsFromTrigger.requestStart}else window.performance&&window.performance.timing&&window.performance.timing.requestStart&&window.performance.timing.responseStart?(_satellite.logger.log("Setting serverResponseTime from window.performance"),a=window.performance.timing.responseStart-window.performance.timing.requestStart):a=0;return a>-1?a:null}}},"accessible-page-speed-metrics/src/lib/dataElements/totalPageLoadTime.js":{name:"page-speed-metrics",displayName:"Total Page Load Time",script:function(e){"use strict";e.exports=function(e,t){if(t&&t.timingsFromTrigger){_satellite.logger.log("Setting totalPageLoadTime from trigger context");var a=t.timingsFromTrigger.loadEventEnd-t.timingsFromTrigger.navigationStart}else window.performance&&window.performance.timing&&window.performance.timing.navigationStart&&window.performance.timing.loadEventEnd?(_satellite.logger.log("Setting totalPageLoadTime from window.performance"),a=window.performance.timing.loadEventEnd-window.performance.timing.navigationStart):a=0;return a>-1?a:null}}},"accessible-page-speed-metrics/src/lib/dataElements/totalDomCompleteTime.js":{name:"total-dom-complete-time",displayName:"Total DOM Complete Time",script:function(e){"use strict";e.exports=function(e,t){if(t&&t.timingsFromTrigger){_satellite.logger.log("Setting totalDomCompleteTime from trigger context");var a=t.timingsFromTrigger.domComplete-t.timingsFromTrigger.navigationStart}else window.performance&&window.performance.timing&&window.performance.timing.navigationStart&&window.performance.timing.domComplete?(_satellite.logger.log("Setting totalDomCompleteTime from window.performance"),a=window.performance.timing.domComplete-window.performance.timing.navigationStart):a=0;return a>-1?a:null}}},"accessible-page-speed-metrics/src/lib/dataElements/responseCompleteTime.js":{name:"response-complete-time",displayName:"Response Complete Time",script:function(e){"use strict";e.exports=function(e,t){if(t&&t.timingsFromTrigger){_satellite.logger.log("Setting responseCompleteTime from trigger context");var a=t.timingsFromTrigger.responseEnd-t.timingsFromTrigger.requestStart}else window.performance&&window.performance.timing&&window.performance.timing.requestStart&&window.performance.timing.responseEnd?(_satellite.logger.log("Setting responseCompleteTime from window.performance"),a=window.performance.timing.responseEnd-window.performance.timing.requestStart):a=0;return a>-1?a:null}}}}}},company:{orgId:"79655FCF5C1D42160A495E15@AdobeOrg",dynamicCdnEnabled:!1},property:{name:"01_a_spiegel_CORE-Master_WebSDK",settings:{domains:["spiegel.de"],undefinedVarsReturnEmpty:!1,ruleComponentSequencingEnabled:!0},id:"PR7f68912117ce4860a1f16bd9a93c341b"},rules:[{id:"RL122f153e3a574fbcb799b0f105300317",name:"Base:Pageview | Core:History Change | #001[debates] | SARA_data.push(virtual_page)",events:[{modulePath:"core/src/lib/events/historyChange.js",settings:{},ruleOrder:1}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%Page | Route [gl]%",rightOperand:"debates"},timeout:2e3}],actions:[{modulePath:"fm-spon-data-layer-constructor/src/lib/actions/synchronousCode.js",settings:{callback:function(e){SARAs_data.push({event:{info:{action:"virtual_page",name:"view - community"},attributes:{source:"launch|cc|history-handler"}},page:{info:{canonical_url:location.href}}}),_satellite.logger.info("[SARAs Virtual Page]",e)}},timeout:2e3,delayNext:!0}]},{id:"RL1259ea1c1bae4040aab0febea84b6979",name:"Base:Activation | Top of Page | #001 | DLC (activate)",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:1}],conditions:[],actions:[{modulePath:"fm-spon-data-layer-constructor/src/lib/actions/activate.js",settings:{firePreviousEvents:"true"},timeout:2e3,delayNext:!0}]},{id:"RL20dafd44420c4ec285bae3e6664f9517",name:"Event:Scroll | SARAs_data:scroll | #100 [page.complete OR editorial.complete] | [Web SDK (sendEvent)]",events:[{modulePath:"fm-spon-data-layer-constructor/src/lib/events/dataLayerPush.js",settings:{eventName:"scroll"},ruleOrder:100}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"matchesRegex"},leftOperand:"%Event | Name [gl]%",rightOperand:"(page - complete|editorial - complete)"},timeout:2e3}],actions:[{modulePath:"adobe-alloy/dist/lib/actions/sendEvent/index.js",settings:{xdm:"%XDM | XDM Object Global [gl[sso]-lo]%",type:"web.webinteraction.linkClicks",instanceName:"saralloy",edgeConfigOverrides:{staging:{datastreamId:"%Config | DataStream: per Consent [gl-lo]%"},production:{datastreamId:"%Config | DataStream: per Consent [gl-lo]%"},development:{datastreamId:"%Config | DataStream: per Consent [gl-lo]%"}}},timeout:3e3,delayNext:!0},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/cc10f7b4369d/32ae8c3350c5/e4bb098751cc/RC818f061584ea4846866ba99da881e94e-source.min.js",language:"javascript",isExternal:!0},timeout:2e3,delayNext:!0}]},{id:"RL227302672eac467b92aa80fd41977090",name:"Base:Libraries | Library Loaded | #050 | [Media Time Tracker (init), JW-Video-Watcher (init), Podlove-Audio-Watcher (init), Audio-Handler (init)]",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"isTrue"},leftOperand:"%Page | is PUR Tracking [co]%"},negate:!0,timeout:2e3}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"/* === Time Tracker === //\nHelper to keep track of media time played\n- Call update() on any relevant media event, especially those that change the playState!\n- The function isPlaying() must be provided to the TimeTracker Instance on creation.\n- Whenever the media item changes call reset()\n- Use getTimeDelta() to get the time since the last call to this function. Used for e.g. time between events!\n- Use onEvery(increment,callback) to get a continous callback every increment of elapsed playtime\n// === */\n\n\nwindow._satellite.MediaTimeTracker = function (isPlaying) {\n    var playBackState = false\n    var timePlayed = 0;\n    var lastPlayBackUpdateTS = undefined;\n    var lastEventPlaytime = timePlayed; // performance.now()\n    var stateTS = performance.now();\n\n    var everyStore = (function () {\n        var everyStore = []\n        return {\n            add: function (increment, callback) {\n                everyStore.push({ increment: increment, callback: callback, progress: 0 })\n            },\n            update: function (timePlayed) {\n                everyStore.forEach(function (store) {\n                    var dt = timePlayed - store.progress\n                    if (dt >= store.increment) { store.callback() }\n                    store.progress = Math.floor(timePlayed / store.increment) * store.increment\n                })\n            },\n            resetTime: function () {\n                everyStore.forEach(function (store) {\n                    store.progress = 0;\n                })\n            }\n        }\n    })()\n\n    var self = {\n        getTimePlayed: function () {\n            return timePlayed + (isPlaying() ? (stateTS - lastPlayBackUpdateTS) : 0)\n        },\n        update: function () { // call this anytime a player starts or pauses playback\n            stateTS = performance.now();\n            if (isPlaying() !== playBackState) { // onStateSwitch\n                playBackState = isPlaying()\n                if (!playBackState) { timePlayed += stateTS - (lastPlayBackUpdateTS || stateTS); } // add delta since last pause\n                lastPlayBackUpdateTS = stateTS\n            }\n            everyStore.update(self.getTimePlayed())\n            //trace('TimeTrackerDebug', timePlayed, isPlaying(), getTimePlayed(), state);\n        },\n        reset: function () { // call this whenever the player loads new media\n            timePlayed = 0;\n            lastEventPlaytime = timePlayed;\n            playBackState = false;\n            lastPlayBackUpdateTS = undefined;\n            everyStore.resetTime()\n        },\n        getTimePlayerDelta: function () { // returns the time played between now and the last call to this function!\n            var t = self.getTimePlayed()\n            var dt = t - lastEventPlaytime;\n            lastEventPlaytime = t;\n            return dt\n        },\n        onEvery: everyStore.add  // (increment,callback)\n    }\n    return self\n}",language:"javascript"}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"// todo: callback every 10seconds... or callback every onTime if playing?\n\nwindow._satellite.jwwatcher = JWWatcher({\n    debug: true,\n    loggingFunction: _satellite.logger.debug\n})\nfunction JWWatcher(configObject) {\n    var config = {\n        debug: false,\n        loggingFunction: undefined\n    }\n    for (var ck in configObject) { config[ck] = configObject[ck] } // sufficient for flat config objects\n\n    var trace = function () { }\n    if (config.debug) {\n        trace = config.loggingFunction ? config.loggingFunction : Function.prototype.bind.apply(console.debug, [console, '[Engagement]'])\n    }\n\n    var milestones = {  // define the milestones: key => video duration in seconds, value: array of % completion\n        0: [0.95],\n        60: [0.5, 0.95],\n        300: [0.25, 0.5, 0.75, 0.95]\n    }\n    // sort milestones by integer keys\n    var mileStoneKeys = Object.keys(milestones).map(function (e) { return parseInt(e) }).sort(function (a, b) { return a - b });\n\n    var lastEventTS = performance.now()\n\n    function getMileStones(duration) {\n        var c = 0;\n        for (var i = 0, l = mileStoneKeys.length; i < l; i++) {\n            if (mileStoneKeys[i] > duration) break;\n            c = mileStoneKeys[i]\n        }\n        return milestones[c] ? milestones[c].slice() : [] // return a copy!\n    }\n\n    function formatItem(item) {\n        return {\n            title: item.title,\n            description: item.description,\n            file: item.file,\n            mediaid: item.mediaid,\n            type: item.sources && item.sources[0] && item.sources[0].type\n        }\n    }\n\n    function addWatcher(jwp) {\n        var dataAttribute = 'data-sara-jwwatcher'\n        if (jwp.getContainer().getAttribute(dataAttribute) !== null) {\n            trace('[JWWatcher]', jwp, 'already has an active watcher')\n            return\n        }\n        jwp.getContainer().setAttribute(dataAttribute, jwp.uniqueId)\n\n\n        // === states === // \n        var rms = getMileStones(jwp.getDuration());\n        var startAuto = jwp.getConfig().autostart;\n        var startMute = jwp.getConfig().mute;\n        var streamType = \"regular\";\n        var played = false;\n        trace('[JWWatcher] Added watcher on player', jwp)\n\n        var thresholdFired = false;\n        var threshold = 60 * 1000; // first minute\n\n        var timeTracking = _satellite.MediaTimeTracker(isPlaying)\n\n        timeTracking.onEvery(10000, function () {// allow for a short delay\n            trace('[JWWatcher] 10secondsPlayed')\n            try {\n                window.stats.engage(10000); \n            } catch (err) {\n                trace('onEvery Engage failed', err)\n            }\n        })\n\n        function isPlaying() {\n            return jwplayer().getState() === \"playing\"\n        }\n\n        function onPlaylistItem() { // when playlist item changes! but not the first time round!\n            trace('[JWWatcher]', jwp, 'event onPlaylistItem');\n            played = false; // reset played state\n            //var rms = getMileStones(jwp.getDuration()) // remaining milestones! => not available at this time!\n            //resetIWV() => not supposed to reset for ivw!\n            //startAutoplay = jwp.getConfig().autostart; // returns faulty values here!\n            startMute = jwp.getConfig().mute;\n            thresholdFired = false;\n            timeTracking.reset();\n        }\n\n        function onPlay(e) {\n            timeTracking.update();\n            if (played) return; // fires only once, reset by onPlaylistItem()\n            played = true;\n            rms = getMileStones(jwp.getDuration()); // get new milestones on first play\n            \n            if(jwp.getDuration()===Infinity || jwp.getDuration()<=0 || jwp.getConfig().streamType==\"DVR\") {\n              timeTracking.onEvery(5*60*1000, function() {\n                streamType = \"live\";\n                sendEvent('livestream-5-min-tracker');\n              })\n            }\n                                   \n            trace('[JWWatcher]', jwp, 'event onPlay. Duration', jwp.getDuration(), 'Milestones', rms.slice(), 'Event', e);\n            sendEvent('play');\n        }\n\n        function onAdImpression(e) {\n            timeTracking.update();\n            sendEvent('ad - impression')\n        }\n\n        function onMute(e) {\n            timeTracking.update();\n            sendEvent(e.mute ? 'mute' : 'unmute')\n            if (e.mute && jwp.getDuration() === 0) {\n              startMute = true;\n              startAuto = 'sara';\n            }\n        }\n\n        function onTime(e) {\n            timeTracking.update();\n            while (rms.length > 0 && rms[0] <= (e.position / e.duration)) { sendEvent('milestone ' + rms.shift() * 100 + '%') }\n\n            // track playback time\n            if (isPlaying()) {\n                if (timeTracking.getTimePlayed() > threshold && !thresholdFired) {\n                    thresholdFired = true\n                    sendEvent('first-minute')\n                }\n            }\n        }\n\n        function onComplete(e) {\n            timeTracking.update();\n            sendEvent('complete');\n        }\n\n        function sendEvent(identifier) {\n            var t = performance.now()\n            var dt = t - lastEventTS;\n            lastEventTS = t;\n\n            var ev = {\n                info: { action: \"video\", name: identifier },\n                attributes: {\n                    item: formatItem(jwp.getPlaylistItem()),\n                    autostart: startAuto,\n                    position: jwp.getPosition(),\n                    duration: jwp.getDuration(),\n                    progress: jwp.getPosition() / jwp.getDuration(),\n                    volume: jwp.getVolume(),\n                    mute: jwp.getMute(),\n                    state: jwp.getState(),\n                    viewable: jwp.getViewable(),\n                    playerID: jwp.id,\n                    dtPlayed: timeTracking.getTimePlayerDelta(),\n                    streamType: jwp.getConfig().streamType+\"|\"+streamType,\n                    source: 'launch|cc|jw-watcher|v2.1'\n                }\n            }\n            trace('[JWWatcher]', jwp, ' Firing Analytics Event', ev)\n            window.SARAs_data = window.SARAs_data || []\n            window.SARAs_data.push({ event: ev, external: {jwplayer: {config: jwp.getConfig(), meta: jwp.getItemMeta(), playlist_item: jwp.getPlaylistItem()}}})\n        }\n\n        // === Assign Functions === //\n        //jw.on('firstFrame', onFirst); // first has the problem that it runs AFTER play, but we need it for reset!\n        jwp.on('playlistItem', onPlaylistItem); // used to reset milestones etc. does not fire the first time round when the watcher is loaded.\n        jwp.on('adImpression', onAdImpression);\n\n        jwp.on('mute', onMute);\n        jwp.on('time', onTime);\n        jwp.on('complete', onComplete);\n\n        jwp.on('play', onPlay);\n        jwp.on('adPlay', timeTracking.update);\n        jwp.on('pause', timeTracking.update);\n        jwp.on('adPause', timeTracking.update);\n\n        return jwp\n    }\n\n    function init() {\n        var videoNodes = document.querySelectorAll('.jwplayer')\n        for (var i = 0, l = videoNodes.length; i < l; i++) {\n            var id = videoNodes[i].id\n            addWatcher(jwplayer(id))\n        }\n    }\n    trace('[JWWatcher] Ready. Video Milestones: ', milestones)\n    init()\n    return { addWatcher: addWatcher }\n}",language:"javascript"}},{modulePath:"core/src/lib/actions/customCode.js",settings:{global:!0,source:"// todo: callback every 10seconds... or callback every onTime if playing?\n\nwindow._satellite.podwatcher = PodWatcher({\n    debug: true,\n    loggingFunction: _satellite.logger.debug\n})\nfunction PodWatcher(configObject) {\n    var config = {\n        debug: false,\n        loggingFunction: undefined\n    }\n    for (var ck in configObject) { config[ck] = configObject[ck] } // sufficient for flat config objects\n\n    var trace = function () { }\n    if (config.debug) {\n        trace = config.loggingFunction ? config.loggingFunction : Function.prototype.bind.apply(console.debug, [console, '[Engagement]'])\n    }\n\n    var milestones = {  // define the milestones: key => video duration in seconds, value: array of % completion\n        0: [0.95],\n        60: [0.5, 0.95],\n        300: [0.25, 0.5, 0.75, 0.95]\n    }\n    // sort milestones by integer keys\n    var mileStoneKeys = Object.keys(milestones).map(function (e) { return parseInt(e) }).sort(function (a, b) { return a - b });\n\n    function getMileStones(duration) {\n        var c = 0;\n        for (var i = 0, l = mileStoneKeys.length; i < l; i++) {\n            if (mileStoneKeys[i] > duration) break;\n            c = mileStoneKeys[i]\n        }\n        return milestones[c] ? milestones[c].slice() : [] // return a copy!\n    }\n\n    function addWatcher(store, id) {\n        trace('[Podlove] Added watcher on player', id)\n        var rms = [];\n        var played = false;\n        var state = {} // updated by each event\n        var ivwFired = false;\n\n        var thresholdFired = false;\n        var threshold = 60 * 1000; // first minute\n\n        var timeTracking = _satellite.MediaTimeTracker(isPlaying)\n\n        timeTracking.onEvery(10000, function () {// allow for a short delay\n            trace('[Podlove] 10secondsPlayed')\n            /*\n            try {\n                window.stats.engage(10000); \n            } catch (err) {\n                trace('onEvery Engage failed', err)\n            }\n            */\n        })\n\n        function isPlaying() {\n            return state && state.driver && state.driver.playing === true;\n        }\n\n        function getMediaID(furl) {\n            // reading media id from url\n            // e.g. https://traffic.omny.fm/d/clips/5ac1e950-45c7-4eb7-87c0-aa0f018441b8/7fd46a07-f73f-4fac-bf5c-abc000ffb06b/1c61e4f1-2351-44d5-86e5-ad24010d0df2/audio.mp3?in_playlist=1e8914c2-db00-454c-9997-abc000ffb06f&utm_source=CustomPlayer2&download=true\n            var r = furl.match(/\\/([0-9a-fA-F]{8}\\-[0-9a-fA-F]{4}\\-[0-9a-fA-F]{4}\\-[0-9a-fA-F]{4}\\-[0-9a-fA-F]{12})\\/audio.mp3/)\n            if (r) { return r[1] || '' }\n            return ''\n        }\n\n        function onPlay() { // runs only once - until reset\n            trace('[Podlove]', id, 'Play', rms)\n\n            // === initial play === //\n            if (played) { \n              sendEvent('resume');\n              return; \n            }\n            played = true\n            rms = getMileStones(state.timepiece.duration / 1000) // set milestones on initial play. [ms] to [s]\n            sendEvent('play');\n            if (!ivwFired) { sendEvent('ivw-play'); ivwFired = true; } // never reset! Once per player\n        }\n      \n        function onInteraction(element) { // runs only once - until reset\n            trace('[Podlove]', id, 'Interaction', rms, element)\n            sendEvent('click-'+element);\n        }\n\n        function onTime() {\n\n            // milestones\n            while (rms.length > 0 && rms[0] <= (state.timepiece.playtime / state.timepiece.duration)) {\n                sendEvent('milestone ' + rms.shift() * 100 + '%')\n            }\n\n            // track playback time\n            if (isPlaying()) {\n                if (timeTracking.getTimePlayed() > threshold && !thresholdFired) {\n                    thresholdFired = true\n                    sendEvent('first-minute')\n                }\n            }\n        }\n\n        function onComplete() {\n            sendEvent('complete');\n        }\n\n        function reset() {\n            played = false;\n            rms = []\n            thresholdFired = false\n        }\n\n        function sendEvent(identifier) {\n            var ev = {\n                info: { action: \"audio\", name: identifier },\n                attributes: {\n                    item: {\n                        title: state.episode.title,\n                        series: state.show.title,\n                        description: state.episode.subtitle || '',\n                        file: state.files[0].url,\n                        mediaid: getMediaID(state.files[0].url),\n                        type: state.files[0].title\n                    },\n                    position: state.timepiece.playtime / 1000, // [ms] to [s]\n                    duration: state.timepiece.duration / 1000, // [ms] to [s]\n                    progress: state.timepiece.playtime / state.timepiece.duration,\n                    volume: state.audio.volume,\n                    mute: state.audio.muted,\n                    state: state.playstate,\n                    source: \"launch|cc|podlove-watcher\",\n                    playerID: id,\n                    dtPlayed: timeTracking.getTimePlayerDelta()\n                }\n            }\n            trace('[Podlove]', id, 'Event', identifier)\n            window.SARAs_data = window.SARAs_data || []\n            window.SARAs_data.push({ \n              event: ev,\n              audio: {\n                tracking: \"watcher\"\n              }\n            })\n        }\n\n        store.subscribe(function () {\n            state = store.getState()\n            var action = state.lastAction.type;\n            var payload = state.lastAction.payload;\n\n            switch (action) {\n                case 'PLAYER_BACKEND_PLAY': timeTracking.update(); onPlay(); break;\n                case 'PLAYER_BACKEND_END': timeTracking.update(); onComplete(); break; // watched till end\n                case 'PLAYER_BACKEND_PAUSE': timeTracking.update(); break;\n                case 'PLAYER_BACKEND_PLAYTIME': timeTracking.update(); onTime(); break; // runs all the time during playback\n                case 'PLAYER_READY': timeTracking.reset(); reset(); break; // runs when new media is loaded? => Media Selector, see www.spiegel.de/audio/\n                case 'PLAYER_REQUEST_RESTART': timeTracking.reset(); reset(); break; // restart podcast\n                case 'BUTTON_SHOW_OVERLAY': timeTracking.update(); onInteraction('button-subscribe'); break; // restart podcast\n                case 'PLAYER_TOGGLE_TAB': timeTracking.update(); onInteraction('tab-'+payload); break; // restart podcast\n            }\n        })\n\n    }\n\n    trace('[Podlove] Ready. Audio Milestones: ', milestones)\n\n    return { addWatcher: addWatcher}\n}",language:"javascript"}},{modulePath:"core/src/lib/actions/customCode.js",settings:{
source:"// todo: callback every 10seconds... or callback every onTime if playing?\n\nwindow._satellite.sarasAudioHandler = AudioHandler({\n    debug: true,\n    loggingFunction: _satellite.logger.debug\n})\nfunction AudioHandler(configObject) {\n    \n    // # --- START: Config and Logging --- #\n    var config = {\n        debug: false,\n        loggingFunction: undefined\n    }\n    for (var ck in configObject) { config[ck] = configObject[ck] } // sufficient for flat config objects\n\n    var trace = function () { }\n    if (config.debug) {\n        trace = config.loggingFunction ? config.loggingFunction : Function.prototype.bind.apply(console.debug, [console, '[Engagement]'])\n    }\n    // # --- END: Config and Logging --- #\n\n    // # --- START: Global variables --- #\n    var lastEventTriggered = '';\n    var state = {} // updated by each event\n    var rms = [];\n    var timeTracking = _satellite.MediaTimeTracker(isPlaying);\n    var ivwFired = false;\n    // # --- END: Global variables --- #\n    \n    // # --- START: Time Tracking --- #\n    var threshold = 60; //first minute\n    var thresholdFired = false;\n\n    var milestones = {  // define the milestones: key => video duration in seconds, value: array of % completion\n        0: [0.95],\n        60: [0.5, 0.95],\n        300: [0.25, 0.5, 0.75, 0.95]\n    }\n    // sort milestones by integer keys\n    var mileStoneKeys = Object.keys(milestones).map(function (e) { return parseInt(e) }).sort(function (a, b) { return a - b });\n    \n    // activate engagment time tracking\n    timeTracking.onEvery(10000, function () {// allow for a short delay\n        trace('[SARAs Audio Listener] 10secondsPlayed')\n        /*\n        try {\n            window.stats.engage(10000); \n        } catch (err) {\n            trace('onEvery Engage failed', err)\n        }\n        */\n    })\n\n    // # --- END: Time Tracking --- #\n\n    // # --- Initialize tracking:\n    attachEvents();\n\n    // # --- START: Function Definitions --- #\n    function getMileStones(duration) {\n        var c = 0;\n        for (var i = 0, l = mileStoneKeys.length; i < l; i++) {\n            if (mileStoneKeys[i] > duration) break;\n            c = mileStoneKeys[i]\n        }\n        return milestones[c] ? milestones[c].slice() : [] // return a copy!\n    }\n\n    function onNewClip() {\n        trace('[SARAs Audio Listener] Added to ', state.clip);\n    }\n\n    function isPlaying() {\n        return state && state.isPaused === false;\n    }\n\n    function onPlay() { // runs only once - until reset\n        rms = getMileStones(state.duration) // set milestones on initial play. [ms] to [s]\n        sendEvent('play');\n        if (!ivwFired) { sendEvent('ivw-play'); ivwFired = true; } // never reset! Once per player\n    }\n\n    function onResume() {\n        sendEvent('resume');\n    }\n\n    function onInteraction(element) { // runs only once - until reset\n        sendEvent('click-' + element);\n    }\n\n    function onTime() {\n        // milestones\n        while (rms.length > 0 && rms[0] <= (state.currentTime / state.duration)) {\n            sendEvent('milestone ' + rms.shift() * 100 + '%')\n        }\n        // track playback time\n        if (isPlaying()) {\n            if (timeTracking.getTimePlayed() / 1000 > threshold && !thresholdFired) {\n                thresholdFired = true\n                sendEvent('first-minute')\n            }\n        }\n    }\n\n    function onComplete() {\n        sendEvent('complete');\n    }\n\n    function reset() {\n        played = false;\n        rms = []\n        thresholdFired = false\n    }\n\n    // sending events as Data Layer push to SARAs_data:\n    function sendEvent(identifier) {\n        lastEventTriggered = identifier;\n        var ev = {\n            info: { action: \"audio\", name: identifier },\n            attributes: {\n                item: {\n                    title: state.clip.headline,\n                    series: state.clip.kicker,\n                    //description: state.episode.subtitle || '',\n                    file: state.clip.audioUrl,\n                    mediaid: state.clip.id,\n                    //type: state.files[0].title\n                },\n                position: state.currentTime,\n                duration: state.duration,\n                progress: state.currentTime / state.duration,\n                volume: state.volume,\n                autostart: state.mode.includes('AUTOPLAY'),\n                mute: state.volume === 0,\n                state: state.mode,\n                source: \"launch|cc|audio-handler\",\n                //playerID: id,\n                dtPlayed: timeTracking.getTimePlayerDelta()\n            }\n        }\n        trace('[SARAs Audio Listener]', 'Event', identifier, rms)\n        window.SARAs_data = window.SARAs_data || []\n        window.SARAs_data.push({\n            event: ev,\n            audio: {\n                tracking: \"watcher\"\n            }\n        })\n    }\n\n    // ## --- START: AUDIO Event handler --- ##\n    function attachEvents() {\n       if (window.polygon.webAudio) {\n         window.polygon.webAudio.addEventListener(\n              'WEB_AUDIO_EVENT',\n              (event) => {\n                  state = event.detail\n                  let action = state.action;\n\n                  switch (action) {\n                      case 'WEB_AUDIO_EVENT_PLAY': timeTracking.update(); onPlay(); break;\n                      case 'WEB_AUDIO_EVENT_RESUME': timeTracking.update(); onResume(); break;\n                      case 'WEB_AUDIO_EVENT_END': timeTracking.update(); onComplete(); break; // watched till end\n                      case 'WEB_AUDIO_EVENT_PAUSE': timeTracking.update(); break;\n                      case 'WEB_AUDIO_EVENT_TIME': timeTracking.update(); onTime(); break; // runs all the time during playback\n                      case 'WEB_AUDIO_EVENT_CLIP': timeTracking.reset(); reset(); break; // runs when new media is loaded? => Media Selector, see www.spiegel.de/audio/\n                      case 'WEB_AUDIO_EVENT_CLEAR': timeTracking.reset(); reset(); break; // restart podcast\n                      //case 'WEB_AUDIO_EVENT_VOLUME': timeTracking.update(); onInteraction('volume-' + state.volume); break; // restart podcast\n                      //case 'WEB_AUDIO_EVENT_PLAYBACK_RATE': timeTracking.update(); onInteraction('playback-rate-change-' + state.playbackRate); break; // restart podcast\n                  }\n                  if (action != 'WEB_AUDIO_EVENT_TIME') {\n                    trace('[SARAs Audio Watcher] ', action, state)\n                  }\n              }\n          );\n       }\n    }\n    // ## --- END: AUDIO Event handler --- ##\n    // # --- END: Function Definitions --- #\n\n    trace('[SARAs Audio Listener] Ready. Audio Milestones: ', milestones)\n\n    return {\n        milestones: milestones,\n        config: config\n    }\n}",language:"javascript"}}]},{id:"RL2fa34722d15c4efeaafb4bdedbe757e0",name:"Base:Media:Video | SARAs:jw-init | #001 | [DLC(sync: addWatcher)]",events:[{modulePath:"fm-spon-data-layer-constructor/src/lib/events/dataLayerPush.js",settings:{eventName:"jw-init"},ruleOrder:1}],conditions:[],actions:[{modulePath:"fm-spon-data-layer-constructor/src/lib/actions/synchronousCode.js",settings:{callback:function(e){try{var t=e.detail.state.event.attributes.player_id;_satellite.logger.warn(t),_satellite.jwwatcher.addWatcher(jwplayer(t))}catch(e){_satellite.logger.error(e)}}},timeout:2e3,delayNext:!0}]},{id:"RL36c91b3d730b4d518f641d31fc97a2ee",name:"Target:Offer | WebSDK:sendEventComplete | #001 [-noconsent.PuV , fuermich, -loggedIn] | [Target (local-scope: fuermich:logged_out)]",events:[{modulePath:"adobe-alloy/dist/lib/events/sendEventComplete/index.js",settings:{},ruleOrder:1}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"isTrue"},leftOperand:"%Consent Setting | Purpose - PuV granted [gl]%"},negate:!0,timeout:2e3},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%Page | Route [gl]%",rightOperand:"fuermich"},timeout:2e3},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"isTrue"},leftOperand:"%User | is Logged In [gl[sso]-sm]%"},negate:!0,timeout:2e3}],actions:[{modulePath:"adobe-alloy/dist/lib/actions/applyPropositions/index.js",settings:{metadata:{"fuermich:logged_out":{selector:"[data-target-id=personal-info]",actionType:"appendHtml"}},instanceName:"saralloy",propositions:"%Target | Event Propositions [gl]%"},timeout:2e3,delayNext:!0}]},{id:"RL389545ce7a8348f5aae88eeadc3fe716",name:"Event:Base-Interaction | SARAs:consent_completed | #001 | [Web SDK (sendEvent)]",events:[{modulePath:"fm-spon-data-layer-constructor/src/lib/events/dataLayerPush.js",settings:{eventName:"consent_completed"},ruleOrder:1}],conditions:[],actions:[{modulePath:"adobe-alloy/dist/lib/actions/sendEvent/index.js",settings:{xdm:"%XDM | XDM Object Global [gl[sso]-lo]%",data:"%Target | AllParams [co]%",type:"web.webinteraction.linkClicks",instanceName:"saralloy",personalization:{decisionScopes:"%Target | Decision Scopes [co]%",defaultPersonalizationEnabled:!0},renderDecisions:!0,edgeConfigOverrides:{staging:{enabled:!0,datastreamId:"%Config | DataStream: per Consent [gl-lo]%",com_adobe_target:{propertyToken:"%Config | Target Property: per Consent [gl-lo]%"}},production:{enabled:!0,datastreamId:"%Config | DataStream: per Consent [gl-lo]%",com_adobe_target:{propertyToken:"%Config | Target Property: per Consent [gl-lo]%"}},development:{enabled:!0,datastreamId:"%Config | DataStream: per Consent [gl-lo]%",com_adobe_target:{propertyToken:"%Config | Target Property: per Consent [gl-lo]%"}}}},timeout:2e3,delayNext:!0}]},{id:"RL4711aea752dd41388587a017f4e2d5bb",name:"Util:Performance | Enter Viewport [paywall-cta; once after 500ms] | #001 [article] | [SARAs_data.push (component_view:paywall; scroll)]",events:[{modulePath:"core/src/lib/events/entersViewport.js",settings:{delay:500,frequency:"firstEntry",elementSelector:'[data-sara-component*=paywall] [data-sara-cta^="primary"]'},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%Page | Route [gl]%",rightOperand:"article"},timeout:2e3},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"isTrue"},leftOperand:"%Paywall | is Active [co]%"},timeout:2e3}],actions:[{modulePath:"fm-spon-data-layer-constructor/src/lib/actions/synchronousCode.js",settings:{callback:function(e){function t(e,t,a){if(e.path)return e.path;var n=e.target;for(e.path=[];null!==n.parentNode;)e.path.push(n),n=n.parentNode;return e.path.push(t,a),e.path}if(0==e.element.clientHeight)return;_satellite.logger.info("[SARAs Scroll Handler] viewed ",e);const a={event:{info:{},attributes:{source:"launch|cc|scroll-handler|v0.2"}}},n={info:{component_id:"",name:""},category:{type:""},attributes:{title:"",steps:"",position:""}},r=t(e,document,window);let o="view",i="generic",s="",l="",c="",d="",u="",g="",m="",p="",f="",v="",y="",h="",b="",_="",E=[],C=0;const P=["paywall"];let V=!1,w=!1,k=!1,A=!1,S=!1;for(let e=r.length-3;e--;e>=0)if(r[e]instanceof HTMLElement){let t=r[e];if(C+=t.offsetTop,t.hasAttribute("data-sara-component")){if(!V)break;d=JSON.parse(t.getAttribute("data-sara-component")),g=n.category.type=d.type||g,g.indexOf(P)>-1&&(S=!0),u=n.info.name=d.name||u,f=n.info.component_id=d.id||f,v=n.attributes.title=d.title||v,new RegExp(u+"$").test(l)||(l=l?l+":"+u:u),m=t.nodeName,w=!0}if(t.hasAttribute("data-area")&&(s=t.getAttribute("data-area"),l=l?l+">"+s:s,w||(s.includes("paywall")?(u="article-paywall",g="paywall",o="component_view",i=(u.toLowerCase()||s)+" - impression",C>window.innerHeight&&(k=A=!0)):u=n.info.name=s),"body"==s&&(V=!0)),S&&t.hasAttribute("data-sara-cta")&&!A&&(C>window.innerHeight&&(k=!0,"paywall"==g&&(A=!0)),o="component_view",i=(u.toLowerCase()||s)+" - impression"),t.hasAttribute("data-pos")&&(y=n.attributes.position=t.getAttribute("data-pos")),y&&t.hasAttribute("data-pos-inner")){let e="";e=y.split(":"),e.push(t.getAttribute("data-pos-inner")),y=n.attributes.position=e.join(":")}}k&&(a.event.info.action=o,a.event.info.name=i.toLowerCase(),V&&n.info.name&&(a.components=[],a.components.push(n)),a.event.attributes.click_id=l||"",a.event.attributes.cta=c||"",a.event.attributes.element_name=m.toLowerCase()||"",a.event.attributes.element_text=p||"",a.event.attributes.component_name=u||"",a.event.attributes.component_type=g.toLowerCase()||"",a.event.attributes.embedded_id=f||"",a.event.attributes.title=v||"",a.event.attributes.headline=_||"",a.event.attributes.pos=y||"00",a.event.attributes.steps=h||"",a.event.attributes.target_url=b||"",a.event.attributes.label=E||"",a.event.attributes.distances=["wh="+window.innerHeight,"dt="+C]||"",SARAs_data.push(a))}},timeout:2e3,delayNext:!0}]},{id:"RL4c2ef15f9e6b4595af5d1940ac64e9b2",name:"Target:Offer | SARAs:adpos-init-combined | #001 | [Target (local-scope: empty-adslot:[]), Pur: Fallback]",events:[{modulePath:"fm-spon-data-layer-constructor/src/lib/events/dataLayerPush.js",settings:{eventName:"adpos-init-combined"},ruleOrder:1}],conditions:[],actions:[{modulePath:"fm-spon-data-layer-constructor/src/lib/actions/synchronousCode.js",settings:{callback:function(e){const t=_satellite.getVar("Event | Attributes [gl]",e),a=_satellite.getVar("Target | Eigenwerbung-Elements [co]",e),n=_satellite.getVar("Page | Route [gl]",e);let r,o,i={};t&&t.adPosQueue&&Array.isArray(t.adPosQueue)&&t.adPosQueue.forEach((function(e){let t,s=e.pos,l=e.platform,c=`[data-placement="${s}"][data-device="${l}"]`;t=s+"_"+n,_satellite.logger.info("[SARAs Eigenwerbung] f\xfcr: "+s,"Valide Slots: "+a);var d="empty-adslot:"+t,u=window._satellite.targetHelper.createSingleOffer(d,c,"appendHtml");r=s,o=l,i=window._satellite.targetHelper.combineOffers(i,u,s)}));var s=function(e,t,a){window._satellite.targetHelper.applyOffer(e,t,a)};window._satellite.targetHelper.getOffer(i[0],s,i[1])}},timeout:2e3,delayNext:!0}]},{id:"RL4cc1530249304a529ed47a6f0349f99b",name:"Target:Offer | WebSDK:sendEventComplete | #001 [-noconsent.PuV, paywall] | [Target (local-scope: paywall:[])]",events:[{modulePath:"adobe-alloy/dist/lib/events/sendEventComplete/index.js",settings:{},ruleOrder:1}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"isTrue"},leftOperand:"%Consent Setting | Purpose - PuV granted [gl]%"},negate:!0,timeout:2e3},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"isTrue"},leftOperand:"%Paywall | is Active [co]%"},timeout:2e3}],actions:[{modulePath:"adobe-alloy/dist/lib/actions/applyPropositions/index.js",settings:{metadata:{"paywall:logged_in":{selector:"[data-target-id=paywall]",actionType:"appendHtml"},"paywall:logged_out":{selector:"[data-target-id=paywall]",actionType:"appendHtml"}},instanceName:"saralloy",propositions:"%Target | Event Propositions [gl]%"},timeout:2e3,delayNext:!0}]},{id:"RL50a15c18aa4f4bcd9e5571a986805368",name:"Base:Libraries | Library Loaded | #001 [-PUR:page] | [Engagement Tracker (init), SARAs_data.push (timer), Unload Handling]",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:1}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"isTrue"},leftOperand:"%Page | is PUR Tracking [co]%"},negate:!0,timeout:2e3}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{global:!0,source:"var track_tag = 'Engagement Tracker';\ntry {\n  window.stats = EngagementTracker({\n      debug: true,\n      loggingFunction: _satellite.logger.debug\n  })\n  if (window.stats.supported) {\n      var events = ['keydown', 'keyup', 'mouseup', 'mousedown', 'scroll', 'touchstart', 'touchend']; // 'wheel'; 'mousemove'\n      function handler() { window.stats.engage(10000) }\n      events.forEach(function (ev) { document.addEventListener(ev, handler, false) })\n  }\n  \n  // https://developer.mozilla.org/en-US/docs/Web/API/Event/timeStamp => cannot use. Internet explorer returns faulty times! => use performance.now()\n  // bot High Res and Non-High Res are Measured in Milliseconds (!)\n  // performance.now() is also DOMHighResTimeStamp!\n\n  function EngagementTracker(configObject) {\n      //https://developer.mozilla.org/en-US/docs/Web/API/Page_Visibility_API\n      var config = {\n          debug: false,\n          loggingFunction: undefined,\n          setupEngagementScore: 10000, // ms,\n          tabviewEngagementScore: 10000 // ms\n      }\n      for (var ck in configObject) { config[ck] = configObject[ck] } // sufficient for flat config objects\n\n      var trace = function () { }\n      if (config.debug) {\n          trace = config.loggingFunction ? config.loggingFunction : Function.prototype.bind.apply(console.debug, [console, '[Engagement]'])\n      }\n\n      var hidden, visibilityChange;\n      if (typeof document.hidden !== \"undefined\") { // Opera 12.10 and Firefox 18 and later support \n          hidden = \"hidden\";\n          visibilityChange = \"visibilitychange\";\n      }\n      else if (typeof document.mozHidden !== \"undefined\") {\n          hidden = \"mozHidden\";\n          visibilityChange = \"mozvisibilitychange\";\n      }\n      else if (typeof document.msHidden !== \"undefined\") {\n          hidden = \"msHidden\";\n          visibilityChange = \"msvisibilitychange\";\n      } else if (typeof document.webkitHidden !== \"undefined\") {\n          hidden = \"webkitHidden\";\n          visibilityChange = \"webkitvisibilitychange\";\n      }\n      var supported = !(typeof document.addEventListener === \"undefined\" || hidden === undefined);\n      //supported = false;\n      if (!supported) { trace('Visibility API not supported') }\n\n      var initialized = false;\n\n      var times = {\n          start: 0,\n          lastUpdate: 0,\n          onTabOut: 0,\n          tabbedOut: 0,\n          firstVisible: undefined,\n\n          engaged: 0,\n          lastEngageUpdate: 0,\n          onEngageRenew: undefined // timestamp captured when the engagement timeout was last set or renewed\n      }\n\n      // === Engagement Module === //\n      var isEngaged = false;\n      var timeoutInstance = undefined;\n      var currentTimeToEngage = 0; // the last call to engage() exteneded the engagement by this amount\n      function _engagementChange() {\n          if (!isEngaged) {\n              times.engaged += performance.now() - times.lastEngageUpdate\n          }\n          trace(isEngaged ? 'Engaged' : 'Disengaged')\n      }\n      function engage(timeToEngage) {\n          try {\n              if (!supported || !initialized) { return false }\n              if (!isTabVisible()) { trace('cannot engage hidden tab'); return false }\n              if (typeof timeToEngage !== 'number') { trace('timeToEngage must be a number'); return false }\n              var t = performance.now()\n\n              if (!isEngaged) {\n                  times.onEngageRenew = t\n                  currentTimeToEngage = timeToEngage;\n                  times.lastEngageUpdate = t;\n                  isEngaged = true; _engagementChange()\n              }\n              var remainder = currentTimeToEngage - (t - times.onEngageRenew)\n              // trace('TimeToAdd', timeToEngage, 'Active Remainder:', remainder, 'isEngaged', isEngaged)\n              if (timeToEngage >= remainder) { // replace timeout if new one adds time!\n                  clearTimeout(timeoutInstance)\n                  timeoutInstance = setTimeout(disengage, timeToEngage);\n                  times.onEngageRenew = t\n                  currentTimeToEngage = timeToEngage;\n                  return true\n              } else { return false }\n          } catch (e) {\n              trace(e)\n              return false\n          }\n      }\n      function disengage() {\n          try {\n              if (!supported || !initialized) { return false }\n              clearTimeout(timeoutInstance)\n              if (isEngaged) { isEngaged = false; _engagementChange(); }\n              return true;\n          } catch (e) {\n              trace(e)\n              return false\n          }\n      }\n\n      // === Visibility Module === //\n      function isTabVisible() { return supported && !document[hidden] }\n      function visibilityHandler() {\n          try {\n              var t = performance.now(); // CANNOT USE EVENT TIMESTAMPS! => Internet explorer!\n              times.lastUpdate = t\n              if (isTabVisible()) { // user tabbed in\n                  times.firstVisible = times.firstVisible || t - times.start\n                  times.tabbedOut += t - times.onTabOut // update total time tabbed out\n                  engage(config.tabviewEngagementScore);\n              }\n              else { // user just tabbed out\n                  times.onTabOut = t\n                  disengage();\n              }\n              trace(isTabVisible() ? 'Tab In' : 'Tab Out', getStatus())\n          } catch (e) {\n              trace(e)\n          }\n      }\n      var initiallyVisible = isTabVisible()\n\n      function reset(t) { // accepts optional timestamp. Allows us to use event timestamps! => useful for SPA pageviews\n          try {\n              if (!supported || !initialized) { return false }\n              // === visibility === //\n              var t = t ? t : performance.now()\n              times.lastUpdate = t\n              times.start = t\n              times.onTabOut = t\n              times.tabbedOut = 0\n              initiallyVisible = isTabVisible()\n              times.firstVisible = isTabVisible() ? 0 : undefined\n\n              // === engagement === //\n              times.onEngageRenew = undefined;\n              currentTimeToEngage = 0;\n              disengage(); // resets timeout, status, calls engagement (if changed)\n              times.engaged = 0\n              times.lastEngageUpdate = t\n          } catch (e) {\n              trace(e)\n              return false\n          }\n      }\n\n      function getStatus() {\n          // returns empty object on error / not supported / not init\n          try {\n              if (!supported || !initialized) { return {} }\n              var t = performance.now()\n              var r = {\n                  timeTotal: (t - times.start) >> 0,  // bitshift for millisecond integers\n                  timeTabbedOut: (times.tabbedOut + (isTabVisible() ? 0 : t - times.onTabOut)) >> 0, // if checking whilst being tabbed in > add time\n                  timeFirstVisible: times.firstVisible === undefined ? times.firstVisible : times.firstVisible >> 0,\n                  isTabVisible: isTabVisible(),\n                  initiallyVisible: initiallyVisible,\n                  timeEngaged: (times.engaged + (isEngaged ? t - times.lastEngageUpdate : 0)) >> 0, // if checking whilst being engaged > add time\n                  isEngaged: isEngaged\n              }\n              r.timeTabbedIn = Math.max(0, r.timeTotal - r.timeTabbedOut)\n              return r;\n          } catch (e) {\n              trace(e)\n              return {}\n          }\n      }\n\n      function setup(optionalStart) {\n          try {\n              initialized = true\n              var t;\n              if (optionalStart !== undefined && optionalStart.timeStamp) { t = optionalStart.timeStamp }\n              else t = performance.now()\n              reset(t);\n\n              trace('Init on Domready', getStatus())\n              if (isTabVisible()) { engage(config.setupEngagementScore) }\n              document.addEventListener(visibilityChange, visibilityHandler, false);\n          } catch (e) {\n              trace(e)\n          }\n      }\n\n      // time from dom complete onwards!\n      if (supported) {\n          if (document.readyState === 'complete') { setup({ timeStamp: performance.timing.domComplete - performance.timing.navigationStart }) } // fallback: attempt to reconstuct domready timestamp\n          else {\n              document.addEventListener('readystatechange', function () {\n                  if (document.readyState === 'complete') { setup() }\n              });\n          }\n      }\n\n      return {\n          supported: supported,\n          get initialized() { return initialized },\n          get status() { return getStatus() },\n          reset: reset,\n          engage: engage,\n          disengage: disengage,\n          get isTabVisible() { return isTabVisible() },\n          get isEngaged() { return isEngaged },\n          version: \"1.0.0\"\n      }\n  }\n\n  /* === dont really need to be part of this library... right? === //\n  function save() { localStorage.setItem('stats', JSON.stringify(getStatus())) }\n  function load() {\n      var s = localStorage.getItem('stats')\n      if (s !== null) { s = JSON.parse(s) }\n      return s\n  }\n  */\n} catch(e) {\n  _satellite.logger.error(track_tag, e);\n}",language:"javascript"}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"if (_satellite.getVar('Util | Boolean: Non Human Visitor [gl]')) return false;\n\nlet user_interaction = false,\n    last_push_event_happened = true,\n    timeout_react_on_inactivity = 0,\n    timeout_note_user_interaction = 0,\n    interval_push_event = 0,\n    platform_specific_event_name = _satellite.getVar('Page | Platform [gl]') === \"app\" ? \"touchend\" : \"scroll\",\n    userInteractionCallback = function() {\n      if (document.visibilityState === 'hidden') return;\n      \n      window.removeEventListener(platform_specific_event_name, userInteractionCallback);\n      clearTimeout(timeout_react_on_inactivity);\n      clearTimeout(timeout_note_user_interaction);\n      user_interaction = true;\n      //_satellite.logger.info('***', Math.round(performance.now() / 1000 / 60 / 12), 'Timestamp:', Math.round(performance.now() / 1000 / 60), 'Minuten - scroll_interaction =', user_interaction, 'document.visibilityState:', document.visibilityState);\n      \n      if (last_push_event_happened) {\n        timeout_react_on_inactivity = setTimeout(function() { user_interaction = false; /*_satellite.logger.info('***', Math.round(performance.now() / 1000 / 60 / 12), 'Timestamp:', Math.round(performance.now() / 1000 / 60), 'Minuten - scroll_interaction =', user_interaction);*/ }, 300000);\n        timeout_note_user_interaction = setTimeout(function() { window.addEventListener(platform_specific_event_name, userInteractionCallback); }, 5000);\n      }\n    };\n    \nsetTimeout(function() {//wait until the entire page is fully loaded to avoid scrolling events caused by rendering\n  window.addEventListener(platform_specific_event_name, userInteractionCallback);\n}, 10000);\n\ninterval_push_event = setInterval(function() {\n  const push_event_count = Math.round(performance.now() / 1000 / 60 / 12);\n  \n  if (user_interaction && push_event_count <= 5) {\n    SARAs_data.push({\n      \"event\": {\n        \"info\": {\n          \"action\":\"timer\",\n          \"name\":\"total - 12 Minutes - \" + String(push_event_count) + \" times(s)\"\n        },\n        \"attributes\": {\n          \"source\":\"launch|cc|simple-time-handler\"\n        }\n      }\n    });\n    //_satellite.logger.info('***', \"|total - 12 Minutes - \" + String(push_event_count) + \" times(s)|\", 'Timestamp:', Math.round(performance.now() / 1000 / 60), 'Minuten - 12 Minuten Timer - successful');\n  } else {\n    last_push_event_happened = false;\n    clearInterval(interval_push_event);\n    //_satellite.logger.info('***', String(push_event_count), 'Timestamp:', Math.round(performance.now() / 1000 / 60), 'Minuten - 12 Minuten Timer - FAILED');\n  }\n}, 720000);",language:"javascript"}},{modulePath:"fm-spon-data-layer-constructor/src/lib/actions/synchronousCode.js",settings:{callback:function(){var e="Add Listener: Track Unload";try{_satellite.track_unload=function(t){"use strict";function a(){t.SARAs_data.push({event:{info:{action:"page_unload"}}})}t.addEventListener("beforeunload",a),_satellite.logger.info(e,"unload listener added")}(window)}catch(t){_satellite.logger.error(e,t)}}},timeout:2e3,delayNext:!0}]},{id:"RL5f005eacb04848278009ebed24355832",name:"Base:Pageview | SARAs:page_unload | #001 | [CC(save data)]",events:[{modulePath:"fm-spon-data-layer-constructor/src/lib/events/dataLayerPush.js",settings:{eventName:"page_unload"},ruleOrder:1}],conditions:[],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/cc10f7b4369d/32ae8c3350c5/e4bb098751cc/RC52fc664d298a484889d83049750c3e5a-source.min.js",language:"javascript",isExternal:!0},timeout:2e3,delayNext:!0}]},{id:"RL6005515c0666440c9263e1c96b089272",name:"Event:Base-Interaction-unload | SARAs:button_click+component_click+link_click_external+link_click_download+submit | #001 | [Web SDK (sendEvent)]",events:[{modulePath:"fm-spon-data-layer-constructor/src/lib/events/dataLayerPush.js",settings:{eventName:"button_click"},ruleOrder:1},{modulePath:"fm-spon-data-layer-constructor/src/lib/events/dataLayerPush.js",settings:{eventName:"component_click"},ruleOrder:1},{modulePath:"fm-spon-data-layer-constructor/src/lib/events/dataLayerPush.js",settings:{eventName:"link_click_external"},ruleOrder:1},{modulePath:"fm-spon-data-layer-constructor/src/lib/events/dataLayerPush.js",settings:{eventName:"submit"},ruleOrder:1},{modulePath:"fm-spon-data-layer-constructor/src/lib/events/dataLayerPush.js",settings:{eventName:"link_click_download"},ruleOrder:80}],conditions:[{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(e){var t=_satellite.getVar("Event | Action [gl]",e);return("audio"!==t&&"video"!==t||0!==_satellite.getVar("Event | Name [gl]",e).indexOf("ivw"))&&("audio"!==t||"podlove"!=_satellite.getVar("Event | Source [gl]",e)||!_satellite.getVar("Event | State [gl]",e).audio)}},timeout:2e3}],actions:[{modulePath:"adobe-alloy/dist/lib/actions/sendEvent/index.js",settings:{xdm:"%XDM | XDM Object Global [gl[sso]-lo]%",type:"web.webinteraction.linkClicks",instanceName:"saralloy",documentUnloading:!0,edgeConfigOverrides:{staging:{enabled:!0,datastreamId:"%Config | DataStream: per Consent [gl-lo]%"},production:{enabled:!0,datastreamId:"%Config | DataStream: per Consent [gl-lo]%"},development:{enabled:!0,datastreamId:"%Config | DataStream: per Consent [gl-lo]%"}}},timeout:2e3,delayNext:!0}]},{id:"RL6cc583c600494e32a633e068c7bb6ad1",name:"Base:Pageview | SARAs:page_data_ready [consent]+consent_completed | #003 [-consent.waiting, article] | [VG Wort (track-page)]",events:[{modulePath:"fm-spon-data-layer-constructor/src/lib/events/dataLayerPush.js",settings:{eventName:"page_data_ready"},ruleOrder:1},{modulePath:"fm-spon-data-layer-constructor/src/lib/events/dataLayerPush.js",settings:{eventName:"consent_completed"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"isTrue"},leftOperand:"%Consent | Validate page_data_ready [co]%"},timeout:2e3},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%Page | Route [gl]%",rightOperand:"article"},timeout:2e3},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%Consent | CMP: Action [co]%",rightOperand:"waiting"},negate:!0,timeout:2e3}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/cc10f7b4369d/32ae8c3350c5/e4bb098751cc/RC29a52ff0778f4129bccb3b77f89021be-source.min.js",language:"javascript",isExternal:!0},timeout:2e3,delayNext:!0}]},{id:"RL723aa5262e32405292b32c5c30b3090a",name:"Event:Base-Pageview | SARAs:page_data_ready[consent]+virtual_page | #080 | [AA (article attention level, AAL), CC(performance.mark), Web SDK (requestPersonalization > sendEvent),  CC(clear-previous+click-data)]",events:[{modulePath:"fm-spon-data-layer-constructor/src/lib/events/dataLayerPush.js",settings:{eventName:"page_data_ready"},ruleOrder:80},{modulePath:"fm-spon-data-layer-constructor/src/lib/events/dataLayerPush.js",settings:{eventName:"virtual_page"},ruleOrder:80}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"isTrue"},leftOperand:"%Consent | Validate page_data_ready [co]%"},timeout:2e3}],actions:[{modulePath:"fm-spon-data-layer-constructor/src/lib/actions/synchronousCode.js",settings:{callback:function(){
const e=['*[data-area="body"] *[data-area="text"]','*[data-area="body"] *[data-area="image"]','*[data-area="body"] *[data-area="quote"]','*[data-area="body"] *[data-area="gallery"]','*[data-area="body"] div > *[data-area="contentbox"]','*[data-area="body"] *[data-area="html-embed"]','*[data-area="body"] *[data-area="datawrapper"]','*[data-area="body"] *[data-area="multibox"]','*[data-area="body"] *[data-area="table"]','*[data-area="body"] *[data-area="embed_quiz"]'],t=['*[data-area="body"] > *[data-area]','*[data-area="body"] > *[data-advertisement]','*[data-area="body"] > *:not(*[data-area]) > *[data-area]','*[data-area="article-footer"]'],a="development"===_satellite.environment.stage&&"true"===localStorage.getItem("com.adobe.reactor.debug"),n=(()=>{switch(_satellite.getVar("Page | Domain [gl]")){case"mmo":return"rgb(52 107 241)";case"elf":return"rgb(68 152 105)";default:return"rgb(208 61 18)"}})();let r,o=Array.from(document.querySelectorAll(e.join(","))),i=Array.from(document.querySelectorAll(t.join(","))),s=o.filter((e=>null!==e&&"text"===e.dataset.area)).length,l=o.filter((e=>{if(o.find((t=>null!==e&&null!==t&&t.dataset.area===e.dataset.area))===e)return e})).length,c=null,d=null,u=0,g={words_count_old:0,words_count_new:0,current_element_no:0,current_element_data_area_value:0,minimal_reading_time:0,current_reading_time:0,minimal_reading_time_reached:!1},m={event:{info:{action:"direct_call",name:"article attention level"},attributes:{article_attention_level:null,article_elements_variety:null,source:"launch|cc|article-attention-level-handler|v1",trigger:null,type:"article"}}},p=(()=>{if("article"===_satellite.getVar("Page | Route [gl]"))switch(_satellite.getVar("Page | Domain [gl]")){case"spon":return!/^liveticker$/.test(_satellite.getVar("Editorial | Genre [co]"))&&(o.length>=10||!/^meldung$/.test(_satellite.getVar("Editorial | Genre [co]"))&&o.length>=5);case"mmo":case"elf":case"effi":return o.length>=5}return!1})();const f=()=>{const t={root:null,rootMargin:"0px",threshold:0},n=()=>{const t=1-s/o.length,a=(l-1)/(e.length-1);return o.length,Math.round((t+a)/2*10)/10},b=()=>{Array.from(document.querySelectorAll('*[data-area="body"] *[data-area="html-embed"]')).forEach((e=>{null!==e.querySelector("svelte-scroller-foreground")&&v(e,!1)}))},_=()=>{"hidden"!==document.visibilityState&&(document.removeEventListener("scroll",_),d=Date.now())},E=e=>{e.forEach((e=>{if(e.isIntersecting){const t=e.target,a=e=>{let t,a=Array.from(e.querySelectorAll("svelte-scroller-foreground section"));a.forEach((e=>{r.observe(e),i.push(e),t=e.querySelector("p"),null!==t&&(r.observe(t),i.push(t),o.push(t))})),a.length>0&&n()};if(addElementWordsCount=()=>{g.words_count_old=g.words_count_new,g.words_count_new+=c.textContent.trim().split(" ").length},setTimeout((()=>{a(t)}),100),null!==c){switch(v(c,!0),c.dataset.area){case"text":"article-footer"!==t.dataset.area&&addElementWordsCount();break;case"html-embed":case"datawrapper":break;case void 0:"P"===c.nodeName&&addElementWordsCount()}y(),h()}r.unobserve(t),c=o.includes(t)?t:null}}))},C=()=>{((Date.now()-d)/1e3>2.5||null===d)&&"hidden"===document.visibilityState&&"number"==typeof d&&(u+=Date.now()-d),"number"==typeof d&&(d=Date.now())},P=e=>{const t=()=>{let e=_satellite.getVar("User | Current Consents [gl]").has_consent?.length>0,t=!1;return SARAs_data.getEventHistory().forEach((e=>{"audio"===e.event?.info?.action&&(t=!0)})),e&&!t};document.removeEventListener("visibilitychange",C),window.removeEventListener("beforeunload",P),window.removeEventListener("pagehide",P),t()&&V(e.type)},V=e=>{let t=Math.round(g.current_element_no/o.length*10)/10,i=n(),s=m.event.attributes;y()||null===d||(t=-1),a&&_satellite.logger.info("\n****************************************\n","RESULT: AAL ",t,"of",1," | Trigger:",e,"\n********************\narticle elements variety (0-1):",i,"\n****************************************"),s.article_attention_level=t,s.article_elements_variety=i,s.trigger=e,_satellite.track("aal_event_handler",m),1===t&&(r.disconnect(),document.removeEventListener("visibilitychange",C))};"hidden"!==document.visibilityState&&(document.removeEventListener("visibilitychange",f),a&&_satellite.logger.info("\n**********\n",p?"AAL is ACTIVE":"AAL is inactive","\n**********"),n(),b(),document.addEventListener("scroll",_),r=new IntersectionObserver(E,t),i.forEach((e=>{r.observe(e)})),document.addEventListener("visibilitychange",C),window.addEventListener("beforeunload",P),window.addEventListener("pagehide",P))},v=(e,t)=>{o[o.findIndex((t=>t===e))]=null,t&&a&&(e.style.backgroundColor=n,e.style.outline="1px solid "+n),g.current_element_no++,g.current_element_data_area_value=e.dataset.area||e.nodeName},y=()=>{if(null===d)return!1;const e="hidden"===document.visibilityState?d:Date.now(),t=g.words_count_new/8,a=(e-d+u)/1e3;return g.minimal_reading_time=Math.round(t),g.current_reading_time=Math.round(a),g.minimal_reading_time_reached=t<a,a>t},h=()=>{a&&_satellite.logger.info("\n****************************************\nData-Area-Element *",g.current_element_data_area_value,"* marked as read.\nElement",g.current_element_no,"of",o.length,"elements","means AAL",Math.round(g.current_element_no/o.length*10)/10,g.current_element_no<o.length&&/^(?:text|p)$/i.test(g.current_element_data_area_value)?"\nold words count: "+String(g.words_count_old)+" - NEW words count: "+String(g.words_count_new):"\n","\nminimal reading time reached:",g.minimal_reading_time_reached,"\nminimal reading time:",g.minimal_reading_time,"\ncurrent reading time:",g.current_reading_time,"\n****************************************")};(a||p)&&("visible"===document.visibilityState?f():document.addEventListener("visibilitychange",f))}},timeout:2e3,delayNext:!0},{modulePath:"fm-spon-data-layer-constructor/src/lib/actions/synchronousCode.js",settings:{callback:function(){performance.mark("sara_track_pageview")}},timeout:2e3,delayNext:!0},{modulePath:"adobe-alloy/dist/lib/actions/sendEvent/index.js",settings:{xdm:"%XDM | XDM Object Global [gl[sso]-lo]%",data:"%Target | AllParams [co]%",type:"decisioning.propositionFetch",instanceName:"saralloy",personalization:{decisionScopes:"%Target | Decision Scopes [co]%",sendDisplayEvent:!1},renderDecisions:!0,edgeConfigOverrides:{staging:{enabled:!0,datastreamId:"%Config | DataStream: Target Only [co-lo]%",com_adobe_target:{enabled:"%Config | Target disable: per Consent [gl-lo]%",propertyToken:"%Config | Target Property: per Consent [gl-lo]%"}},production:{enabled:!0,datastreamId:"%Config | DataStream: Target Only [co-lo]%",com_adobe_target:{enabled:"%Config | Target disable: per Consent [gl-lo]%",propertyToken:"%Config | Target Property: per Consent [gl-lo]%"}},development:{enabled:!0,datastreamId:"%Config | DataStream: Target Only [co-lo]%",com_adobe_target:{enabled:"%Config | Target disable: per Consent [gl-lo]%",propertyToken:"%Config | Target Property: per Consent [gl-lo]%"}}}},timeout:2e3,delayNext:!0},{modulePath:"adobe-alloy/dist/lib/actions/sendEvent/index.js",settings:{xdm:"%XDM | XDM Object Global [gl[sso]-lo]%",data:"%Target | AllParams [co]%",type:"web.webpagedetails.pageViews",instanceName:"saralloy",personalization:{includeRenderedPropositions:!0},edgeConfigOverrides:{staging:{enabled:!0,datastreamId:"%Config | DataStream: per Consent [gl-lo]%",com_adobe_target:{propertyToken:"%Config | Target Property: per Consent [gl-lo]%"}},production:{enabled:!0,datastreamId:"%Config | DataStream: per Consent [gl-lo]%",com_adobe_target:{propertyToken:"%Config | Target Property: per Consent [gl-lo]%"}},development:{enabled:!0,datastreamId:"%Config | DataStream: per Consent [gl-lo]%",com_adobe_target:{propertyToken:"%Config | Target Property: per Consent [gl-lo]%"}}}},timeout:2e3,delayNext:!0},{modulePath:"fm-spon-data-layer-constructor/src/lib/actions/synchronousCode.js",settings:{callback:function(){_satellite.getVar("Post Click | Click Attributes JSON [gl]")&&_satellite.saraCookieRemove(_satellite.getVar("Storage | Click: Attributes [gl]").name),_satellite.getVar("Page | Previous Data JSON [co]")&&_satellite.saraCookieRemove(_satellite.getVar("Storage | Page: Previous Page Data [gl]").name)}},timeout:2e3,delayNext:!0}]},{id:"RL7d2494cdfd8242ba93dd5f62607e7338",name:"Base:Libraries | Core:Library Loaded | #001 | [performance.mark (load), Utilities (cookie-handling; gpv,gvo,gvopt,pdtp), TCF-API (consent), UTIQ-API (consent), getIdentity, Target Helper Functions(init), Day-Usage-Session-Marker]",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:1}],conditions:[],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"performance.mark('sara_load_libraries')",language:"javascript"}},{modulePath:"fm-spon-data-layer-constructor/src/lib/actions/synchronousCode.js",settings:{callback:function(){function e(e){if("session"==(e=e||"session").toString().toLowerCase()||""==e)return 18e5;if(!isNaN(e))return e;let t,a=e.split(" ");if(a.length>1){let e=parseInt(a[0]);switch(a[1].replace(/s$/,"").toLowerCase()){case"minute":t=1;break;case"hour":t=60;break;case"day":t=1440;break;case"week":t=10080;break;case"month":t=43200;break;case"year":t=525600}return e*t*60*1e3}return parseInt(e)}function t(e){return"object"!=typeof e&&(e=[e]),e.forEach((function(e,t,a){_satellite.getVar("Util | Function: Get Purpose Consent Mapping [gl-lo]")(e)&&a.splice(t,1)})),e}_satellite.saraCookieRead=function(e){var t=e;if("string"!=typeof t)return"";t=encodeURIComponent(t);var a=" "+document.cookie,n=a.indexOf(" "+t+"="),r=0>n?n:a.indexOf(";",n);return(t=0>n?"":decodeURIComponent(a.substring(n+2+t.length,0>r?a.length:r)))?t:""},_satellite.saraCookieStorage=function(e,t,a,n){_satellite.cookieToPersist=_satellite.cookieToPersist||{},_satellite.cookieToPersist[e]={val:t,timeframe:a,domain:n}},_satellite.saraCookieWrite=function(t,a,n,r){let o=t,i=a,s=e(n),l=r;if("string"==typeof o){var c,d=window.location.hostname,u=window.location.hostname.split(".").length-1;if(d&&!/^[0-9.]+$/.test(d)&&(u=2<u?u:2,0<=(c=d.lastIndexOf(".")))){for(;0<=c&&1<u;)c=d.lastIndexOf(".",c-1),u--;c=0<c?d.substring(c):d}if(l=l||c,i=void 0!==i?""+i:"","string"==typeof i){var g=new Date;return g.setTime(g.getTime()+s),!(!o||(document.cookie=encodeURIComponent(o)+"="+encodeURIComponent(i)+"; path=/;"+(s?" expires="+g.toUTCString()+";":"")+(l?" domain="+l+";":""),void 0===_satellite.saraCookieRead))&&_satellite.saraCookieRead(o)===i}}},_satellite.saraCookieRemove=function(e){_satellite.saraCookieWrite(e,"REMOVE",-1)},window._satellite.getValOnce=function(e,a,n,r){if(r){let a=t(r);a.length>0&&(e="(consent missing):"+a.join(","))}return e&&(a=a||"s_gvo",n=n||0,e!==_satellite.saraCookieRead(a))?(_satellite.saraCookieStorage(a,e,n),e):""},window._satellite.getPreviousValue=function(e,a,n,r){if(r){let a=t(r);a.length>0&&(e="(consent missing):"+a.join(","))}let o,i=e,s=a;return s=s||"s_gpv",_satellite.saraCookieRead(s)&&(o=_satellite.saraCookieRead(s)),i?_satellite.saraCookieStorage(s,i,n):_satellite.saraCookieStorage(s,o,n),o},window._satellite.getValOncePerTimeframe=function(e,a,n,r){if(r){let a=t(r);a.length>0&&(e="(consent missing):"+a.join(","))}let o=_satellite.saraCookieRead(a);return o?_satellite.saraCookieStorage(a,o,n):(_satellite.saraCookieStorage(a,e,n),e)},window._satellite.getComposedPath=function(e,t,a){if(e.path)return e.path;var n=e.target;for(e.path=[];null!==n.parentNode;)e.path.push(n),n=n.parentNode;return e.path.push(t,a),e.path},window._satellite.pageDataToPersist={}}},timeout:2e3,delayNext:!0},{modulePath:"fm-spon-data-layer-constructor/src/lib/actions/synchronousCode.js",settings:{callback:function(){function e(e){function t(){"function"==typeof window.__tcfapi?window.__tcfapi("addEventListener",2,(function(e,t){return a(e,t)})):(o("tcf_error","api error",none),_satellite.logger.warn("[SARA-TCFWatcher]: TCData window.__tcfapi is not available!"))}function a(e,t){!t||e&&e.cmpStatus&&"error"===e.cmpStatus?o("consent_error","sourcepoint error","CMP status error"):e&&e.eventStatus&&m._lastEventStatus!==e.eventStatus&&(m._lastEventStatus=e.eventStatus,n(e)),g("[SARA-TCFWatcher]: api callback",e,t,m)}function n(e){m._tcData=e,e&&e.eventStatus&&"loaded"==e.cmpStatus?r(e):o("consent_error","sourcepoint error","cmpStatus not defined"),g("[SARA-TCFWatcher]: saras_tcdata_changed",e,m)}function r(e){m._ready=!0;var t,a,n="page_data_ready",r="rejected",o="no_consent",d=!1;"tcloaded"==e.eventStatus&&e.purpose.consents[1]?(a="sourcepoint - loaded",r="granted",o="has_consent"):"cmpuishown"==e.eventStatus?(a="sourcepoint - show",r="waiting",d=!0):"useractioncomplete"==e.eventStatus&&e.purpose.consents[1]&&(n="consent_completed",a="sourcepoint - accept",r="granted",o="has_consent",d=!0);var u,p=m._ready,f=e.eventStatus,v={allowed_iab_vendors:l(e),consents:s(),tc_data:e};i(e.eventStatus,o),c(n,a,p,r,f,u,v,d),g("SARA-TCF: on_ready",m,t)}function o(e,t,a,n,r,o){m._errorOccurred=!0;var s=e,l=t,d=!1,u="error",g="none",p=o;i(u,"no_consent"),c(s,l,d,u,g,p),_satellite.logger.error("[SARA-TCFWatcher]: on_error",m)}function i(e,t){m._currentConsent=t,m._dlcActivated||(_satellite.track("consent_ready",{activation:!0,tcf_trigger:e,consent_variable:t}),m._dlcActivated=!0)}function s(){let e;return __tcfapi("getCustomVendorConsents",2,(function(t,a){a&&(m._customVendors=e=t)})),e}function l(e){var t=e.vendor.consents;return Object.keys(t).forEach((function(e){t[e]||delete t[e]})),t}function c(e,t,a,n,r,o,i,s){let l={info:{component_id:"sourcepointlayer",name:"consentlayer",title:"Default Werbefrei Layer",version:""},category:{class:"stand-alone",type:"overlay",style:"modal"},attributes:{position:"blocking",source:"EXT-Sourcepoint"}},c={event:{info:{action:e,name:t},attributes:{source:"launch|cc|tcf-handler|v3.2"}},consent:{info:{name:"sourcepoint",ready:a,action:n,status:r,message:o},category:{type:"general"},settings:i||{}}};s&&"granted"==n&&(c.components=[l],c.event.attributes.component_id=l.info.component_id,c.event.attributes.component_name=l.info.name,c.event.attributes.component_type=l.category.type,c.event.attributes.title=l.info.title,c.event.attributes.pos=l.attributes.position),f(c),s&&"waiting"==n&&(c={event:{info:{action:"layer_open",name:"sourcepoint - show"},attributes:{source:"launch|cc|tcf-handler|v3.2",component_id:l.info.component_id,component_name:l.info.name,component_type:l.category.type,title:l.info.title,pos:l.attributes.position}},components:[l]},setTimeout(f,2e3,c))}var d={debug:!1,loggingFunction:void 0};for(var u in e)d[u]=e[u];var g=function(){};d.debug&&(g=d.loggingFunction?d.loggingFunction:Function.prototype.bind.apply(console.debug,[console,"[Engagement]"]));var m={_init:t,_dlcActivated:!1,_ready:!1,_errorOccurred:!1,_tcData:void 0,_customVendors:void 0,_lastEventStatus:void 0,_currentConsent:"no_consent"};performance.mark("sara_tcf_start");var p="no tc string  > waiting for activation";_satellite.getVar("User | has TC-Consent-String [gl]")&&(p="tc string ready > DLC activation triggered");const f=function(e){SARAs_data.push(e)};return t(),g("[SARA-TCFWatcher]: Ready",p,m),m}window._satellite.tcfwatcher=e({debug:!0,loggingFunction:_satellite.logger.debug})}}},{modulePath:"fm-spon-data-layer-constructor/src/lib/actions/synchronousCode.js",settings:{callback:function(){window.Utiq=window.Utiq||{},window.Utiq.listeners=window.Utiq.listeners||{},window.Utiq.listeners.onConsentManagerStatusChanged=window.Utiq.listeners.onConsentManagerStatusChanged||[],performance.mark("sara_utiq_append"),window.Utiq.listeners.onConsentManagerStatusChanged.push((({status:e})=>{const t={info:{component_id:"utiqlayer",name:"consentlayer",title:"Default Utiq Layer",version:""},category:{class:"stand-alone",type:"overlay",style:"modal"},attributes:{position:"blocking",source:"EXT-utiq"}};let a={event:{info:{action:"",name:""},attributes:{source:"launch|cc|utiq-loader|v1.1",component_id:t.info.component_id,component_name:t.info.name,component_type:t.category.type,title:t.info.title,pos:t.attributes.position}},consent:{info:{name:"utiq",action:"",ready:!0},category:{type:"special"}},components:[t]};switch(e){case"utiq_popup_shown":document.getElementById("utiq__container").setAttribute("data-sara-click-suppress",""),a.event.info.action="layer_open",a.event.info.name="utiq - show",a.consent.info.action="waiting";break;case"utiq_popup_accepted":a.event.info.action="special_consent_completed",a.event.info.name="utiq - accept",a.consent.info.action="granted";break;case"utiq_popup_rejected":a.event.info.action="special_consent_completed",a.event.info.name="utiq - reject",a.consent.info.action="rejected"}performance.mark("sara_utiq_event"),SARAs_data.push(["mode:arrayReplace",a])}))}},timeout:2e3,delayNext:!0},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:'saralloy("getIdentity",{\n    edgeConfigOverrides: {\n       datastreamId: _satellite.getVar("Config | DataStream: per Consent [gl-lo]", event)} \n  })\n.then(function(result) {\nwindow._satellite.identity = {ecid :  result.identity.ECID}\n})\n.catch(function(e) {\n_satellite.logger("no ECID returnable");\n})\n/*// get all href of links to gruppenkonto.spiegel.de:\nvar nodeList = document.querySelectorAll(\'[data-sara-link="gruppenkonto"]\');\n//FILTER NODE LIST TO EXCLUDE THE ELEMENTS WITHOUT VALID HREF\nvar filteredArray = [];\nnodeList.forEach(function (e) {\n  if (e.href) {\n    filteredArray.push(e);\n  }\n});\n\nif (filteredArray.length > 0) {\n  saralloy("appendIdentityToUrl", \n           { url: filteredArray[0].href,\n             edgeConfigOverrides: {\n                datastreamId: _satellite.getVar("Util | DataStream per Consent [co]", event)} \n           })\n    .then(function (res) {\n    filteredArray[0].href = res.url;\n\n    if (filteredArray.length > 1) {\n      for (let i = 1; i < filteredArray.length; i++) {\n        saralloy("appendIdentityToUrl", { url: filteredArray[i].href }).then(function (resultUrl) {\n          filteredArray[i].href = resultUrl.url;\n        });\n      }\n    }\n  });\n}\n*/',language:"javascript"}},{modulePath:"fm-spon-data-layer-constructor/src/lib/actions/synchronousCode.js",settings:{callback:function(e){window._satellite.targetHelper=window._satellite.targetHelper||{},window._satellite.targetHelper={createSingleOffer:function(e,t,a){var n="string"==typeof e?e:"";if(n){var r="string"==typeof a&&["appendHtml","setHtml","replaceHtml"].indexOf(a)>-1?a:"appendHtml",o="string"==typeof t?t:"body";return{[n]:{selector:o,actionType:r}}}},combineOffers:function(e,t,a){for(var n={},r=0;r<arguments.length;r++)arguments[r]&&window._satellite.targetHelper.validateOffers(arguments[r])&&Object.assign(n,arguments[r]);return[n,a]},getOffer:function(t,a,n){if("basic"!=_satellite.getVar("User | Current Consent Status [gl-sc]",e)){var r=t?Object.keys(t):"",o="function"==typeof a?a:function(){},i={datastreamId:_satellite.getVar("Config | DataStream: Target Only [co-lo]",e),com_adobe_target:{propertyToken:_satellite.getVar("Config | Target Property: per Consent [gl-lo]")}};window._satellite.targetHelper.validateOffers(t)&&saralloy("sendEvent",{decisionScopes:r,data:window._satellite.getVar("Target | AllParams [co]",e),xdm:window._satellite.getVar("XDM | XDM Object Global [gl[sso]-lo]",e),edgeConfigOverrides:i}).then((function(e){var a=[];if(Array.isArray(e.propositions))return a=e.propositions.filter((function(e){return r.indexOf(e.scope)>-1})),o(a,t,n)}))}},applyOffer:function(e,t,a){const n=function(){try{return JSON.parse(_satellite.getVar("Target | Eigenwerbung-Elements [co]"))}catch(e){return{}}}(),r=_satellite.getVar("Page | Route [gl]");if("object"==typeof t)for(const[o,i]of Object.entries(t))if(o.includes("empty-adslot")){if(Array.isArray(e)&&e.length>0){if(Array.isArray(n[r])&&!n[r].includes(a)&&/^adb=true:adbrain[12]$/.test(_satellite.saraCookieRead("sara_target_adb")))return void window.navigator.webBridge.targetAdPositionLoaded({pos:a,containsAd:!1});{window.navigator.webBridge.targetAdPositionLoaded({pos:a,containsAd:!0}),console.log("[SARA Target Helper] applyOffer - Proposition Details:"),e.forEach((e=>{console.log("Proposition ID:",e.id),console.log("Proposition Scope (mbox name):",e.scope),console.log("Scope Details:",e.scopeDetails)}));const n=document.querySelector('a[href="https://www.amazon.de/dp/3421047146??tag=sponsite"]');return n&&n.addEventListener("click",(function(){console.log("[Adobe Target] Tracking interaction for link:",n.href),e.forEach((e=>{saralloy("sendEvent",{xdm:{eventType:"decisioning.propositionInteract",_experience:{decisioning:{propositions:[{id:e.id,scope:e.scope,scopeDetails:e.scopeDetails}]}}}}).then((()=>{console.log("[Adobe Target] Interaction event successfully sent for proposition:",e.id)})).catch((e=>{console.error("[Adobe Target] Failed to send interaction event:",e)}))}))})),saralloy("applyPropositions",{propositions:e,metadata:t})}}return void window.navigator.webBridge.targetAdPositionLoaded({pos:a,containsAd:!1})}},validateOffers:function(e){if("object"!=typeof e)return!1;var t=Object.keys(e),a=[];for(let n=0;n<t.length;n++)"string"==typeof e[t[n]].selector&&"string"==typeof e[t[n]].actionType&&a.push(e[t[n]]);return t.length===a.length||(_satellite.logger.info("[TargetHelper-validateOffers] "+a.length+" out of "+t.length+" where valid, return false"),!1)},trackEvent:function(t){if("basic"!=_satellite.getVar("User | Current Consent Status [gl-co]",e)){var a={datastreamId:_satellite.getVar("Config | DataStream: Target Only [co-lo]",e),com_adobe_target:{propertyToken:_satellite.getVar("Config | Target Property: per Consent [gl-lo]")}};saralloy("sendEvent",{decisionScopes:[t],edgeConfigOverrides:a,xdm:window._satellite.getVar("XDM | XDM Object Global [gl[sso]-lo]",e)})}}}}}},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:'// Cookie nur setzten, wenn Consent erteilt\n// String nach Muster "0;0.x:0.x|0.x:0.x"\nconst usageCookieName = _satellite.getVar(\'Storage | Usage: Usage [co]\').name;\nconst sessionCookieName = _satellite.getVar(\'Storage | Usage: Session [co]\').name;\nconst dayCookieName = _satellite.getVar(\'Storage | Usage: Day [co]\').name;\n\nconst dayVisited = _satellite.getVar(\'User | Cookie: Day [co]\');\n\nlet usage_string = _satellite.getVar(\'User | Cookie: Usage [co]\') || "0;0.x:0.x|0.x:0.x";\nlet session_count = parseInt(usage_string.split(";")[0]);\nlet day_string;\nlet day_string_p1day;\nlet day_string_p2login;\nlet day_session;\nlet day_session_pv;\nlet day_login;\nlet day_login_pv;\nlet logged_in = _satellite.getVar(\'User | is Logged In [co]\',event);\nlet logout_string = ".x:0.x"; \nlet first_occurence = "1.d:1.v";\n\n// TEIL 0: Session Count :\nlet runningSession = _satellite.saraCookieRead(sessionCookieName)\nif (runningSession.length==0) {\n  session_count = ++session_count;\n}\n\n\n// TEIL 1: Session String bestimmen:\n// Beim ersten Pageview der ersten Sitzung (ohne Day und Session Cookie) wird first_occurence beibehalten\n// wenn bereits ein Session Cookie vorhanden, wird der Pageview Count hochgez\xe4hlt\n\n// neue Session startet, mit Cookie Pageviews > 0 \n// regul\xe4rer Daystring --> Session hochz\xe4hlen\n\n// laufende Session, mit Pageviews UND Cookie Pageviews > 0\n// regul\xe4rer Daystring --> Session beibehalten\nif (!dayVisited) {\n  day_string = "0.x:0.x|0.x:0.x"\n} else {\n  day_string = usage_string.split(";")[1]\n}\nday_string_p1day = day_string.split(\'|\')[0];\nday_session = parseInt(day_string_p1day.split(":")[0].split(".")[0]);\nday_session_pv = parseInt(day_string_p1day.split(":")[1].split(".")[0]);\n\nif (day_session == 0 && day_session_pv == 0) {\n    day_string_p1day = first_occurence;\n} else if (day_session > 0 && day_session_pv >= 1 && runningSession.length==0) {\n    day_session_pv = 1;\n    day_string_p1day = ++day_session+".f:"+day_session_pv+".f";\n} else if (day_session > 0 && day_session_pv >= 1 && runningSession.length>0) {\n    day_string_p1day = day_session+".f:"+(++day_session_pv)+".f";\n}\n\n// TEIL 2: Login String bestimmen:\n// Ist der Nutzer ausgeloggt \xe4ndert sich die Login-Zahl, sofern er zuvor eingeloggt war (day_login_pv > 0 im Cookie) sonst bleibt der default\n// Ist der Nutzer eingeloggt, erh\xe4lt er\n// - beim ersten Login: first_occurence\n// - bei folgendem Login: first_occurence\nday_string_p2login = day_string.split(\'|\')[1];\nday_login = parseInt(day_string_p2login.split(":")[0].split(".")[0]);\nday_login_pv = parseInt(day_string_p2login.split(":")[1].split(".")[0]);\n\nswitch (logged_in){\n  case false:\n      if (day_login_pv > 0) {\n        day_string_p2login = -day_login + logout_string;\n      }\n      break;\n  case true:\n       if (day_login == 0 && day_login_pv == 0) {\n         day_string_p2login = first_occurence;\n       } else if (day_login > 0 && day_session_pv == 1) {\n         day_string_p2login = ++day_login+".f:"+day_session_pv+".f";\n       } else if (day_login > 0 && day_login_pv > 0 && day_session_pv > 1) {\n         day_string_p2login = day_login+".f:"+(++day_login_pv)+".f";\n       } else if (day_login < 0) {\n         day_string_p2login = (day_login*=-1)+1+".f:1.v"\n       }\n      break;\n}\n\n// Combine String:\nday_string = session_count + ";"+ day_string_p1day + "|" + day_string_p2login;\n\n_satellite.preCookie = _satellite.preCookie || {};\n_satellite.preCookie[dayCookieName]=dayVisited || "true";\n_satellite.preCookie[sessionCookieName]= runningSession || "active";\n_satellite.preCookie[usageCookieName]=day_string;',language:"javascript"}}]},{id:"RL8e3398ee2d4f4958a005bbaf1c9b592c",name:"Target:Offer | WebSDK:sendEventComplete | #001 [-noconsent.prI, fuermich, loggedIn] | [Target (local-scope: fuermich:reco-[]))]",events:[{modulePath:"adobe-alloy/dist/lib/events/sendEventComplete/index.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"isFalse"},leftOperand:"%Consent Setting | Purpose - prI granted [co]%"},negate:!0,timeout:2e3},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%Page | Route [gl]%",rightOperand:"fuermich"},timeout:2e3},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"isTrue"},leftOperand:"%User | is Logged In [gl[sso]-sm]%"},timeout:2e3}],actions:[{modulePath:"adobe-alloy/dist/lib/actions/applyPropositions/index.js",settings:{metadata:{"fuermich:history":{selector:"[data-target-id=reco-history]",actionType:"appendHtml"},"fuermich:reco-personal":{selector:"[data-target-id=reco-personal]",actionType:"appendHtml"}},instanceName:"saralloy",propositions:"%Target | Event Propositions [gl]%"}}]},{id:"RL8e8efff6fefd44e5b2f968387afd26ce",name:"Util:Performance | Enter Viewport [article-footer] | #001 [-paywall; > 20 sec active; once per page] | [SARAs_data.push (scroll:editorial - complete)]",events:[{modulePath:"core/src/lib/events/entersViewport.js",settings:{delay:1e3,frequency:"everyEntry",elementSelector:"main footer"},ruleOrder:1}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"isTrue"},leftOperand:"%Paywall | is Active [co]%"},negate:!0,timeout:2e3},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"greaterThanOrEqual"},leftOperand:"%Page | Timing: Engagement: Active (sec) [co]%",rightOperand:20},timeout:2e3},{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){return _satellite.maxFrequency=_satellite.maxFrequency||{},_satellite.maxFrequency.editorialComplete=++_satellite.maxFrequency.editorialComplete||1,1===_satellite.maxFrequency.editorialComplete}},timeout:2e3}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/cc10f7b4369d/32ae8c3350c5/e4bb098751cc/RC88bb227e3ba342acbeccd96a541577f4-source.min.js",language:"javascript",isExternal:!0},timeout:2e3,delayNext:!0}]},{id:"RL8ec9362863384b25bdaf6ceaf5cf016b",name:"Base:Pageview | SARAs:virtual_page | #001 | [CC(reset-stats)]",events:[{modulePath:"fm-spon-data-layer-constructor/src/lib/events/dataLayerPush.js",settings:{eventName:"virtual_page"},ruleOrder:1}],conditions:[],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/cc10f7b4369d/32ae8c3350c5/e4bb098751cc/RCfe6a2b9ede314623bec85f0a31ed32fe-source.min.js",language:"javascript",isExternal:!0},timeout:2e3,delayNext:!0}]},{id:"RL90607c0a27904aae8b33268bca2bea8d",name:"Util:Performance | Enter Viewport [video-section] | #001 [homepage; > 20 sec active; once per page] | [SARAs_data.push (scroll:editorial - complete)]",events:[{modulePath:"core/src/lib/events/entersViewport.js",settings:{frequency:"everyEntry",elementSelector:'section[data-area="block>video"]'},ruleOrder:1}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%Page | Type [co]%",rightOperand:"homepage"},timeout:2e3},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"greaterThanOrEqual"},leftOperand:"%Page | Timing: Engagement: Active (sec) [co]%",rightOperand:20},timeout:2e3},{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){return _satellite.maxFrequency=_satellite.maxFrequency||{},_satellite.maxFrequency.editorialComplete=++_satellite.maxFrequency.editorialComplete||1,1==_satellite.maxFrequency.editorialComplete}},timeout:2e3}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/cc10f7b4369d/32ae8c3350c5/e4bb098751cc/RC127ae6c28662473ca4bdc9716df36bca-source.min.js",language:"javascript",isExternal:!0},timeout:2e3,delayNext:!0}]},{id:"RL92d13bfc86194f43ad0496d7ba5888db",name:"Event:Direct Call | SARAs_data:direct_call | #90 [article attention level] | [Web SDK (sendEvent)]",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"aal_event_handler"},ruleOrder:1}],conditions:[{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(e){return"object"==typeof e.detail||"article attention level"===e.detail?.event?.info?.name}},timeout:2e3}],actions:[{modulePath:"fm-spon-data-layer-constructor/src/lib/actions/synchronousCode.js",settings:{callback:function(e){SARAs_data.push(e.detail)}},timeout:2e3,delayNext:!0},{modulePath:"adobe-alloy/dist/lib/actions/sendEvent/index.js",settings:{xdm:"%XDM | XDM Object Global [gl[sso]-lo]%",type:"web.webinteraction.linkClicks",instanceName:"saralloy",documentUnloading:!0,edgeConfigOverrides:{staging:{enabled:!0,datastreamId:"%Config | DataStream: per Consent [gl-lo]%"},production:{enabled:!0,datastreamId:"%Config | DataStream: per Consent [gl-lo]%"},development:{enabled:!0,datastreamId:"%Config | DataStream: per Consent [gl-lo]%"}}},timeout:3e3,delayNext:!0},{modulePath:"fm-spon-data-layer-constructor/src/lib/actions/synchronousCode.js",settings:{callback:function(){}},timeout:2e3,delayNext:!0}]},{id:"RL9d00951ca05f4e0d88e306d17a16c262",name:"Target:Offer | WebSDK:sendEventComplete | #001 [-noconsent.pVa, homepage] | [Target (local-scope: homepage:channelbox)]",events:[{modulePath:"adobe-alloy/dist/lib/events/sendEventComplete/index.js",settings:{},ruleOrder:1}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"isTrue"},leftOperand:"%Consent Setting | Purpose - pVa granted [co]%"},negate:!0,timeout:2e3},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%Page | Route [gl]%",rightOperand:"homepage"},timeout:2e3}],actions:[{modulePath:"adobe-alloy/dist/lib/actions/applyPropositions/index.js",settings:{metadata:{"homepage:channelbox":{selector:'[data-target-id="digital-abo-ew"], [data-target-id="channelbox"]',actionType:"appendHtml"}},instanceName:"saralloy",propositions:"%Target | Event Propositions [gl]%"},timeout:2e3,delayNext:!0}]},{id:"RLb6e653aa5eae43dfb7dd777acd52ab2e",name:"Base:Pageview | SARAs:page_data_ready+virtual_page | #001 | [CC(clear-storage, reset-stats)]",events:[{modulePath:"fm-spon-data-layer-constructor/src/lib/events/dataLayerPush.js",settings:{eventName:"page_data_ready"},ruleOrder:20},{modulePath:"fm-spon-data-layer-constructor/src/lib/events/dataLayerPush.js",settings:{eventName:"virtual_page"},ruleOrder:50}],conditions:[],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/cc10f7b4369d/32ae8c3350c5/e4bb098751cc/RC0118948576ac4d62a83d547c23bb667f-source.min.js",language:"javascript",isExternal:!0},timeout:2e3,delayNext:!0}]},{id:"RLc46bf896b4cb4a5e97fb98747e603a63",
name:"Marketing:Pageview | SARAs:page_data_ready+consent_completed | #200 [once per page; -noconsent.pWx; -PUR] | [Google Ads (init, sendEvent), Microsoft Ads (init, sendEvent), Outbrain Amplify (init, sendEvent), TikTok Ads (init, sendEvent)]",events:[{modulePath:"fm-spon-data-layer-constructor/src/lib/events/dataLayerPush.js",settings:{eventName:"page_data_ready"},ruleOrder:200},{modulePath:"fm-spon-data-layer-constructor/src/lib/events/dataLayerPush.js",settings:{eventName:"consent_completed"},ruleOrder:200}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"isTrue"},leftOperand:"%Consent | Validate page_data_ready [co]%"},timeout:2e3},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"isFalse"},leftOperand:"%Consent Setting | Purpose - pWx granted [sm]%"},negate:!0,timeout:2e3},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"isTrue"},leftOperand:"%User | has No Ads Access [sm]%"},negate:!0,timeout:2e3},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"isTrue"},leftOperand:"%Page | is PUR Tracking [co]%"},negate:!0,timeout:2e3},{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){return _satellite.maxFrequency=_satellite.maxFrequency||{},_satellite.maxFrequency.marketingPixel=++_satellite.maxFrequency.marketingPixel||1,1===_satellite.maxFrequency.marketingPixel}},timeout:2e3}],actions:[{modulePath:"fm-spon-data-layer-constructor/src/lib/actions/synchronousCode.js",settings:{callback:function(){let e=_satellite.getVar("Marketing Pixel | Google ID: Account [sm]"),t=(_satellite.getVar("Marketing Pixel | Google ID: MCC [sm]"),document.createElement("script"));"function"!=typeof gtag&&(t.src="https://www.googletagmanager.com/gtag/js?id=AW-"+e,document.head.appendChild(t),window.dataLayer=window.dataLayer||[],window.gtag=function(){dataLayer.push(arguments)},gtag("consent","default",{ad_storage:"denied",ad_user_data:"denied",ad_personalization:"denied",analytics_storage:"denied"}),gtag("consent","update",{ad_storage:"granted",ad_user_data:"granted",ad_personalization:"granted",analytics_storage:"granted"}),gtag("js",new Date),gtag("config","AW-"+e,{cookie_prefix:_satellite.getVar("Page | Domain [gl]")+"_gcl",page_location:_satellite.getVar("Page | Canonical URL [gl]")}))}}},{modulePath:"bing-ads-extension/src/lib/actions/baseTag.js",settings:{}},{modulePath:"fm-spon-data-layer-constructor/src/lib/actions/synchronousCode.js",settings:{callback:function(){}}},{modulePath:"fm-spon-data-layer-constructor/src/lib/actions/synchronousCode.js",settings:{callback:function(){!function(e,t,a){e.TiktokAnalyticsObject=a;var n=e[a]=e[a]||[];n.methods=["page","track","identify","instances","debug","on","off","once","ready","alias","group","enableCookie","disableCookie"],n.setAndDefer=function(e,t){e[t]=function(){e.push([t].concat(Array.prototype.slice.call(arguments,0)))}};for(var r=0;r<n.methods.length;r++)n.setAndDefer(n,n.methods[r]);n.instance=function(e){for(var t=n._i[e]||[],a=0;a<n.methods.length;a++)n.setAndDefer(t,n.methods[a]);return t},n.load=function(e,t){var r="https://analytics.tiktok.com/i18n/pixel/events.js";n._i=n._i||{},n._i[e]=[],n._i[e]._u=r,n._t=n._t||{},n._t[e]=+new Date,n._o=n._o||{},n._o[e]=t||{};var o=document.createElement("script");o.type="text/javascript",o.async=!0,o.src=r+"?sdkid="+e+"&lib="+a;var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(o,i)},n.load(_satellite.getVar("Marketing Pixel | TikTok ID [sm]")),n.page()}(window,document,"ttq")}}},{modulePath:"fm-spon-data-layer-constructor/src/lib/actions/synchronousCode.js",settings:{callback:function(){}}},{modulePath:"fm-spon-data-layer-constructor/src/lib/actions/synchronousCode.js",settings:{callback:function(){}}}]},{id:"RLcca083a90f614e3db0c2a69fbca33703",name:"Base:Click | Core:click+auxclick | #001 | [SARAs_data.push ({any}_click))]",events:[{modulePath:"core/src/lib/events/click.js",settings:{bubbleFireIfParent:!0,bubbleFireIfChildFired:!0},ruleOrder:1},{modulePath:"core/src/lib/events/customCode.js",settings:{source:function(e){document.addEventListener("auxclick",(function(t){e(t)}))}},ruleOrder:50}],conditions:[],actions:[{modulePath:"fm-spon-data-layer-constructor/src/lib/actions/synchronousCode.js",settings:{callback:function(e){function t(e){let t=e.isTrusted?e:e.nativeEvent;if(_satellite.logger.info("[SARAs Click Handler] initiated ",t),0!=t.button&&1!=t.button)return;_satellite.logger.info("[SARAs Click Handler] clicked ",t);const a={event:{info:{action:"",name:""},attributes:{source:"launch|cc|click-handler|v2.5.1"}}},n={info:{component_id:"",name:"",title:"",version:""},category:{class:"",style:"",type:""},attributes:{steps:"",position:"",source:"",items_source:"",created_at:""}},r=t.path||t.composedPath&&window._satellite.getComposedPath(t,document,window);let o="click",i="generic - click",s="",l="",c="",d="",u="",g="",m="",p="",f="",v="",y="",h="",b="",_="",E=[],C="",P=!1,V="",w="",k="",A=!1,S=!1,T=!1,D=!1;for(let e=r.length-1;e--;e>=0)if(r[e]instanceof HTMLElement){let t=r[e];if(t.hasAttribute("data-sara-click-suppress"))return void(D=!1);if("FORM"===t.nodeName&&(P=!0),"A"===t.nodeName&&(A=!0,o="link_click",t.hasAttribute("href"))){let e=t.href;if(/^#\w+/.test(e))continue;/^\/\w+/.test(e)&&(e=location.protocol+"//"+location.hostname+e),b=e.replace(/(dnt_\w+)=\w+/gi,(function(e,t){return[t,"__DONOTTRACK__"].join("=")}));let a=new URL(b);if(/mailto:/.test(a.protocol)&&(o="link_click_external",i="link - mailto"),a.hostname){let e=new RegExp(location.hostname.match(/\w+\.(\w*-?\w+\.de$)/)[0]),n=new RegExp(location.hostname.match(/\w+\.(\w*-?\w+\.de$)/)[1]);e.test(a.hostname)?(o=t.hasAttribute("download")?"link_click_download":"link_click_internal",i="link - "+(t.innerText.toLowerCase()||t.title.toLowerCase())):n.test(a.hostname)?(o="link_click_external",i="link - friendly"):e.test(a.hostname)||(o="link_click_external",i="link - external")}t.hasAttribute("title")&&(_=t.getAttribute("title")),t.querySelector("[data-contains-flags]")&&(E=t.querySelector("[data-contains-flags]").getAttribute("data-contains-flags").split(" ")),D=!0}if("BUTTON"===t.nodeName||t.classList.contains("button")||t.hasAttribute("data-sara-cta")||t.hasAttribute("data-target-button")){if("submit"===t.type&&P)return void(D=!1);if(m=t.nodeName.toLowerCase(),p=t.innerText,(t.hasAttribute("data-sara-cta")||t.className.includes("primary-base"))&&(c=t.getAttribute("data-sara-cta")||"primary"),"click"!=o&&!t.hasAttribute("data-sara-cta")&&!t.hasAttribute("data-target-button"))continue;o="button_click",/dnt_subscriptionId.*confirmed\=true/.test(b)?i="subscription - cancel":A||i.includes("-")?c&&i.includes("engage")&&(i=i.replace(/engage/,c)):i=i+" - "+(t.type||t.nodeName.toLowerCase()),t.hasAttribute("data-embedtrack")&&(u=n.info.name=JSON.parse(t.dataset.embedtrack).component_name,i=JSON.parse(t.dataset.embedtrack).name,C=JSON.parse(t.dataset.embedtrack).newsletter_id),D=!0}if(t.hasAttribute("data-area")&&(s=t.getAttribute("data-area"),l=l?l+">"+s:s,T||(u=n.info.name=s),"body"==s&&(S=!0)),t.hasAttribute("data-sara-component")&&(d=JSON.parse(t.getAttribute("data-sara-component")),u=n.info.name=d.name||u,g=n.category.type=d.type||g,f=n.info.component_id=d.id||f,v=n.info.title=d.title||v,V=n.attributes.items_source=d.item_source||V,w=n.info.version=d.run_id||w,k=n.attributes.created_at=d.created_at||k,new RegExp(u+"$").test(l)||(l=l?l+":"+u:u),m=t.nodeName,S&&(o="component_click"),i=(u.toLowerCase()||s)+" - engage",D=!0,T=!0),t.hasAttribute("data-sara-click-el")&&(T?m=t.getAttribute("data-sara-click-el"):g=m=n.category.type=t.getAttribute("data-sara-click-el"),T=!0),t.hasAttribute("data-pos")&&(y=n.attributes.position=t.getAttribute("data-pos")),y&&t.hasAttribute("data-pos-inner")){let e="";e=y.split(":"),e.push(t.getAttribute("data-pos-inner")),y=n.attributes.position=e.join(":")}t.hasAttribute("data-sara-steps")&&(h=n.attributes.steps=t.getAttribute("data-sara-steps")),t.hasAttribute("data-target-id")&&!T&&(u=n.info.name=t.getAttribute("data-target-id"),T=!0,D=!0),t.hasAttribute("data-target-platform")}/play/.test(u)?_satellite.logger.info("[SARAs Click Handler] suppressed ",e):(D&&(a.event.info.action=o,a.event.info.name=i.toLowerCase()),D&&n.info.name&&(a.components=[],a.components.push(n)),a.event.attributes.click_id=l||"",a.event.attributes.cta=c||"",a.event.attributes.element_name=m.toLowerCase()||"",a.event.attributes.element_text=p||"",a.event.attributes.component_name=u||"",a.event.attributes.component_type=g.toLowerCase()||"",a.event.attributes.run_id=w||"",a.event.attributes.item_source=V||"",a.event.attributes.created_at=k||"",a.event.attributes.embedded_id=f||"",a.event.attributes.title=v||"",a.event.attributes.headline=_||"",a.event.attributes.pos=y||"",a.event.attributes.steps=h||"",a.event.attributes.target_url=b||"",a.event.attributes.label=E||"",a.event.attributes.item=C?{newsletter_id:C}:{},SARAs_data.push(a))}setTimeout(t(e),0)}},timeout:2e3,delayNext:!0}]},{id:"RLd7867b68c29f4bc0b95bd74f07292021",name:"Event:Base-Interaction-nounload | SARAs:audio+component_view+consent_error+layer_open+tcf_error+video+special_consent_completed | #001 | [Web SDK (sendEvent)]",events:[{modulePath:"fm-spon-data-layer-constructor/src/lib/events/dataLayerPush.js",settings:{eventName:"audio"},ruleOrder:1},{modulePath:"fm-spon-data-layer-constructor/src/lib/events/dataLayerPush.js",settings:{eventName:"component_view"},ruleOrder:1},{modulePath:"fm-spon-data-layer-constructor/src/lib/events/dataLayerPush.js",settings:{eventName:"video"},ruleOrder:1},{modulePath:"fm-spon-data-layer-constructor/src/lib/events/dataLayerPush.js",settings:{eventName:"tcf_error"},ruleOrder:1},{modulePath:"fm-spon-data-layer-constructor/src/lib/events/dataLayerPush.js",settings:{eventName:"consent_error"},ruleOrder:50},{modulePath:"fm-spon-data-layer-constructor/src/lib/events/dataLayerPush.js",settings:{eventName:"timer"},ruleOrder:1},{modulePath:"fm-spon-data-layer-constructor/src/lib/events/dataLayerPush.js",settings:{eventName:"layer_open"},ruleOrder:1},{modulePath:"fm-spon-data-layer-constructor/src/lib/events/dataLayerPush.js",settings:{eventName:"special_consent_completed"},ruleOrder:1}],conditions:[{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(e){var t=_satellite.getVar("Event | Action [gl]",e);return("audio"!==t&&"video"!==t||0!==_satellite.getVar("Event | Name [gl]",e).indexOf("ivw"))&&("audio"!==t||"podlove"!=_satellite.getVar("Event | Source [gl]",e)||!_satellite.getVar("Event | State [gl]",e).audio)}},timeout:2e3}],actions:[{modulePath:"adobe-alloy/dist/lib/actions/sendEvent/index.js",settings:{xdm:"%XDM | XDM Object Global [gl[sso]-lo]%",type:"web.webinteraction.linkClicks",instanceName:"saralloy",edgeConfigOverrides:{staging:{enabled:!0,datastreamId:"%Config | DataStream: per Consent [gl-lo]%"},production:{enabled:!0,datastreamId:"%Config | DataStream: per Consent [gl-lo]%"},development:{enabled:!0,datastreamId:"%Config | DataStream: per Consent [gl-lo]%"}}},timeout:2e3,delayNext:!0}]},{id:"RLdbd1c93bb29f4e9db62f560fb91dea15",name:"Util:Performance | Enter Viewport [footer] | #001 [> 20 sec active; once per page] | [SARAs_data.push (scroll:page - complete)]",events:[{modulePath:"core/src/lib/events/entersViewport.js",settings:{delay:1e3,frequency:"everyEntry",elementSelector:'footer[data-area="footer"]'},ruleOrder:1}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"greaterThanOrEqual"},leftOperand:"%Page | Timing: Engagement: Active (sec) [co]%",rightOperand:20},timeout:2e3},{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){return _satellite.maxFrequency=_satellite.maxFrequency||{},_satellite.maxFrequency.pageComplete=++_satellite.maxFrequency.pageComplete||1,1===_satellite.maxFrequency.pageComplete}},timeout:2e3}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/cc10f7b4369d/32ae8c3350c5/e4bb098751cc/RC008d3811668f4f9aa4cfbf97a6d6b7e4-source.min.js",language:"javascript",isExternal:!0},timeout:2e3,delayNext:!0}]},{id:"RLe5fcda29ead9443fbce1aa0d239d7657",name:"Base:Media-Audio | SARAs:podlove-init | #001 | [DLC(sync: addWatcher)]",events:[{modulePath:"fm-spon-data-layer-constructor/src/lib/events/dataLayerPush.js",settings:{eventName:"podlove-init"},ruleOrder:1}],conditions:[],actions:[{modulePath:"fm-spon-data-layer-constructor/src/lib/actions/synchronousCode.js",settings:{callback:function(e){try{var t=e.detail.state.event.attributes.player_id,a=navigator.webBridge.getPodloveWebplayerStore(t);_satellite.podwatcher.addWatcher(a,t)}catch(e){_satellite.logger.error(e)}}},timeout:2e3,delayNext:!0}]},{id:"RLe81c3c42748743b08924f8a5c3567416",name:"Base:Pageview | SARAs:page_data_ready[consent] | #002 [purchase, app, once:session] | [SARAs_data.push (products)]",events:[{modulePath:"fm-spon-data-layer-constructor/src/lib/events/dataLayerPush.js",settings:{eventName:"page_data_ready"},ruleOrder:2}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"isTrue"},leftOperand:"%Consent | Validate page_data_ready [co]%"},timeout:2e3},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"doesNotEqual"},leftOperand:"%Purchase | is Initial in App [co]%",rightOperand:"false"},timeout:2e3},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"isTruthy"},leftOperand:"%Product | ID in App [co]%"},timeout:2e3},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"isFalsy"},leftOperand:"%Event Value | Purchase (in App) [co]%"},timeout:2e3}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/cc10f7b4369d/32ae8c3350c5/e4bb098751cc/RC1a3ad17f3efb4902b55a1032fdc956ec-source.min.js",language:"javascript",isExternal:!0},timeout:2e3,delayNext:!0}]},{id:"RLe8d84a48c2c148d9abce7dedec8b56ec",name:"Target:Create | SARAs:adpos-init | #001 [emptyadslot] | [SARAs_data.push(adpos-init-combined)]",events:[{modulePath:"fm-spon-data-layer-constructor/src/lib/events/dataLayerPush.js",settings:{eventName:"adpos-init"},ruleOrder:1}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"isFalse"},leftOperand:"%Event | Contains Ad [gl]%"},timeout:2e3}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/cc10f7b4369d/32ae8c3350c5/e4bb098751cc/RC7046e0cb2f264fccb1f57556c6fde058-source.min.js",language:"javascript",isExternal:!0},timeout:2e3,delayNext:!0}]},{id:"RLeb27b50aa3934ff6a52c7918a22c1c29",name:"Target:Offer | WebSDK:sendEventComplete | #001 [-noconsent.PuV , -article, loggedIn] | [Target (local-scope: fuermich-banner:keep-reading]",events:[{modulePath:"adobe-alloy/dist/lib/events/sendEventComplete/index.js",settings:{},ruleOrder:1}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"isTrue"},leftOperand:"%Consent Setting | Purpose - PuV granted [gl]%"},negate:!0,timeout:2e3},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%Page | Route [gl]%",rightOperand:"article"},negate:!0,timeout:2e3},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"isTrue"},leftOperand:"%User | is Logged In [gl[sso]-sm]%"},timeout:2e3}],actions:[{modulePath:"fm-spon-data-layer-constructor/src/lib/actions/synchronousCode.js",settings:{callback:function(){document.getElementsByTagName("BODY")[0].insertAdjacentHTML("afterbegin",'<div data-target-id="target-keep-reading-banner" data-target-hide="" class="at-element-marker"></div>')}},timeout:2e3,delayNext:!0},{modulePath:"adobe-alloy/dist/lib/actions/applyPropositions/index.js",settings:{metadata:{"fuermich-banner:keep-reading":{selector:"[data-target-id=target-keep-reading-banner]",actionType:"appendHtml"}},instanceName:"saralloy",propositions:"%Target | Event Propositions [gl]%"},timeout:2e3,delayNext:!0}]},{id:"RLedaccf7ac9eb4e1dae0a1c461afa904f",name:"Base:Impression | Core:component_view | #001[recommendation] | [SARAs_data.push (component_view))]",events:[{modulePath:"fm-spon-data-layer-constructor/src/lib/events/dataLayerPush.js",settings:{eventName:"component_view"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"contains"},leftOperand:"%Event | Name [gl]%",rightOperand:"recommendation"},timeout:2e3}],actions:[{modulePath:"fm-spon-data-layer-constructor/src/lib/actions/synchronousCode.js",settings:{callback:function(e){var t=_satellite.getVar("Event | Name [gl]",e),a=_satellite.getVar("Event | Attributes [gl]",e),n=function(e){function t(e,t){for(var s=0,l=e.length;s<l;s++){var d=e[s],u=d.intersectionRatio>0;"obs100"===t.name&&(u=1===d.intersectionRatio);var g=d.target,m=t.name;if(g[o]=g[o]||{},g[o].id=g[o].id||r++,g[o][m]=g[o][m]||{},g[o][m].isVisible=u,g[o].fired=g[o].fired||!1,!0===g[o].fired)return void c.unobserve(g);n?a(g,m):u?g[o][m].timeoutid=setTimeout(a.bind(void 0,g,m),i):(clearTimeout(g[o][m].timeoutid),g[o][m].timeoutid=void 0)}}function a(t,a){t[o][a].isVisible&&!1===t[o].fired&&(t[o].fired=!0,c.unobserve(t),e(t))}if(!(!1 in window&&!1 in window&&!1 in window.IntersectionObserverEntry.prototype)&&"function"==typeof e){var n="delay"in window.IntersectionObserver.prototype&&"trackVisibility"in window.IntersectionObserver.prototype,r=1,o="_trackingObserverData",i=1e3,s=new IntersectionObserver(t,{root:null,rootMargin:"0% 0% -50% 0%",threshold:0,delay:i,trackVisibility:!0});s.name="obs70";var l=new IntersectionObserver(t,{root:null,rootMargin:"0%",threshold:1,delay:i,trackVisibility:!0});l.name="obs100";var c={observe:function(e){s.observe(e),l.observe(e)},unobserve:function(e){s.unobserve(e),l.unobserve(e)},disconnect:function(){l.disconnect(),s.disconnect()}};return c}};window.trackingObserver=n((function(){var e={event:{info:{action:"component_view",name:t+"-impression"},attributes:{component_id:a.component_id,source:"launch|cc|impression"}}};SARAs_data.push(e)}));var r=document.querySelectorAll("[data-sara-action]"),o=function(e){try{var t;return e.forEach((function(e){e.dataset.saraComponent&&JSON.parse(e.dataset.saraComponent).id===a.component_id&&(t=e)})),t}catch(e){return _satellite.logger.error("ElementToBeObserved Error",e),""}};o(r)&&window.trackingObserver.observe(o(r))}},timeout:2e3,delayNext:!0}]},{id:"RLf3032a9761a34821bdd113716fc3f6e7",name:"Base:Libraries | SARAs:page_data_ready[consent]+consent_completed | #001 [-noconsent.PuV | [Day Usage Marker]",events:[{modulePath:"fm-spon-data-layer-constructor/src/lib/events/dataLayerPush.js",settings:{eventName:"page_data_ready"},ruleOrder:1},{modulePath:"fm-spon-data-layer-constructor/src/lib/events/dataLayerPush.js",settings:{eventName:"consent_completed"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%Consent | consent ready (String) [co]%",rightOperand:"true"},timeout:2e3},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"isFalse"},leftOperand:"%Consent Setting | Purpose - PuV granted [gl]%"},negate:!0,timeout:2e3}],actions:[{modulePath:"fm-spon-data-layer-constructor/src/lib/actions/synchronousCode.js",settings:{callback:function(){try{let e=_satellite.getVar("Storage | Usage: Day [co]"),t=_satellite.getVar("Storage | Usage: Session [co]"),a=_satellite.getVar("Storage | Usage: Usage [co]"),n=_satellite.getVar("User | Cookie: Day [co]"),r=_satellite.getVar("User | Cookie: Session [co]"),o=_satellite.getVar("User | Cookie: Usage [co]");_satellite.saraCookieWrite(t.name,r,t.expiry),_satellite.saraCookieWrite(e.name,n,e.expiry),_satellite.saraCookieWrite(a.name,o,a.expiry),_satellite.logger.info("[SARAs Usage Cookie Saved] ",o)}catch(e){}}},timeout:2e3,delayNext:!0}]},{id:"RLf8c30aea65db4cd19e49e78a951f436e",name:"Link:Internal | SARAs:link_click_internal | #001 [-noconsent.PuV] | [Util (save-click-attributes)]",events:[{modulePath:"fm-spon-data-layer-constructor/src/lib/events/dataLayerPush.js",settings:{eventName:"link_click_internal"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"isFalse"},leftOperand:"%Consent Setting | Purpose - PuV granted [gl]%"},negate:!0,timeout:2e3}],actions:[{modulePath:"fm-spon-data-layer-constructor/src/lib/actions/synchronousCode.js",settings:{callback:function(e){let t={click_id:e.detail.eventObject.attributes.click_id,component:_satellite.getVar("Component | Tracking String [gl]",e),element:_satellite.getVar("Element | Tracking String [gl]",e),pos:e.detail.eventObject.attributes.pos,target_url:e.detail.eventObject.attributes.target_url,headline:e.detail.eventObject.attributes.headline,referrer:e.detail.state.page.info.canonical_url,cta:e.detail.eventObject.attributes.cta||"",run_id:e.detail.eventObject.attributes.run_id||"",item_source:e.detail.eventObject.attributes.item_source||"",created_at:e.detail.eventObject.attributes.created_at||""};_satellite.saraCookieWrite(_satellite.getVar("Storage | Click: Attributes [gl]").name,JSON.stringify(t),_satellite.getVar("Storage | Click: Attributes [gl]").expiry),_satellite.logger.info("[SARAs Click Handler] data saved ",t)}},timeout:2e3,delayNext:!0}]}]};var _satellite=function(){"use strict";function e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function t(e){return"[object Object]"===Object.prototype.toString.call(e)}function a(e){var a,n;return!1!==t(e)&&(void 0===(a=e.constructor)||!1!==t(n=a.prototype)&&!1!==n.hasOwnProperty("isPrototypeOf"))}function n(e){return"string"==typeof e&&-1!==e.indexOf("[")&&-1!==e.indexOf("]")}function r(e){return e.substr(0,e.indexOf("["))}function o(e,t,a){if(e.length&&ut(t)){var i=e[0];if(1!==e.length){var s=e.slice(1);if(!n(i))return o(s,t[i],a);var l=t[i=r(i)];Array.isArray(l)&&l.forEach((function(e){return o(s,e,a)}))}else t.hasOwnProperty(i)&&"string"==typeof t[i]&&(t[i]=a(t[i]))}}if(window.atob){var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},s=document,l=Object.assign,c=window,d=c,u=function(e,t,a,n){var r,o=Boolean(t&&Array.isArray(a)),i=Boolean(o&&e),s=document.createElement("a");if(o){var l=function(){var e=new Error("Unable to find the Library Embed Code for Dynamic Host Resolution.");throw e.code="dynamic_host_resolver_constructor_error",e};if(e&&(/^((https?:)?\/\/).+/.test(e)||l(),/^\/\/.+/.test(e)?s.href=d.location.protocol+e:s.href=e),s.hostname||l(),-1===a.indexOf(s.hostname)){var c=new Error("This library is not authorized for this domain. Please contact your CSM for more information.");throw c.code="dynamic_host_not_allowed",c}}var u=function(){if(null!=r)return r;if(i){var e=s.host;/:80$/.test(e)?e=e.replace(":80",""):/:80\/$/.test(e)?e=e.replace(":80/",""):/:443$/.test(e)?e=e.replace(":443",""):/:443\/$/.test(e)&&(e=e.replace(":443/","")),r=s.protocol+"//"+e}else r="";return r},g=function(e){return i&&"string"==typeof e?[u(),"/"===e.charAt(0)?e.slice(1):e].join("/"):e},m={getTurbineHost:u,decorateWithDynamicHost:g,get isDynamicEnforced(){return o}};return d&&n.onDebugChanged((function(e){e?d.dynamicHostResolver=m:delete d.dynamicHostResolver})),m},g=function(e){var t=[];return e.forEach((function(e){e.events&&e.events.forEach((function(a){t.push({rule:e,event:a})}))})),t.sort((function(e,t){return e.event.ruleOrder-t.event.ruleOrder}))},m="debug",p=function(e,t){var a=function(){return"true"===e.getItem(m)},n=function(t){e.setItem(m,t)},r=[],o=function(e){r.push(e)};return t.outputEnabled=a(),{onDebugChanged:o,getDebugEnabled:a,setDebugEnabled:function(e){a()!==e&&(n(e),t.outputEnabled=e,r.forEach((function(t){t(e)})))}}},f="Module did not export a function.",v=function(e,t,a){return function(n,r,o){o=o||[];var i=e.getModuleExports(n.modulePath);if("function"!=typeof i)throw new Error(f);var s=e.getModuleDefinition(n.modulePath),l=n.settings||{};!n.hasTransformedFilePaths&&s.filePaths&&(a(l,s.filePaths,n.modulePath),n.hasTransformedFilePaths=!0);var c=t(l,r);return i.bind(null,c).apply(null,o)}},y=function(e){return"string"==typeof e?e.replace(/\s+/g," ").trim():e},h={LOG:"log",INFO:"info",DEBUG:"debug",WARN:"warn",ERROR:"error"},b="\ud83d\ude80",_=10===parseInt((/msie (\d+)/.exec(navigator.userAgent.toLowerCase())||[])[1])?"[Launch]":b,E=!1,C=function(e){if(E&&window.console){var t=Array.prototype.slice.call(arguments,1);t.unshift(_),e!==h.DEBUG||window.console[e]||(e=h.INFO),window.console[e].apply(window.console,t)}},P=C.bind(null,h.LOG),V=C.bind(null,h.INFO),w=C.bind(null,h.DEBUG),k=C.bind(null,h.WARN),A=C.bind(null,h.ERROR),S=function(){var e=E;E=!0,C.apply(null,Array.prototype.concat(h.WARN,Array.prototype.slice.call(arguments))),e||(E=!1)},T={log:P,info:V,debug:w,warn:k,error:A,deprecation:S,get outputEnabled(){return E},set outputEnabled(e){E=e},createPrefixedLogger:function(e){var t="["+e+"]";return{log:P.bind(null,t),info:V.bind(null,t),debug:w.bind(null,t),warn:k.bind(null,t),error:A.bind(null,t)}}},D=c,x="com.adobe.reactor.",j=function(e,t){var a=x+(t||"");return{getItem:function(t){try{return D[e].getItem(a+t)}catch(e){return null}},setItem:function(t,n){try{return D[e].setItem(a+t,n),!0}catch(e){return!1}}}},I=j,M="dataElements.",O=I("sessionStorage",M),R=I("localStorage",M),N={PAGEVIEW:"pageview",SESSION:"session",VISITOR:"visitor"},L={},U=function(e){var t;try{t=JSON.stringify(e)}catch(e){}return t},F=y,q=T,X={setValue:function(e,t,a){var n;switch(t){case N.PAGEVIEW:return void(L[e]=a);case N.SESSION:return void((n=U(a))&&O.setItem(e,n));case N.VISITOR:return void((n=U(a))&&R.setItem(e,n))}},getValue:function(e,t){var a;switch(t){case N.PAGEVIEW:return L.hasOwnProperty(e)?L[e]:null;case N.SESSION:return null===(a=O.getItem(e))?a:JSON.parse(a);case N.VISITOR:return null===(a=R.getItem(e))?a:JSON.parse(a)}}},B=function(e,t,a,n){return"Failed to execute data element module "+e.modulePath+" for data element "+t+". "+a+(n?"\n"+n:"")},$=function(e,t,a,n,r){return function(o,i){var s=t(o);if(!s)return n?"":void 0;var l,c,d=s.storageDuration;try{l=e.getModuleExports(s.modulePath),c=e.getModuleDefinition(s.modulePath)}catch(e){return void q.error(B(s,o,e.message,e.stack))}if("function"==typeof l){var u,g=s.settings||{};!s.hasTransformedFilePaths&&c.filePaths&&(r(g,c.filePaths,s.modulePath),s.hasTransformedFilePaths=!0);try{u=l(a(g,i),i)}catch(e){return void q.error(B(s,o,e.message,e.stack))}return d&&(null!=u?X.setValue(o,d,u):u=X.getValue(o,d)),null==u&&null!=s.defaultValue&&(u=s.defaultValue),"string"==typeof u&&(s.cleanText&&(u=F(u)),s.forceLowerCase&&(u=u.toLowerCase())),u}q.error(B(s,o,"Module did not export a function."))}},H=y,W={text:function(e){return e.textContent},cleanText:function(e){return H(e.textContent)}},z=function(e,t,a){for(var n,r=e,o=0,i=t.length;o<i;o++){if(null==r)return;var s=t[o];if(a&&"@"===s.charAt(0)){var l=s.slice(1);r=W[l](r)}else if(r.getAttribute&&(n=s.match(/^getAttribute\((.+)\)$/))){var c=n[1];r=r.getAttribute(c)}else r=r[s]}return r},J=function(e,t,a){return function(n,r){var o;if(t(n))o=a(n,r);else{var i=n.split("."),s=i.shift();"this"===s?r&&(o=z(r.element,i,!0)):"event"===s?r&&(o=z(r,i)):"target"===s?r&&(o=z(r.target,i)):o=z(e[s],i)}return o}},G=function(e,t){return function(a){var n=a.split(".")[0];return Boolean(t(a)||"this"===n||"event"===n||"target"===n||e.hasOwnProperty(n))}},Q=function(e,t,a){var n={exports:{}};return e.call(n.exports,n,n.exports,t,a),n.exports},K=Q,Y=T,Z=function(){var e={},t=function(t){var a=e[t];if(!a)throw new Error("Module "+t+" not found.");return a},a=function(){Object.keys(e).forEach((function(e){try{n(e)}catch(a){var t="Error initializing module "+e+". "+a.message+(a.stack?"\n"+a.stack:"");Y.error(t)}}))},n=function(e){var a=t(e);return a.hasOwnProperty("exports")||(a.exports=K(a.definition.script,a.require,a.turbine)),a.exports};return{registerModule:function(t,a,n,r,o){var i={definition:a,extensionName:n,require:r,turbine:o};i.require=r,e[t]=i},hydrateCache:a,getModuleExports:n,getModuleDefinition:function(e){return t(e).definition},getModuleExtensionName:function(e){return t(e).extensionName}}},ee=T,te=!1,ae=function(e){return function(t,a){var n=e._monitors;n&&(te||(ee.warn("The _satellite._monitors API may change at any time and should only be used for debugging."),te=!0),n.forEach((function(e){e[t]&&e[t](a)})))}},ne=T,re=function(e,t,a){var n,r,o,i,s=[],l=function(n,r,o){if(!e(r))return n;s.push(r);var i=t(r,o);return s.pop(),null==i&&a?"":i};return n=function(e,t){var a=/^%([^%]+)%$/.exec(e);return a?l(e,a[1],t):e.replace(/%(.+?)%/g,(function(e,a){return l(e,a,t)}))},r=function(e,t){for(var a={},n=Object.keys(e),r=0;r<n.length;r++){var o=n[r],s=e[o];a[o]=i(s,t)}return a},o=function(e,t){for(var a=[],n=0,r=e.length;n<r;n++)a.push(i(e[n],t));return a},i=function(e,t){return"string"==typeof e?n(e,t):Array.isArray(e)?o(e,t):"object"==typeof e&&null!==e?r(e,t):e},function(e,t){return s.length>10?(ne.error("Data element circular reference detected: "+s.join(" -> ")),e):i(e,t)}},oe=function(e){return function(){if("string"==typeof arguments[0])e[arguments[0]]=arguments[1];else if(arguments[0]){var t=arguments[0];for(var a in t)e[a]=t[a]}}},ie="undefined"!=typeof window&&window.Promise||void 0!==i&&i.Promise,se=ie,le=function(e,t,a){return function(n,r,o,i){return i.then((function(){var i,s=n.delayNext;return new se((function(t,a){var r=e(n,o,[o]);if(!s)return t();var l=n.timeout,c=new se((function(e,t){i=setTimeout((function(){t(new Error("A timeout occurred because the action took longer than "+l/1e3+" seconds to complete. "))}),l)}));se.race([r,c]).then(t,a)})).catch((function(e){return clearTimeout(i),e=t(e),a(n,r,e),se.reject(e)})).then((function(){clearTimeout(i)}))}))}},ce=ie,de=function(e,t,a,n,r){return function(o,i,s,l){return l.then((function(){var l;return new ce((function(t,a){var n=e(o,s,[s]),r=o.timeout,i=new ce((function(e,t){l=setTimeout((function(){t(new Error("A timeout occurred because the condition took longer than "+r/1e3+" seconds to complete. "))}),r)}));ce.race([n,i]).then(t,a)})).catch((function(e){return clearTimeout(l),e=t(e),n(o,i,e),ce.reject(e)})).then((function(e){if(clearTimeout(l),!a(o,e))return r(o,i),ce.reject()}))}))}},ue=ie.resolve(),ge=function(e,t,a){return function(n,r){return n.conditions&&n.conditions.forEach((function(t){ue=e(t,n,r,ue)})),n.actions&&n.actions.forEach((function(e){ue=t(e,n,r,ue)})),ue=(ue=ue.then((function(){a(n)}))).catch((function(){}))}},me=function(e){return Boolean(e&&"object"==typeof e&&"function"==typeof e.then)},pe=function(e,t,a,n){return function(r,o){var i;if(r.conditions)for(var s=0;s<r.conditions.length;s++){i=r.conditions[s];try{var l=e(i,o,[o]);if(me(l))throw new Error("Rule component sequencing must be enabled on the property for this condition to function properly.");if(!t(i,l))return a(i,r),!1}catch(e){return n(i,r,e),!1}}return!0}},fe=function(e,t){return function(a,n){e(a,n)&&t(a,n)}},ve=function(e){return function(t){var a=e.getModuleDefinition(t.modulePath);return a&&a.displayName||t.modulePath}},ye=function(e){return function(t){var a=t.rule,n=t.event,r=e.getModuleDefinition(n.modulePath).name;return{$type:e.getModuleExtensionName(n.modulePath)+"."+r,$rule:{id:a.id,name:a.name}}}},he=function(e,t,a,n,r,o){return function(i,s){var l=s.rule,c=s.event;c.settings=c.settings||{};try{var d=r(s);t(c,null,[function(t){var n=a(d,t);i((function(){e(n,l)}))}])}catch(e){o.error(n(c,l,e))}}},be=function(e,t,a,n){return function(r,o,i){var s=t(r);a.error(e(s,o.name,i)),n("ruleActionFailed",{rule:o,action:r})}},_e=function(e,t,a,n){return function(r,o,i){var s=t(r);a.error(e(s,o.name,i)),n("ruleConditionFailed",{rule:o,condition:r})}},Ee=function(e,t,a){return function(n,r){var o=e(n);t.log('Condition "'+o+'" for rule "'+r.name+'" was not met.'),a("ruleConditionFailed",{rule:r,condition:n})}},Ce=function(e,t){return function(a){e.log('Rule "'+a.name+'" fired.'),t("ruleCompleted",{rule:a})}},Pe=function(e,t,a){return function(n,r){var o;if(n.actions)for(var i=0;i<n.actions.length;i++){o=n.actions[i];try{e(o,r,[r])}catch(e){return void t(o,n,e)}}a(n)}},Ve=function(e,t,a,n){return function(r,o){n("ruleTriggered",{rule:o}),e?a(o,r):t(o,r)}},we=function(e,t,a){
return'Failed to execute "'+e+'" for "'+t+'" rule. '+a.message+(a.stack?"\n"+a.stack:"")},ke=function(e,t){return t&&!e.negate||!t&&e.negate},Ae=[],Se=!1,Te=function(e){Se?e():Ae.push(e)},De=function(e,t,a){e(t).forEach((function(e){a(Te,e)})),Se=!0,Ae.forEach((function(e){e()})),Ae=[]},xe=function(e){if(e||(e=new Error("The extension triggered an error, but no error information was provided.")),!(e instanceof Error)){var t="object"==typeof e?JSON.stringify(e):String(e);e=new Error(t)}return e},je={};Object.defineProperty(je,"__esModule",{value:!0}),je.isPlainObject=a;var Ie,Me=T,Oe=l,{isPlainObject:Re}=je,Ne=function(e,t){return Re(t=t||{})?t=Oe({},t,e):Oe(t,e),t.hasOwnProperty("type")||Object.defineProperty(t,"type",{get:function(){return Me.deprecation("Accessing event.type in Adobe Launch has been deprecated and will be removed soon. Please use event.$type instead."),t.$type}}),t},Le=function(e,t){return function(a,n){var r=e[a];if(r){var o=r.modules;if(o)for(var i=Object.keys(o),s=0;s<i.length;s++){var l=i[s],c=o[l];if(c.shared&&c.name===n)return t.getModuleExports(l)}}}},Ue=function(e,t){return function(){return t?e(t):{}}},Fe=function(e,t,a){return function(n){if(a){var r=n.split(".");r.splice(r.length-1||1,0,"min"),n=r.join(".")}return e(t)+n}},qe=".js",Xe=function(e){return e.substr(0,e.lastIndexOf("/"))},Be=function(e,t){return-1!==e.indexOf(t,e.length-t.length)},$e=function(e,t){Be(t,qe)||(t+=qe);var a=t.split("/"),n=Xe(e).split("/");return a.forEach((function(e){e&&"."!==e&&(".."===e?n.length&&n.pop():n.push(e))})),n.join("/")},He={exports:{}};Ie=function(){function e(){for(var e=0,t={};e<arguments.length;e++){var a=arguments[e];for(var n in a)t[n]=a[n]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}function a(n){function r(){}function o(t,a,o){if("undefined"!=typeof document){"number"==typeof(o=e({path:"/"},r.defaults,o)).expires&&(o.expires=new Date(1*new Date+864e5*o.expires)),o.expires=o.expires?o.expires.toUTCString():"";try{var i=JSON.stringify(a);/^[\{\[]/.test(i)&&(a=i)}catch(e){}a=n.write?n.write(a,t):encodeURIComponent(String(a)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var s="";for(var l in o)o[l]&&(s+="; "+l,!0!==o[l]&&(s+="="+o[l].split(";")[0]));return document.cookie=t+"="+a+s}}function i(e,a){if("undefined"!=typeof document){for(var r={},o=document.cookie?document.cookie.split("; "):[],i=0;i<o.length;i++){var s=o[i].split("="),l=s.slice(1).join("=");a||'"'!==l.charAt(0)||(l=l.slice(1,-1));try{var c=t(s[0]);if(l=(n.read||n)(l,c)||t(l),a)try{l=JSON.parse(l)}catch(e){}if(r[c]=l,e===c)break}catch(e){}}return e?r[e]:r}}return r.set=o,r.get=function(e){return i(e,!1)},r.getJSON=function(e){return i(e,!0)},r.remove=function(t,a){o(t,"",e(a,{expires:-1}))},r.defaults={},r.withConverter=a,r}return a((function(){}))},He.exports=Ie();var We=He.exports,ze={get:We.get,set:We.set,remove:We.remove},Je=ie,Ge=function(e,t){return new Je((function(a,n){t.onload=function(){a(t)},t.onerror=function(){n(new Error("Failed to load script "+e))}}))},Qe=function(e){var t={};if(!e||"string"!=typeof e)return t;var a=e.trim().replace(/^[?#&]/,""),n=new URLSearchParams(a),r=n.keys();do{var o=r.next(),i=o.value;if(i){var s=n.getAll(i);1===s.length?t[i]=s[0]:t[i]=s}}while(!1===o.done);return t},Ke=function(e){var t="{{space}}",a=new URLSearchParams;return Object.keys(e).forEach((function(n){var r=e[n];"string"==typeof e[n]?r=r.replace(/ /g,t):["object","undefined"].includes(typeof r)&&!Array.isArray(r)&&(r=""),Array.isArray(r)?r.forEach((function(e){a.append(n,e)})):a.append(n,r)})),a.toString().replace(new RegExp(encodeURIComponent(t),"g"),"%20")},Ye="@adobe/reactor-",Ze={cookie:ze,document:s,"load-script":function(e){var t=document.createElement("script");t.src=e,t.async=!0;var a=Ge(e,t);return document.getElementsByTagName("head")[0].appendChild(t),a},"object-assign":l,promise:ie,"query-string":{parse:function(e){return Qe(e)},stringify:function(e){return Ke(e)}},window:c},et=function(e){return function(t){if(0===t.indexOf(Ye)){var a=t.substr(Ye.length),n=Ze[a];if(n)return n}if(0===t.indexOf("./")||0===t.indexOf("../"))return e(t);throw new Error('Cannot resolve module "'+t+'".')}},tt=Le,at=Ue,nt=Fe,rt=T,ot=$e,it=et,st=function(e,t,a,n,r,o,i){var s=e.extensions,l=e.buildInfo,c=e.environment,d=e.property.settings;if(s){var u=tt(s,t);Object.keys(s).forEach((function(g){var m=s[g],p=m.settings;Array.isArray(m.filePaths)&&(p=o(p,m.filePaths));var f=at(n,p);if(m.modules){var v=rt.createPrefixedLogger(m.displayName),y=nt(i,m.hostedLibFilesBaseUrl,l.minified),h={buildInfo:l,environment:c,property:{name:e.property.name,id:e.property.id},getDataElementValue:r,getExtensionSettings:f,getHostedLibFileUrl:y,getSharedModule:u,logger:v,propertySettings:d,replaceTokens:n,onDebugChanged:a.onDebugChanged,get debugEnabled(){return a.getDebugEnabled()}};Object.keys(m.modules).forEach((function(e){var a=m.modules[e],n=it((function(a){var n=ot(e,a);return t.getModuleExports(n)}));t.registerModule(e,a,g,n,h)}))}})),t.hydrateCache()}return t},lt=ze,ct=T,dt=function(e,t,a,n,r){var o=ct.createPrefixedLogger("Custom Script");e.track=function(e){ct.log('"'+e+'" does not match any direct call identifiers.')},e.getVisitorId=function(){return null},e.property={name:t.property.name,id:t.property.id},e.company=t.company,e.buildInfo=t.buildInfo,e.environment=t.environment,e.logger=o,e.notify=function(e,t){switch(ct.deprecation("_satellite.notify is deprecated. Please use the `_satellite.logger` API."),t){case 3:o.info(e);break;case 4:o.warn(e);break;case 5:o.error(e);break;default:o.log(e)}},e.getVar=n,e.setVar=r,e.setCookie=function(e,t,a){var n="",r={};a&&(n=", { expires: "+a+" }",r.expires=a);var o='_satellite.setCookie is deprecated. Please use _satellite.cookie.set("'+e+'", "'+t+'"'+n+").";ct.deprecation(o),lt.set(e,t,r)},e.readCookie=function(e){return ct.deprecation('_satellite.readCookie is deprecated. Please use _satellite.cookie.get("'+e+'").'),lt.get(e)},e.removeCookie=function(e){ct.deprecation('_satellite.removeCookie is deprecated. Please use _satellite.cookie.remove("'+e+'").'),lt.remove(e)},e.cookie=lt,e.pageBottom=function(){},e.setDebug=a;var i=!1;Object.defineProperty(e,"_container",{get:function(){return i||(ct.warn("_satellite._container may change at any time and should only be used for debugging."),i=!0),t}})},{isPlainObject:ut}=je,gt=s,mt=l,pt=u,ft=g,vt=p,yt=v,ht=$,bt=J,_t=G,Et=Z,Ct=ae,Pt=re,Vt=oe,wt=le,kt=de,At=ge,St=pe,Tt=fe,Dt=ve,xt=ye,jt=he,It=be,Mt=_e,Ot=Ee,Rt=Ce,Nt=Pe,Lt=Ve,Ut=we,Ft=ke,qt=De,Xt=xe,Bt=Ne,$t=j,Ht=st,Wt=dt,zt=function(e,t){return function(a,n,r){return e&&ut(a)&&Object.keys(a).length&&Array.isArray(n)&&n.length?(n.forEach((function(e){Boolean(null!=r&&/^core\/.*actions.*\/customCode\.js$/.test(r))&&"source"===e&&!a.isExternal||o(e.split("."),a,t)})),a):a}},Jt=T,Gt=window._satellite;if(Gt&&!window.__satelliteLoaded){window.__satelliteLoaded=!0;var Qt=Gt.container;delete Gt.container;var Kt=mt({},Qt.buildInfo);Object.defineProperty(Kt,"environment",{get:function(){return Jt.deprecation("container.buildInfo.environment is deprecated.Please use `container.environment.stage` instead"),Qt.environment.stage}}),Qt.buildInfo=Kt;var Yt,Zt=vt($t("localStorage"),Jt),ea="";gt.currentScript&&gt.currentScript.getAttribute("src")&&(ea=gt.currentScript.getAttribute("src"));try{Yt=pt(ea,Boolean(Qt.company.dynamicCdnEnabled),Qt.company.cdnAllowList,Zt)}catch(e){throw Jt.warn("Please review the following error:"),e}var ta,aa=zt(Yt.isDynamicEnforced,Yt.decorateWithDynamicHost),na=Et(),ra=Qt.property.settings.undefinedVarsReturnEmpty,oa=Qt.property.settings.ruleComponentSequencingEnabled,ia=Qt.dataElements||{},sa=function(e){return ia[e]},la=function(){return ta.apply(null,arguments)},ca=ht(na,sa,la,ra,aa),da={},ua=Vt(da),ga=_t(da,sa),ma=bt(da,sa,ca);ta=Pt(ga,ma,ra),Wt(Gt,Qt,Zt.setDebugEnabled,ma,ua),Ht(Qt,na,Zt,ta,ca,aa,Yt.decorateWithDynamicHost);var pa=Ct(Gt),fa=yt(na,ta,aa),va=Dt(na),ya=Ot(va,Jt,pa),ha=Mt(Ut,va,Jt,pa),ba=It(Ut,va,Jt,pa),_a=Rt(Jt,pa),Ea=jt(Lt(oa,Tt(St(fa,Ft,ya,ha),Nt(fa,ba,_a)),At(kt(fa,Xt,Ft,ha,ya),wt(fa,Xt,ba),_a),pa),fa,Bt,Ut,xt(na),Jt);qt(ft,Qt.rules||[],Ea)}return e(Gt)}console.warn("Adobe Launch is unsupported in IE 9 and below.")}();